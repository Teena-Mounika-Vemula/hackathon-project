var ME=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports);var az=ME((cz,R3)=>{(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function t(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=t(i);fetch(i.href,o)}})();function c_(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var qm={exports:{}},qc={},Km={exports:{}},Je={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var R1;function PE(){if(R1)return Je;R1=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),s=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),p=Symbol.iterator;function m(H){return H===null||typeof H!="object"?null:(H=p&&H[p]||H["@@iterator"],typeof H=="function"?H:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},y=Object.assign,w={};function _(H,ne,fe){this.props=H,this.context=ne,this.refs=w,this.updater=fe||v}_.prototype.isReactComponent={},_.prototype.setState=function(H,ne){if(typeof H!="object"&&typeof H!="function"&&H!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,H,ne,"setState")},_.prototype.forceUpdate=function(H){this.updater.enqueueForceUpdate(this,H,"forceUpdate")};function k(){}k.prototype=_.prototype;function E(H,ne,fe){this.props=H,this.context=ne,this.refs=w,this.updater=fe||v}var N=E.prototype=new k;N.constructor=E,y(N,_.prototype),N.isPureReactComponent=!0;var S=Array.isArray,A=Object.prototype.hasOwnProperty,P={current:null},D={key:!0,ref:!0,__self:!0,__source:!0};function j(H,ne,fe){var ye,be={},_e=null,Se=null;if(ne!=null)for(ye in ne.ref!==void 0&&(Se=ne.ref),ne.key!==void 0&&(_e=""+ne.key),ne)A.call(ne,ye)&&!D.hasOwnProperty(ye)&&(be[ye]=ne[ye]);var Ne=arguments.length-2;if(Ne===1)be.children=fe;else if(1<Ne){for(var De=Array(Ne),Xe=0;Xe<Ne;Xe++)De[Xe]=arguments[Xe+2];be.children=De}if(H&&H.defaultProps)for(ye in Ne=H.defaultProps,Ne)be[ye]===void 0&&(be[ye]=Ne[ye]);return{$$typeof:n,type:H,key:_e,ref:Se,props:be,_owner:P.current}}function T(H,ne){return{$$typeof:n,type:H.type,key:ne,ref:H.ref,props:H.props,_owner:H._owner}}function M(H){return typeof H=="object"&&H!==null&&H.$$typeof===n}function L(H){var ne={"=":"=0",":":"=2"};return"$"+H.replace(/[=:]/g,function(fe){return ne[fe]})}var B=/\/+/g;function F(H,ne){return typeof H=="object"&&H!==null&&H.key!=null?L(""+H.key):ne.toString(36)}function K(H,ne,fe,ye,be){var _e=typeof H;(_e==="undefined"||_e==="boolean")&&(H=null);var Se=!1;if(H===null)Se=!0;else switch(_e){case"string":case"number":Se=!0;break;case"object":switch(H.$$typeof){case n:case e:Se=!0}}if(Se)return Se=H,be=be(Se),H=ye===""?"."+F(Se,0):ye,S(be)?(fe="",H!=null&&(fe=H.replace(B,"$&/")+"/"),K(be,ne,fe,"",function(Xe){return Xe})):be!=null&&(M(be)&&(be=T(be,fe+(!be.key||Se&&Se.key===be.key?"":(""+be.key).replace(B,"$&/")+"/")+H)),ne.push(be)),1;if(Se=0,ye=ye===""?".":ye+":",S(H))for(var Ne=0;Ne<H.length;Ne++){_e=H[Ne];var De=ye+F(_e,Ne);Se+=K(_e,ne,fe,De,be)}else if(De=m(H),typeof De=="function")for(H=De.call(H),Ne=0;!(_e=H.next()).done;)_e=_e.value,De=ye+F(_e,Ne++),Se+=K(_e,ne,fe,De,be);else if(_e==="object")throw ne=String(H),Error("Objects are not valid as a React child (found: "+(ne==="[object Object]"?"object with keys {"+Object.keys(H).join(", ")+"}":ne)+"). If you meant to render a collection of children, use an array instead.");return Se}function te(H,ne,fe){if(H==null)return H;var ye=[],be=0;return K(H,ye,"","",function(_e){return ne.call(fe,_e,be++)}),ye}function se(H){if(H._status===-1){var ne=H._result;ne=ne(),ne.then(function(fe){(H._status===0||H._status===-1)&&(H._status=1,H._result=fe)},function(fe){(H._status===0||H._status===-1)&&(H._status=2,H._result=fe)}),H._status===-1&&(H._status=0,H._result=ne)}if(H._status===1)return H._result.default;throw H._result}var q={current:null},$={transition:null},Y={ReactCurrentDispatcher:q,ReactCurrentBatchConfig:$,ReactCurrentOwner:P};function Q(){throw Error("act(...) is not supported in production builds of React.")}return Je.Children={map:te,forEach:function(H,ne,fe){te(H,function(){ne.apply(this,arguments)},fe)},count:function(H){var ne=0;return te(H,function(){ne++}),ne},toArray:function(H){return te(H,function(ne){return ne})||[]},only:function(H){if(!M(H))throw Error("React.Children.only expected to receive a single React element child.");return H}},Je.Component=_,Je.Fragment=t,Je.Profiler=i,Je.PureComponent=E,Je.StrictMode=r,Je.Suspense=l,Je.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Y,Je.act=Q,Je.cloneElement=function(H,ne,fe){if(H==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+H+".");var ye=y({},H.props),be=H.key,_e=H.ref,Se=H._owner;if(ne!=null){if(ne.ref!==void 0&&(_e=ne.ref,Se=P.current),ne.key!==void 0&&(be=""+ne.key),H.type&&H.type.defaultProps)var Ne=H.type.defaultProps;for(De in ne)A.call(ne,De)&&!D.hasOwnProperty(De)&&(ye[De]=ne[De]===void 0&&Ne!==void 0?Ne[De]:ne[De])}var De=arguments.length-2;if(De===1)ye.children=fe;else if(1<De){Ne=Array(De);for(var Xe=0;Xe<De;Xe++)Ne[Xe]=arguments[Xe+2];ye.children=Ne}return{$$typeof:n,type:H.type,key:be,ref:_e,props:ye,_owner:Se}},Je.createContext=function(H){return H={$$typeof:s,_currentValue:H,_currentValue2:H,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},H.Provider={$$typeof:o,_context:H},H.Consumer=H},Je.createElement=j,Je.createFactory=function(H){var ne=j.bind(null,H);return ne.type=H,ne},Je.createRef=function(){return{current:null}},Je.forwardRef=function(H){return{$$typeof:a,render:H}},Je.isValidElement=M,Je.lazy=function(H){return{$$typeof:f,_payload:{_status:-1,_result:H},_init:se}},Je.memo=function(H,ne){return{$$typeof:u,type:H,compare:ne===void 0?null:ne}},Je.startTransition=function(H){var ne=$.transition;$.transition={};try{H()}finally{$.transition=ne}},Je.unstable_act=Q,Je.useCallback=function(H,ne){return q.current.useCallback(H,ne)},Je.useContext=function(H){return q.current.useContext(H)},Je.useDebugValue=function(){},Je.useDeferredValue=function(H){return q.current.useDeferredValue(H)},Je.useEffect=function(H,ne){return q.current.useEffect(H,ne)},Je.useId=function(){return q.current.useId()},Je.useImperativeHandle=function(H,ne,fe){return q.current.useImperativeHandle(H,ne,fe)},Je.useInsertionEffect=function(H,ne){return q.current.useInsertionEffect(H,ne)},Je.useLayoutEffect=function(H,ne){return q.current.useLayoutEffect(H,ne)},Je.useMemo=function(H,ne){return q.current.useMemo(H,ne)},Je.useReducer=function(H,ne,fe){return q.current.useReducer(H,ne,fe)},Je.useRef=function(H){return q.current.useRef(H)},Je.useState=function(H){return q.current.useState(H)},Je.useSyncExternalStore=function(H,ne,fe){return q.current.useSyncExternalStore(H,ne,fe)},Je.useTransition=function(){return q.current.useTransition()},Je.version="18.3.1",Je}var j1;function zg(){return j1||(j1=1,Km.exports=PE()),Km.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var T1;function OE(){if(T1)return qc;T1=1;var n=zg(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function s(a,l,u){var f,p={},m=null,v=null;u!==void 0&&(m=""+u),l.key!==void 0&&(m=""+l.key),l.ref!==void 0&&(v=l.ref);for(f in l)r.call(l,f)&&!o.hasOwnProperty(f)&&(p[f]=l[f]);if(a&&a.defaultProps)for(f in l=a.defaultProps,l)p[f]===void 0&&(p[f]=l[f]);return{$$typeof:e,type:a,key:m,ref:v,props:p,_owner:i.current}}return qc.Fragment=t,qc.jsx=s,qc.jsxs=s,qc}var D1;function FE(){return D1||(D1=1,qm.exports=OE()),qm.exports}var h=FE(),re=zg();const u_=c_(re);var bh={},Xm={exports:{}},rr={},Ym={exports:{}},Jm={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var M1;function LE(){return M1||(M1=1,function(n){function e($,Y){var Q=$.length;$.push(Y);e:for(;0<Q;){var H=Q-1>>>1,ne=$[H];if(0<i(ne,Y))$[H]=Y,$[Q]=ne,Q=H;else break e}}function t($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var Y=$[0],Q=$.pop();if(Q!==Y){$[0]=Q;e:for(var H=0,ne=$.length,fe=ne>>>1;H<fe;){var ye=2*(H+1)-1,be=$[ye],_e=ye+1,Se=$[_e];if(0>i(be,Q))_e<ne&&0>i(Se,be)?($[H]=Se,$[_e]=Q,H=_e):($[H]=be,$[ye]=Q,H=ye);else if(_e<ne&&0>i(Se,Q))$[H]=Se,$[_e]=Q,H=_e;else break e}}return Y}function i($,Y){var Q=$.sortIndex-Y.sortIndex;return Q!==0?Q:$.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var s=Date,a=s.now();n.unstable_now=function(){return s.now()-a}}var l=[],u=[],f=1,p=null,m=3,v=!1,y=!1,w=!1,_=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function N($){for(var Y=t(u);Y!==null;){if(Y.callback===null)r(u);else if(Y.startTime<=$)r(u),Y.sortIndex=Y.expirationTime,e(l,Y);else break;Y=t(u)}}function S($){if(w=!1,N($),!y)if(t(l)!==null)y=!0,se(A);else{var Y=t(u);Y!==null&&q(S,Y.startTime-$)}}function A($,Y){y=!1,w&&(w=!1,k(j),j=-1),v=!0;var Q=m;try{for(N(Y),p=t(l);p!==null&&(!(p.expirationTime>Y)||$&&!L());){var H=p.callback;if(typeof H=="function"){p.callback=null,m=p.priorityLevel;var ne=H(p.expirationTime<=Y);Y=n.unstable_now(),typeof ne=="function"?p.callback=ne:p===t(l)&&r(l),N(Y)}else r(l);p=t(l)}if(p!==null)var fe=!0;else{var ye=t(u);ye!==null&&q(S,ye.startTime-Y),fe=!1}return fe}finally{p=null,m=Q,v=!1}}var P=!1,D=null,j=-1,T=5,M=-1;function L(){return!(n.unstable_now()-M<T)}function B(){if(D!==null){var $=n.unstable_now();M=$;var Y=!0;try{Y=D(!0,$)}finally{Y?F():(P=!1,D=null)}}else P=!1}var F;if(typeof E=="function")F=function(){E(B)};else if(typeof MessageChannel<"u"){var K=new MessageChannel,te=K.port2;K.port1.onmessage=B,F=function(){te.postMessage(null)}}else F=function(){_(B,0)};function se($){D=$,P||(P=!0,F())}function q($,Y){j=_(function(){$(n.unstable_now())},Y)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function($){$.callback=null},n.unstable_continueExecution=function(){y||v||(y=!0,se(A))},n.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<$?Math.floor(1e3/$):5},n.unstable_getCurrentPriorityLevel=function(){return m},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function($){switch(m){case 1:case 2:case 3:var Y=3;break;default:Y=m}var Q=m;m=Y;try{return $()}finally{m=Q}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function($,Y){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var Q=m;m=$;try{return Y()}finally{m=Q}},n.unstable_scheduleCallback=function($,Y,Q){var H=n.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?H+Q:H):Q=H,$){case 1:var ne=-1;break;case 2:ne=250;break;case 5:ne=1073741823;break;case 4:ne=1e4;break;default:ne=5e3}return ne=Q+ne,$={id:f++,callback:Y,priorityLevel:$,startTime:Q,expirationTime:ne,sortIndex:-1},Q>H?($.sortIndex=Q,e(u,$),t(l)===null&&$===t(u)&&(w?(k(j),j=-1):w=!0,q(S,Q-H))):($.sortIndex=ne,e(l,$),y||v||(y=!0,se(A))),$},n.unstable_shouldYield=L,n.unstable_wrapCallback=function($){var Y=m;return function(){var Q=m;m=Y;try{return $.apply(this,arguments)}finally{m=Q}}}}(Jm)),Jm}var P1;function BE(){return P1||(P1=1,Ym.exports=LE()),Ym.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var O1;function zE(){if(O1)return rr;O1=1;var n=zg(),e=BE();function t(c){for(var d="https://reactjs.org/docs/error-decoder.html?invariant="+c,g=1;g<arguments.length;g++)d+="&args[]="+encodeURIComponent(arguments[g]);return"Minified React error #"+c+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function o(c,d){s(c,d),s(c+"Capture",d)}function s(c,d){for(i[c]=d,c=0;c<d.length;c++)r.add(d[c])}var a=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),l=Object.prototype.hasOwnProperty,u=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function m(c){return l.call(p,c)?!0:l.call(f,c)?!1:u.test(c)?p[c]=!0:(f[c]=!0,!1)}function v(c,d,g,b){if(g!==null&&g.type===0)return!1;switch(typeof d){case"function":case"symbol":return!0;case"boolean":return b?!1:g!==null?!g.acceptsBooleans:(c=c.toLowerCase().slice(0,5),c!=="data-"&&c!=="aria-");default:return!1}}function y(c,d,g,b){if(d===null||typeof d>"u"||v(c,d,g,b))return!0;if(b)return!1;if(g!==null)switch(g.type){case 3:return!d;case 4:return d===!1;case 5:return isNaN(d);case 6:return isNaN(d)||1>d}return!1}function w(c,d,g,b,C,R,z){this.acceptsBooleans=d===2||d===3||d===4,this.attributeName=b,this.attributeNamespace=C,this.mustUseProperty=g,this.propertyName=c,this.type=d,this.sanitizeURL=R,this.removeEmptyString=z}var _={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(c){_[c]=new w(c,0,!1,c,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(c){var d=c[0];_[d]=new w(d,1,!1,c[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(c){_[c]=new w(c,2,!1,c.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(c){_[c]=new w(c,2,!1,c,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(c){_[c]=new w(c,3,!1,c.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(c){_[c]=new w(c,3,!0,c,null,!1,!1)}),["capture","download"].forEach(function(c){_[c]=new w(c,4,!1,c,null,!1,!1)}),["cols","rows","size","span"].forEach(function(c){_[c]=new w(c,6,!1,c,null,!1,!1)}),["rowSpan","start"].forEach(function(c){_[c]=new w(c,5,!1,c.toLowerCase(),null,!1,!1)});var k=/[\-:]([a-z])/g;function E(c){return c[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(c){var d=c.replace(k,E);_[d]=new w(d,1,!1,c,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(c){var d=c.replace(k,E);_[d]=new w(d,1,!1,c,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(c){var d=c.replace(k,E);_[d]=new w(d,1,!1,c,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(c){_[c]=new w(c,1,!1,c.toLowerCase(),null,!1,!1)}),_.xlinkHref=new w("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(c){_[c]=new w(c,1,!1,c.toLowerCase(),null,!0,!0)});function N(c,d,g,b){var C=_.hasOwnProperty(d)?_[d]:null;(C!==null?C.type!==0:b||!(2<d.length)||d[0]!=="o"&&d[0]!=="O"||d[1]!=="n"&&d[1]!=="N")&&(y(d,g,C,b)&&(g=null),b||C===null?m(d)&&(g===null?c.removeAttribute(d):c.setAttribute(d,""+g)):C.mustUseProperty?c[C.propertyName]=g===null?C.type===3?!1:"":g:(d=C.attributeName,b=C.attributeNamespace,g===null?c.removeAttribute(d):(C=C.type,g=C===3||C===4&&g===!0?"":""+g,b?c.setAttributeNS(b,d,g):c.setAttribute(d,g))))}var S=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,A=Symbol.for("react.element"),P=Symbol.for("react.portal"),D=Symbol.for("react.fragment"),j=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),M=Symbol.for("react.provider"),L=Symbol.for("react.context"),B=Symbol.for("react.forward_ref"),F=Symbol.for("react.suspense"),K=Symbol.for("react.suspense_list"),te=Symbol.for("react.memo"),se=Symbol.for("react.lazy"),q=Symbol.for("react.offscreen"),$=Symbol.iterator;function Y(c){return c===null||typeof c!="object"?null:(c=$&&c[$]||c["@@iterator"],typeof c=="function"?c:null)}var Q=Object.assign,H;function ne(c){if(H===void 0)try{throw Error()}catch(g){var d=g.stack.trim().match(/\n( *(at )?)/);H=d&&d[1]||""}return`
`+H+c}var fe=!1;function ye(c,d){if(!c||fe)return"";fe=!0;var g=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(d)if(d=function(){throw Error()},Object.defineProperty(d.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(d,[])}catch(ce){var b=ce}Reflect.construct(c,[],d)}else{try{d.call()}catch(ce){b=ce}c.call(d.prototype)}else{try{throw Error()}catch(ce){b=ce}c()}}catch(ce){if(ce&&b&&typeof ce.stack=="string"){for(var C=ce.stack.split(`
`),R=b.stack.split(`
`),z=C.length-1,G=R.length-1;1<=z&&0<=G&&C[z]!==R[G];)G--;for(;1<=z&&0<=G;z--,G--)if(C[z]!==R[G]){if(z!==1||G!==1)do if(z--,G--,0>G||C[z]!==R[G]){var J=`
`+C[z].replace(" at new "," at ");return c.displayName&&J.includes("<anonymous>")&&(J=J.replace("<anonymous>",c.displayName)),J}while(1<=z&&0<=G);break}}}finally{fe=!1,Error.prepareStackTrace=g}return(c=c?c.displayName||c.name:"")?ne(c):""}function be(c){switch(c.tag){case 5:return ne(c.type);case 16:return ne("Lazy");case 13:return ne("Suspense");case 19:return ne("SuspenseList");case 0:case 2:case 15:return c=ye(c.type,!1),c;case 11:return c=ye(c.type.render,!1),c;case 1:return c=ye(c.type,!0),c;default:return""}}function _e(c){if(c==null)return null;if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c;switch(c){case D:return"Fragment";case P:return"Portal";case T:return"Profiler";case j:return"StrictMode";case F:return"Suspense";case K:return"SuspenseList"}if(typeof c=="object")switch(c.$$typeof){case L:return(c.displayName||"Context")+".Consumer";case M:return(c._context.displayName||"Context")+".Provider";case B:var d=c.render;return c=c.displayName,c||(c=d.displayName||d.name||"",c=c!==""?"ForwardRef("+c+")":"ForwardRef"),c;case te:return d=c.displayName||null,d!==null?d:_e(c.type)||"Memo";case se:d=c._payload,c=c._init;try{return _e(c(d))}catch{}}return null}function Se(c){var d=c.type;switch(c.tag){case 24:return"Cache";case 9:return(d.displayName||"Context")+".Consumer";case 10:return(d._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return c=d.render,c=c.displayName||c.name||"",d.displayName||(c!==""?"ForwardRef("+c+")":"ForwardRef");case 7:return"Fragment";case 5:return d;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return _e(d);case 8:return d===j?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof d=="function")return d.displayName||d.name||null;if(typeof d=="string")return d}return null}function Ne(c){switch(typeof c){case"boolean":case"number":case"string":case"undefined":return c;case"object":return c;default:return""}}function De(c){var d=c.type;return(c=c.nodeName)&&c.toLowerCase()==="input"&&(d==="checkbox"||d==="radio")}function Xe(c){var d=De(c)?"checked":"value",g=Object.getOwnPropertyDescriptor(c.constructor.prototype,d),b=""+c[d];if(!c.hasOwnProperty(d)&&typeof g<"u"&&typeof g.get=="function"&&typeof g.set=="function"){var C=g.get,R=g.set;return Object.defineProperty(c,d,{configurable:!0,get:function(){return C.call(this)},set:function(z){b=""+z,R.call(this,z)}}),Object.defineProperty(c,d,{enumerable:g.enumerable}),{getValue:function(){return b},setValue:function(z){b=""+z},stopTracking:function(){c._valueTracker=null,delete c[d]}}}}function He(c){c._valueTracker||(c._valueTracker=Xe(c))}function nt(c){if(!c)return!1;var d=c._valueTracker;if(!d)return!0;var g=d.getValue(),b="";return c&&(b=De(c)?c.checked?"true":"false":c.value),c=b,c!==g?(d.setValue(c),!0):!1}function Ye(c){if(c=c||(typeof document<"u"?document:void 0),typeof c>"u")return null;try{return c.activeElement||c.body}catch{return c.body}}function dt(c,d){var g=d.checked;return Q({},d,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:g??c._wrapperState.initialChecked})}function ht(c,d){var g=d.defaultValue==null?"":d.defaultValue,b=d.checked!=null?d.checked:d.defaultChecked;g=Ne(d.value!=null?d.value:g),c._wrapperState={initialChecked:b,initialValue:g,controlled:d.type==="checkbox"||d.type==="radio"?d.checked!=null:d.value!=null}}function mt(c,d){d=d.checked,d!=null&&N(c,"checked",d,!1)}function Cn(c,d){mt(c,d);var g=Ne(d.value),b=d.type;if(g!=null)b==="number"?(g===0&&c.value===""||c.value!=g)&&(c.value=""+g):c.value!==""+g&&(c.value=""+g);else if(b==="submit"||b==="reset"){c.removeAttribute("value");return}d.hasOwnProperty("value")?Gt(c,d.type,g):d.hasOwnProperty("defaultValue")&&Gt(c,d.type,Ne(d.defaultValue)),d.checked==null&&d.defaultChecked!=null&&(c.defaultChecked=!!d.defaultChecked)}function Wn(c,d,g){if(d.hasOwnProperty("value")||d.hasOwnProperty("defaultValue")){var b=d.type;if(!(b!=="submit"&&b!=="reset"||d.value!==void 0&&d.value!==null))return;d=""+c._wrapperState.initialValue,g||d===c.value||(c.value=d),c.defaultValue=d}g=c.name,g!==""&&(c.name=""),c.defaultChecked=!!c._wrapperState.initialChecked,g!==""&&(c.name=g)}function Gt(c,d,g){(d!=="number"||Ye(c.ownerDocument)!==c)&&(g==null?c.defaultValue=""+c._wrapperState.initialValue:c.defaultValue!==""+g&&(c.defaultValue=""+g))}var En=Array.isArray;function Xt(c,d,g,b){if(c=c.options,d){d={};for(var C=0;C<g.length;C++)d["$"+g[C]]=!0;for(g=0;g<c.length;g++)C=d.hasOwnProperty("$"+c[g].value),c[g].selected!==C&&(c[g].selected=C),C&&b&&(c[g].defaultSelected=!0)}else{for(g=""+Ne(g),d=null,C=0;C<c.length;C++){if(c[C].value===g){c[C].selected=!0,b&&(c[C].defaultSelected=!0);return}d!==null||c[C].disabled||(d=c[C])}d!==null&&(d.selected=!0)}}function Kn(c,d){if(d.dangerouslySetInnerHTML!=null)throw Error(t(91));return Q({},d,{value:void 0,defaultValue:void 0,children:""+c._wrapperState.initialValue})}function Nn(c,d){var g=d.value;if(g==null){if(g=d.children,d=d.defaultValue,g!=null){if(d!=null)throw Error(t(92));if(En(g)){if(1<g.length)throw Error(t(93));g=g[0]}d=g}d==null&&(d=""),g=d}c._wrapperState={initialValue:Ne(g)}}function fr(c,d){var g=Ne(d.value),b=Ne(d.defaultValue);g!=null&&(g=""+g,g!==c.value&&(c.value=g),d.defaultValue==null&&c.defaultValue!==g&&(c.defaultValue=g)),b!=null&&(c.defaultValue=""+b)}function Vn(c){var d=c.textContent;d===c._wrapperState.initialValue&&d!==""&&d!==null&&(c.value=d)}function jt(c){switch(c){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function yt(c,d){return c==null||c==="http://www.w3.org/1999/xhtml"?jt(d):c==="http://www.w3.org/2000/svg"&&d==="foreignObject"?"http://www.w3.org/1999/xhtml":c}var $t,Hi=function(c){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(d,g,b,C){MSApp.execUnsafeLocalFunction(function(){return c(d,g,b,C)})}:c}(function(c,d){if(c.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in c)c.innerHTML=d;else{for($t=$t||document.createElement("div"),$t.innerHTML="<svg>"+d.valueOf().toString()+"</svg>",d=$t.firstChild;c.firstChild;)c.removeChild(c.firstChild);for(;d.firstChild;)c.appendChild(d.firstChild)}});function pi(c,d){if(d){var g=c.firstChild;if(g&&g===c.lastChild&&g.nodeType===3){g.nodeValue=d;return}}c.textContent=d}var Gi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},$i=["Webkit","ms","Moz","O"];Object.keys(Gi).forEach(function(c){$i.forEach(function(d){d=d+c.charAt(0).toUpperCase()+c.substring(1),Gi[d]=Gi[c]})});function qi(c,d,g){return d==null||typeof d=="boolean"||d===""?"":g||typeof d!="number"||d===0||Gi.hasOwnProperty(c)&&Gi[c]?(""+d).trim():d+"px"}function Ki(c,d){c=c.style;for(var g in d)if(d.hasOwnProperty(g)){var b=g.indexOf("--")===0,C=qi(g,d[g],b);g==="float"&&(g="cssFloat"),b?c.setProperty(g,C):c[g]=C}}var Xi=Q({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function oc(c,d){if(d){if(Xi[c]&&(d.children!=null||d.dangerouslySetInnerHTML!=null))throw Error(t(137,c));if(d.dangerouslySetInnerHTML!=null){if(d.children!=null)throw Error(t(60));if(typeof d.dangerouslySetInnerHTML!="object"||!("__html"in d.dangerouslySetInnerHTML))throw Error(t(61))}if(d.style!=null&&typeof d.style!="object")throw Error(t(62))}}function sc(c,d){if(c.indexOf("-")===-1)return typeof d.is=="string";switch(c){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ps=null;function Oa(c){return c=c.target||c.srcElement||window,c.correspondingUseElement&&(c=c.correspondingUseElement),c.nodeType===3?c.parentNode:c}var ac=null,Ar=null,mi=null;function Fa(c){if(c=Tc(c)){if(typeof ac!="function")throw Error(t(280));var d=c.stateNode;d&&(d=Pd(d),ac(c.stateNode,c.type,d))}}function Yi(c){Ar?mi?mi.push(c):mi=[c]:Ar=c}function lc(){if(Ar){var c=Ar,d=mi;if(mi=Ar=null,Fa(c),d)for(c=0;c<d.length;c++)Fa(d[c])}}function La(c,d){return c(d)}function cc(){}var Ji=!1;function uc(c,d,g){if(Ji)return c(d,g);Ji=!0;try{return La(c,d,g)}finally{Ji=!1,(Ar!==null||mi!==null)&&(cc(),lc())}}function Wt(c,d){var g=c.stateNode;if(g===null)return null;var b=Pd(g);if(b===null)return null;g=b[d];e:switch(d){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(b=!b.disabled)||(c=c.type,b=!(c==="button"||c==="input"||c==="select"||c==="textarea")),c=!b;break e;default:c=!1}if(c)return null;if(g&&typeof g!="function")throw Error(t(231,d,typeof g));return g}var Ba=!1;if(a)try{var Hr={};Object.defineProperty(Hr,"passive",{get:function(){Ba=!0}}),window.addEventListener("test",Hr,Hr),window.removeEventListener("test",Hr,Hr)}catch{Ba=!1}function Os(c,d,g,b,C,R,z,G,J){var ce=Array.prototype.slice.call(arguments,3);try{d.apply(g,ce)}catch(ge){this.onError(ge)}}var Fs=!1,za=null,Gr=!1,dc=null,bp={onError:function(c){Fs=!0,za=c}};function hc(c,d,g,b,C,R,z,G,J){Fs=!1,za=null,Os.apply(bp,arguments)}function wp(c,d,g,b,C,R,z,G,J){if(hc.apply(this,arguments),Fs){if(Fs){var ce=za;Fs=!1,za=null}else throw Error(t(198));Gr||(Gr=!0,dc=ce)}}function $r(c){var d=c,g=c;if(c.alternate)for(;d.return;)d=d.return;else{c=d;do d=c,(d.flags&4098)!==0&&(g=d.return),c=d.return;while(c)}return d.tag===3?g:null}function Ls(c){if(c.tag===13){var d=c.memoizedState;if(d===null&&(c=c.alternate,c!==null&&(d=c.memoizedState)),d!==null)return d.dehydrated}return null}function qr(c){if($r(c)!==c)throw Error(t(188))}function ad(c){var d=c.alternate;if(!d){if(d=$r(c),d===null)throw Error(t(188));return d!==c?null:c}for(var g=c,b=d;;){var C=g.return;if(C===null)break;var R=C.alternate;if(R===null){if(b=C.return,b!==null){g=b;continue}break}if(C.child===R.child){for(R=C.child;R;){if(R===g)return qr(C),c;if(R===b)return qr(C),d;R=R.sibling}throw Error(t(188))}if(g.return!==b.return)g=C,b=R;else{for(var z=!1,G=C.child;G;){if(G===g){z=!0,g=C,b=R;break}if(G===b){z=!0,b=C,g=R;break}G=G.sibling}if(!z){for(G=R.child;G;){if(G===g){z=!0,g=R,b=C;break}if(G===b){z=!0,b=R,g=C;break}G=G.sibling}if(!z)throw Error(t(189))}}if(g.alternate!==b)throw Error(t(190))}if(g.tag!==3)throw Error(t(188));return g.stateNode.current===g?c:d}function fc(c){return c=ad(c),c!==null?Wa(c):null}function Wa(c){if(c.tag===5||c.tag===6)return c;for(c=c.child;c!==null;){var d=Wa(c);if(d!==null)return d;c=c.sibling}return null}var Va=e.unstable_scheduleCallback,pc=e.unstable_cancelCallback,ld=e.unstable_shouldYield,_p=e.unstable_requestPaint,bt=e.unstable_now,cd=e.unstable_getCurrentPriorityLevel,Bs=e.unstable_ImmediatePriority,Po=e.unstable_UserBlockingPriority,Rr=e.unstable_NormalPriority,mc=e.unstable_LowPriority,ud=e.unstable_IdlePriority,zs=null,pr=null;function dd(c){if(pr&&typeof pr.onCommitFiberRoot=="function")try{pr.onCommitFiberRoot(zs,c,void 0,(c.current.flags&128)===128)}catch{}}var Un=Math.clz32?Math.clz32:fd,gc=Math.log,hd=Math.LN2;function fd(c){return c>>>=0,c===0?32:31-(gc(c)/hd|0)|0}var Ua=64,Ha=4194304;function Oo(c){switch(c&-c){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return c&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return c}}function Ws(c,d){var g=c.pendingLanes;if(g===0)return 0;var b=0,C=c.suspendedLanes,R=c.pingedLanes,z=g&268435455;if(z!==0){var G=z&~C;G!==0?b=Oo(G):(R&=z,R!==0&&(b=Oo(R)))}else z=g&~C,z!==0?b=Oo(z):R!==0&&(b=Oo(R));if(b===0)return 0;if(d!==0&&d!==b&&(d&C)===0&&(C=b&-b,R=d&-d,C>=R||C===16&&(R&4194240)!==0))return d;if((b&4)!==0&&(b|=g&16),d=c.entangledLanes,d!==0)for(c=c.entanglements,d&=b;0<d;)g=31-Un(d),C=1<<g,b|=c[g],d&=~C;return b}function kp(c,d){switch(c){case 1:case 2:case 4:return d+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Qi(c,d){for(var g=c.suspendedLanes,b=c.pingedLanes,C=c.expirationTimes,R=c.pendingLanes;0<R;){var z=31-Un(R),G=1<<z,J=C[z];J===-1?((G&g)===0||(G&b)!==0)&&(C[z]=kp(G,d)):J<=d&&(c.expiredLanes|=G),R&=~G}}function mr(c){return c=c.pendingLanes&-1073741825,c!==0?c:c&1073741824?1073741824:0}function Vs(){var c=Ua;return Ua<<=1,(Ua&4194240)===0&&(Ua=64),c}function Fo(c){for(var d=[],g=0;31>g;g++)d.push(c);return d}function Lo(c,d,g){c.pendingLanes|=d,d!==536870912&&(c.suspendedLanes=0,c.pingedLanes=0),c=c.eventTimes,d=31-Un(d),c[d]=g}function xt(c,d){var g=c.pendingLanes&~d;c.pendingLanes=d,c.suspendedLanes=0,c.pingedLanes=0,c.expiredLanes&=d,c.mutableReadLanes&=d,c.entangledLanes&=d,d=c.entanglements;var b=c.eventTimes;for(c=c.expirationTimes;0<g;){var C=31-Un(g),R=1<<C;d[C]=0,b[C]=-1,c[C]=-1,g&=~R}}function Bo(c,d){var g=c.entangledLanes|=d;for(c=c.entanglements;g;){var b=31-Un(g),C=1<<b;C&d|c[b]&d&&(c[b]|=d),g&=~C}}var rt=0;function zo(c){return c&=-c,1<c?4<c?(c&268435455)!==0?16:536870912:4:1}var pd,Ga,md,gd,vd,vc=!1,gi=[],gn=null,Kr=null,Xr=null,Wo=new Map,jr=new Map,vi=[],Cp="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function xd(c,d){switch(c){case"focusin":case"focusout":gn=null;break;case"dragenter":case"dragleave":Kr=null;break;case"mouseover":case"mouseout":Xr=null;break;case"pointerover":case"pointerout":Wo.delete(d.pointerId);break;case"gotpointercapture":case"lostpointercapture":jr.delete(d.pointerId)}}function Xn(c,d,g,b,C,R){return c===null||c.nativeEvent!==R?(c={blockedOn:d,domEventName:g,eventSystemFlags:b,nativeEvent:R,targetContainers:[C]},d!==null&&(d=Tc(d),d!==null&&Ga(d)),c):(c.eventSystemFlags|=b,d=c.targetContainers,C!==null&&d.indexOf(C)===-1&&d.push(C),c)}function Ep(c,d,g,b,C){switch(d){case"focusin":return gn=Xn(gn,c,d,g,b,C),!0;case"dragenter":return Kr=Xn(Kr,c,d,g,b,C),!0;case"mouseover":return Xr=Xn(Xr,c,d,g,b,C),!0;case"pointerover":var R=C.pointerId;return Wo.set(R,Xn(Wo.get(R)||null,c,d,g,b,C)),!0;case"gotpointercapture":return R=C.pointerId,jr.set(R,Xn(jr.get(R)||null,c,d,g,b,C)),!0}return!1}function yd(c){var d=$s(c.target);if(d!==null){var g=$r(d);if(g!==null){if(d=g.tag,d===13){if(d=Ls(g),d!==null){c.blockedOn=d,vd(c.priority,function(){md(g)});return}}else if(d===3&&g.stateNode.current.memoizedState.isDehydrated){c.blockedOn=g.tag===3?g.stateNode.containerInfo:null;return}}}c.blockedOn=null}function Zi(c){if(c.blockedOn!==null)return!1;for(var d=c.targetContainers;0<d.length;){var g=$a(c.domEventName,c.eventSystemFlags,d[0],c.nativeEvent);if(g===null){g=c.nativeEvent;var b=new g.constructor(g.type,g);Ps=b,g.target.dispatchEvent(b),Ps=null}else return d=Tc(g),d!==null&&Ga(d),c.blockedOn=g,!1;d.shift()}return!0}function Us(c,d,g){Zi(c)&&g.delete(d)}function bd(){vc=!1,gn!==null&&Zi(gn)&&(gn=null),Kr!==null&&Zi(Kr)&&(Kr=null),Xr!==null&&Zi(Xr)&&(Xr=null),Wo.forEach(Us),jr.forEach(Us)}function Yr(c,d){c.blockedOn===d&&(c.blockedOn=null,vc||(vc=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,bd)))}function Jr(c){function d(C){return Yr(C,c)}if(0<gi.length){Yr(gi[0],c);for(var g=1;g<gi.length;g++){var b=gi[g];b.blockedOn===c&&(b.blockedOn=null)}}for(gn!==null&&Yr(gn,c),Kr!==null&&Yr(Kr,c),Xr!==null&&Yr(Xr,c),Wo.forEach(d),jr.forEach(d),g=0;g<vi.length;g++)b=vi[g],b.blockedOn===c&&(b.blockedOn=null);for(;0<vi.length&&(g=vi[0],g.blockedOn===null);)yd(g),g.blockedOn===null&&vi.shift()}var eo=S.ReactCurrentBatchConfig,Vo=!0;function Tt(c,d,g,b){var C=rt,R=eo.transition;eo.transition=null;try{rt=1,xc(c,d,g,b)}finally{rt=C,eo.transition=R}}function Np(c,d,g,b){var C=rt,R=eo.transition;eo.transition=null;try{rt=4,xc(c,d,g,b)}finally{rt=C,eo.transition=R}}function xc(c,d,g,b){if(Vo){var C=$a(c,d,g,b);if(C===null)Fp(c,d,b,Hs,g),xd(c,b);else if(Ep(C,c,d,g,b))b.stopPropagation();else if(xd(c,b),d&4&&-1<Cp.indexOf(c)){for(;C!==null;){var R=Tc(C);if(R!==null&&pd(R),R=$a(c,d,g,b),R===null&&Fp(c,d,b,Hs,g),R===C)break;C=R}C!==null&&b.stopPropagation()}else Fp(c,d,b,null,g)}}var Hs=null;function $a(c,d,g,b){if(Hs=null,c=Oa(b),c=$s(c),c!==null)if(d=$r(c),d===null)c=null;else if(g=d.tag,g===13){if(c=Ls(d),c!==null)return c;c=null}else if(g===3){if(d.stateNode.current.memoizedState.isDehydrated)return d.tag===3?d.stateNode.containerInfo:null;c=null}else d!==c&&(c=null);return Hs=c,null}function yc(c){switch(c){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(cd()){case Bs:return 1;case Po:return 4;case Rr:case mc:return 16;case ud:return 536870912;default:return 16}default:return 16}}var gr=null,qa=null,Yn=null;function bc(){if(Yn)return Yn;var c,d=qa,g=d.length,b,C="value"in gr?gr.value:gr.textContent,R=C.length;for(c=0;c<g&&d[c]===C[c];c++);var z=g-c;for(b=1;b<=z&&d[g-b]===C[R-b];b++);return Yn=C.slice(c,1<b?1-b:void 0)}function Ka(c){var d=c.keyCode;return"charCode"in c?(c=c.charCode,c===0&&d===13&&(c=13)):c=d,c===10&&(c=13),32<=c||c===13?c:0}function xi(){return!0}function wc(){return!1}function vn(c){function d(g,b,C,R,z){this._reactName=g,this._targetInst=C,this.type=b,this.nativeEvent=R,this.target=z,this.currentTarget=null;for(var G in c)c.hasOwnProperty(G)&&(g=c[G],this[G]=g?g(R):R[G]);return this.isDefaultPrevented=(R.defaultPrevented!=null?R.defaultPrevented:R.returnValue===!1)?xi:wc,this.isPropagationStopped=wc,this}return Q(d.prototype,{preventDefault:function(){this.defaultPrevented=!0;var g=this.nativeEvent;g&&(g.preventDefault?g.preventDefault():typeof g.returnValue!="unknown"&&(g.returnValue=!1),this.isDefaultPrevented=xi)},stopPropagation:function(){var g=this.nativeEvent;g&&(g.stopPropagation?g.stopPropagation():typeof g.cancelBubble!="unknown"&&(g.cancelBubble=!0),this.isPropagationStopped=xi)},persist:function(){},isPersistent:xi}),d}var Qr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(c){return c.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Xa=vn(Qr),yi=Q({},Qr,{view:0,detail:0}),Sp=vn(yi),Ya,to,Uo,Gs=Q({},yi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:x,button:0,buttons:0,relatedTarget:function(c){return c.relatedTarget===void 0?c.fromElement===c.srcElement?c.toElement:c.fromElement:c.relatedTarget},movementX:function(c){return"movementX"in c?c.movementX:(c!==Uo&&(Uo&&c.type==="mousemove"?(Ya=c.screenX-Uo.screenX,to=c.screenY-Uo.screenY):to=Ya=0,Uo=c),Ya)},movementY:function(c){return"movementY"in c?c.movementY:to}}),Ja=vn(Gs),_c=Q({},Gs,{dataTransfer:0}),wd=vn(_c),Qa=Q({},yi,{relatedTarget:0}),Za=vn(Qa),_d=Q({},Qr,{animationName:0,elapsedTime:0,pseudoElement:0}),no=vn(_d),kd=Q({},Qr,{clipboardData:function(c){return"clipboardData"in c?c.clipboardData:window.clipboardData}}),Cd=vn(kd),Ed=Q({},Qr,{data:0}),kc=vn(Ed),Jn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sd={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ho(c){var d=this.nativeEvent;return d.getModifierState?d.getModifierState(c):(c=Sd[c])?!!d[c]:!1}function x(){return Ho}var I=Q({},yi,{key:function(c){if(c.key){var d=Jn[c.key]||c.key;if(d!=="Unidentified")return d}return c.type==="keypress"?(c=Ka(c),c===13?"Enter":String.fromCharCode(c)):c.type==="keydown"||c.type==="keyup"?Nd[c.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:x,charCode:function(c){return c.type==="keypress"?Ka(c):0},keyCode:function(c){return c.type==="keydown"||c.type==="keyup"?c.keyCode:0},which:function(c){return c.type==="keypress"?Ka(c):c.type==="keydown"||c.type==="keyup"?c.keyCode:0}}),O=vn(I),W=Q({},Gs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ie=vn(W),de=Q({},yi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:x}),we=vn(de),gt=Q({},Qr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Yt=vn(gt),it=Q({},Gs,{deltaX:function(c){return"deltaX"in c?c.deltaX:"wheelDeltaX"in c?-c.wheelDeltaX:0},deltaY:function(c){return"deltaY"in c?c.deltaY:"wheelDeltaY"in c?-c.wheelDeltaY:"wheelDelta"in c?-c.wheelDelta:0},deltaZ:0,deltaMode:0}),an=vn(it),ln=[9,13,27,32],bi=a&&"CompositionEvent"in window,xn=null;a&&"documentMode"in document&&(xn=document.documentMode);var el=a&&"TextEvent"in window&&!xn,tl=a&&(!bi||xn&&8<xn&&11>=xn),kx=" ",Cx=!1;function Ex(c,d){switch(c){case"keyup":return ln.indexOf(d.keyCode)!==-1;case"keydown":return d.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Nx(c){return c=c.detail,typeof c=="object"&&"data"in c?c.data:null}var nl=!1;function j3(c,d){switch(c){case"compositionend":return Nx(d);case"keypress":return d.which!==32?null:(Cx=!0,kx);case"textInput":return c=d.data,c===kx&&Cx?null:c;default:return null}}function T3(c,d){if(nl)return c==="compositionend"||!bi&&Ex(c,d)?(c=bc(),Yn=qa=gr=null,nl=!1,c):null;switch(c){case"paste":return null;case"keypress":if(!(d.ctrlKey||d.altKey||d.metaKey)||d.ctrlKey&&d.altKey){if(d.char&&1<d.char.length)return d.char;if(d.which)return String.fromCharCode(d.which)}return null;case"compositionend":return tl&&d.locale!=="ko"?null:d.data;default:return null}}var D3={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Sx(c){var d=c&&c.nodeName&&c.nodeName.toLowerCase();return d==="input"?!!D3[c.type]:d==="textarea"}function Ix(c,d,g,b){Yi(b),d=Td(d,"onChange"),0<d.length&&(g=new Xa("onChange","change",null,g,b),c.push({event:g,listeners:d}))}var Cc=null,Ec=null;function M3(c){$x(c,0)}function Id(c){var d=al(c);if(nt(d))return c}function P3(c,d){if(c==="change")return d}var Ax=!1;if(a){var Ip;if(a){var Ap="oninput"in document;if(!Ap){var Rx=document.createElement("div");Rx.setAttribute("oninput","return;"),Ap=typeof Rx.oninput=="function"}Ip=Ap}else Ip=!1;Ax=Ip&&(!document.documentMode||9<document.documentMode)}function jx(){Cc&&(Cc.detachEvent("onpropertychange",Tx),Ec=Cc=null)}function Tx(c){if(c.propertyName==="value"&&Id(Ec)){var d=[];Ix(d,Ec,c,Oa(c)),uc(M3,d)}}function O3(c,d,g){c==="focusin"?(jx(),Cc=d,Ec=g,Cc.attachEvent("onpropertychange",Tx)):c==="focusout"&&jx()}function F3(c){if(c==="selectionchange"||c==="keyup"||c==="keydown")return Id(Ec)}function L3(c,d){if(c==="click")return Id(d)}function B3(c,d){if(c==="input"||c==="change")return Id(d)}function z3(c,d){return c===d&&(c!==0||1/c===1/d)||c!==c&&d!==d}var Zr=typeof Object.is=="function"?Object.is:z3;function Nc(c,d){if(Zr(c,d))return!0;if(typeof c!="object"||c===null||typeof d!="object"||d===null)return!1;var g=Object.keys(c),b=Object.keys(d);if(g.length!==b.length)return!1;for(b=0;b<g.length;b++){var C=g[b];if(!l.call(d,C)||!Zr(c[C],d[C]))return!1}return!0}function Dx(c){for(;c&&c.firstChild;)c=c.firstChild;return c}function Mx(c,d){var g=Dx(c);c=0;for(var b;g;){if(g.nodeType===3){if(b=c+g.textContent.length,c<=d&&b>=d)return{node:g,offset:d-c};c=b}e:{for(;g;){if(g.nextSibling){g=g.nextSibling;break e}g=g.parentNode}g=void 0}g=Dx(g)}}function Px(c,d){return c&&d?c===d?!0:c&&c.nodeType===3?!1:d&&d.nodeType===3?Px(c,d.parentNode):"contains"in c?c.contains(d):c.compareDocumentPosition?!!(c.compareDocumentPosition(d)&16):!1:!1}function Ox(){for(var c=window,d=Ye();d instanceof c.HTMLIFrameElement;){try{var g=typeof d.contentWindow.location.href=="string"}catch{g=!1}if(g)c=d.contentWindow;else break;d=Ye(c.document)}return d}function Rp(c){var d=c&&c.nodeName&&c.nodeName.toLowerCase();return d&&(d==="input"&&(c.type==="text"||c.type==="search"||c.type==="tel"||c.type==="url"||c.type==="password")||d==="textarea"||c.contentEditable==="true")}function W3(c){var d=Ox(),g=c.focusedElem,b=c.selectionRange;if(d!==g&&g&&g.ownerDocument&&Px(g.ownerDocument.documentElement,g)){if(b!==null&&Rp(g)){if(d=b.start,c=b.end,c===void 0&&(c=d),"selectionStart"in g)g.selectionStart=d,g.selectionEnd=Math.min(c,g.value.length);else if(c=(d=g.ownerDocument||document)&&d.defaultView||window,c.getSelection){c=c.getSelection();var C=g.textContent.length,R=Math.min(b.start,C);b=b.end===void 0?R:Math.min(b.end,C),!c.extend&&R>b&&(C=b,b=R,R=C),C=Mx(g,R);var z=Mx(g,b);C&&z&&(c.rangeCount!==1||c.anchorNode!==C.node||c.anchorOffset!==C.offset||c.focusNode!==z.node||c.focusOffset!==z.offset)&&(d=d.createRange(),d.setStart(C.node,C.offset),c.removeAllRanges(),R>b?(c.addRange(d),c.extend(z.node,z.offset)):(d.setEnd(z.node,z.offset),c.addRange(d)))}}for(d=[],c=g;c=c.parentNode;)c.nodeType===1&&d.push({element:c,left:c.scrollLeft,top:c.scrollTop});for(typeof g.focus=="function"&&g.focus(),g=0;g<d.length;g++)c=d[g],c.element.scrollLeft=c.left,c.element.scrollTop=c.top}}var V3=a&&"documentMode"in document&&11>=document.documentMode,rl=null,jp=null,Sc=null,Tp=!1;function Fx(c,d,g){var b=g.window===g?g.document:g.nodeType===9?g:g.ownerDocument;Tp||rl==null||rl!==Ye(b)||(b=rl,"selectionStart"in b&&Rp(b)?b={start:b.selectionStart,end:b.selectionEnd}:(b=(b.ownerDocument&&b.ownerDocument.defaultView||window).getSelection(),b={anchorNode:b.anchorNode,anchorOffset:b.anchorOffset,focusNode:b.focusNode,focusOffset:b.focusOffset}),Sc&&Nc(Sc,b)||(Sc=b,b=Td(jp,"onSelect"),0<b.length&&(d=new Xa("onSelect","select",null,d,g),c.push({event:d,listeners:b}),d.target=rl)))}function Ad(c,d){var g={};return g[c.toLowerCase()]=d.toLowerCase(),g["Webkit"+c]="webkit"+d,g["Moz"+c]="moz"+d,g}var il={animationend:Ad("Animation","AnimationEnd"),animationiteration:Ad("Animation","AnimationIteration"),animationstart:Ad("Animation","AnimationStart"),transitionend:Ad("Transition","TransitionEnd")},Dp={},Lx={};a&&(Lx=document.createElement("div").style,"AnimationEvent"in window||(delete il.animationend.animation,delete il.animationiteration.animation,delete il.animationstart.animation),"TransitionEvent"in window||delete il.transitionend.transition);function Rd(c){if(Dp[c])return Dp[c];if(!il[c])return c;var d=il[c],g;for(g in d)if(d.hasOwnProperty(g)&&g in Lx)return Dp[c]=d[g];return c}var Bx=Rd("animationend"),zx=Rd("animationiteration"),Wx=Rd("animationstart"),Vx=Rd("transitionend"),Ux=new Map,Hx="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Go(c,d){Ux.set(c,d),o(d,[c])}for(var Mp=0;Mp<Hx.length;Mp++){var Pp=Hx[Mp],U3=Pp.toLowerCase(),H3=Pp[0].toUpperCase()+Pp.slice(1);Go(U3,"on"+H3)}Go(Bx,"onAnimationEnd"),Go(zx,"onAnimationIteration"),Go(Wx,"onAnimationStart"),Go("dblclick","onDoubleClick"),Go("focusin","onFocus"),Go("focusout","onBlur"),Go(Vx,"onTransitionEnd"),s("onMouseEnter",["mouseout","mouseover"]),s("onMouseLeave",["mouseout","mouseover"]),s("onPointerEnter",["pointerout","pointerover"]),s("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ic="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),G3=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ic));function Gx(c,d,g){var b=c.type||"unknown-event";c.currentTarget=g,wp(b,d,void 0,c),c.currentTarget=null}function $x(c,d){d=(d&4)!==0;for(var g=0;g<c.length;g++){var b=c[g],C=b.event;b=b.listeners;e:{var R=void 0;if(d)for(var z=b.length-1;0<=z;z--){var G=b[z],J=G.instance,ce=G.currentTarget;if(G=G.listener,J!==R&&C.isPropagationStopped())break e;Gx(C,G,ce),R=J}else for(z=0;z<b.length;z++){if(G=b[z],J=G.instance,ce=G.currentTarget,G=G.listener,J!==R&&C.isPropagationStopped())break e;Gx(C,G,ce),R=J}}}if(Gr)throw c=dc,Gr=!1,dc=null,c}function Ct(c,d){var g=d[Up];g===void 0&&(g=d[Up]=new Set);var b=c+"__bubble";g.has(b)||(qx(d,c,2,!1),g.add(b))}function Op(c,d,g){var b=0;d&&(b|=4),qx(g,c,b,d)}var jd="_reactListening"+Math.random().toString(36).slice(2);function Ac(c){if(!c[jd]){c[jd]=!0,r.forEach(function(g){g!=="selectionchange"&&(G3.has(g)||Op(g,!1,c),Op(g,!0,c))});var d=c.nodeType===9?c:c.ownerDocument;d===null||d[jd]||(d[jd]=!0,Op("selectionchange",!1,d))}}function qx(c,d,g,b){switch(yc(d)){case 1:var C=Tt;break;case 4:C=Np;break;default:C=xc}g=C.bind(null,d,g,c),C=void 0,!Ba||d!=="touchstart"&&d!=="touchmove"&&d!=="wheel"||(C=!0),b?C!==void 0?c.addEventListener(d,g,{capture:!0,passive:C}):c.addEventListener(d,g,!0):C!==void 0?c.addEventListener(d,g,{passive:C}):c.addEventListener(d,g,!1)}function Fp(c,d,g,b,C){var R=b;if((d&1)===0&&(d&2)===0&&b!==null)e:for(;;){if(b===null)return;var z=b.tag;if(z===3||z===4){var G=b.stateNode.containerInfo;if(G===C||G.nodeType===8&&G.parentNode===C)break;if(z===4)for(z=b.return;z!==null;){var J=z.tag;if((J===3||J===4)&&(J=z.stateNode.containerInfo,J===C||J.nodeType===8&&J.parentNode===C))return;z=z.return}for(;G!==null;){if(z=$s(G),z===null)return;if(J=z.tag,J===5||J===6){b=R=z;continue e}G=G.parentNode}}b=b.return}uc(function(){var ce=R,ge=Oa(g),ve=[];e:{var me=Ux.get(c);if(me!==void 0){var Ce=Xa,Ae=c;switch(c){case"keypress":if(Ka(g)===0)break e;case"keydown":case"keyup":Ce=O;break;case"focusin":Ae="focus",Ce=Za;break;case"focusout":Ae="blur",Ce=Za;break;case"beforeblur":case"afterblur":Ce=Za;break;case"click":if(g.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ce=Ja;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ce=wd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ce=we;break;case Bx:case zx:case Wx:Ce=no;break;case Vx:Ce=Yt;break;case"scroll":Ce=Sp;break;case"wheel":Ce=an;break;case"copy":case"cut":case"paste":Ce=Cd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ce=ie}var Te=(d&4)!==0,Vt=!Te&&c==="scroll",oe=Te?me!==null?me+"Capture":null:me;Te=[];for(var ee=ce,ae;ee!==null;){ae=ee;var xe=ae.stateNode;if(ae.tag===5&&xe!==null&&(ae=xe,oe!==null&&(xe=Wt(ee,oe),xe!=null&&Te.push(Rc(ee,xe,ae)))),Vt)break;ee=ee.return}0<Te.length&&(me=new Ce(me,Ae,null,g,ge),ve.push({event:me,listeners:Te}))}}if((d&7)===0){e:{if(me=c==="mouseover"||c==="pointerover",Ce=c==="mouseout"||c==="pointerout",me&&g!==Ps&&(Ae=g.relatedTarget||g.fromElement)&&($s(Ae)||Ae[ro]))break e;if((Ce||me)&&(me=ge.window===ge?ge:(me=ge.ownerDocument)?me.defaultView||me.parentWindow:window,Ce?(Ae=g.relatedTarget||g.toElement,Ce=ce,Ae=Ae?$s(Ae):null,Ae!==null&&(Vt=$r(Ae),Ae!==Vt||Ae.tag!==5&&Ae.tag!==6)&&(Ae=null)):(Ce=null,Ae=ce),Ce!==Ae)){if(Te=Ja,xe="onMouseLeave",oe="onMouseEnter",ee="mouse",(c==="pointerout"||c==="pointerover")&&(Te=ie,xe="onPointerLeave",oe="onPointerEnter",ee="pointer"),Vt=Ce==null?me:al(Ce),ae=Ae==null?me:al(Ae),me=new Te(xe,ee+"leave",Ce,g,ge),me.target=Vt,me.relatedTarget=ae,xe=null,$s(ge)===ce&&(Te=new Te(oe,ee+"enter",Ae,g,ge),Te.target=ae,Te.relatedTarget=Vt,xe=Te),Vt=xe,Ce&&Ae)t:{for(Te=Ce,oe=Ae,ee=0,ae=Te;ae;ae=ol(ae))ee++;for(ae=0,xe=oe;xe;xe=ol(xe))ae++;for(;0<ee-ae;)Te=ol(Te),ee--;for(;0<ae-ee;)oe=ol(oe),ae--;for(;ee--;){if(Te===oe||oe!==null&&Te===oe.alternate)break t;Te=ol(Te),oe=ol(oe)}Te=null}else Te=null;Ce!==null&&Kx(ve,me,Ce,Te,!1),Ae!==null&&Vt!==null&&Kx(ve,Vt,Ae,Te,!0)}}e:{if(me=ce?al(ce):window,Ce=me.nodeName&&me.nodeName.toLowerCase(),Ce==="select"||Ce==="input"&&me.type==="file")var Pe=P3;else if(Sx(me))if(Ax)Pe=B3;else{Pe=F3;var Be=O3}else(Ce=me.nodeName)&&Ce.toLowerCase()==="input"&&(me.type==="checkbox"||me.type==="radio")&&(Pe=L3);if(Pe&&(Pe=Pe(c,ce))){Ix(ve,Pe,g,ge);break e}Be&&Be(c,me,ce),c==="focusout"&&(Be=me._wrapperState)&&Be.controlled&&me.type==="number"&&Gt(me,"number",me.value)}switch(Be=ce?al(ce):window,c){case"focusin":(Sx(Be)||Be.contentEditable==="true")&&(rl=Be,jp=ce,Sc=null);break;case"focusout":Sc=jp=rl=null;break;case"mousedown":Tp=!0;break;case"contextmenu":case"mouseup":case"dragend":Tp=!1,Fx(ve,g,ge);break;case"selectionchange":if(V3)break;case"keydown":case"keyup":Fx(ve,g,ge)}var ze;if(bi)e:{switch(c){case"compositionstart":var Ve="onCompositionStart";break e;case"compositionend":Ve="onCompositionEnd";break e;case"compositionupdate":Ve="onCompositionUpdate";break e}Ve=void 0}else nl?Ex(c,g)&&(Ve="onCompositionEnd"):c==="keydown"&&g.keyCode===229&&(Ve="onCompositionStart");Ve&&(tl&&g.locale!=="ko"&&(nl||Ve!=="onCompositionStart"?Ve==="onCompositionEnd"&&nl&&(ze=bc()):(gr=ge,qa="value"in gr?gr.value:gr.textContent,nl=!0)),Be=Td(ce,Ve),0<Be.length&&(Ve=new kc(Ve,c,null,g,ge),ve.push({event:Ve,listeners:Be}),ze?Ve.data=ze:(ze=Nx(g),ze!==null&&(Ve.data=ze)))),(ze=el?j3(c,g):T3(c,g))&&(ce=Td(ce,"onBeforeInput"),0<ce.length&&(ge=new kc("onBeforeInput","beforeinput",null,g,ge),ve.push({event:ge,listeners:ce}),ge.data=ze))}$x(ve,d)})}function Rc(c,d,g){return{instance:c,listener:d,currentTarget:g}}function Td(c,d){for(var g=d+"Capture",b=[];c!==null;){var C=c,R=C.stateNode;C.tag===5&&R!==null&&(C=R,R=Wt(c,g),R!=null&&b.unshift(Rc(c,R,C)),R=Wt(c,d),R!=null&&b.push(Rc(c,R,C))),c=c.return}return b}function ol(c){if(c===null)return null;do c=c.return;while(c&&c.tag!==5);return c||null}function Kx(c,d,g,b,C){for(var R=d._reactName,z=[];g!==null&&g!==b;){var G=g,J=G.alternate,ce=G.stateNode;if(J!==null&&J===b)break;G.tag===5&&ce!==null&&(G=ce,C?(J=Wt(g,R),J!=null&&z.unshift(Rc(g,J,G))):C||(J=Wt(g,R),J!=null&&z.push(Rc(g,J,G)))),g=g.return}z.length!==0&&c.push({event:d,listeners:z})}var $3=/\r\n?/g,q3=/\u0000|\uFFFD/g;function Xx(c){return(typeof c=="string"?c:""+c).replace($3,`
`).replace(q3,"")}function Dd(c,d,g){if(d=Xx(d),Xx(c)!==d&&g)throw Error(t(425))}function Md(){}var Lp=null,Bp=null;function zp(c,d){return c==="textarea"||c==="noscript"||typeof d.children=="string"||typeof d.children=="number"||typeof d.dangerouslySetInnerHTML=="object"&&d.dangerouslySetInnerHTML!==null&&d.dangerouslySetInnerHTML.__html!=null}var Wp=typeof setTimeout=="function"?setTimeout:void 0,K3=typeof clearTimeout=="function"?clearTimeout:void 0,Yx=typeof Promise=="function"?Promise:void 0,X3=typeof queueMicrotask=="function"?queueMicrotask:typeof Yx<"u"?function(c){return Yx.resolve(null).then(c).catch(Y3)}:Wp;function Y3(c){setTimeout(function(){throw c})}function Vp(c,d){var g=d,b=0;do{var C=g.nextSibling;if(c.removeChild(g),C&&C.nodeType===8)if(g=C.data,g==="/$"){if(b===0){c.removeChild(C),Jr(d);return}b--}else g!=="$"&&g!=="$?"&&g!=="$!"||b++;g=C}while(g);Jr(d)}function $o(c){for(;c!=null;c=c.nextSibling){var d=c.nodeType;if(d===1||d===3)break;if(d===8){if(d=c.data,d==="$"||d==="$!"||d==="$?")break;if(d==="/$")return null}}return c}function Jx(c){c=c.previousSibling;for(var d=0;c;){if(c.nodeType===8){var g=c.data;if(g==="$"||g==="$!"||g==="$?"){if(d===0)return c;d--}else g==="/$"&&d++}c=c.previousSibling}return null}var sl=Math.random().toString(36).slice(2),wi="__reactFiber$"+sl,jc="__reactProps$"+sl,ro="__reactContainer$"+sl,Up="__reactEvents$"+sl,J3="__reactListeners$"+sl,Q3="__reactHandles$"+sl;function $s(c){var d=c[wi];if(d)return d;for(var g=c.parentNode;g;){if(d=g[ro]||g[wi]){if(g=d.alternate,d.child!==null||g!==null&&g.child!==null)for(c=Jx(c);c!==null;){if(g=c[wi])return g;c=Jx(c)}return d}c=g,g=c.parentNode}return null}function Tc(c){return c=c[wi]||c[ro],!c||c.tag!==5&&c.tag!==6&&c.tag!==13&&c.tag!==3?null:c}function al(c){if(c.tag===5||c.tag===6)return c.stateNode;throw Error(t(33))}function Pd(c){return c[jc]||null}var Hp=[],ll=-1;function qo(c){return{current:c}}function Et(c){0>ll||(c.current=Hp[ll],Hp[ll]=null,ll--)}function wt(c,d){ll++,Hp[ll]=c.current,c.current=d}var Ko={},Sn=qo(Ko),Qn=qo(!1),qs=Ko;function cl(c,d){var g=c.type.contextTypes;if(!g)return Ko;var b=c.stateNode;if(b&&b.__reactInternalMemoizedUnmaskedChildContext===d)return b.__reactInternalMemoizedMaskedChildContext;var C={},R;for(R in g)C[R]=d[R];return b&&(c=c.stateNode,c.__reactInternalMemoizedUnmaskedChildContext=d,c.__reactInternalMemoizedMaskedChildContext=C),C}function Zn(c){return c=c.childContextTypes,c!=null}function Od(){Et(Qn),Et(Sn)}function Qx(c,d,g){if(Sn.current!==Ko)throw Error(t(168));wt(Sn,d),wt(Qn,g)}function Zx(c,d,g){var b=c.stateNode;if(d=d.childContextTypes,typeof b.getChildContext!="function")return g;b=b.getChildContext();for(var C in b)if(!(C in d))throw Error(t(108,Se(c)||"Unknown",C));return Q({},g,b)}function Fd(c){return c=(c=c.stateNode)&&c.__reactInternalMemoizedMergedChildContext||Ko,qs=Sn.current,wt(Sn,c),wt(Qn,Qn.current),!0}function ey(c,d,g){var b=c.stateNode;if(!b)throw Error(t(169));g?(c=Zx(c,d,qs),b.__reactInternalMemoizedMergedChildContext=c,Et(Qn),Et(Sn),wt(Sn,c)):Et(Qn),wt(Qn,g)}var io=null,Ld=!1,Gp=!1;function ty(c){io===null?io=[c]:io.push(c)}function Z3(c){Ld=!0,ty(c)}function Xo(){if(!Gp&&io!==null){Gp=!0;var c=0,d=rt;try{var g=io;for(rt=1;c<g.length;c++){var b=g[c];do b=b(!0);while(b!==null)}io=null,Ld=!1}catch(C){throw io!==null&&(io=io.slice(c+1)),Va(Bs,Xo),C}finally{rt=d,Gp=!1}}return null}var ul=[],dl=0,Bd=null,zd=0,Tr=[],Dr=0,Ks=null,oo=1,so="";function Xs(c,d){ul[dl++]=zd,ul[dl++]=Bd,Bd=c,zd=d}function ny(c,d,g){Tr[Dr++]=oo,Tr[Dr++]=so,Tr[Dr++]=Ks,Ks=c;var b=oo;c=so;var C=32-Un(b)-1;b&=~(1<<C),g+=1;var R=32-Un(d)+C;if(30<R){var z=C-C%5;R=(b&(1<<z)-1).toString(32),b>>=z,C-=z,oo=1<<32-Un(d)+C|g<<C|b,so=R+c}else oo=1<<R|g<<C|b,so=c}function $p(c){c.return!==null&&(Xs(c,1),ny(c,1,0))}function qp(c){for(;c===Bd;)Bd=ul[--dl],ul[dl]=null,zd=ul[--dl],ul[dl]=null;for(;c===Ks;)Ks=Tr[--Dr],Tr[Dr]=null,so=Tr[--Dr],Tr[Dr]=null,oo=Tr[--Dr],Tr[Dr]=null}var vr=null,xr=null,It=!1,ei=null;function ry(c,d){var g=Fr(5,null,null,0);g.elementType="DELETED",g.stateNode=d,g.return=c,d=c.deletions,d===null?(c.deletions=[g],c.flags|=16):d.push(g)}function iy(c,d){switch(c.tag){case 5:var g=c.type;return d=d.nodeType!==1||g.toLowerCase()!==d.nodeName.toLowerCase()?null:d,d!==null?(c.stateNode=d,vr=c,xr=$o(d.firstChild),!0):!1;case 6:return d=c.pendingProps===""||d.nodeType!==3?null:d,d!==null?(c.stateNode=d,vr=c,xr=null,!0):!1;case 13:return d=d.nodeType!==8?null:d,d!==null?(g=Ks!==null?{id:oo,overflow:so}:null,c.memoizedState={dehydrated:d,treeContext:g,retryLane:1073741824},g=Fr(18,null,null,0),g.stateNode=d,g.return=c,c.child=g,vr=c,xr=null,!0):!1;default:return!1}}function Kp(c){return(c.mode&1)!==0&&(c.flags&128)===0}function Xp(c){if(It){var d=xr;if(d){var g=d;if(!iy(c,d)){if(Kp(c))throw Error(t(418));d=$o(g.nextSibling);var b=vr;d&&iy(c,d)?ry(b,g):(c.flags=c.flags&-4097|2,It=!1,vr=c)}}else{if(Kp(c))throw Error(t(418));c.flags=c.flags&-4097|2,It=!1,vr=c}}}function oy(c){for(c=c.return;c!==null&&c.tag!==5&&c.tag!==3&&c.tag!==13;)c=c.return;vr=c}function Wd(c){if(c!==vr)return!1;if(!It)return oy(c),It=!0,!1;var d;if((d=c.tag!==3)&&!(d=c.tag!==5)&&(d=c.type,d=d!=="head"&&d!=="body"&&!zp(c.type,c.memoizedProps)),d&&(d=xr)){if(Kp(c))throw sy(),Error(t(418));for(;d;)ry(c,d),d=$o(d.nextSibling)}if(oy(c),c.tag===13){if(c=c.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(t(317));e:{for(c=c.nextSibling,d=0;c;){if(c.nodeType===8){var g=c.data;if(g==="/$"){if(d===0){xr=$o(c.nextSibling);break e}d--}else g!=="$"&&g!=="$!"&&g!=="$?"||d++}c=c.nextSibling}xr=null}}else xr=vr?$o(c.stateNode.nextSibling):null;return!0}function sy(){for(var c=xr;c;)c=$o(c.nextSibling)}function hl(){xr=vr=null,It=!1}function Yp(c){ei===null?ei=[c]:ei.push(c)}var eE=S.ReactCurrentBatchConfig;function Dc(c,d,g){if(c=g.ref,c!==null&&typeof c!="function"&&typeof c!="object"){if(g._owner){if(g=g._owner,g){if(g.tag!==1)throw Error(t(309));var b=g.stateNode}if(!b)throw Error(t(147,c));var C=b,R=""+c;return d!==null&&d.ref!==null&&typeof d.ref=="function"&&d.ref._stringRef===R?d.ref:(d=function(z){var G=C.refs;z===null?delete G[R]:G[R]=z},d._stringRef=R,d)}if(typeof c!="string")throw Error(t(284));if(!g._owner)throw Error(t(290,c))}return c}function Vd(c,d){throw c=Object.prototype.toString.call(d),Error(t(31,c==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":c))}function ay(c){var d=c._init;return d(c._payload)}function ly(c){function d(oe,ee){if(c){var ae=oe.deletions;ae===null?(oe.deletions=[ee],oe.flags|=16):ae.push(ee)}}function g(oe,ee){if(!c)return null;for(;ee!==null;)d(oe,ee),ee=ee.sibling;return null}function b(oe,ee){for(oe=new Map;ee!==null;)ee.key!==null?oe.set(ee.key,ee):oe.set(ee.index,ee),ee=ee.sibling;return oe}function C(oe,ee){return oe=rs(oe,ee),oe.index=0,oe.sibling=null,oe}function R(oe,ee,ae){return oe.index=ae,c?(ae=oe.alternate,ae!==null?(ae=ae.index,ae<ee?(oe.flags|=2,ee):ae):(oe.flags|=2,ee)):(oe.flags|=1048576,ee)}function z(oe){return c&&oe.alternate===null&&(oe.flags|=2),oe}function G(oe,ee,ae,xe){return ee===null||ee.tag!==6?(ee=Wm(ae,oe.mode,xe),ee.return=oe,ee):(ee=C(ee,ae),ee.return=oe,ee)}function J(oe,ee,ae,xe){var Pe=ae.type;return Pe===D?ge(oe,ee,ae.props.children,xe,ae.key):ee!==null&&(ee.elementType===Pe||typeof Pe=="object"&&Pe!==null&&Pe.$$typeof===se&&ay(Pe)===ee.type)?(xe=C(ee,ae.props),xe.ref=Dc(oe,ee,ae),xe.return=oe,xe):(xe=hh(ae.type,ae.key,ae.props,null,oe.mode,xe),xe.ref=Dc(oe,ee,ae),xe.return=oe,xe)}function ce(oe,ee,ae,xe){return ee===null||ee.tag!==4||ee.stateNode.containerInfo!==ae.containerInfo||ee.stateNode.implementation!==ae.implementation?(ee=Vm(ae,oe.mode,xe),ee.return=oe,ee):(ee=C(ee,ae.children||[]),ee.return=oe,ee)}function ge(oe,ee,ae,xe,Pe){return ee===null||ee.tag!==7?(ee=ra(ae,oe.mode,xe,Pe),ee.return=oe,ee):(ee=C(ee,ae),ee.return=oe,ee)}function ve(oe,ee,ae){if(typeof ee=="string"&&ee!==""||typeof ee=="number")return ee=Wm(""+ee,oe.mode,ae),ee.return=oe,ee;if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case A:return ae=hh(ee.type,ee.key,ee.props,null,oe.mode,ae),ae.ref=Dc(oe,null,ee),ae.return=oe,ae;case P:return ee=Vm(ee,oe.mode,ae),ee.return=oe,ee;case se:var xe=ee._init;return ve(oe,xe(ee._payload),ae)}if(En(ee)||Y(ee))return ee=ra(ee,oe.mode,ae,null),ee.return=oe,ee;Vd(oe,ee)}return null}function me(oe,ee,ae,xe){var Pe=ee!==null?ee.key:null;if(typeof ae=="string"&&ae!==""||typeof ae=="number")return Pe!==null?null:G(oe,ee,""+ae,xe);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case A:return ae.key===Pe?J(oe,ee,ae,xe):null;case P:return ae.key===Pe?ce(oe,ee,ae,xe):null;case se:return Pe=ae._init,me(oe,ee,Pe(ae._payload),xe)}if(En(ae)||Y(ae))return Pe!==null?null:ge(oe,ee,ae,xe,null);Vd(oe,ae)}return null}function Ce(oe,ee,ae,xe,Pe){if(typeof xe=="string"&&xe!==""||typeof xe=="number")return oe=oe.get(ae)||null,G(ee,oe,""+xe,Pe);if(typeof xe=="object"&&xe!==null){switch(xe.$$typeof){case A:return oe=oe.get(xe.key===null?ae:xe.key)||null,J(ee,oe,xe,Pe);case P:return oe=oe.get(xe.key===null?ae:xe.key)||null,ce(ee,oe,xe,Pe);case se:var Be=xe._init;return Ce(oe,ee,ae,Be(xe._payload),Pe)}if(En(xe)||Y(xe))return oe=oe.get(ae)||null,ge(ee,oe,xe,Pe,null);Vd(ee,xe)}return null}function Ae(oe,ee,ae,xe){for(var Pe=null,Be=null,ze=ee,Ve=ee=0,dn=null;ze!==null&&Ve<ae.length;Ve++){ze.index>Ve?(dn=ze,ze=null):dn=ze.sibling;var lt=me(oe,ze,ae[Ve],xe);if(lt===null){ze===null&&(ze=dn);break}c&&ze&&lt.alternate===null&&d(oe,ze),ee=R(lt,ee,Ve),Be===null?Pe=lt:Be.sibling=lt,Be=lt,ze=dn}if(Ve===ae.length)return g(oe,ze),It&&Xs(oe,Ve),Pe;if(ze===null){for(;Ve<ae.length;Ve++)ze=ve(oe,ae[Ve],xe),ze!==null&&(ee=R(ze,ee,Ve),Be===null?Pe=ze:Be.sibling=ze,Be=ze);return It&&Xs(oe,Ve),Pe}for(ze=b(oe,ze);Ve<ae.length;Ve++)dn=Ce(ze,oe,Ve,ae[Ve],xe),dn!==null&&(c&&dn.alternate!==null&&ze.delete(dn.key===null?Ve:dn.key),ee=R(dn,ee,Ve),Be===null?Pe=dn:Be.sibling=dn,Be=dn);return c&&ze.forEach(function(is){return d(oe,is)}),It&&Xs(oe,Ve),Pe}function Te(oe,ee,ae,xe){var Pe=Y(ae);if(typeof Pe!="function")throw Error(t(150));if(ae=Pe.call(ae),ae==null)throw Error(t(151));for(var Be=Pe=null,ze=ee,Ve=ee=0,dn=null,lt=ae.next();ze!==null&&!lt.done;Ve++,lt=ae.next()){ze.index>Ve?(dn=ze,ze=null):dn=ze.sibling;var is=me(oe,ze,lt.value,xe);if(is===null){ze===null&&(ze=dn);break}c&&ze&&is.alternate===null&&d(oe,ze),ee=R(is,ee,Ve),Be===null?Pe=is:Be.sibling=is,Be=is,ze=dn}if(lt.done)return g(oe,ze),It&&Xs(oe,Ve),Pe;if(ze===null){for(;!lt.done;Ve++,lt=ae.next())lt=ve(oe,lt.value,xe),lt!==null&&(ee=R(lt,ee,Ve),Be===null?Pe=lt:Be.sibling=lt,Be=lt);return It&&Xs(oe,Ve),Pe}for(ze=b(oe,ze);!lt.done;Ve++,lt=ae.next())lt=Ce(ze,oe,Ve,lt.value,xe),lt!==null&&(c&&lt.alternate!==null&&ze.delete(lt.key===null?Ve:lt.key),ee=R(lt,ee,Ve),Be===null?Pe=lt:Be.sibling=lt,Be=lt);return c&&ze.forEach(function(DE){return d(oe,DE)}),It&&Xs(oe,Ve),Pe}function Vt(oe,ee,ae,xe){if(typeof ae=="object"&&ae!==null&&ae.type===D&&ae.key===null&&(ae=ae.props.children),typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case A:e:{for(var Pe=ae.key,Be=ee;Be!==null;){if(Be.key===Pe){if(Pe=ae.type,Pe===D){if(Be.tag===7){g(oe,Be.sibling),ee=C(Be,ae.props.children),ee.return=oe,oe=ee;break e}}else if(Be.elementType===Pe||typeof Pe=="object"&&Pe!==null&&Pe.$$typeof===se&&ay(Pe)===Be.type){g(oe,Be.sibling),ee=C(Be,ae.props),ee.ref=Dc(oe,Be,ae),ee.return=oe,oe=ee;break e}g(oe,Be);break}else d(oe,Be);Be=Be.sibling}ae.type===D?(ee=ra(ae.props.children,oe.mode,xe,ae.key),ee.return=oe,oe=ee):(xe=hh(ae.type,ae.key,ae.props,null,oe.mode,xe),xe.ref=Dc(oe,ee,ae),xe.return=oe,oe=xe)}return z(oe);case P:e:{for(Be=ae.key;ee!==null;){if(ee.key===Be)if(ee.tag===4&&ee.stateNode.containerInfo===ae.containerInfo&&ee.stateNode.implementation===ae.implementation){g(oe,ee.sibling),ee=C(ee,ae.children||[]),ee.return=oe,oe=ee;break e}else{g(oe,ee);break}else d(oe,ee);ee=ee.sibling}ee=Vm(ae,oe.mode,xe),ee.return=oe,oe=ee}return z(oe);case se:return Be=ae._init,Vt(oe,ee,Be(ae._payload),xe)}if(En(ae))return Ae(oe,ee,ae,xe);if(Y(ae))return Te(oe,ee,ae,xe);Vd(oe,ae)}return typeof ae=="string"&&ae!==""||typeof ae=="number"?(ae=""+ae,ee!==null&&ee.tag===6?(g(oe,ee.sibling),ee=C(ee,ae),ee.return=oe,oe=ee):(g(oe,ee),ee=Wm(ae,oe.mode,xe),ee.return=oe,oe=ee),z(oe)):g(oe,ee)}return Vt}var fl=ly(!0),cy=ly(!1),Ud=qo(null),Hd=null,pl=null,Jp=null;function Qp(){Jp=pl=Hd=null}function Zp(c){var d=Ud.current;Et(Ud),c._currentValue=d}function em(c,d,g){for(;c!==null;){var b=c.alternate;if((c.childLanes&d)!==d?(c.childLanes|=d,b!==null&&(b.childLanes|=d)):b!==null&&(b.childLanes&d)!==d&&(b.childLanes|=d),c===g)break;c=c.return}}function ml(c,d){Hd=c,Jp=pl=null,c=c.dependencies,c!==null&&c.firstContext!==null&&((c.lanes&d)!==0&&(er=!0),c.firstContext=null)}function Mr(c){var d=c._currentValue;if(Jp!==c)if(c={context:c,memoizedValue:d,next:null},pl===null){if(Hd===null)throw Error(t(308));pl=c,Hd.dependencies={lanes:0,firstContext:c}}else pl=pl.next=c;return d}var Ys=null;function tm(c){Ys===null?Ys=[c]:Ys.push(c)}function uy(c,d,g,b){var C=d.interleaved;return C===null?(g.next=g,tm(d)):(g.next=C.next,C.next=g),d.interleaved=g,ao(c,b)}function ao(c,d){c.lanes|=d;var g=c.alternate;for(g!==null&&(g.lanes|=d),g=c,c=c.return;c!==null;)c.childLanes|=d,g=c.alternate,g!==null&&(g.childLanes|=d),g=c,c=c.return;return g.tag===3?g.stateNode:null}var Yo=!1;function nm(c){c.updateQueue={baseState:c.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function dy(c,d){c=c.updateQueue,d.updateQueue===c&&(d.updateQueue={baseState:c.baseState,firstBaseUpdate:c.firstBaseUpdate,lastBaseUpdate:c.lastBaseUpdate,shared:c.shared,effects:c.effects})}function lo(c,d){return{eventTime:c,lane:d,tag:0,payload:null,callback:null,next:null}}function Jo(c,d,g){var b=c.updateQueue;if(b===null)return null;if(b=b.shared,(at&2)!==0){var C=b.pending;return C===null?d.next=d:(d.next=C.next,C.next=d),b.pending=d,ao(c,g)}return C=b.interleaved,C===null?(d.next=d,tm(b)):(d.next=C.next,C.next=d),b.interleaved=d,ao(c,g)}function Gd(c,d,g){if(d=d.updateQueue,d!==null&&(d=d.shared,(g&4194240)!==0)){var b=d.lanes;b&=c.pendingLanes,g|=b,d.lanes=g,Bo(c,g)}}function hy(c,d){var g=c.updateQueue,b=c.alternate;if(b!==null&&(b=b.updateQueue,g===b)){var C=null,R=null;if(g=g.firstBaseUpdate,g!==null){do{var z={eventTime:g.eventTime,lane:g.lane,tag:g.tag,payload:g.payload,callback:g.callback,next:null};R===null?C=R=z:R=R.next=z,g=g.next}while(g!==null);R===null?C=R=d:R=R.next=d}else C=R=d;g={baseState:b.baseState,firstBaseUpdate:C,lastBaseUpdate:R,shared:b.shared,effects:b.effects},c.updateQueue=g;return}c=g.lastBaseUpdate,c===null?g.firstBaseUpdate=d:c.next=d,g.lastBaseUpdate=d}function $d(c,d,g,b){var C=c.updateQueue;Yo=!1;var R=C.firstBaseUpdate,z=C.lastBaseUpdate,G=C.shared.pending;if(G!==null){C.shared.pending=null;var J=G,ce=J.next;J.next=null,z===null?R=ce:z.next=ce,z=J;var ge=c.alternate;ge!==null&&(ge=ge.updateQueue,G=ge.lastBaseUpdate,G!==z&&(G===null?ge.firstBaseUpdate=ce:G.next=ce,ge.lastBaseUpdate=J))}if(R!==null){var ve=C.baseState;z=0,ge=ce=J=null,G=R;do{var me=G.lane,Ce=G.eventTime;if((b&me)===me){ge!==null&&(ge=ge.next={eventTime:Ce,lane:0,tag:G.tag,payload:G.payload,callback:G.callback,next:null});e:{var Ae=c,Te=G;switch(me=d,Ce=g,Te.tag){case 1:if(Ae=Te.payload,typeof Ae=="function"){ve=Ae.call(Ce,ve,me);break e}ve=Ae;break e;case 3:Ae.flags=Ae.flags&-65537|128;case 0:if(Ae=Te.payload,me=typeof Ae=="function"?Ae.call(Ce,ve,me):Ae,me==null)break e;ve=Q({},ve,me);break e;case 2:Yo=!0}}G.callback!==null&&G.lane!==0&&(c.flags|=64,me=C.effects,me===null?C.effects=[G]:me.push(G))}else Ce={eventTime:Ce,lane:me,tag:G.tag,payload:G.payload,callback:G.callback,next:null},ge===null?(ce=ge=Ce,J=ve):ge=ge.next=Ce,z|=me;if(G=G.next,G===null){if(G=C.shared.pending,G===null)break;me=G,G=me.next,me.next=null,C.lastBaseUpdate=me,C.shared.pending=null}}while(!0);if(ge===null&&(J=ve),C.baseState=J,C.firstBaseUpdate=ce,C.lastBaseUpdate=ge,d=C.shared.interleaved,d!==null){C=d;do z|=C.lane,C=C.next;while(C!==d)}else R===null&&(C.shared.lanes=0);Zs|=z,c.lanes=z,c.memoizedState=ve}}function fy(c,d,g){if(c=d.effects,d.effects=null,c!==null)for(d=0;d<c.length;d++){var b=c[d],C=b.callback;if(C!==null){if(b.callback=null,b=g,typeof C!="function")throw Error(t(191,C));C.call(b)}}}var Mc={},_i=qo(Mc),Pc=qo(Mc),Oc=qo(Mc);function Js(c){if(c===Mc)throw Error(t(174));return c}function rm(c,d){switch(wt(Oc,d),wt(Pc,c),wt(_i,Mc),c=d.nodeType,c){case 9:case 11:d=(d=d.documentElement)?d.namespaceURI:yt(null,"");break;default:c=c===8?d.parentNode:d,d=c.namespaceURI||null,c=c.tagName,d=yt(d,c)}Et(_i),wt(_i,d)}function gl(){Et(_i),Et(Pc),Et(Oc)}function py(c){Js(Oc.current);var d=Js(_i.current),g=yt(d,c.type);d!==g&&(wt(Pc,c),wt(_i,g))}function im(c){Pc.current===c&&(Et(_i),Et(Pc))}var Dt=qo(0);function qd(c){for(var d=c;d!==null;){if(d.tag===13){var g=d.memoizedState;if(g!==null&&(g=g.dehydrated,g===null||g.data==="$?"||g.data==="$!"))return d}else if(d.tag===19&&d.memoizedProps.revealOrder!==void 0){if((d.flags&128)!==0)return d}else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===c)break;for(;d.sibling===null;){if(d.return===null||d.return===c)return null;d=d.return}d.sibling.return=d.return,d=d.sibling}return null}var om=[];function sm(){for(var c=0;c<om.length;c++)om[c]._workInProgressVersionPrimary=null;om.length=0}var Kd=S.ReactCurrentDispatcher,am=S.ReactCurrentBatchConfig,Qs=0,Mt=null,Jt=null,cn=null,Xd=!1,Fc=!1,Lc=0,tE=0;function In(){throw Error(t(321))}function lm(c,d){if(d===null)return!1;for(var g=0;g<d.length&&g<c.length;g++)if(!Zr(c[g],d[g]))return!1;return!0}function cm(c,d,g,b,C,R){if(Qs=R,Mt=d,d.memoizedState=null,d.updateQueue=null,d.lanes=0,Kd.current=c===null||c.memoizedState===null?oE:sE,c=g(b,C),Fc){R=0;do{if(Fc=!1,Lc=0,25<=R)throw Error(t(301));R+=1,cn=Jt=null,d.updateQueue=null,Kd.current=aE,c=g(b,C)}while(Fc)}if(Kd.current=Qd,d=Jt!==null&&Jt.next!==null,Qs=0,cn=Jt=Mt=null,Xd=!1,d)throw Error(t(300));return c}function um(){var c=Lc!==0;return Lc=0,c}function ki(){var c={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return cn===null?Mt.memoizedState=cn=c:cn=cn.next=c,cn}function Pr(){if(Jt===null){var c=Mt.alternate;c=c!==null?c.memoizedState:null}else c=Jt.next;var d=cn===null?Mt.memoizedState:cn.next;if(d!==null)cn=d,Jt=c;else{if(c===null)throw Error(t(310));Jt=c,c={memoizedState:Jt.memoizedState,baseState:Jt.baseState,baseQueue:Jt.baseQueue,queue:Jt.queue,next:null},cn===null?Mt.memoizedState=cn=c:cn=cn.next=c}return cn}function Bc(c,d){return typeof d=="function"?d(c):d}function dm(c){var d=Pr(),g=d.queue;if(g===null)throw Error(t(311));g.lastRenderedReducer=c;var b=Jt,C=b.baseQueue,R=g.pending;if(R!==null){if(C!==null){var z=C.next;C.next=R.next,R.next=z}b.baseQueue=C=R,g.pending=null}if(C!==null){R=C.next,b=b.baseState;var G=z=null,J=null,ce=R;do{var ge=ce.lane;if((Qs&ge)===ge)J!==null&&(J=J.next={lane:0,action:ce.action,hasEagerState:ce.hasEagerState,eagerState:ce.eagerState,next:null}),b=ce.hasEagerState?ce.eagerState:c(b,ce.action);else{var ve={lane:ge,action:ce.action,hasEagerState:ce.hasEagerState,eagerState:ce.eagerState,next:null};J===null?(G=J=ve,z=b):J=J.next=ve,Mt.lanes|=ge,Zs|=ge}ce=ce.next}while(ce!==null&&ce!==R);J===null?z=b:J.next=G,Zr(b,d.memoizedState)||(er=!0),d.memoizedState=b,d.baseState=z,d.baseQueue=J,g.lastRenderedState=b}if(c=g.interleaved,c!==null){C=c;do R=C.lane,Mt.lanes|=R,Zs|=R,C=C.next;while(C!==c)}else C===null&&(g.lanes=0);return[d.memoizedState,g.dispatch]}function hm(c){var d=Pr(),g=d.queue;if(g===null)throw Error(t(311));g.lastRenderedReducer=c;var b=g.dispatch,C=g.pending,R=d.memoizedState;if(C!==null){g.pending=null;var z=C=C.next;do R=c(R,z.action),z=z.next;while(z!==C);Zr(R,d.memoizedState)||(er=!0),d.memoizedState=R,d.baseQueue===null&&(d.baseState=R),g.lastRenderedState=R}return[R,b]}function my(){}function gy(c,d){var g=Mt,b=Pr(),C=d(),R=!Zr(b.memoizedState,C);if(R&&(b.memoizedState=C,er=!0),b=b.queue,fm(yy.bind(null,g,b,c),[c]),b.getSnapshot!==d||R||cn!==null&&cn.memoizedState.tag&1){if(g.flags|=2048,zc(9,xy.bind(null,g,b,C,d),void 0,null),un===null)throw Error(t(349));(Qs&30)!==0||vy(g,d,C)}return C}function vy(c,d,g){c.flags|=16384,c={getSnapshot:d,value:g},d=Mt.updateQueue,d===null?(d={lastEffect:null,stores:null},Mt.updateQueue=d,d.stores=[c]):(g=d.stores,g===null?d.stores=[c]:g.push(c))}function xy(c,d,g,b){d.value=g,d.getSnapshot=b,by(d)&&wy(c)}function yy(c,d,g){return g(function(){by(d)&&wy(c)})}function by(c){var d=c.getSnapshot;c=c.value;try{var g=d();return!Zr(c,g)}catch{return!0}}function wy(c){var d=ao(c,1);d!==null&&ii(d,c,1,-1)}function _y(c){var d=ki();return typeof c=="function"&&(c=c()),d.memoizedState=d.baseState=c,c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Bc,lastRenderedState:c},d.queue=c,c=c.dispatch=iE.bind(null,Mt,c),[d.memoizedState,c]}function zc(c,d,g,b){return c={tag:c,create:d,destroy:g,deps:b,next:null},d=Mt.updateQueue,d===null?(d={lastEffect:null,stores:null},Mt.updateQueue=d,d.lastEffect=c.next=c):(g=d.lastEffect,g===null?d.lastEffect=c.next=c:(b=g.next,g.next=c,c.next=b,d.lastEffect=c)),c}function ky(){return Pr().memoizedState}function Yd(c,d,g,b){var C=ki();Mt.flags|=c,C.memoizedState=zc(1|d,g,void 0,b===void 0?null:b)}function Jd(c,d,g,b){var C=Pr();b=b===void 0?null:b;var R=void 0;if(Jt!==null){var z=Jt.memoizedState;if(R=z.destroy,b!==null&&lm(b,z.deps)){C.memoizedState=zc(d,g,R,b);return}}Mt.flags|=c,C.memoizedState=zc(1|d,g,R,b)}function Cy(c,d){return Yd(8390656,8,c,d)}function fm(c,d){return Jd(2048,8,c,d)}function Ey(c,d){return Jd(4,2,c,d)}function Ny(c,d){return Jd(4,4,c,d)}function Sy(c,d){if(typeof d=="function")return c=c(),d(c),function(){d(null)};if(d!=null)return c=c(),d.current=c,function(){d.current=null}}function Iy(c,d,g){return g=g!=null?g.concat([c]):null,Jd(4,4,Sy.bind(null,d,c),g)}function pm(){}function Ay(c,d){var g=Pr();d=d===void 0?null:d;var b=g.memoizedState;return b!==null&&d!==null&&lm(d,b[1])?b[0]:(g.memoizedState=[c,d],c)}function Ry(c,d){var g=Pr();d=d===void 0?null:d;var b=g.memoizedState;return b!==null&&d!==null&&lm(d,b[1])?b[0]:(c=c(),g.memoizedState=[c,d],c)}function jy(c,d,g){return(Qs&21)===0?(c.baseState&&(c.baseState=!1,er=!0),c.memoizedState=g):(Zr(g,d)||(g=Vs(),Mt.lanes|=g,Zs|=g,c.baseState=!0),d)}function nE(c,d){var g=rt;rt=g!==0&&4>g?g:4,c(!0);var b=am.transition;am.transition={};try{c(!1),d()}finally{rt=g,am.transition=b}}function Ty(){return Pr().memoizedState}function rE(c,d,g){var b=ts(c);if(g={lane:b,action:g,hasEagerState:!1,eagerState:null,next:null},Dy(c))My(d,g);else if(g=uy(c,d,g,b),g!==null){var C=Gn();ii(g,c,b,C),Py(g,d,b)}}function iE(c,d,g){var b=ts(c),C={lane:b,action:g,hasEagerState:!1,eagerState:null,next:null};if(Dy(c))My(d,C);else{var R=c.alternate;if(c.lanes===0&&(R===null||R.lanes===0)&&(R=d.lastRenderedReducer,R!==null))try{var z=d.lastRenderedState,G=R(z,g);if(C.hasEagerState=!0,C.eagerState=G,Zr(G,z)){var J=d.interleaved;J===null?(C.next=C,tm(d)):(C.next=J.next,J.next=C),d.interleaved=C;return}}catch{}finally{}g=uy(c,d,C,b),g!==null&&(C=Gn(),ii(g,c,b,C),Py(g,d,b))}}function Dy(c){var d=c.alternate;return c===Mt||d!==null&&d===Mt}function My(c,d){Fc=Xd=!0;var g=c.pending;g===null?d.next=d:(d.next=g.next,g.next=d),c.pending=d}function Py(c,d,g){if((g&4194240)!==0){var b=d.lanes;b&=c.pendingLanes,g|=b,d.lanes=g,Bo(c,g)}}var Qd={readContext:Mr,useCallback:In,useContext:In,useEffect:In,useImperativeHandle:In,useInsertionEffect:In,useLayoutEffect:In,useMemo:In,useReducer:In,useRef:In,useState:In,useDebugValue:In,useDeferredValue:In,useTransition:In,useMutableSource:In,useSyncExternalStore:In,useId:In,unstable_isNewReconciler:!1},oE={readContext:Mr,useCallback:function(c,d){return ki().memoizedState=[c,d===void 0?null:d],c},useContext:Mr,useEffect:Cy,useImperativeHandle:function(c,d,g){return g=g!=null?g.concat([c]):null,Yd(4194308,4,Sy.bind(null,d,c),g)},useLayoutEffect:function(c,d){return Yd(4194308,4,c,d)},useInsertionEffect:function(c,d){return Yd(4,2,c,d)},useMemo:function(c,d){var g=ki();return d=d===void 0?null:d,c=c(),g.memoizedState=[c,d],c},useReducer:function(c,d,g){var b=ki();return d=g!==void 0?g(d):d,b.memoizedState=b.baseState=d,c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:c,lastRenderedState:d},b.queue=c,c=c.dispatch=rE.bind(null,Mt,c),[b.memoizedState,c]},useRef:function(c){var d=ki();return c={current:c},d.memoizedState=c},useState:_y,useDebugValue:pm,useDeferredValue:function(c){return ki().memoizedState=c},useTransition:function(){var c=_y(!1),d=c[0];return c=nE.bind(null,c[1]),ki().memoizedState=c,[d,c]},useMutableSource:function(){},useSyncExternalStore:function(c,d,g){var b=Mt,C=ki();if(It){if(g===void 0)throw Error(t(407));g=g()}else{if(g=d(),un===null)throw Error(t(349));(Qs&30)!==0||vy(b,d,g)}C.memoizedState=g;var R={value:g,getSnapshot:d};return C.queue=R,Cy(yy.bind(null,b,R,c),[c]),b.flags|=2048,zc(9,xy.bind(null,b,R,g,d),void 0,null),g},useId:function(){var c=ki(),d=un.identifierPrefix;if(It){var g=so,b=oo;g=(b&~(1<<32-Un(b)-1)).toString(32)+g,d=":"+d+"R"+g,g=Lc++,0<g&&(d+="H"+g.toString(32)),d+=":"}else g=tE++,d=":"+d+"r"+g.toString(32)+":";return c.memoizedState=d},unstable_isNewReconciler:!1},sE={readContext:Mr,useCallback:Ay,useContext:Mr,useEffect:fm,useImperativeHandle:Iy,useInsertionEffect:Ey,useLayoutEffect:Ny,useMemo:Ry,useReducer:dm,useRef:ky,useState:function(){return dm(Bc)},useDebugValue:pm,useDeferredValue:function(c){var d=Pr();return jy(d,Jt.memoizedState,c)},useTransition:function(){var c=dm(Bc)[0],d=Pr().memoizedState;return[c,d]},useMutableSource:my,useSyncExternalStore:gy,useId:Ty,unstable_isNewReconciler:!1},aE={readContext:Mr,useCallback:Ay,useContext:Mr,useEffect:fm,useImperativeHandle:Iy,useInsertionEffect:Ey,useLayoutEffect:Ny,useMemo:Ry,useReducer:hm,useRef:ky,useState:function(){return hm(Bc)},useDebugValue:pm,useDeferredValue:function(c){var d=Pr();return Jt===null?d.memoizedState=c:jy(d,Jt.memoizedState,c)},useTransition:function(){var c=hm(Bc)[0],d=Pr().memoizedState;return[c,d]},useMutableSource:my,useSyncExternalStore:gy,useId:Ty,unstable_isNewReconciler:!1};function ti(c,d){if(c&&c.defaultProps){d=Q({},d),c=c.defaultProps;for(var g in c)d[g]===void 0&&(d[g]=c[g]);return d}return d}function mm(c,d,g,b){d=c.memoizedState,g=g(b,d),g=g==null?d:Q({},d,g),c.memoizedState=g,c.lanes===0&&(c.updateQueue.baseState=g)}var Zd={isMounted:function(c){return(c=c._reactInternals)?$r(c)===c:!1},enqueueSetState:function(c,d,g){c=c._reactInternals;var b=Gn(),C=ts(c),R=lo(b,C);R.payload=d,g!=null&&(R.callback=g),d=Jo(c,R,C),d!==null&&(ii(d,c,C,b),Gd(d,c,C))},enqueueReplaceState:function(c,d,g){c=c._reactInternals;var b=Gn(),C=ts(c),R=lo(b,C);R.tag=1,R.payload=d,g!=null&&(R.callback=g),d=Jo(c,R,C),d!==null&&(ii(d,c,C,b),Gd(d,c,C))},enqueueForceUpdate:function(c,d){c=c._reactInternals;var g=Gn(),b=ts(c),C=lo(g,b);C.tag=2,d!=null&&(C.callback=d),d=Jo(c,C,b),d!==null&&(ii(d,c,b,g),Gd(d,c,b))}};function Oy(c,d,g,b,C,R,z){return c=c.stateNode,typeof c.shouldComponentUpdate=="function"?c.shouldComponentUpdate(b,R,z):d.prototype&&d.prototype.isPureReactComponent?!Nc(g,b)||!Nc(C,R):!0}function Fy(c,d,g){var b=!1,C=Ko,R=d.contextType;return typeof R=="object"&&R!==null?R=Mr(R):(C=Zn(d)?qs:Sn.current,b=d.contextTypes,R=(b=b!=null)?cl(c,C):Ko),d=new d(g,R),c.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=Zd,c.stateNode=d,d._reactInternals=c,b&&(c=c.stateNode,c.__reactInternalMemoizedUnmaskedChildContext=C,c.__reactInternalMemoizedMaskedChildContext=R),d}function Ly(c,d,g,b){c=d.state,typeof d.componentWillReceiveProps=="function"&&d.componentWillReceiveProps(g,b),typeof d.UNSAFE_componentWillReceiveProps=="function"&&d.UNSAFE_componentWillReceiveProps(g,b),d.state!==c&&Zd.enqueueReplaceState(d,d.state,null)}function gm(c,d,g,b){var C=c.stateNode;C.props=g,C.state=c.memoizedState,C.refs={},nm(c);var R=d.contextType;typeof R=="object"&&R!==null?C.context=Mr(R):(R=Zn(d)?qs:Sn.current,C.context=cl(c,R)),C.state=c.memoizedState,R=d.getDerivedStateFromProps,typeof R=="function"&&(mm(c,d,R,g),C.state=c.memoizedState),typeof d.getDerivedStateFromProps=="function"||typeof C.getSnapshotBeforeUpdate=="function"||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(d=C.state,typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount(),d!==C.state&&Zd.enqueueReplaceState(C,C.state,null),$d(c,g,C,b),C.state=c.memoizedState),typeof C.componentDidMount=="function"&&(c.flags|=4194308)}function vl(c,d){try{var g="",b=d;do g+=be(b),b=b.return;while(b);var C=g}catch(R){C=`
Error generating stack: `+R.message+`
`+R.stack}return{value:c,source:d,stack:C,digest:null}}function vm(c,d,g){return{value:c,source:null,stack:g??null,digest:d??null}}function xm(c,d){try{console.error(d.value)}catch(g){setTimeout(function(){throw g})}}var lE=typeof WeakMap=="function"?WeakMap:Map;function By(c,d,g){g=lo(-1,g),g.tag=3,g.payload={element:null};var b=d.value;return g.callback=function(){sh||(sh=!0,Dm=b),xm(c,d)},g}function zy(c,d,g){g=lo(-1,g),g.tag=3;var b=c.type.getDerivedStateFromError;if(typeof b=="function"){var C=d.value;g.payload=function(){return b(C)},g.callback=function(){xm(c,d)}}var R=c.stateNode;return R!==null&&typeof R.componentDidCatch=="function"&&(g.callback=function(){xm(c,d),typeof b!="function"&&(Zo===null?Zo=new Set([this]):Zo.add(this));var z=d.stack;this.componentDidCatch(d.value,{componentStack:z!==null?z:""})}),g}function Wy(c,d,g){var b=c.pingCache;if(b===null){b=c.pingCache=new lE;var C=new Set;b.set(d,C)}else C=b.get(d),C===void 0&&(C=new Set,b.set(d,C));C.has(g)||(C.add(g),c=_E.bind(null,c,d,g),d.then(c,c))}function Vy(c){do{var d;if((d=c.tag===13)&&(d=c.memoizedState,d=d!==null?d.dehydrated!==null:!0),d)return c;c=c.return}while(c!==null);return null}function Uy(c,d,g,b,C){return(c.mode&1)===0?(c===d?c.flags|=65536:(c.flags|=128,g.flags|=131072,g.flags&=-52805,g.tag===1&&(g.alternate===null?g.tag=17:(d=lo(-1,1),d.tag=2,Jo(g,d,1))),g.lanes|=1),c):(c.flags|=65536,c.lanes=C,c)}var cE=S.ReactCurrentOwner,er=!1;function Hn(c,d,g,b){d.child=c===null?cy(d,null,g,b):fl(d,c.child,g,b)}function Hy(c,d,g,b,C){g=g.render;var R=d.ref;return ml(d,C),b=cm(c,d,g,b,R,C),g=um(),c!==null&&!er?(d.updateQueue=c.updateQueue,d.flags&=-2053,c.lanes&=~C,co(c,d,C)):(It&&g&&$p(d),d.flags|=1,Hn(c,d,b,C),d.child)}function Gy(c,d,g,b,C){if(c===null){var R=g.type;return typeof R=="function"&&!zm(R)&&R.defaultProps===void 0&&g.compare===null&&g.defaultProps===void 0?(d.tag=15,d.type=R,$y(c,d,R,b,C)):(c=hh(g.type,null,b,d,d.mode,C),c.ref=d.ref,c.return=d,d.child=c)}if(R=c.child,(c.lanes&C)===0){var z=R.memoizedProps;if(g=g.compare,g=g!==null?g:Nc,g(z,b)&&c.ref===d.ref)return co(c,d,C)}return d.flags|=1,c=rs(R,b),c.ref=d.ref,c.return=d,d.child=c}function $y(c,d,g,b,C){if(c!==null){var R=c.memoizedProps;if(Nc(R,b)&&c.ref===d.ref)if(er=!1,d.pendingProps=b=R,(c.lanes&C)!==0)(c.flags&131072)!==0&&(er=!0);else return d.lanes=c.lanes,co(c,d,C)}return ym(c,d,g,b,C)}function qy(c,d,g){var b=d.pendingProps,C=b.children,R=c!==null?c.memoizedState:null;if(b.mode==="hidden")if((d.mode&1)===0)d.memoizedState={baseLanes:0,cachePool:null,transitions:null},wt(yl,yr),yr|=g;else{if((g&1073741824)===0)return c=R!==null?R.baseLanes|g:g,d.lanes=d.childLanes=1073741824,d.memoizedState={baseLanes:c,cachePool:null,transitions:null},d.updateQueue=null,wt(yl,yr),yr|=c,null;d.memoizedState={baseLanes:0,cachePool:null,transitions:null},b=R!==null?R.baseLanes:g,wt(yl,yr),yr|=b}else R!==null?(b=R.baseLanes|g,d.memoizedState=null):b=g,wt(yl,yr),yr|=b;return Hn(c,d,C,g),d.child}function Ky(c,d){var g=d.ref;(c===null&&g!==null||c!==null&&c.ref!==g)&&(d.flags|=512,d.flags|=2097152)}function ym(c,d,g,b,C){var R=Zn(g)?qs:Sn.current;return R=cl(d,R),ml(d,C),g=cm(c,d,g,b,R,C),b=um(),c!==null&&!er?(d.updateQueue=c.updateQueue,d.flags&=-2053,c.lanes&=~C,co(c,d,C)):(It&&b&&$p(d),d.flags|=1,Hn(c,d,g,C),d.child)}function Xy(c,d,g,b,C){if(Zn(g)){var R=!0;Fd(d)}else R=!1;if(ml(d,C),d.stateNode===null)th(c,d),Fy(d,g,b),gm(d,g,b,C),b=!0;else if(c===null){var z=d.stateNode,G=d.memoizedProps;z.props=G;var J=z.context,ce=g.contextType;typeof ce=="object"&&ce!==null?ce=Mr(ce):(ce=Zn(g)?qs:Sn.current,ce=cl(d,ce));var ge=g.getDerivedStateFromProps,ve=typeof ge=="function"||typeof z.getSnapshotBeforeUpdate=="function";ve||typeof z.UNSAFE_componentWillReceiveProps!="function"&&typeof z.componentWillReceiveProps!="function"||(G!==b||J!==ce)&&Ly(d,z,b,ce),Yo=!1;var me=d.memoizedState;z.state=me,$d(d,b,z,C),J=d.memoizedState,G!==b||me!==J||Qn.current||Yo?(typeof ge=="function"&&(mm(d,g,ge,b),J=d.memoizedState),(G=Yo||Oy(d,g,G,b,me,J,ce))?(ve||typeof z.UNSAFE_componentWillMount!="function"&&typeof z.componentWillMount!="function"||(typeof z.componentWillMount=="function"&&z.componentWillMount(),typeof z.UNSAFE_componentWillMount=="function"&&z.UNSAFE_componentWillMount()),typeof z.componentDidMount=="function"&&(d.flags|=4194308)):(typeof z.componentDidMount=="function"&&(d.flags|=4194308),d.memoizedProps=b,d.memoizedState=J),z.props=b,z.state=J,z.context=ce,b=G):(typeof z.componentDidMount=="function"&&(d.flags|=4194308),b=!1)}else{z=d.stateNode,dy(c,d),G=d.memoizedProps,ce=d.type===d.elementType?G:ti(d.type,G),z.props=ce,ve=d.pendingProps,me=z.context,J=g.contextType,typeof J=="object"&&J!==null?J=Mr(J):(J=Zn(g)?qs:Sn.current,J=cl(d,J));var Ce=g.getDerivedStateFromProps;(ge=typeof Ce=="function"||typeof z.getSnapshotBeforeUpdate=="function")||typeof z.UNSAFE_componentWillReceiveProps!="function"&&typeof z.componentWillReceiveProps!="function"||(G!==ve||me!==J)&&Ly(d,z,b,J),Yo=!1,me=d.memoizedState,z.state=me,$d(d,b,z,C);var Ae=d.memoizedState;G!==ve||me!==Ae||Qn.current||Yo?(typeof Ce=="function"&&(mm(d,g,Ce,b),Ae=d.memoizedState),(ce=Yo||Oy(d,g,ce,b,me,Ae,J)||!1)?(ge||typeof z.UNSAFE_componentWillUpdate!="function"&&typeof z.componentWillUpdate!="function"||(typeof z.componentWillUpdate=="function"&&z.componentWillUpdate(b,Ae,J),typeof z.UNSAFE_componentWillUpdate=="function"&&z.UNSAFE_componentWillUpdate(b,Ae,J)),typeof z.componentDidUpdate=="function"&&(d.flags|=4),typeof z.getSnapshotBeforeUpdate=="function"&&(d.flags|=1024)):(typeof z.componentDidUpdate!="function"||G===c.memoizedProps&&me===c.memoizedState||(d.flags|=4),typeof z.getSnapshotBeforeUpdate!="function"||G===c.memoizedProps&&me===c.memoizedState||(d.flags|=1024),d.memoizedProps=b,d.memoizedState=Ae),z.props=b,z.state=Ae,z.context=J,b=ce):(typeof z.componentDidUpdate!="function"||G===c.memoizedProps&&me===c.memoizedState||(d.flags|=4),typeof z.getSnapshotBeforeUpdate!="function"||G===c.memoizedProps&&me===c.memoizedState||(d.flags|=1024),b=!1)}return bm(c,d,g,b,R,C)}function bm(c,d,g,b,C,R){Ky(c,d);var z=(d.flags&128)!==0;if(!b&&!z)return C&&ey(d,g,!1),co(c,d,R);b=d.stateNode,cE.current=d;var G=z&&typeof g.getDerivedStateFromError!="function"?null:b.render();return d.flags|=1,c!==null&&z?(d.child=fl(d,c.child,null,R),d.child=fl(d,null,G,R)):Hn(c,d,G,R),d.memoizedState=b.state,C&&ey(d,g,!0),d.child}function Yy(c){var d=c.stateNode;d.pendingContext?Qx(c,d.pendingContext,d.pendingContext!==d.context):d.context&&Qx(c,d.context,!1),rm(c,d.containerInfo)}function Jy(c,d,g,b,C){return hl(),Yp(C),d.flags|=256,Hn(c,d,g,b),d.child}var wm={dehydrated:null,treeContext:null,retryLane:0};function _m(c){return{baseLanes:c,cachePool:null,transitions:null}}function Qy(c,d,g){var b=d.pendingProps,C=Dt.current,R=!1,z=(d.flags&128)!==0,G;if((G=z)||(G=c!==null&&c.memoizedState===null?!1:(C&2)!==0),G?(R=!0,d.flags&=-129):(c===null||c.memoizedState!==null)&&(C|=1),wt(Dt,C&1),c===null)return Xp(d),c=d.memoizedState,c!==null&&(c=c.dehydrated,c!==null)?((d.mode&1)===0?d.lanes=1:c.data==="$!"?d.lanes=8:d.lanes=1073741824,null):(z=b.children,c=b.fallback,R?(b=d.mode,R=d.child,z={mode:"hidden",children:z},(b&1)===0&&R!==null?(R.childLanes=0,R.pendingProps=z):R=fh(z,b,0,null),c=ra(c,b,g,null),R.return=d,c.return=d,R.sibling=c,d.child=R,d.child.memoizedState=_m(g),d.memoizedState=wm,c):km(d,z));if(C=c.memoizedState,C!==null&&(G=C.dehydrated,G!==null))return uE(c,d,z,b,G,C,g);if(R){R=b.fallback,z=d.mode,C=c.child,G=C.sibling;var J={mode:"hidden",children:b.children};return(z&1)===0&&d.child!==C?(b=d.child,b.childLanes=0,b.pendingProps=J,d.deletions=null):(b=rs(C,J),b.subtreeFlags=C.subtreeFlags&14680064),G!==null?R=rs(G,R):(R=ra(R,z,g,null),R.flags|=2),R.return=d,b.return=d,b.sibling=R,d.child=b,b=R,R=d.child,z=c.child.memoizedState,z=z===null?_m(g):{baseLanes:z.baseLanes|g,cachePool:null,transitions:z.transitions},R.memoizedState=z,R.childLanes=c.childLanes&~g,d.memoizedState=wm,b}return R=c.child,c=R.sibling,b=rs(R,{mode:"visible",children:b.children}),(d.mode&1)===0&&(b.lanes=g),b.return=d,b.sibling=null,c!==null&&(g=d.deletions,g===null?(d.deletions=[c],d.flags|=16):g.push(c)),d.child=b,d.memoizedState=null,b}function km(c,d){return d=fh({mode:"visible",children:d},c.mode,0,null),d.return=c,c.child=d}function eh(c,d,g,b){return b!==null&&Yp(b),fl(d,c.child,null,g),c=km(d,d.pendingProps.children),c.flags|=2,d.memoizedState=null,c}function uE(c,d,g,b,C,R,z){if(g)return d.flags&256?(d.flags&=-257,b=vm(Error(t(422))),eh(c,d,z,b)):d.memoizedState!==null?(d.child=c.child,d.flags|=128,null):(R=b.fallback,C=d.mode,b=fh({mode:"visible",children:b.children},C,0,null),R=ra(R,C,z,null),R.flags|=2,b.return=d,R.return=d,b.sibling=R,d.child=b,(d.mode&1)!==0&&fl(d,c.child,null,z),d.child.memoizedState=_m(z),d.memoizedState=wm,R);if((d.mode&1)===0)return eh(c,d,z,null);if(C.data==="$!"){if(b=C.nextSibling&&C.nextSibling.dataset,b)var G=b.dgst;return b=G,R=Error(t(419)),b=vm(R,b,void 0),eh(c,d,z,b)}if(G=(z&c.childLanes)!==0,er||G){if(b=un,b!==null){switch(z&-z){case 4:C=2;break;case 16:C=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:C=32;break;case 536870912:C=268435456;break;default:C=0}C=(C&(b.suspendedLanes|z))!==0?0:C,C!==0&&C!==R.retryLane&&(R.retryLane=C,ao(c,C),ii(b,c,C,-1))}return Bm(),b=vm(Error(t(421))),eh(c,d,z,b)}return C.data==="$?"?(d.flags|=128,d.child=c.child,d=kE.bind(null,c),C._reactRetry=d,null):(c=R.treeContext,xr=$o(C.nextSibling),vr=d,It=!0,ei=null,c!==null&&(Tr[Dr++]=oo,Tr[Dr++]=so,Tr[Dr++]=Ks,oo=c.id,so=c.overflow,Ks=d),d=km(d,b.children),d.flags|=4096,d)}function Zy(c,d,g){c.lanes|=d;var b=c.alternate;b!==null&&(b.lanes|=d),em(c.return,d,g)}function Cm(c,d,g,b,C){var R=c.memoizedState;R===null?c.memoizedState={isBackwards:d,rendering:null,renderingStartTime:0,last:b,tail:g,tailMode:C}:(R.isBackwards=d,R.rendering=null,R.renderingStartTime=0,R.last=b,R.tail=g,R.tailMode=C)}function e1(c,d,g){var b=d.pendingProps,C=b.revealOrder,R=b.tail;if(Hn(c,d,b.children,g),b=Dt.current,(b&2)!==0)b=b&1|2,d.flags|=128;else{if(c!==null&&(c.flags&128)!==0)e:for(c=d.child;c!==null;){if(c.tag===13)c.memoizedState!==null&&Zy(c,g,d);else if(c.tag===19)Zy(c,g,d);else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===d)break e;for(;c.sibling===null;){if(c.return===null||c.return===d)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}b&=1}if(wt(Dt,b),(d.mode&1)===0)d.memoizedState=null;else switch(C){case"forwards":for(g=d.child,C=null;g!==null;)c=g.alternate,c!==null&&qd(c)===null&&(C=g),g=g.sibling;g=C,g===null?(C=d.child,d.child=null):(C=g.sibling,g.sibling=null),Cm(d,!1,C,g,R);break;case"backwards":for(g=null,C=d.child,d.child=null;C!==null;){if(c=C.alternate,c!==null&&qd(c)===null){d.child=C;break}c=C.sibling,C.sibling=g,g=C,C=c}Cm(d,!0,g,null,R);break;case"together":Cm(d,!1,null,null,void 0);break;default:d.memoizedState=null}return d.child}function th(c,d){(d.mode&1)===0&&c!==null&&(c.alternate=null,d.alternate=null,d.flags|=2)}function co(c,d,g){if(c!==null&&(d.dependencies=c.dependencies),Zs|=d.lanes,(g&d.childLanes)===0)return null;if(c!==null&&d.child!==c.child)throw Error(t(153));if(d.child!==null){for(c=d.child,g=rs(c,c.pendingProps),d.child=g,g.return=d;c.sibling!==null;)c=c.sibling,g=g.sibling=rs(c,c.pendingProps),g.return=d;g.sibling=null}return d.child}function dE(c,d,g){switch(d.tag){case 3:Yy(d),hl();break;case 5:py(d);break;case 1:Zn(d.type)&&Fd(d);break;case 4:rm(d,d.stateNode.containerInfo);break;case 10:var b=d.type._context,C=d.memoizedProps.value;wt(Ud,b._currentValue),b._currentValue=C;break;case 13:if(b=d.memoizedState,b!==null)return b.dehydrated!==null?(wt(Dt,Dt.current&1),d.flags|=128,null):(g&d.child.childLanes)!==0?Qy(c,d,g):(wt(Dt,Dt.current&1),c=co(c,d,g),c!==null?c.sibling:null);wt(Dt,Dt.current&1);break;case 19:if(b=(g&d.childLanes)!==0,(c.flags&128)!==0){if(b)return e1(c,d,g);d.flags|=128}if(C=d.memoizedState,C!==null&&(C.rendering=null,C.tail=null,C.lastEffect=null),wt(Dt,Dt.current),b)break;return null;case 22:case 23:return d.lanes=0,qy(c,d,g)}return co(c,d,g)}var t1,Em,n1,r1;t1=function(c,d){for(var g=d.child;g!==null;){if(g.tag===5||g.tag===6)c.appendChild(g.stateNode);else if(g.tag!==4&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===d)break;for(;g.sibling===null;){if(g.return===null||g.return===d)return;g=g.return}g.sibling.return=g.return,g=g.sibling}},Em=function(){},n1=function(c,d,g,b){var C=c.memoizedProps;if(C!==b){c=d.stateNode,Js(_i.current);var R=null;switch(g){case"input":C=dt(c,C),b=dt(c,b),R=[];break;case"select":C=Q({},C,{value:void 0}),b=Q({},b,{value:void 0}),R=[];break;case"textarea":C=Kn(c,C),b=Kn(c,b),R=[];break;default:typeof C.onClick!="function"&&typeof b.onClick=="function"&&(c.onclick=Md)}oc(g,b);var z;g=null;for(ce in C)if(!b.hasOwnProperty(ce)&&C.hasOwnProperty(ce)&&C[ce]!=null)if(ce==="style"){var G=C[ce];for(z in G)G.hasOwnProperty(z)&&(g||(g={}),g[z]="")}else ce!=="dangerouslySetInnerHTML"&&ce!=="children"&&ce!=="suppressContentEditableWarning"&&ce!=="suppressHydrationWarning"&&ce!=="autoFocus"&&(i.hasOwnProperty(ce)?R||(R=[]):(R=R||[]).push(ce,null));for(ce in b){var J=b[ce];if(G=C?.[ce],b.hasOwnProperty(ce)&&J!==G&&(J!=null||G!=null))if(ce==="style")if(G){for(z in G)!G.hasOwnProperty(z)||J&&J.hasOwnProperty(z)||(g||(g={}),g[z]="");for(z in J)J.hasOwnProperty(z)&&G[z]!==J[z]&&(g||(g={}),g[z]=J[z])}else g||(R||(R=[]),R.push(ce,g)),g=J;else ce==="dangerouslySetInnerHTML"?(J=J?J.__html:void 0,G=G?G.__html:void 0,J!=null&&G!==J&&(R=R||[]).push(ce,J)):ce==="children"?typeof J!="string"&&typeof J!="number"||(R=R||[]).push(ce,""+J):ce!=="suppressContentEditableWarning"&&ce!=="suppressHydrationWarning"&&(i.hasOwnProperty(ce)?(J!=null&&ce==="onScroll"&&Ct("scroll",c),R||G===J||(R=[])):(R=R||[]).push(ce,J))}g&&(R=R||[]).push("style",g);var ce=R;(d.updateQueue=ce)&&(d.flags|=4)}},r1=function(c,d,g,b){g!==b&&(d.flags|=4)};function Wc(c,d){if(!It)switch(c.tailMode){case"hidden":d=c.tail;for(var g=null;d!==null;)d.alternate!==null&&(g=d),d=d.sibling;g===null?c.tail=null:g.sibling=null;break;case"collapsed":g=c.tail;for(var b=null;g!==null;)g.alternate!==null&&(b=g),g=g.sibling;b===null?d||c.tail===null?c.tail=null:c.tail.sibling=null:b.sibling=null}}function An(c){var d=c.alternate!==null&&c.alternate.child===c.child,g=0,b=0;if(d)for(var C=c.child;C!==null;)g|=C.lanes|C.childLanes,b|=C.subtreeFlags&14680064,b|=C.flags&14680064,C.return=c,C=C.sibling;else for(C=c.child;C!==null;)g|=C.lanes|C.childLanes,b|=C.subtreeFlags,b|=C.flags,C.return=c,C=C.sibling;return c.subtreeFlags|=b,c.childLanes=g,d}function hE(c,d,g){var b=d.pendingProps;switch(qp(d),d.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return An(d),null;case 1:return Zn(d.type)&&Od(),An(d),null;case 3:return b=d.stateNode,gl(),Et(Qn),Et(Sn),sm(),b.pendingContext&&(b.context=b.pendingContext,b.pendingContext=null),(c===null||c.child===null)&&(Wd(d)?d.flags|=4:c===null||c.memoizedState.isDehydrated&&(d.flags&256)===0||(d.flags|=1024,ei!==null&&(Om(ei),ei=null))),Em(c,d),An(d),null;case 5:im(d);var C=Js(Oc.current);if(g=d.type,c!==null&&d.stateNode!=null)n1(c,d,g,b,C),c.ref!==d.ref&&(d.flags|=512,d.flags|=2097152);else{if(!b){if(d.stateNode===null)throw Error(t(166));return An(d),null}if(c=Js(_i.current),Wd(d)){b=d.stateNode,g=d.type;var R=d.memoizedProps;switch(b[wi]=d,b[jc]=R,c=(d.mode&1)!==0,g){case"dialog":Ct("cancel",b),Ct("close",b);break;case"iframe":case"object":case"embed":Ct("load",b);break;case"video":case"audio":for(C=0;C<Ic.length;C++)Ct(Ic[C],b);break;case"source":Ct("error",b);break;case"img":case"image":case"link":Ct("error",b),Ct("load",b);break;case"details":Ct("toggle",b);break;case"input":ht(b,R),Ct("invalid",b);break;case"select":b._wrapperState={wasMultiple:!!R.multiple},Ct("invalid",b);break;case"textarea":Nn(b,R),Ct("invalid",b)}oc(g,R),C=null;for(var z in R)if(R.hasOwnProperty(z)){var G=R[z];z==="children"?typeof G=="string"?b.textContent!==G&&(R.suppressHydrationWarning!==!0&&Dd(b.textContent,G,c),C=["children",G]):typeof G=="number"&&b.textContent!==""+G&&(R.suppressHydrationWarning!==!0&&Dd(b.textContent,G,c),C=["children",""+G]):i.hasOwnProperty(z)&&G!=null&&z==="onScroll"&&Ct("scroll",b)}switch(g){case"input":He(b),Wn(b,R,!0);break;case"textarea":He(b),Vn(b);break;case"select":case"option":break;default:typeof R.onClick=="function"&&(b.onclick=Md)}b=C,d.updateQueue=b,b!==null&&(d.flags|=4)}else{z=C.nodeType===9?C:C.ownerDocument,c==="http://www.w3.org/1999/xhtml"&&(c=jt(g)),c==="http://www.w3.org/1999/xhtml"?g==="script"?(c=z.createElement("div"),c.innerHTML="<script><\/script>",c=c.removeChild(c.firstChild)):typeof b.is=="string"?c=z.createElement(g,{is:b.is}):(c=z.createElement(g),g==="select"&&(z=c,b.multiple?z.multiple=!0:b.size&&(z.size=b.size))):c=z.createElementNS(c,g),c[wi]=d,c[jc]=b,t1(c,d,!1,!1),d.stateNode=c;e:{switch(z=sc(g,b),g){case"dialog":Ct("cancel",c),Ct("close",c),C=b;break;case"iframe":case"object":case"embed":Ct("load",c),C=b;break;case"video":case"audio":for(C=0;C<Ic.length;C++)Ct(Ic[C],c);C=b;break;case"source":Ct("error",c),C=b;break;case"img":case"image":case"link":Ct("error",c),Ct("load",c),C=b;break;case"details":Ct("toggle",c),C=b;break;case"input":ht(c,b),C=dt(c,b),Ct("invalid",c);break;case"option":C=b;break;case"select":c._wrapperState={wasMultiple:!!b.multiple},C=Q({},b,{value:void 0}),Ct("invalid",c);break;case"textarea":Nn(c,b),C=Kn(c,b),Ct("invalid",c);break;default:C=b}oc(g,C),G=C;for(R in G)if(G.hasOwnProperty(R)){var J=G[R];R==="style"?Ki(c,J):R==="dangerouslySetInnerHTML"?(J=J?J.__html:void 0,J!=null&&Hi(c,J)):R==="children"?typeof J=="string"?(g!=="textarea"||J!=="")&&pi(c,J):typeof J=="number"&&pi(c,""+J):R!=="suppressContentEditableWarning"&&R!=="suppressHydrationWarning"&&R!=="autoFocus"&&(i.hasOwnProperty(R)?J!=null&&R==="onScroll"&&Ct("scroll",c):J!=null&&N(c,R,J,z))}switch(g){case"input":He(c),Wn(c,b,!1);break;case"textarea":He(c),Vn(c);break;case"option":b.value!=null&&c.setAttribute("value",""+Ne(b.value));break;case"select":c.multiple=!!b.multiple,R=b.value,R!=null?Xt(c,!!b.multiple,R,!1):b.defaultValue!=null&&Xt(c,!!b.multiple,b.defaultValue,!0);break;default:typeof C.onClick=="function"&&(c.onclick=Md)}switch(g){case"button":case"input":case"select":case"textarea":b=!!b.autoFocus;break e;case"img":b=!0;break e;default:b=!1}}b&&(d.flags|=4)}d.ref!==null&&(d.flags|=512,d.flags|=2097152)}return An(d),null;case 6:if(c&&d.stateNode!=null)r1(c,d,c.memoizedProps,b);else{if(typeof b!="string"&&d.stateNode===null)throw Error(t(166));if(g=Js(Oc.current),Js(_i.current),Wd(d)){if(b=d.stateNode,g=d.memoizedProps,b[wi]=d,(R=b.nodeValue!==g)&&(c=vr,c!==null))switch(c.tag){case 3:Dd(b.nodeValue,g,(c.mode&1)!==0);break;case 5:c.memoizedProps.suppressHydrationWarning!==!0&&Dd(b.nodeValue,g,(c.mode&1)!==0)}R&&(d.flags|=4)}else b=(g.nodeType===9?g:g.ownerDocument).createTextNode(b),b[wi]=d,d.stateNode=b}return An(d),null;case 13:if(Et(Dt),b=d.memoizedState,c===null||c.memoizedState!==null&&c.memoizedState.dehydrated!==null){if(It&&xr!==null&&(d.mode&1)!==0&&(d.flags&128)===0)sy(),hl(),d.flags|=98560,R=!1;else if(R=Wd(d),b!==null&&b.dehydrated!==null){if(c===null){if(!R)throw Error(t(318));if(R=d.memoizedState,R=R!==null?R.dehydrated:null,!R)throw Error(t(317));R[wi]=d}else hl(),(d.flags&128)===0&&(d.memoizedState=null),d.flags|=4;An(d),R=!1}else ei!==null&&(Om(ei),ei=null),R=!0;if(!R)return d.flags&65536?d:null}return(d.flags&128)!==0?(d.lanes=g,d):(b=b!==null,b!==(c!==null&&c.memoizedState!==null)&&b&&(d.child.flags|=8192,(d.mode&1)!==0&&(c===null||(Dt.current&1)!==0?Qt===0&&(Qt=3):Bm())),d.updateQueue!==null&&(d.flags|=4),An(d),null);case 4:return gl(),Em(c,d),c===null&&Ac(d.stateNode.containerInfo),An(d),null;case 10:return Zp(d.type._context),An(d),null;case 17:return Zn(d.type)&&Od(),An(d),null;case 19:if(Et(Dt),R=d.memoizedState,R===null)return An(d),null;if(b=(d.flags&128)!==0,z=R.rendering,z===null)if(b)Wc(R,!1);else{if(Qt!==0||c!==null&&(c.flags&128)!==0)for(c=d.child;c!==null;){if(z=qd(c),z!==null){for(d.flags|=128,Wc(R,!1),b=z.updateQueue,b!==null&&(d.updateQueue=b,d.flags|=4),d.subtreeFlags=0,b=g,g=d.child;g!==null;)R=g,c=b,R.flags&=14680066,z=R.alternate,z===null?(R.childLanes=0,R.lanes=c,R.child=null,R.subtreeFlags=0,R.memoizedProps=null,R.memoizedState=null,R.updateQueue=null,R.dependencies=null,R.stateNode=null):(R.childLanes=z.childLanes,R.lanes=z.lanes,R.child=z.child,R.subtreeFlags=0,R.deletions=null,R.memoizedProps=z.memoizedProps,R.memoizedState=z.memoizedState,R.updateQueue=z.updateQueue,R.type=z.type,c=z.dependencies,R.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),g=g.sibling;return wt(Dt,Dt.current&1|2),d.child}c=c.sibling}R.tail!==null&&bt()>bl&&(d.flags|=128,b=!0,Wc(R,!1),d.lanes=4194304)}else{if(!b)if(c=qd(z),c!==null){if(d.flags|=128,b=!0,g=c.updateQueue,g!==null&&(d.updateQueue=g,d.flags|=4),Wc(R,!0),R.tail===null&&R.tailMode==="hidden"&&!z.alternate&&!It)return An(d),null}else 2*bt()-R.renderingStartTime>bl&&g!==1073741824&&(d.flags|=128,b=!0,Wc(R,!1),d.lanes=4194304);R.isBackwards?(z.sibling=d.child,d.child=z):(g=R.last,g!==null?g.sibling=z:d.child=z,R.last=z)}return R.tail!==null?(d=R.tail,R.rendering=d,R.tail=d.sibling,R.renderingStartTime=bt(),d.sibling=null,g=Dt.current,wt(Dt,b?g&1|2:g&1),d):(An(d),null);case 22:case 23:return Lm(),b=d.memoizedState!==null,c!==null&&c.memoizedState!==null!==b&&(d.flags|=8192),b&&(d.mode&1)!==0?(yr&1073741824)!==0&&(An(d),d.subtreeFlags&6&&(d.flags|=8192)):An(d),null;case 24:return null;case 25:return null}throw Error(t(156,d.tag))}function fE(c,d){switch(qp(d),d.tag){case 1:return Zn(d.type)&&Od(),c=d.flags,c&65536?(d.flags=c&-65537|128,d):null;case 3:return gl(),Et(Qn),Et(Sn),sm(),c=d.flags,(c&65536)!==0&&(c&128)===0?(d.flags=c&-65537|128,d):null;case 5:return im(d),null;case 13:if(Et(Dt),c=d.memoizedState,c!==null&&c.dehydrated!==null){if(d.alternate===null)throw Error(t(340));hl()}return c=d.flags,c&65536?(d.flags=c&-65537|128,d):null;case 19:return Et(Dt),null;case 4:return gl(),null;case 10:return Zp(d.type._context),null;case 22:case 23:return Lm(),null;case 24:return null;default:return null}}var nh=!1,Rn=!1,pE=typeof WeakSet=="function"?WeakSet:Set,Ie=null;function xl(c,d){var g=c.ref;if(g!==null)if(typeof g=="function")try{g(null)}catch(b){Lt(c,d,b)}else g.current=null}function Nm(c,d,g){try{g()}catch(b){Lt(c,d,b)}}var i1=!1;function mE(c,d){if(Lp=Vo,c=Ox(),Rp(c)){if("selectionStart"in c)var g={start:c.selectionStart,end:c.selectionEnd};else e:{g=(g=c.ownerDocument)&&g.defaultView||window;var b=g.getSelection&&g.getSelection();if(b&&b.rangeCount!==0){g=b.anchorNode;var C=b.anchorOffset,R=b.focusNode;b=b.focusOffset;try{g.nodeType,R.nodeType}catch{g=null;break e}var z=0,G=-1,J=-1,ce=0,ge=0,ve=c,me=null;t:for(;;){for(var Ce;ve!==g||C!==0&&ve.nodeType!==3||(G=z+C),ve!==R||b!==0&&ve.nodeType!==3||(J=z+b),ve.nodeType===3&&(z+=ve.nodeValue.length),(Ce=ve.firstChild)!==null;)me=ve,ve=Ce;for(;;){if(ve===c)break t;if(me===g&&++ce===C&&(G=z),me===R&&++ge===b&&(J=z),(Ce=ve.nextSibling)!==null)break;ve=me,me=ve.parentNode}ve=Ce}g=G===-1||J===-1?null:{start:G,end:J}}else g=null}g=g||{start:0,end:0}}else g=null;for(Bp={focusedElem:c,selectionRange:g},Vo=!1,Ie=d;Ie!==null;)if(d=Ie,c=d.child,(d.subtreeFlags&1028)!==0&&c!==null)c.return=d,Ie=c;else for(;Ie!==null;){d=Ie;try{var Ae=d.alternate;if((d.flags&1024)!==0)switch(d.tag){case 0:case 11:case 15:break;case 1:if(Ae!==null){var Te=Ae.memoizedProps,Vt=Ae.memoizedState,oe=d.stateNode,ee=oe.getSnapshotBeforeUpdate(d.elementType===d.type?Te:ti(d.type,Te),Vt);oe.__reactInternalSnapshotBeforeUpdate=ee}break;case 3:var ae=d.stateNode.containerInfo;ae.nodeType===1?ae.textContent="":ae.nodeType===9&&ae.documentElement&&ae.removeChild(ae.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(xe){Lt(d,d.return,xe)}if(c=d.sibling,c!==null){c.return=d.return,Ie=c;break}Ie=d.return}return Ae=i1,i1=!1,Ae}function Vc(c,d,g){var b=d.updateQueue;if(b=b!==null?b.lastEffect:null,b!==null){var C=b=b.next;do{if((C.tag&c)===c){var R=C.destroy;C.destroy=void 0,R!==void 0&&Nm(d,g,R)}C=C.next}while(C!==b)}}function rh(c,d){if(d=d.updateQueue,d=d!==null?d.lastEffect:null,d!==null){var g=d=d.next;do{if((g.tag&c)===c){var b=g.create;g.destroy=b()}g=g.next}while(g!==d)}}function Sm(c){var d=c.ref;if(d!==null){var g=c.stateNode;switch(c.tag){case 5:c=g;break;default:c=g}typeof d=="function"?d(c):d.current=c}}function o1(c){var d=c.alternate;d!==null&&(c.alternate=null,o1(d)),c.child=null,c.deletions=null,c.sibling=null,c.tag===5&&(d=c.stateNode,d!==null&&(delete d[wi],delete d[jc],delete d[Up],delete d[J3],delete d[Q3])),c.stateNode=null,c.return=null,c.dependencies=null,c.memoizedProps=null,c.memoizedState=null,c.pendingProps=null,c.stateNode=null,c.updateQueue=null}function s1(c){return c.tag===5||c.tag===3||c.tag===4}function a1(c){e:for(;;){for(;c.sibling===null;){if(c.return===null||s1(c.return))return null;c=c.return}for(c.sibling.return=c.return,c=c.sibling;c.tag!==5&&c.tag!==6&&c.tag!==18;){if(c.flags&2||c.child===null||c.tag===4)continue e;c.child.return=c,c=c.child}if(!(c.flags&2))return c.stateNode}}function Im(c,d,g){var b=c.tag;if(b===5||b===6)c=c.stateNode,d?g.nodeType===8?g.parentNode.insertBefore(c,d):g.insertBefore(c,d):(g.nodeType===8?(d=g.parentNode,d.insertBefore(c,g)):(d=g,d.appendChild(c)),g=g._reactRootContainer,g!=null||d.onclick!==null||(d.onclick=Md));else if(b!==4&&(c=c.child,c!==null))for(Im(c,d,g),c=c.sibling;c!==null;)Im(c,d,g),c=c.sibling}function Am(c,d,g){var b=c.tag;if(b===5||b===6)c=c.stateNode,d?g.insertBefore(c,d):g.appendChild(c);else if(b!==4&&(c=c.child,c!==null))for(Am(c,d,g),c=c.sibling;c!==null;)Am(c,d,g),c=c.sibling}var yn=null,ni=!1;function Qo(c,d,g){for(g=g.child;g!==null;)l1(c,d,g),g=g.sibling}function l1(c,d,g){if(pr&&typeof pr.onCommitFiberUnmount=="function")try{pr.onCommitFiberUnmount(zs,g)}catch{}switch(g.tag){case 5:Rn||xl(g,d);case 6:var b=yn,C=ni;yn=null,Qo(c,d,g),yn=b,ni=C,yn!==null&&(ni?(c=yn,g=g.stateNode,c.nodeType===8?c.parentNode.removeChild(g):c.removeChild(g)):yn.removeChild(g.stateNode));break;case 18:yn!==null&&(ni?(c=yn,g=g.stateNode,c.nodeType===8?Vp(c.parentNode,g):c.nodeType===1&&Vp(c,g),Jr(c)):Vp(yn,g.stateNode));break;case 4:b=yn,C=ni,yn=g.stateNode.containerInfo,ni=!0,Qo(c,d,g),yn=b,ni=C;break;case 0:case 11:case 14:case 15:if(!Rn&&(b=g.updateQueue,b!==null&&(b=b.lastEffect,b!==null))){C=b=b.next;do{var R=C,z=R.destroy;R=R.tag,z!==void 0&&((R&2)!==0||(R&4)!==0)&&Nm(g,d,z),C=C.next}while(C!==b)}Qo(c,d,g);break;case 1:if(!Rn&&(xl(g,d),b=g.stateNode,typeof b.componentWillUnmount=="function"))try{b.props=g.memoizedProps,b.state=g.memoizedState,b.componentWillUnmount()}catch(G){Lt(g,d,G)}Qo(c,d,g);break;case 21:Qo(c,d,g);break;case 22:g.mode&1?(Rn=(b=Rn)||g.memoizedState!==null,Qo(c,d,g),Rn=b):Qo(c,d,g);break;default:Qo(c,d,g)}}function c1(c){var d=c.updateQueue;if(d!==null){c.updateQueue=null;var g=c.stateNode;g===null&&(g=c.stateNode=new pE),d.forEach(function(b){var C=CE.bind(null,c,b);g.has(b)||(g.add(b),b.then(C,C))})}}function ri(c,d){var g=d.deletions;if(g!==null)for(var b=0;b<g.length;b++){var C=g[b];try{var R=c,z=d,G=z;e:for(;G!==null;){switch(G.tag){case 5:yn=G.stateNode,ni=!1;break e;case 3:yn=G.stateNode.containerInfo,ni=!0;break e;case 4:yn=G.stateNode.containerInfo,ni=!0;break e}G=G.return}if(yn===null)throw Error(t(160));l1(R,z,C),yn=null,ni=!1;var J=C.alternate;J!==null&&(J.return=null),C.return=null}catch(ce){Lt(C,d,ce)}}if(d.subtreeFlags&12854)for(d=d.child;d!==null;)u1(d,c),d=d.sibling}function u1(c,d){var g=c.alternate,b=c.flags;switch(c.tag){case 0:case 11:case 14:case 15:if(ri(d,c),Ci(c),b&4){try{Vc(3,c,c.return),rh(3,c)}catch(Te){Lt(c,c.return,Te)}try{Vc(5,c,c.return)}catch(Te){Lt(c,c.return,Te)}}break;case 1:ri(d,c),Ci(c),b&512&&g!==null&&xl(g,g.return);break;case 5:if(ri(d,c),Ci(c),b&512&&g!==null&&xl(g,g.return),c.flags&32){var C=c.stateNode;try{pi(C,"")}catch(Te){Lt(c,c.return,Te)}}if(b&4&&(C=c.stateNode,C!=null)){var R=c.memoizedProps,z=g!==null?g.memoizedProps:R,G=c.type,J=c.updateQueue;if(c.updateQueue=null,J!==null)try{G==="input"&&R.type==="radio"&&R.name!=null&&mt(C,R),sc(G,z);var ce=sc(G,R);for(z=0;z<J.length;z+=2){var ge=J[z],ve=J[z+1];ge==="style"?Ki(C,ve):ge==="dangerouslySetInnerHTML"?Hi(C,ve):ge==="children"?pi(C,ve):N(C,ge,ve,ce)}switch(G){case"input":Cn(C,R);break;case"textarea":fr(C,R);break;case"select":var me=C._wrapperState.wasMultiple;C._wrapperState.wasMultiple=!!R.multiple;var Ce=R.value;Ce!=null?Xt(C,!!R.multiple,Ce,!1):me!==!!R.multiple&&(R.defaultValue!=null?Xt(C,!!R.multiple,R.defaultValue,!0):Xt(C,!!R.multiple,R.multiple?[]:"",!1))}C[jc]=R}catch(Te){Lt(c,c.return,Te)}}break;case 6:if(ri(d,c),Ci(c),b&4){if(c.stateNode===null)throw Error(t(162));C=c.stateNode,R=c.memoizedProps;try{C.nodeValue=R}catch(Te){Lt(c,c.return,Te)}}break;case 3:if(ri(d,c),Ci(c),b&4&&g!==null&&g.memoizedState.isDehydrated)try{Jr(d.containerInfo)}catch(Te){Lt(c,c.return,Te)}break;case 4:ri(d,c),Ci(c);break;case 13:ri(d,c),Ci(c),C=c.child,C.flags&8192&&(R=C.memoizedState!==null,C.stateNode.isHidden=R,!R||C.alternate!==null&&C.alternate.memoizedState!==null||(Tm=bt())),b&4&&c1(c);break;case 22:if(ge=g!==null&&g.memoizedState!==null,c.mode&1?(Rn=(ce=Rn)||ge,ri(d,c),Rn=ce):ri(d,c),Ci(c),b&8192){if(ce=c.memoizedState!==null,(c.stateNode.isHidden=ce)&&!ge&&(c.mode&1)!==0)for(Ie=c,ge=c.child;ge!==null;){for(ve=Ie=ge;Ie!==null;){switch(me=Ie,Ce=me.child,me.tag){case 0:case 11:case 14:case 15:Vc(4,me,me.return);break;case 1:xl(me,me.return);var Ae=me.stateNode;if(typeof Ae.componentWillUnmount=="function"){b=me,g=me.return;try{d=b,Ae.props=d.memoizedProps,Ae.state=d.memoizedState,Ae.componentWillUnmount()}catch(Te){Lt(b,g,Te)}}break;case 5:xl(me,me.return);break;case 22:if(me.memoizedState!==null){f1(ve);continue}}Ce!==null?(Ce.return=me,Ie=Ce):f1(ve)}ge=ge.sibling}e:for(ge=null,ve=c;;){if(ve.tag===5){if(ge===null){ge=ve;try{C=ve.stateNode,ce?(R=C.style,typeof R.setProperty=="function"?R.setProperty("display","none","important"):R.display="none"):(G=ve.stateNode,J=ve.memoizedProps.style,z=J!=null&&J.hasOwnProperty("display")?J.display:null,G.style.display=qi("display",z))}catch(Te){Lt(c,c.return,Te)}}}else if(ve.tag===6){if(ge===null)try{ve.stateNode.nodeValue=ce?"":ve.memoizedProps}catch(Te){Lt(c,c.return,Te)}}else if((ve.tag!==22&&ve.tag!==23||ve.memoizedState===null||ve===c)&&ve.child!==null){ve.child.return=ve,ve=ve.child;continue}if(ve===c)break e;for(;ve.sibling===null;){if(ve.return===null||ve.return===c)break e;ge===ve&&(ge=null),ve=ve.return}ge===ve&&(ge=null),ve.sibling.return=ve.return,ve=ve.sibling}}break;case 19:ri(d,c),Ci(c),b&4&&c1(c);break;case 21:break;default:ri(d,c),Ci(c)}}function Ci(c){var d=c.flags;if(d&2){try{e:{for(var g=c.return;g!==null;){if(s1(g)){var b=g;break e}g=g.return}throw Error(t(160))}switch(b.tag){case 5:var C=b.stateNode;b.flags&32&&(pi(C,""),b.flags&=-33);var R=a1(c);Am(c,R,C);break;case 3:case 4:var z=b.stateNode.containerInfo,G=a1(c);Im(c,G,z);break;default:throw Error(t(161))}}catch(J){Lt(c,c.return,J)}c.flags&=-3}d&4096&&(c.flags&=-4097)}function gE(c,d,g){Ie=c,d1(c)}function d1(c,d,g){for(var b=(c.mode&1)!==0;Ie!==null;){var C=Ie,R=C.child;if(C.tag===22&&b){var z=C.memoizedState!==null||nh;if(!z){var G=C.alternate,J=G!==null&&G.memoizedState!==null||Rn;G=nh;var ce=Rn;if(nh=z,(Rn=J)&&!ce)for(Ie=C;Ie!==null;)z=Ie,J=z.child,z.tag===22&&z.memoizedState!==null?p1(C):J!==null?(J.return=z,Ie=J):p1(C);for(;R!==null;)Ie=R,d1(R),R=R.sibling;Ie=C,nh=G,Rn=ce}h1(c)}else(C.subtreeFlags&8772)!==0&&R!==null?(R.return=C,Ie=R):h1(c)}}function h1(c){for(;Ie!==null;){var d=Ie;if((d.flags&8772)!==0){var g=d.alternate;try{if((d.flags&8772)!==0)switch(d.tag){case 0:case 11:case 15:Rn||rh(5,d);break;case 1:var b=d.stateNode;if(d.flags&4&&!Rn)if(g===null)b.componentDidMount();else{var C=d.elementType===d.type?g.memoizedProps:ti(d.type,g.memoizedProps);b.componentDidUpdate(C,g.memoizedState,b.__reactInternalSnapshotBeforeUpdate)}var R=d.updateQueue;R!==null&&fy(d,R,b);break;case 3:var z=d.updateQueue;if(z!==null){if(g=null,d.child!==null)switch(d.child.tag){case 5:g=d.child.stateNode;break;case 1:g=d.child.stateNode}fy(d,z,g)}break;case 5:var G=d.stateNode;if(g===null&&d.flags&4){g=G;var J=d.memoizedProps;switch(d.type){case"button":case"input":case"select":case"textarea":J.autoFocus&&g.focus();break;case"img":J.src&&(g.src=J.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(d.memoizedState===null){var ce=d.alternate;if(ce!==null){var ge=ce.memoizedState;if(ge!==null){var ve=ge.dehydrated;ve!==null&&Jr(ve)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Rn||d.flags&512&&Sm(d)}catch(me){Lt(d,d.return,me)}}if(d===c){Ie=null;break}if(g=d.sibling,g!==null){g.return=d.return,Ie=g;break}Ie=d.return}}function f1(c){for(;Ie!==null;){var d=Ie;if(d===c){Ie=null;break}var g=d.sibling;if(g!==null){g.return=d.return,Ie=g;break}Ie=d.return}}function p1(c){for(;Ie!==null;){var d=Ie;try{switch(d.tag){case 0:case 11:case 15:var g=d.return;try{rh(4,d)}catch(J){Lt(d,g,J)}break;case 1:var b=d.stateNode;if(typeof b.componentDidMount=="function"){var C=d.return;try{b.componentDidMount()}catch(J){Lt(d,C,J)}}var R=d.return;try{Sm(d)}catch(J){Lt(d,R,J)}break;case 5:var z=d.return;try{Sm(d)}catch(J){Lt(d,z,J)}}}catch(J){Lt(d,d.return,J)}if(d===c){Ie=null;break}var G=d.sibling;if(G!==null){G.return=d.return,Ie=G;break}Ie=d.return}}var vE=Math.ceil,ih=S.ReactCurrentDispatcher,Rm=S.ReactCurrentOwner,Or=S.ReactCurrentBatchConfig,at=0,un=null,qt=null,bn=0,yr=0,yl=qo(0),Qt=0,Uc=null,Zs=0,oh=0,jm=0,Hc=null,tr=null,Tm=0,bl=1/0,uo=null,sh=!1,Dm=null,Zo=null,ah=!1,es=null,lh=0,Gc=0,Mm=null,ch=-1,uh=0;function Gn(){return(at&6)!==0?bt():ch!==-1?ch:ch=bt()}function ts(c){return(c.mode&1)===0?1:(at&2)!==0&&bn!==0?bn&-bn:eE.transition!==null?(uh===0&&(uh=Vs()),uh):(c=rt,c!==0||(c=window.event,c=c===void 0?16:yc(c.type)),c)}function ii(c,d,g,b){if(50<Gc)throw Gc=0,Mm=null,Error(t(185));Lo(c,g,b),((at&2)===0||c!==un)&&(c===un&&((at&2)===0&&(oh|=g),Qt===4&&ns(c,bn)),nr(c,b),g===1&&at===0&&(d.mode&1)===0&&(bl=bt()+500,Ld&&Xo()))}function nr(c,d){var g=c.callbackNode;Qi(c,d);var b=Ws(c,c===un?bn:0);if(b===0)g!==null&&pc(g),c.callbackNode=null,c.callbackPriority=0;else if(d=b&-b,c.callbackPriority!==d){if(g!=null&&pc(g),d===1)c.tag===0?Z3(g1.bind(null,c)):ty(g1.bind(null,c)),X3(function(){(at&6)===0&&Xo()}),g=null;else{switch(zo(b)){case 1:g=Bs;break;case 4:g=Po;break;case 16:g=Rr;break;case 536870912:g=ud;break;default:g=Rr}g=C1(g,m1.bind(null,c))}c.callbackPriority=d,c.callbackNode=g}}function m1(c,d){if(ch=-1,uh=0,(at&6)!==0)throw Error(t(327));var g=c.callbackNode;if(wl()&&c.callbackNode!==g)return null;var b=Ws(c,c===un?bn:0);if(b===0)return null;if((b&30)!==0||(b&c.expiredLanes)!==0||d)d=dh(c,b);else{d=b;var C=at;at|=2;var R=x1();(un!==c||bn!==d)&&(uo=null,bl=bt()+500,ta(c,d));do try{bE();break}catch(G){v1(c,G)}while(!0);Qp(),ih.current=R,at=C,qt!==null?d=0:(un=null,bn=0,d=Qt)}if(d!==0){if(d===2&&(C=mr(c),C!==0&&(b=C,d=Pm(c,C))),d===1)throw g=Uc,ta(c,0),ns(c,b),nr(c,bt()),g;if(d===6)ns(c,b);else{if(C=c.current.alternate,(b&30)===0&&!xE(C)&&(d=dh(c,b),d===2&&(R=mr(c),R!==0&&(b=R,d=Pm(c,R))),d===1))throw g=Uc,ta(c,0),ns(c,b),nr(c,bt()),g;switch(c.finishedWork=C,c.finishedLanes=b,d){case 0:case 1:throw Error(t(345));case 2:na(c,tr,uo);break;case 3:if(ns(c,b),(b&130023424)===b&&(d=Tm+500-bt(),10<d)){if(Ws(c,0)!==0)break;if(C=c.suspendedLanes,(C&b)!==b){Gn(),c.pingedLanes|=c.suspendedLanes&C;break}c.timeoutHandle=Wp(na.bind(null,c,tr,uo),d);break}na(c,tr,uo);break;case 4:if(ns(c,b),(b&4194240)===b)break;for(d=c.eventTimes,C=-1;0<b;){var z=31-Un(b);R=1<<z,z=d[z],z>C&&(C=z),b&=~R}if(b=C,b=bt()-b,b=(120>b?120:480>b?480:1080>b?1080:1920>b?1920:3e3>b?3e3:4320>b?4320:1960*vE(b/1960))-b,10<b){c.timeoutHandle=Wp(na.bind(null,c,tr,uo),b);break}na(c,tr,uo);break;case 5:na(c,tr,uo);break;default:throw Error(t(329))}}}return nr(c,bt()),c.callbackNode===g?m1.bind(null,c):null}function Pm(c,d){var g=Hc;return c.current.memoizedState.isDehydrated&&(ta(c,d).flags|=256),c=dh(c,d),c!==2&&(d=tr,tr=g,d!==null&&Om(d)),c}function Om(c){tr===null?tr=c:tr.push.apply(tr,c)}function xE(c){for(var d=c;;){if(d.flags&16384){var g=d.updateQueue;if(g!==null&&(g=g.stores,g!==null))for(var b=0;b<g.length;b++){var C=g[b],R=C.getSnapshot;C=C.value;try{if(!Zr(R(),C))return!1}catch{return!1}}}if(g=d.child,d.subtreeFlags&16384&&g!==null)g.return=d,d=g;else{if(d===c)break;for(;d.sibling===null;){if(d.return===null||d.return===c)return!0;d=d.return}d.sibling.return=d.return,d=d.sibling}}return!0}function ns(c,d){for(d&=~jm,d&=~oh,c.suspendedLanes|=d,c.pingedLanes&=~d,c=c.expirationTimes;0<d;){var g=31-Un(d),b=1<<g;c[g]=-1,d&=~b}}function g1(c){if((at&6)!==0)throw Error(t(327));wl();var d=Ws(c,0);if((d&1)===0)return nr(c,bt()),null;var g=dh(c,d);if(c.tag!==0&&g===2){var b=mr(c);b!==0&&(d=b,g=Pm(c,b))}if(g===1)throw g=Uc,ta(c,0),ns(c,d),nr(c,bt()),g;if(g===6)throw Error(t(345));return c.finishedWork=c.current.alternate,c.finishedLanes=d,na(c,tr,uo),nr(c,bt()),null}function Fm(c,d){var g=at;at|=1;try{return c(d)}finally{at=g,at===0&&(bl=bt()+500,Ld&&Xo())}}function ea(c){es!==null&&es.tag===0&&(at&6)===0&&wl();var d=at;at|=1;var g=Or.transition,b=rt;try{if(Or.transition=null,rt=1,c)return c()}finally{rt=b,Or.transition=g,at=d,(at&6)===0&&Xo()}}function Lm(){yr=yl.current,Et(yl)}function ta(c,d){c.finishedWork=null,c.finishedLanes=0;var g=c.timeoutHandle;if(g!==-1&&(c.timeoutHandle=-1,K3(g)),qt!==null)for(g=qt.return;g!==null;){var b=g;switch(qp(b),b.tag){case 1:b=b.type.childContextTypes,b!=null&&Od();break;case 3:gl(),Et(Qn),Et(Sn),sm();break;case 5:im(b);break;case 4:gl();break;case 13:Et(Dt);break;case 19:Et(Dt);break;case 10:Zp(b.type._context);break;case 22:case 23:Lm()}g=g.return}if(un=c,qt=c=rs(c.current,null),bn=yr=d,Qt=0,Uc=null,jm=oh=Zs=0,tr=Hc=null,Ys!==null){for(d=0;d<Ys.length;d++)if(g=Ys[d],b=g.interleaved,b!==null){g.interleaved=null;var C=b.next,R=g.pending;if(R!==null){var z=R.next;R.next=C,b.next=z}g.pending=b}Ys=null}return c}function v1(c,d){do{var g=qt;try{if(Qp(),Kd.current=Qd,Xd){for(var b=Mt.memoizedState;b!==null;){var C=b.queue;C!==null&&(C.pending=null),b=b.next}Xd=!1}if(Qs=0,cn=Jt=Mt=null,Fc=!1,Lc=0,Rm.current=null,g===null||g.return===null){Qt=1,Uc=d,qt=null;break}e:{var R=c,z=g.return,G=g,J=d;if(d=bn,G.flags|=32768,J!==null&&typeof J=="object"&&typeof J.then=="function"){var ce=J,ge=G,ve=ge.tag;if((ge.mode&1)===0&&(ve===0||ve===11||ve===15)){var me=ge.alternate;me?(ge.updateQueue=me.updateQueue,ge.memoizedState=me.memoizedState,ge.lanes=me.lanes):(ge.updateQueue=null,ge.memoizedState=null)}var Ce=Vy(z);if(Ce!==null){Ce.flags&=-257,Uy(Ce,z,G,R,d),Ce.mode&1&&Wy(R,ce,d),d=Ce,J=ce;var Ae=d.updateQueue;if(Ae===null){var Te=new Set;Te.add(J),d.updateQueue=Te}else Ae.add(J);break e}else{if((d&1)===0){Wy(R,ce,d),Bm();break e}J=Error(t(426))}}else if(It&&G.mode&1){var Vt=Vy(z);if(Vt!==null){(Vt.flags&65536)===0&&(Vt.flags|=256),Uy(Vt,z,G,R,d),Yp(vl(J,G));break e}}R=J=vl(J,G),Qt!==4&&(Qt=2),Hc===null?Hc=[R]:Hc.push(R),R=z;do{switch(R.tag){case 3:R.flags|=65536,d&=-d,R.lanes|=d;var oe=By(R,J,d);hy(R,oe);break e;case 1:G=J;var ee=R.type,ae=R.stateNode;if((R.flags&128)===0&&(typeof ee.getDerivedStateFromError=="function"||ae!==null&&typeof ae.componentDidCatch=="function"&&(Zo===null||!Zo.has(ae)))){R.flags|=65536,d&=-d,R.lanes|=d;var xe=zy(R,G,d);hy(R,xe);break e}}R=R.return}while(R!==null)}b1(g)}catch(Pe){d=Pe,qt===g&&g!==null&&(qt=g=g.return);continue}break}while(!0)}function x1(){var c=ih.current;return ih.current=Qd,c===null?Qd:c}function Bm(){(Qt===0||Qt===3||Qt===2)&&(Qt=4),un===null||(Zs&268435455)===0&&(oh&268435455)===0||ns(un,bn)}function dh(c,d){var g=at;at|=2;var b=x1();(un!==c||bn!==d)&&(uo=null,ta(c,d));do try{yE();break}catch(C){v1(c,C)}while(!0);if(Qp(),at=g,ih.current=b,qt!==null)throw Error(t(261));return un=null,bn=0,Qt}function yE(){for(;qt!==null;)y1(qt)}function bE(){for(;qt!==null&&!ld();)y1(qt)}function y1(c){var d=k1(c.alternate,c,yr);c.memoizedProps=c.pendingProps,d===null?b1(c):qt=d,Rm.current=null}function b1(c){var d=c;do{var g=d.alternate;if(c=d.return,(d.flags&32768)===0){if(g=hE(g,d,yr),g!==null){qt=g;return}}else{if(g=fE(g,d),g!==null){g.flags&=32767,qt=g;return}if(c!==null)c.flags|=32768,c.subtreeFlags=0,c.deletions=null;else{Qt=6,qt=null;return}}if(d=d.sibling,d!==null){qt=d;return}qt=d=c}while(d!==null);Qt===0&&(Qt=5)}function na(c,d,g){var b=rt,C=Or.transition;try{Or.transition=null,rt=1,wE(c,d,g,b)}finally{Or.transition=C,rt=b}return null}function wE(c,d,g,b){do wl();while(es!==null);if((at&6)!==0)throw Error(t(327));g=c.finishedWork;var C=c.finishedLanes;if(g===null)return null;if(c.finishedWork=null,c.finishedLanes=0,g===c.current)throw Error(t(177));c.callbackNode=null,c.callbackPriority=0;var R=g.lanes|g.childLanes;if(xt(c,R),c===un&&(qt=un=null,bn=0),(g.subtreeFlags&2064)===0&&(g.flags&2064)===0||ah||(ah=!0,C1(Rr,function(){return wl(),null})),R=(g.flags&15990)!==0,(g.subtreeFlags&15990)!==0||R){R=Or.transition,Or.transition=null;var z=rt;rt=1;var G=at;at|=4,Rm.current=null,mE(c,g),u1(g,c),W3(Bp),Vo=!!Lp,Bp=Lp=null,c.current=g,gE(g),_p(),at=G,rt=z,Or.transition=R}else c.current=g;if(ah&&(ah=!1,es=c,lh=C),R=c.pendingLanes,R===0&&(Zo=null),dd(g.stateNode),nr(c,bt()),d!==null)for(b=c.onRecoverableError,g=0;g<d.length;g++)C=d[g],b(C.value,{componentStack:C.stack,digest:C.digest});if(sh)throw sh=!1,c=Dm,Dm=null,c;return(lh&1)!==0&&c.tag!==0&&wl(),R=c.pendingLanes,(R&1)!==0?c===Mm?Gc++:(Gc=0,Mm=c):Gc=0,Xo(),null}function wl(){if(es!==null){var c=zo(lh),d=Or.transition,g=rt;try{if(Or.transition=null,rt=16>c?16:c,es===null)var b=!1;else{if(c=es,es=null,lh=0,(at&6)!==0)throw Error(t(331));var C=at;for(at|=4,Ie=c.current;Ie!==null;){var R=Ie,z=R.child;if((Ie.flags&16)!==0){var G=R.deletions;if(G!==null){for(var J=0;J<G.length;J++){var ce=G[J];for(Ie=ce;Ie!==null;){var ge=Ie;switch(ge.tag){case 0:case 11:case 15:Vc(8,ge,R)}var ve=ge.child;if(ve!==null)ve.return=ge,Ie=ve;else for(;Ie!==null;){ge=Ie;var me=ge.sibling,Ce=ge.return;if(o1(ge),ge===ce){Ie=null;break}if(me!==null){me.return=Ce,Ie=me;break}Ie=Ce}}}var Ae=R.alternate;if(Ae!==null){var Te=Ae.child;if(Te!==null){Ae.child=null;do{var Vt=Te.sibling;Te.sibling=null,Te=Vt}while(Te!==null)}}Ie=R}}if((R.subtreeFlags&2064)!==0&&z!==null)z.return=R,Ie=z;else e:for(;Ie!==null;){if(R=Ie,(R.flags&2048)!==0)switch(R.tag){case 0:case 11:case 15:Vc(9,R,R.return)}var oe=R.sibling;if(oe!==null){oe.return=R.return,Ie=oe;break e}Ie=R.return}}var ee=c.current;for(Ie=ee;Ie!==null;){z=Ie;var ae=z.child;if((z.subtreeFlags&2064)!==0&&ae!==null)ae.return=z,Ie=ae;else e:for(z=ee;Ie!==null;){if(G=Ie,(G.flags&2048)!==0)try{switch(G.tag){case 0:case 11:case 15:rh(9,G)}}catch(Pe){Lt(G,G.return,Pe)}if(G===z){Ie=null;break e}var xe=G.sibling;if(xe!==null){xe.return=G.return,Ie=xe;break e}Ie=G.return}}if(at=C,Xo(),pr&&typeof pr.onPostCommitFiberRoot=="function")try{pr.onPostCommitFiberRoot(zs,c)}catch{}b=!0}return b}finally{rt=g,Or.transition=d}}return!1}function w1(c,d,g){d=vl(g,d),d=By(c,d,1),c=Jo(c,d,1),d=Gn(),c!==null&&(Lo(c,1,d),nr(c,d))}function Lt(c,d,g){if(c.tag===3)w1(c,c,g);else for(;d!==null;){if(d.tag===3){w1(d,c,g);break}else if(d.tag===1){var b=d.stateNode;if(typeof d.type.getDerivedStateFromError=="function"||typeof b.componentDidCatch=="function"&&(Zo===null||!Zo.has(b))){c=vl(g,c),c=zy(d,c,1),d=Jo(d,c,1),c=Gn(),d!==null&&(Lo(d,1,c),nr(d,c));break}}d=d.return}}function _E(c,d,g){var b=c.pingCache;b!==null&&b.delete(d),d=Gn(),c.pingedLanes|=c.suspendedLanes&g,un===c&&(bn&g)===g&&(Qt===4||Qt===3&&(bn&130023424)===bn&&500>bt()-Tm?ta(c,0):jm|=g),nr(c,d)}function _1(c,d){d===0&&((c.mode&1)===0?d=1:(d=Ha,Ha<<=1,(Ha&130023424)===0&&(Ha=4194304)));var g=Gn();c=ao(c,d),c!==null&&(Lo(c,d,g),nr(c,g))}function kE(c){var d=c.memoizedState,g=0;d!==null&&(g=d.retryLane),_1(c,g)}function CE(c,d){var g=0;switch(c.tag){case 13:var b=c.stateNode,C=c.memoizedState;C!==null&&(g=C.retryLane);break;case 19:b=c.stateNode;break;default:throw Error(t(314))}b!==null&&b.delete(d),_1(c,g)}var k1;k1=function(c,d,g){if(c!==null)if(c.memoizedProps!==d.pendingProps||Qn.current)er=!0;else{if((c.lanes&g)===0&&(d.flags&128)===0)return er=!1,dE(c,d,g);er=(c.flags&131072)!==0}else er=!1,It&&(d.flags&1048576)!==0&&ny(d,zd,d.index);switch(d.lanes=0,d.tag){case 2:var b=d.type;th(c,d),c=d.pendingProps;var C=cl(d,Sn.current);ml(d,g),C=cm(null,d,b,c,C,g);var R=um();return d.flags|=1,typeof C=="object"&&C!==null&&typeof C.render=="function"&&C.$$typeof===void 0?(d.tag=1,d.memoizedState=null,d.updateQueue=null,Zn(b)?(R=!0,Fd(d)):R=!1,d.memoizedState=C.state!==null&&C.state!==void 0?C.state:null,nm(d),C.updater=Zd,d.stateNode=C,C._reactInternals=d,gm(d,b,c,g),d=bm(null,d,b,!0,R,g)):(d.tag=0,It&&R&&$p(d),Hn(null,d,C,g),d=d.child),d;case 16:b=d.elementType;e:{switch(th(c,d),c=d.pendingProps,C=b._init,b=C(b._payload),d.type=b,C=d.tag=NE(b),c=ti(b,c),C){case 0:d=ym(null,d,b,c,g);break e;case 1:d=Xy(null,d,b,c,g);break e;case 11:d=Hy(null,d,b,c,g);break e;case 14:d=Gy(null,d,b,ti(b.type,c),g);break e}throw Error(t(306,b,""))}return d;case 0:return b=d.type,C=d.pendingProps,C=d.elementType===b?C:ti(b,C),ym(c,d,b,C,g);case 1:return b=d.type,C=d.pendingProps,C=d.elementType===b?C:ti(b,C),Xy(c,d,b,C,g);case 3:e:{if(Yy(d),c===null)throw Error(t(387));b=d.pendingProps,R=d.memoizedState,C=R.element,dy(c,d),$d(d,b,null,g);var z=d.memoizedState;if(b=z.element,R.isDehydrated)if(R={element:b,isDehydrated:!1,cache:z.cache,pendingSuspenseBoundaries:z.pendingSuspenseBoundaries,transitions:z.transitions},d.updateQueue.baseState=R,d.memoizedState=R,d.flags&256){C=vl(Error(t(423)),d),d=Jy(c,d,b,g,C);break e}else if(b!==C){C=vl(Error(t(424)),d),d=Jy(c,d,b,g,C);break e}else for(xr=$o(d.stateNode.containerInfo.firstChild),vr=d,It=!0,ei=null,g=cy(d,null,b,g),d.child=g;g;)g.flags=g.flags&-3|4096,g=g.sibling;else{if(hl(),b===C){d=co(c,d,g);break e}Hn(c,d,b,g)}d=d.child}return d;case 5:return py(d),c===null&&Xp(d),b=d.type,C=d.pendingProps,R=c!==null?c.memoizedProps:null,z=C.children,zp(b,C)?z=null:R!==null&&zp(b,R)&&(d.flags|=32),Ky(c,d),Hn(c,d,z,g),d.child;case 6:return c===null&&Xp(d),null;case 13:return Qy(c,d,g);case 4:return rm(d,d.stateNode.containerInfo),b=d.pendingProps,c===null?d.child=fl(d,null,b,g):Hn(c,d,b,g),d.child;case 11:return b=d.type,C=d.pendingProps,C=d.elementType===b?C:ti(b,C),Hy(c,d,b,C,g);case 7:return Hn(c,d,d.pendingProps,g),d.child;case 8:return Hn(c,d,d.pendingProps.children,g),d.child;case 12:return Hn(c,d,d.pendingProps.children,g),d.child;case 10:e:{if(b=d.type._context,C=d.pendingProps,R=d.memoizedProps,z=C.value,wt(Ud,b._currentValue),b._currentValue=z,R!==null)if(Zr(R.value,z)){if(R.children===C.children&&!Qn.current){d=co(c,d,g);break e}}else for(R=d.child,R!==null&&(R.return=d);R!==null;){var G=R.dependencies;if(G!==null){z=R.child;for(var J=G.firstContext;J!==null;){if(J.context===b){if(R.tag===1){J=lo(-1,g&-g),J.tag=2;var ce=R.updateQueue;if(ce!==null){ce=ce.shared;var ge=ce.pending;ge===null?J.next=J:(J.next=ge.next,ge.next=J),ce.pending=J}}R.lanes|=g,J=R.alternate,J!==null&&(J.lanes|=g),em(R.return,g,d),G.lanes|=g;break}J=J.next}}else if(R.tag===10)z=R.type===d.type?null:R.child;else if(R.tag===18){if(z=R.return,z===null)throw Error(t(341));z.lanes|=g,G=z.alternate,G!==null&&(G.lanes|=g),em(z,g,d),z=R.sibling}else z=R.child;if(z!==null)z.return=R;else for(z=R;z!==null;){if(z===d){z=null;break}if(R=z.sibling,R!==null){R.return=z.return,z=R;break}z=z.return}R=z}Hn(c,d,C.children,g),d=d.child}return d;case 9:return C=d.type,b=d.pendingProps.children,ml(d,g),C=Mr(C),b=b(C),d.flags|=1,Hn(c,d,b,g),d.child;case 14:return b=d.type,C=ti(b,d.pendingProps),C=ti(b.type,C),Gy(c,d,b,C,g);case 15:return $y(c,d,d.type,d.pendingProps,g);case 17:return b=d.type,C=d.pendingProps,C=d.elementType===b?C:ti(b,C),th(c,d),d.tag=1,Zn(b)?(c=!0,Fd(d)):c=!1,ml(d,g),Fy(d,b,C),gm(d,b,C,g),bm(null,d,b,!0,c,g);case 19:return e1(c,d,g);case 22:return qy(c,d,g)}throw Error(t(156,d.tag))};function C1(c,d){return Va(c,d)}function EE(c,d,g,b){this.tag=c,this.key=g,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=d,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=b,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fr(c,d,g,b){return new EE(c,d,g,b)}function zm(c){return c=c.prototype,!(!c||!c.isReactComponent)}function NE(c){if(typeof c=="function")return zm(c)?1:0;if(c!=null){if(c=c.$$typeof,c===B)return 11;if(c===te)return 14}return 2}function rs(c,d){var g=c.alternate;return g===null?(g=Fr(c.tag,d,c.key,c.mode),g.elementType=c.elementType,g.type=c.type,g.stateNode=c.stateNode,g.alternate=c,c.alternate=g):(g.pendingProps=d,g.type=c.type,g.flags=0,g.subtreeFlags=0,g.deletions=null),g.flags=c.flags&14680064,g.childLanes=c.childLanes,g.lanes=c.lanes,g.child=c.child,g.memoizedProps=c.memoizedProps,g.memoizedState=c.memoizedState,g.updateQueue=c.updateQueue,d=c.dependencies,g.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext},g.sibling=c.sibling,g.index=c.index,g.ref=c.ref,g}function hh(c,d,g,b,C,R){var z=2;if(b=c,typeof c=="function")zm(c)&&(z=1);else if(typeof c=="string")z=5;else e:switch(c){case D:return ra(g.children,C,R,d);case j:z=8,C|=8;break;case T:return c=Fr(12,g,d,C|2),c.elementType=T,c.lanes=R,c;case F:return c=Fr(13,g,d,C),c.elementType=F,c.lanes=R,c;case K:return c=Fr(19,g,d,C),c.elementType=K,c.lanes=R,c;case q:return fh(g,C,R,d);default:if(typeof c=="object"&&c!==null)switch(c.$$typeof){case M:z=10;break e;case L:z=9;break e;case B:z=11;break e;case te:z=14;break e;case se:z=16,b=null;break e}throw Error(t(130,c==null?c:typeof c,""))}return d=Fr(z,g,d,C),d.elementType=c,d.type=b,d.lanes=R,d}function ra(c,d,g,b){return c=Fr(7,c,b,d),c.lanes=g,c}function fh(c,d,g,b){return c=Fr(22,c,b,d),c.elementType=q,c.lanes=g,c.stateNode={isHidden:!1},c}function Wm(c,d,g){return c=Fr(6,c,null,d),c.lanes=g,c}function Vm(c,d,g){return d=Fr(4,c.children!==null?c.children:[],c.key,d),d.lanes=g,d.stateNode={containerInfo:c.containerInfo,pendingChildren:null,implementation:c.implementation},d}function SE(c,d,g,b,C){this.tag=d,this.containerInfo=c,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Fo(0),this.expirationTimes=Fo(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Fo(0),this.identifierPrefix=b,this.onRecoverableError=C,this.mutableSourceEagerHydrationData=null}function Um(c,d,g,b,C,R,z,G,J){return c=new SE(c,d,g,G,J),d===1?(d=1,R===!0&&(d|=8)):d=0,R=Fr(3,null,null,d),c.current=R,R.stateNode=c,R.memoizedState={element:b,isDehydrated:g,cache:null,transitions:null,pendingSuspenseBoundaries:null},nm(R),c}function IE(c,d,g){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:P,key:b==null?null:""+b,children:c,containerInfo:d,implementation:g}}function E1(c){if(!c)return Ko;c=c._reactInternals;e:{if($r(c)!==c||c.tag!==1)throw Error(t(170));var d=c;do{switch(d.tag){case 3:d=d.stateNode.context;break e;case 1:if(Zn(d.type)){d=d.stateNode.__reactInternalMemoizedMergedChildContext;break e}}d=d.return}while(d!==null);throw Error(t(171))}if(c.tag===1){var g=c.type;if(Zn(g))return Zx(c,g,d)}return d}function N1(c,d,g,b,C,R,z,G,J){return c=Um(g,b,!0,c,C,R,z,G,J),c.context=E1(null),g=c.current,b=Gn(),C=ts(g),R=lo(b,C),R.callback=d??null,Jo(g,R,C),c.current.lanes=C,Lo(c,C,b),nr(c,b),c}function ph(c,d,g,b){var C=d.current,R=Gn(),z=ts(C);return g=E1(g),d.context===null?d.context=g:d.pendingContext=g,d=lo(R,z),d.payload={element:c},b=b===void 0?null:b,b!==null&&(d.callback=b),c=Jo(C,d,z),c!==null&&(ii(c,C,z,R),Gd(c,C,z)),z}function mh(c){if(c=c.current,!c.child)return null;switch(c.child.tag){case 5:return c.child.stateNode;default:return c.child.stateNode}}function S1(c,d){if(c=c.memoizedState,c!==null&&c.dehydrated!==null){var g=c.retryLane;c.retryLane=g!==0&&g<d?g:d}}function Hm(c,d){S1(c,d),(c=c.alternate)&&S1(c,d)}function AE(){return null}var I1=typeof reportError=="function"?reportError:function(c){console.error(c)};function Gm(c){this._internalRoot=c}gh.prototype.render=Gm.prototype.render=function(c){var d=this._internalRoot;if(d===null)throw Error(t(409));ph(c,d,null,null)},gh.prototype.unmount=Gm.prototype.unmount=function(){var c=this._internalRoot;if(c!==null){this._internalRoot=null;var d=c.containerInfo;ea(function(){ph(null,c,null,null)}),d[ro]=null}};function gh(c){this._internalRoot=c}gh.prototype.unstable_scheduleHydration=function(c){if(c){var d=gd();c={blockedOn:null,target:c,priority:d};for(var g=0;g<vi.length&&d!==0&&d<vi[g].priority;g++);vi.splice(g,0,c),g===0&&yd(c)}};function $m(c){return!(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)}function vh(c){return!(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11&&(c.nodeType!==8||c.nodeValue!==" react-mount-point-unstable "))}function A1(){}function RE(c,d,g,b,C){if(C){if(typeof b=="function"){var R=b;b=function(){var ce=mh(z);R.call(ce)}}var z=N1(d,b,c,0,null,!1,!1,"",A1);return c._reactRootContainer=z,c[ro]=z.current,Ac(c.nodeType===8?c.parentNode:c),ea(),z}for(;C=c.lastChild;)c.removeChild(C);if(typeof b=="function"){var G=b;b=function(){var ce=mh(J);G.call(ce)}}var J=Um(c,0,!1,null,null,!1,!1,"",A1);return c._reactRootContainer=J,c[ro]=J.current,Ac(c.nodeType===8?c.parentNode:c),ea(function(){ph(d,J,g,b)}),J}function xh(c,d,g,b,C){var R=g._reactRootContainer;if(R){var z=R;if(typeof C=="function"){var G=C;C=function(){var J=mh(z);G.call(J)}}ph(d,z,c,C)}else z=RE(g,d,c,C,b);return mh(z)}pd=function(c){switch(c.tag){case 3:var d=c.stateNode;if(d.current.memoizedState.isDehydrated){var g=Oo(d.pendingLanes);g!==0&&(Bo(d,g|1),nr(d,bt()),(at&6)===0&&(bl=bt()+500,Xo()))}break;case 13:ea(function(){var b=ao(c,1);if(b!==null){var C=Gn();ii(b,c,1,C)}}),Hm(c,1)}},Ga=function(c){if(c.tag===13){var d=ao(c,134217728);if(d!==null){var g=Gn();ii(d,c,134217728,g)}Hm(c,134217728)}},md=function(c){if(c.tag===13){var d=ts(c),g=ao(c,d);if(g!==null){var b=Gn();ii(g,c,d,b)}Hm(c,d)}},gd=function(){return rt},vd=function(c,d){var g=rt;try{return rt=c,d()}finally{rt=g}},ac=function(c,d,g){switch(d){case"input":if(Cn(c,g),d=g.name,g.type==="radio"&&d!=null){for(g=c;g.parentNode;)g=g.parentNode;for(g=g.querySelectorAll("input[name="+JSON.stringify(""+d)+'][type="radio"]'),d=0;d<g.length;d++){var b=g[d];if(b!==c&&b.form===c.form){var C=Pd(b);if(!C)throw Error(t(90));nt(b),Cn(b,C)}}}break;case"textarea":fr(c,g);break;case"select":d=g.value,d!=null&&Xt(c,!!g.multiple,d,!1)}},La=Fm,cc=ea;var jE={usingClientEntryPoint:!1,Events:[Tc,al,Pd,Yi,lc,Fm]},$c={findFiberByHostInstance:$s,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},TE={bundleType:$c.bundleType,version:$c.version,rendererPackageName:$c.rendererPackageName,rendererConfig:$c.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:S.ReactCurrentDispatcher,findHostInstanceByFiber:function(c){return c=fc(c),c===null?null:c.stateNode},findFiberByHostInstance:$c.findFiberByHostInstance||AE,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var yh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!yh.isDisabled&&yh.supportsFiber)try{zs=yh.inject(TE),pr=yh}catch{}}return rr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=jE,rr.createPortal=function(c,d){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!$m(d))throw Error(t(200));return IE(c,d,null,g)},rr.createRoot=function(c,d){if(!$m(c))throw Error(t(299));var g=!1,b="",C=I1;return d!=null&&(d.unstable_strictMode===!0&&(g=!0),d.identifierPrefix!==void 0&&(b=d.identifierPrefix),d.onRecoverableError!==void 0&&(C=d.onRecoverableError)),d=Um(c,1,!1,null,null,g,!1,b,C),c[ro]=d.current,Ac(c.nodeType===8?c.parentNode:c),new Gm(d)},rr.findDOMNode=function(c){if(c==null)return null;if(c.nodeType===1)return c;var d=c._reactInternals;if(d===void 0)throw typeof c.render=="function"?Error(t(188)):(c=Object.keys(c).join(","),Error(t(268,c)));return c=fc(d),c=c===null?null:c.stateNode,c},rr.flushSync=function(c){return ea(c)},rr.hydrate=function(c,d,g){if(!vh(d))throw Error(t(200));return xh(null,c,d,!0,g)},rr.hydrateRoot=function(c,d,g){if(!$m(c))throw Error(t(405));var b=g!=null&&g.hydratedSources||null,C=!1,R="",z=I1;if(g!=null&&(g.unstable_strictMode===!0&&(C=!0),g.identifierPrefix!==void 0&&(R=g.identifierPrefix),g.onRecoverableError!==void 0&&(z=g.onRecoverableError)),d=N1(d,null,c,1,g??null,C,!1,R,z),c[ro]=d.current,Ac(c),b)for(c=0;c<b.length;c++)g=b[c],C=g._getVersion,C=C(g._source),d.mutableSourceEagerHydrationData==null?d.mutableSourceEagerHydrationData=[g,C]:d.mutableSourceEagerHydrationData.push(g,C);return new gh(d)},rr.render=function(c,d,g){if(!vh(d))throw Error(t(200));return xh(null,c,d,!1,g)},rr.unmountComponentAtNode=function(c){if(!vh(c))throw Error(t(40));return c._reactRootContainer?(ea(function(){xh(null,null,c,!1,function(){c._reactRootContainer=null,c[ro]=null})}),!0):!1},rr.unstable_batchedUpdates=Fm,rr.unstable_renderSubtreeIntoContainer=function(c,d,g,b){if(!vh(g))throw Error(t(200));if(c==null||c._reactInternals===void 0)throw Error(t(38));return xh(c,d,g,!1,b)},rr.version="18.3.1-next-f1338f8080-20240426",rr}var F1;function WE(){if(F1)return Xm.exports;F1=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Xm.exports=zE(),Xm.exports}var L1;function VE(){if(L1)return bh;L1=1;var n=WE();return bh.createRoot=n.createRoot,bh.hydrateRoot=n.hydrateRoot,bh}var UE=VE();const HE=c_(UE),B1=({navigateTo:n,sectionToScrollTo:e})=>{const[t,r]=re.useState(!1),[i,o]=re.useState(45);return re.useEffect(()=>{if(e){const s=setTimeout(()=>{const a=document.getElementById(e);a&&a.scrollIntoView({behavior:"smooth",block:"start"})},100);return()=>clearTimeout(s)}},[e]),h.jsxs(h.Fragment,{children:[h.jsx("style",{children:`
                @import url('https://fonts.googleapis.com/css2?family=Quicksand:wght@400;500;600;700&family=Poppins:wght@400;500;600;700&display=swap');
                
                body {
                    font-family: 'Quicksand', sans-serif;
                    scroll-behavior: smooth;
                    background-color: #f0f9ff;
                }
                
                h1, h2, h3, h4, h5 {
                    font-family: 'Poppins', sans-serif;
                }
                
                .hero-section {
                    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100%25' height='100%25'%3E%3Cdefs%3E%3ClinearGradient id='a' gradientUnits='userSpaceOnUse' x1='0' x2='0' y1='0' y2='100%25' gradientTransform='rotate(240)'%3E%3Cstop offset='0' stop-color='%230ea5e9'/%3E%3Cstop offset='1' stop-color='%2306b6d4'/%3E%3C/linearGradient%3E%3Cpattern patternUnits='userSpaceOnUse' id='b' width='540' height='450' x='0' y='0' viewBox='0 0 1080 900'%3E%3Cg fill-opacity='0.1'%3E%3Cpolygon fill='%23444' points='90 150 0 300 180 300'/%3E%3Cpolygon points='90 150 180 0 0 0'/%3E%3Cpolygon fill='%23AAA' points='270 150 360 0 180 0'/%3E%3Cpolygon fill='%23DDD' points='450 150 360 300 540 300'/%3E%3Cpolygon fill='%23999' points='450 150 540 0 360 0'/%3E%3Cpolygon points='630 150 540 300 720 300'/%3E%3Cpolygon fill='%23DDD' points='630 150 720 0 540 0'/%3E%3Cpolygon fill='%23444' points='810 150 720 300 900 300'/%3E%3Cpolygon fill='%23FFF' points='810 150 900 0 720 0'/%3E%3Cpolygon fill='%23DDD' points='990 150 900 300 1080 300'/%3E%3Cpolygon fill='%23444' points='990 150 1080 0 900 0'/%3E%3Cpolygon fill='%23DDD' points='90 450 0 600 180 600'/%3E%3Cpolygon points='90 450 180 300 0 300'/%3E%3Cpolygon fill='%23666' points='270 450 180 600 360 600'/%3E%3Cpolygon fill='%23AAA' points='270 450 360 300 180 300'/%3E%3Cpolygon fill='%23DDD' points='450 450 360 600 540 600'/%3E%3Cpolygon fill='%23999' points='450 450 540 300 360 300'/%3E%3Cpolygon fill='%23999' points='630 450 540 600 720 600'/%3E%3Cpolygon fill='%23FFF' points='630 450 720 300 540 300'/%3E%3Cpolygon points='810 450 720 600 900 600'/%3E%3Cpolygon fill='%23DDD' points='810 450 900 300 720 300'/%3E%3Cpolygon fill='%23AAA' points='990 450 900 600 1080 600'/%3E%3Cpolygon fill='%23444' points='990 450 1080 300 900 300'/%3E%3Cpolygon fill='%23222' points='90 750 0 900 180 900'/%3E%3Cpolygon points='270 750 180 900 360 900'/%3E%3Cpolygon fill='%23DDD' points='270 750 360 600 180 600'/%3E%3Cpolygon points='450 750 540 600 360 600'/%3E%3Cpolygon points='630 750 540 900 720 900'/%3E%3Cpolygon fill='%23444' points='630 750 720 600 540 600'/%3E%3Cpolygon fill='%23AAA' points='810 750 720 900 900 900'/%3E%3Cpolygon fill='%23666' points='810 750 900 600 720 600'/%3E%3Cpolygon fill='%23999' points='990 750 900 900 1080 900'/%3E%3Cpolygon fill='%23999' points='180 0 90 150 270 150'/%3E%3Cpolygon fill='%23444' points='360 0 270 150 450 150'/%3E%3Cpolygon fill='%23FFF' points='540 0 450 150 630 150'/%3E%3Cpolygon points='900 0 810 150 990 150'/%3E%3Cpolygon fill='%23222' points='0 300 -90 450 90 450'/%3E%3Cpolygon fill='%23FFF' points='0 300 90 150 -90 150'/%3E%3Cpolygon fill='%23FFF' points='180 300 90 450 270 450'/%3E%3Cpolygon fill='%23666' points='180 300 270 150 90 150'/%3E%3Cpolygon fill='%23222' points='360 300 270 450 450 450'/%3E%3Cpolygon fill='%23FFF' points='360 300 450 150 270 150'/%3E%3Cpolygon fill='%23444' points='540 300 450 450 630 450'/%3E%3Cpolygon fill='%23222' points='540 300 630 150 450 150'/%3E%3Cpolygon fill='%23AAA' points='720 300 630 450 810 450'/%3E%3Cpolygon fill='%23666' points='720 300 810 150 630 150'/%3E%3Cpolygon fill='%23FFF' points='900 300 810 450 990 450'/%3E%3Cpolygon fill='%23999' points='900 300 990 150 810 150'/%3E%3Cpolygon points='0 600 -90 750 90 750'/%3E%3Cpolygon fill='%23666' points='0 600 90 450 -90 450'/%3E%3Cpolygon fill='%23AAA' points='180 600 90 750 270 750'/%3E%3Cpolygon fill='%23444' points='180 600 270 450 90 450'/%3E%3Cpolygon fill='%23444' points='360 600 270 750 450 750'/%3E%3Cpolygon fill='%23999' points='360 600 450 450 270 450'/%3E%3Cpolygon fill='%23666' points='540 600 630 450 450 450'/%3E%3Cpolygon fill='%23222' points='720 600 630 750 810 750'/%3E%3Cpolygon fill='%23FFF' points='900 600 810 750 990 750'/%3E%3Cpolygon fill='%23222' points='900 600 990 450 810 450'/%3E%3Cpolygon fill='%23DDD' points='0 900 90 750 -90 750'/%3E%3Cpolygon fill='%23444' points='180 900 270 750 90 750'/%3E%3Cpolygon fill='%23FFF' points='360 900 450 750 270 750'/%3E%3Cpolygon fill='%23AAA' points='540 900 630 750 450 750'/%3E%3Cpolygon fill='%23FFF' points='720 900 810 750 630 750'/%3E%3Cpolygon fill='%23222' points='900 900 990 750 810 750'/%3E%3Cpolygon fill='%23222' points='1080 300 990 450 1170 450'/%3E%3Cpolygon fill='%23FFF' points='1080 300 1170 150 990 150'/%3E%3Cpolygon points='1080 600 990 750 1170 750'/%3E%3Cpolygon fill='%23666' points='1080 600 1170 450 990 450'/%3E%3Cpolygon fill='%23DDD' points='1080 900 1170 750 990 750'/%3E%3C/g%3E%3C/pattern%3E%3C/defs%3E%3Crect x='0' y='0' fill='url(%23a)' width='100%25' height='100%25'/%3E%3Crect x='0' y='0' fill='url(%23b)' width='100%25' height='100%25'/%3E%3C/svg%3E");
                    background-size: cover;
                }
                
                .wave-divider {
                    position: absolute;
                    bottom: 0;
                    left: 0;
                    width: 100%;
                    overflow: hidden;
                    line-height: 0;
                    transform: rotate(180deg);
                }

                .wave-divider svg {
                    position: relative;
                    display: block;
                    width: calc(100% + 1.3px);
                    height: 78px;
                }

                .wave-divider .shape-fill {
                    fill: #F0F9FF;
                }
                
                .article-card {
                    transition: all 0.3s ease;
                }
                
                .article-card:hover {
                    transform: translateY(-5px);
                    box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
                }
                
                .badge {
                    position: relative;
                    overflow: hidden;
                }
                
                .badge::after {
                    content: '';
                    position: absolute;
                    top: -50%;
                    right: -50%;
                    bottom: -50%;
                    left: -50%;
                    background: linear-gradient(to bottom right, rgba(255, 255, 255, 0) 0%, rgba(255, 255, 255, 0.4) 100%);
                    transform: rotate(30deg) translate(-100%, 0);
                    animation: shine 3s infinite;
                }
                
                @keyframes shine {
                    0% {
                        transform: rotate(30deg) translate(-100%, 0);
                    }
                    20% {
                        transform: rotate(30deg) translate(100%, 0);
                    }
                    100% {
                        transform: rotate(30deg) translate(100%, 0);
                    }
                }
                
                .progress-container {
                    position: relative;
                    height: 20px;
                    background-color: #e2e8f0;
                    border-radius: 10px;
                    overflow: hidden;
                }
                
                .progress-bar {
                    position: absolute;
                    height: 100%;
                    background: linear-gradient(90deg, #0ea5e9, #06b6d4);
                    border-radius: 10px;
                    transition: width 1s ease;
                }
                
                .bubble {
                    position: absolute;
                    background-color: rgba(255, 255, 255, 0.4);
                    border-radius: 50%;
                    animation: float 8s infinite ease-in-out;
                }
                
                @keyframes float {
                    0%, 100% {
                        transform: translateY(0);
                    }
                    50% {
                        transform: translateY(-20px);
                    }
                }
                `}),h.jsxs("section",{id:"home",className:"relative hero-section min-h-screen flex items-center justify-center text-white",children:[h.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-full w-full opacity-20",viewBox:"0 0 1440 810",preserveAspectRatio:"xMidYMid slice",children:[h.jsx("defs",{children:h.jsxs("linearGradient",{id:"grad1",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[h.jsx("stop",{offset:"0%",style:{stopColor:"#0ea5e9",stopOpacity:1}}),h.jsx("stop",{offset:"100%",style:{stopColor:"#06b6d4",stopOpacity:1}})]})}),h.jsx("rect",{width:"1440",height:"400",fill:"#87CEEB"}),h.jsx("circle",{cx:"1100",cy:"150",r:"80",fill:"#FFD700"}),h.jsx("path",{d:"M0,400 L1440,400 L1440,600 C1200,550 960,650 720,600 C480,550 240,650 0,600 L0,400 Z",fill:"#0ea5e9"}),h.jsx("path",{d:"M0,600 C240,650 480,550 720,600 C960,650 1200,550 1440,600 L1440,810 L0,810 L0,600 Z",fill:"#F0E68C"}),h.jsx("rect",{x:"200",y:"500",width:"20",height:"100",fill:"#8B4513"}),h.jsx("path",{d:"M210,500 C250,480 270,450 260,420 C290,440 320,430 330,410 C340,440 370,450 400,440 C380,470 390,500 410,520 C370,510 350,520 340,540 C320,520 290,520 270,540 C260,520 230,510 210,500 Z",fill:"#228B22"})]}),h.jsx("div",{className:"bubble",style:{width:"30px",height:"30px",top:"20%",left:"10%",animationDelay:"0s"}}),h.jsx("div",{className:"bubble",style:{width:"20px",height:"20px",top:"30%",left:"20%",animationDelay:"1s"}}),h.jsx("div",{className:"bubble",style:{width:"25px",height:"25px",top:"50%",left:"80%",animationDelay:"2s"}}),h.jsx("div",{className:"bubble",style:{width:"15px",height:"15px",top:"70%",left:"70%",animationDelay:"3s"}}),h.jsx("div",{className:"bubble",style:{width:"35px",height:"35px",top:"40%",left:"90%",animationDelay:"4s"}})]}),h.jsxs("div",{className:"container mx-auto px-4 z-10 text-center",children:[h.jsx("h1",{className:"text-4xl md:text-6xl font-bold mb-6 drop-shadow-lg",children:"Save Our Oceans"}),h.jsx("p",{className:"text-xl md:text-2xl mb-8 max-w-2xl mx-auto drop-shadow-md",children:"Join our mission to clean beaches and protect marine life. Every piece of trash collected is a step toward healthier oceans."}),h.jsxs("div",{className:"flex flex-col sm:flex-row justify-center gap-4",children:[h.jsx("button",{onClick:()=>n("signup"),className:"bg-white text-sky-600 hover:bg-sky-100 font-bold py-3 px-8 rounded-full shadow-lg transition transform hover:scale-105",children:"Join The Movement"}),h.jsx("button",{onClick:()=>n("home","about-section"),className:"bg-transparent border-2 border-white text-white hover:bg-white hover:text-sky-600 font-bold py-3 px-8 rounded-full shadow-lg transition transform hover:scale-105",children:"Learn More"})]}),h.jsxs("div",{className:"mt-12",children:[h.jsxs("div",{className:"flex justify-center items-center gap-2 mb-2",children:[h.jsx("span",{className:"text-lg font-bold",children:"Ocean Health Progress"}),h.jsx("div",{className:"badge bg-yellow-400 text-yellow-800 text-xs px-2 py-1 rounded-full",children:"Level 3"})]}),h.jsx("div",{className:"progress-container max-w-md mx-auto",children:h.jsx("div",{className:"progress-bar",style:{width:`${i}%`}})}),h.jsx("p",{className:"text-sm mt-2",children:"45% of our goal reached! Help us get to 100%"})]})]}),h.jsx("div",{className:"wave-divider",children:h.jsx("svg",{"data-name":"Layer 1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1200 120",preserveAspectRatio:"none",children:h.jsx("path",{d:"M321.39,56.44c58-10.79,114.16-30.13,172-41.86,82.39-16.72,168.19-17.73,250.45-.39C823.78,31,906.67,72,985.66,92.83c70.05,18.48,146.53,26.09,214.34,3V0H0V27.35A600.21,600.21,0,0,0,321.39,56.44Z",className:"shape-fill"})})})]}),h.jsx("section",{id:"about-section",className:"py-20 bg-gradient-to-b from-sky-50 to-white",children:h.jsxs("div",{className:"container mx-auto px-4",children:[h.jsxs("div",{className:"text-center mb-16",children:[h.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-sky-800 mb-4",children:"About Beach Warriors"}),h.jsx("div",{className:"w-20 h-1 bg-sky-500 mx-auto mb-6"}),h.jsx("p",{className:"text-lg text-gray-600 max-w-3xl mx-auto",children:"We're on a mission to clean beaches and protect marine ecosystems through community action and education."})]}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-8",children:[h.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 transform transition hover:-translate-y-2",children:[h.jsx("div",{className:"bg-sky-100 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-4",children:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-sky-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})}),h.jsx("h3",{className:"text-xl font-bold text-sky-800 mb-3 text-center",children:"Join Cleanups"}),h.jsx("p",{className:"text-gray-600 text-center",children:"Participate in our organized beach cleanup events happening monthly across coastal communities."})]}),h.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 transform transition hover:-translate-y-2",children:[h.jsx("div",{className:"bg-sky-100 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-4",children:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-sky-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})})}),h.jsx("h3",{className:"text-xl font-bold text-sky-800 mb-3 text-center",children:"Learn & Educate"}),h.jsx("p",{className:"text-gray-600 text-center",children:"Access resources about marine conservation and share knowledge with your community."})]}),h.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 transform transition hover:-translate-y-2",children:[h.jsx("div",{className:"bg-sky-100 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-4",children:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-sky-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),h.jsx("h3",{className:"text-xl font-bold text-sky-800 mb-3 text-center",children:"Track Your Impact"}),h.jsx("p",{className:"text-gray-600 text-center",children:"Monitor how much waste you've helped remove and how many cleanups you've participated in."})]}),h.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 transform transition hover:-translate-y-2",children:[h.jsx("div",{className:"bg-sky-100 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-4",children:h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-sky-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]})}),h.jsx("h3",{className:"text-xl font-bold text-sky-800 mb-3 text-center",children:"Smart Cleanup Finder"}),h.jsx("p",{className:"text-gray-600 text-center",children:"Find nearby cleanup events using our smart location-based event finder."})]}),h.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 transform transition hover:-translate-y-2",children:[h.jsx("div",{className:"bg-sky-100 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-4",children:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-sky-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})}),h.jsx("h3",{className:"text-xl font-bold text-sky-800 mb-3 text-center",children:"AI-Powered Tools"}),h.jsx("p",{className:"text-gray-600 text-center",children:"Use AI features like image classification to categorize waste and track data efficiently."})]})]}),h.jsx("div",{className:"mt-16 bg-sky-100 rounded-2xl p-8 shadow-inner",children:h.jsxs("div",{className:"flex flex-col md:flex-row items-center",children:[h.jsxs("div",{className:"md:w-1/2 mb-6 md:mb-0 md:pr-8",children:[h.jsx("h3",{className:"text-2xl font-bold text-sky-800 mb-4",children:"Our Impact So Far"}),h.jsxs("ul",{className:"space-y-4",children:[h.jsxs("li",{className:"flex items-center",children:[h.jsx("div",{className:"bg-sky-500 rounded-full p-1 mr-3",children:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})}),h.jsxs("span",{className:"text-gray-700",children:["Over ",h.jsx("span",{className:"font-bold text-sky-700",children:"50 tons"})," of trash collected from beaches"]})]}),h.jsxs("li",{className:"flex items-center",children:[h.jsx("div",{className:"bg-sky-500 rounded-full p-1 mr-3",children:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})}),h.jsxs("span",{className:"text-gray-700",children:[h.jsx("span",{className:"font-bold text-sky-700",children:"10,000+"})," active volunteers globally"]})]}),h.jsxs("li",{className:"flex items-center",children:[h.jsx("div",{className:"bg-sky-500 rounded-full p-1 mr-3",children:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})}),h.jsxs("span",{className:"text-gray-700",children:[h.jsx("span",{className:"font-bold text-sky-700",children:"120+"})," cleanup events held monthly"]})]}),h.jsxs("li",{className:"flex items-center",children:[h.jsx("div",{className:"bg-sky-500 rounded-full p-1 mr-3",children:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})}),h.jsxs("span",{className:"text-gray-700",children:[h.jsx("span",{className:"font-bold text-sky-700",children:"35"})," countries with active programs"]})]}),h.jsxs("li",{className:"flex items-center",children:[h.jsx("div",{className:"bg-sky-500 rounded-full p-1 mr-3",children:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})}),h.jsxs("span",{className:"text-gray-700",children:[h.jsx("span",{className:"font-bold text-sky-700",children:"200+"})," educational workshops conducted"]})]}),h.jsxs("li",{className:"flex items-center",children:[h.jsx("div",{className:"bg-sky-500 rounded-full p-1 mr-3",children:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})}),h.jsxs("span",{className:"text-gray-700",children:[h.jsx("span",{className:"font-bold text-sky-700",children:"30"})," coastal communities supported"]})]})]})]}),h.jsx("div",{className:"md:w-1/2",children:h.jsx("div",{className:"relative",children:h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 400 300",className:"w-full h-auto",children:[h.jsx("rect",{width:"400",height:"150",y:"150",fill:"#F0E68C"}),h.jsx("path",{d:"M0,150 Q100,120 200,150 T400,150 V300 H0 Z",fill:"#F0E68C"}),h.jsx("path",{d:"M0,160 C100,130 250,190 400,160 V0 H0 Z",fill:"#87CEEB"}),h.jsx("path",{d:"M0,160 C100,130 250,190 400,160 V0 H0 Z",fill:"#0ea5e9",opacity:"0.7"}),h.jsx("circle",{cx:"100",cy:"140",r:"15",fill:"#8B4513"}),h.jsx("rect",{x:"95",y:"155",width:"10",height:"30",fill:"#06b6d4"}),h.jsx("rect",{x:"80",y:"160",width:"15",height:"5",fill:"#06b6d4",transform:"rotate(-15 95 162.5)"}),h.jsx("rect",{x:"105",y:"160",width:"15",height:"5",fill:"#06b6d4",transform:"rotate(15 112.5 162.5)"}),h.jsx("rect",{x:"95",y:"185",width:"5",height:"15",fill:"#8B4513"}),h.jsx("rect",{x:"100",y:"185",width:"5",height:"15",fill:"#8B4513"}),h.jsx("rect",{x:"130",y:"200",width:"30",height:"40",fill:"#4B5563",rx:"5"}),h.jsx("rect",{x:"170",y:"205",width:"25",height:"35",fill:"#4B5563",rx:"5"}),h.jsx("circle",{cx:"220",cy:"230",r:"4",fill:"#6B7280",className:"waste-item"}),h.jsx("rect",{x:"250",y:"225",width:"10",height:"2",fill:"#6B7280",className:"waste-item"}),h.jsx("path",{d:"M280,235 L285,230 L290,235 Z",fill:"#DC2626",className:"waste-item"})]})})})]})})]})}),h.jsx("section",{id:"articles-section",className:"py-20 bg-gray-50",children:h.jsxs("div",{className:"container mx-auto px-4",children:[h.jsxs("div",{className:"text-center mb-16",children:[h.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-sky-800 mb-4",children:"Latest Articles & News"}),h.jsx("div",{className:"w-20 h-1 bg-sky-500 mx-auto mb-6"}),h.jsx("p",{className:"text-lg text-gray-600 max-w-3xl mx-auto",children:"Stay informed about marine conservation efforts, success stories, and ways you can help."})]}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:[h.jsxs("div",{className:"article-card bg-white rounded-xl shadow-lg overflow-hidden",children:[h.jsx("img",{src:"https://placehold.co/600x400/E0F7FA/004D40?text=Coral+Reefs",alt:"Coral Reef Restoration",className:"w-full h-48 object-cover"}),h.jsxs("div",{className:"p-6",children:[h.jsx("h3",{className:"text-xl font-bold text-sky-800 mb-3",children:"Reviving Coral Reefs: A Global Effort"}),h.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"Learn about the innovative techniques being used worldwide to restore dying coral reefs and boost marine biodiversity."}),h.jsxs("a",{href:"#",className:"text-sky-600 hover:text-sky-800 font-medium flex items-center",children:["Read More",h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 ml-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5l7 7-7 7"})})]})]})]}),h.jsxs("div",{className:"article-card bg-white rounded-xl shadow-lg overflow-hidden",children:[h.jsx("img",{src:"https://placehold.co/600x400/E0F7FA/004D40?text=Plastic+Pollution",alt:"Plastic Pollution Solutions",className:"w-full h-48 object-cover"}),h.jsxs("div",{className:"p-6",children:[h.jsx("h3",{className:"text-xl font-bold text-sky-800 mb-3",children:"Tackling Plastic Pollution: Everyday Solutions"}),h.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"Discover practical tips and sustainable alternatives to reduce your plastic footprint and contribute to cleaner oceans."}),h.jsxs("a",{href:"#",className:"text-sky-600 hover:text-sky-800 font-medium flex items-center",children:["Read More",h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 ml-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5l7 7-7 7"})})]})]})]}),h.jsxs("div",{className:"article-card bg-white rounded-xl shadow-lg overflow-hidden",children:[h.jsx("img",{src:"https://placehold.co/600x400/E0F7FA/004D40?text=Marine+Life",alt:"Marine Life Protection",className:"w-full h-48 object-cover"}),h.jsxs("div",{className:"p-6",children:[h.jsx("h3",{className:"text-xl font-bold text-sky-800 mb-3",children:"Protecting Marine Life: Species Spotlight"}),h.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"An in-depth look at endangered marine species and the critical conservation efforts aimed at their survival."}),h.jsxs("a",{href:"#",className:"text-sky-600 hover:text-sky-800 font-medium flex items-center",children:["Read More",h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 ml-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5l7 7-7 7"})})]})]})]})]}),h.jsx("div",{className:"text-center mt-12",children:h.jsx("a",{href:"#",className:"bg-sky-600 text-white hover:bg-sky-700 font-bold py-3 px-8 rounded-full shadow-lg transition transform hover:scale-105",children:"View All Articles"})})]})}),h.jsxs("section",{id:"join",className:"relative py-20 bg-gradient-to-r from-sky-500 to-teal-500 text-white overflow-hidden",children:[h.jsxs("div",{className:"absolute inset-0 z-0",children:[h.jsx("div",{className:"bubble",style:{width:"80px",height:"80px",top:"10%",left:"5%",animationDelay:"0s"}}),h.jsx("div",{className:"bubble",style:{width:"60px",height:"60px",top:"70%",left:"15%",animationDelay:"2s"}}),h.jsx("div",{className:"bubble",style:{width:"100px",height:"100px",top:"30%",left:"80%",animationDelay:"4s"}}),h.jsx("div",{className:"bubble",style:{width:"70px",height:"70px",top:"85%",left:"90%",animationDelay:"1s"}})]}),h.jsxs("div",{className:"container mx-auto px-4 text-center relative z-10",children:[h.jsx("h2",{className:"text-4xl md:text-5xl font-bold mb-6 drop-shadow-lg",children:"Ready to Make a Difference?"}),h.jsx("p",{className:"text-xl md:text-2xl mb-10 max-w-2xl mx-auto drop-shadow-md",children:"Join the Beach Warriors community today and become part of the solution for healthier oceans."}),h.jsx("button",{onClick:()=>n("signup"),className:"bg-white text-sky-600 hover:bg-sky-100 font-bold py-4 px-10 rounded-full shadow-xl transition transform hover:scale-105 text-lg",children:"Sign Up Now"})]})]}),h.jsxs("footer",{className:"bg-gray-800 text-gray-200 py-12",children:[h.jsxs("div",{className:"container mx-auto px-4 grid grid-cols-1 md:grid-cols-4 gap-8",children:[h.jsxs("div",{children:[h.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-sky-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),h.jsx("span",{className:"text-2xl font-bold",children:"Beach Warriors"})]}),h.jsx("p",{className:"text-gray-400 text-sm",children:"Dedicated to cleaning our oceans, one beach at a time. Join us in protecting marine life and preserving our planet's most vital resource."})]}),h.jsxs("div",{children:[h.jsx("h3",{className:"text-lg font-semibold text-sky-300 mb-4",children:"Quick Links"}),h.jsxs("ul",{className:"space-y-2",children:[h.jsx("li",{children:h.jsx("button",{onClick:()=>n("home"),className:"hover:text-white transition text-sm",children:"Home"})}),h.jsx("li",{children:h.jsx("button",{onClick:()=>n("home","about-section"),className:"hover:text-white transition text-sm",children:"About Us"})}),h.jsx("li",{children:h.jsx("button",{onClick:()=>n("home","articles-section"),className:"hover:text-white transition text-sm",children:"Articles"})}),h.jsx("li",{children:h.jsx("a",{href:"#",className:"hover:text-white transition text-sm",children:"Privacy Policy"})}),h.jsx("li",{children:h.jsx("a",{href:"#",className:"hover:text-white transition text-sm",children:"Terms of Service"})})]})]}),h.jsxs("div",{children:[h.jsx("h3",{className:"text-lg font-semibold text-sky-300 mb-4",children:"Connect With Us"}),h.jsxs("ul",{className:"space-y-2",children:[h.jsx("li",{children:h.jsxs("a",{href:"#",className:"hover:text-white transition text-sm flex items-center",children:[h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{d:"M22.28,12.04C22.28,6.48,17.52,2,12,2S1.72,6.48,1.72,12.04c0,4.76,3.28,8.76,7.76,9.88l-0.52-2.36c-0.24-1.08,0.08-2.24,0.76-3.04l-0.12-0.08c-0.6-0.6-0.88-1.44-0.8-2.28l0.04-0.4c0.08-0.84-0.16-1.68-0.72-2.36l-0.08-0.08c-0.56-0.68-0.72-1.52-0.48-2.36l0.04-0.4c0.08-0.84,0.36-1.68,0.88-2.36l0.08-0.08c0.52-0.68,0.64-1.52,0.36-2.36l-0.08-0.4c-0.24-0.84,0.08-1.72,0.88-2.36l0.08-0.08c0.8-0.64,1.8-0.8,2.72-0.44l0.4-0.16c1.12-0.44,2.28-0.4,3.4-0.04l0.4,0.16c0.92-0.36,1.92-0.2,2.72,0.44l0.08,0.08c0.8,0.64,1.12,1.52,0.88,2.36l-0.08,0.4c-0.28,0.84-0.16,1.68,0.36,2.36l0.08,0.08c0.56,0.68,0.8,1.52,0.72,2.36l-0.04,0.4c-0.08,0.84,0.16,1.68,0.8,2.28l0.12,0.08c0.68,0.8,1,1.96,0.76,3.04l0.52,2.36C18.72,20.8,22.28,16.8,22.28,12.04zM12,4.4c-3.12,0-5.68,2.56-5.68,5.68c0,1.88,0.92,3.56,2.36,4.68l-0.16,0.16c-0.2,0.2-0.32,0.44-0.32,0.72l0.08,0.4c0.16,0.84-0.04,1.68-0.64,2.24l-0.08-0.08c-0.6,0.56-0.88,1.36-0.72,2.16l-0.04,0.2c-0.08,0.4-0.04,0.8,0.08,1.2l0.08,0.4c0.12,0.4,0.32,0.76,0.52,1.08l0.16,0.16c0.24,0.28,0.48,0.52,0.72,0.68l0.24,0.12c0.24,0.12,0.48,0.2,0.72,0.2l0.4,0.04c0.24,0,0.48,0,0.72-0.04l0.4-0.08c0.44-0.08,0.84-0.24,1.2-0.44l0.16-0.16c0.2-0.2,0.36-0.4,0.52-0.64l0.08-0.08c0.16-0.2,0.28-0.44,0.36-0.68l0.08-0.2c0.04-0.12,0.04-0.24,0.04-0.36l0-0.2c0-0.24,0.04-0.44,0.12-0.64l0.16-0.16c0.2-0.2,0.32-0.44,0.32-0.72l-0.08-0.4c-0.16-0.84,0.04-1.68,0.64-2.24l0.08-0.08c0.6-0.56,0.88-1.36,0.72-2.16l0.04-0.2c0.08-0.4,0.04-0.8-0.08-1.2l-0.08-0.4c-0.12-0.4-0.32-0.76-0.52-1.08l-0.16-0.16c-0.24-0.28-0.48-0.52-0.72-0.68l-0.24-0.12c-0.24-0.12-0.48-0.2-0.72-0.2l-0.4-0.04c-0.24,0-0.48,0-0.72,0.04z"})}),"Facebook"]})}),h.jsx("li",{children:h.jsxs("a",{href:"#",className:"hover:text-white transition text-sm flex items-center",children:[h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{d:"M22.28,12.04C22.28,6.48,17.52,2,12,2S1.72,6.48,1.72,12.04c0,4.76,3.28,8.76,7.76,9.88l-0.52-2.36c-0.24-1.08,0.08-2.24,0.76-3.04l-0.12-0.08c-0.6-0.6-0.88-1.44-0.8-2.28l0.04-0.4c0.08-0.84-0.16-1.68-0.72-2.36l-0.08-0.08c-0.56-0.68-0.72-1.52-0.48-2.36l0.04-0.4c0.08-0.84,0.36-1.68,0.88-2.36l0.08-0.08c0.52-0.68,0.64-1.52,0.36-2.36l-0.08-0.4c-0.24-0.84,0.08-1.72,0.88-2.36l0.08-0.08c0.8-0.64,1.8-0.8,2.72-0.44l0.4-0.16c1.12-0.44,2.28-0.4,3.4-0.04l0.4,0.16c0.92-0.36,1.92-0.2,2.72,0.44l0.08,0.08c0.8,0.64,1.12,1.52,0.88,2.36l-0.08,0.4c-0.28,0.84-0.16,1.68,0.36,2.36l0.08,0.08c0.56,0.68,0.8,1.52,0.72,2.36l-0.04,0.4c-0.08,0.84,0.16,1.68,0.8,2.28l0.12,0.08c0.68,0.8,1,1.96,0.76,3.04l0.52,2.36C18.72,20.8,22.28,16.8,22.28,12.04zM12,4.4c-3.12,0-5.68,2.56-5.68,5.68c0,1.88,0.92,3.56,2.36,4.68l-0.16,0.16c-0.2,0.2-0.32,0.44-0.32,0.72l0.08,0.4c0.16,0.84-0.04,1.68-0.64,2.24l-0.08-0.08c-0.6,0.56-0.88,1.36-0.72,2.16l-0.04,0.2c-0.08,0.4-0.04,0.8,0.08,1.2l0.08,0.4c0.12,0.4,0.32,0.76,0.52,1.08l0.16,0.16c0.24,0.28,0.48,0.52,0.72,0.68l0.24,0.12c0.24,0.12,0.48,0.2,0.72,0.2l0.4,0.04c0.24,0,0.48,0,0.72-0.04l0.4-0.08c0.44-0.08,0.84-0.24,1.2-0.44l0.16-0.16c0.2-0.2,0.36-0.4,0.52-0.64l0.08-0.08c0.16-0.2,0.28-0.44,0.36-0.68l0.08-0.2c0.04-0.12,0.04-0.24,0.04-0.36l0-0.2c0-0.24,0.04-0.44,0.12-0.64l0.16-0.16c0.2-0.2,0.32-0.44,0.32-0.72l-0.08-0.4c-0.16-0.84,0.04-1.68,0.64-2.24l0.08-0.08c0.6-0.56,0.88-1.36,0.72-2.16l0.04-0.2c0.08-0.4,0.04-0.8-0.08-1.2l-0.08-0.4c-0.12-0.4-0.32-0.76-0.52-1.08l-0.16-0.16c-0.24-0.28-0.48-0.52-0.72-0.68l-0.24-0.12c-0.24-0.12-0.48-0.2-0.72-0.2l-0.4-0.04c-0.24,0-0.48,0-0.72,0.04z"})}),"YouTube"]})})]})]}),h.jsxs("div",{children:[h.jsx("h3",{className:"text-lg font-semibold mb-4 text-sky-300",children:"Contact Us"}),h.jsxs("ul",{className:"space-y-2 text-sm text-gray-400",children:[h.jsxs("li",{className:"flex items-center",children:[h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2 text-sky-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.135a11.249 11.249 0 005.422 5.422l1.135-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),h.jsx("span",{children:"+1 (123) 456-7890"})]}),h.jsxs("li",{className:"flex items-center",children:[h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2 text-sky-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),h.jsx("span",{children:"info@beachwarriors.org"})]}),h.jsxs("li",{className:"flex items-start",children:[h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2 text-sky-400 mt-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),h.jsxs("span",{className:"text-gray-200",children:["123 Ocean Avenue",h.jsx("br",{}),"Coastal City, CA 90210"]})]})]}),h.jsxs("div",{className:"mt-6",children:[h.jsx("h4",{className:"text-sm font-semibold mb-2 text-sky-300",children:"Subscribe to our newsletter"}),h.jsxs("div",{className:"flex",children:[h.jsx("input",{type:"email",placeholder:"Your email",className:"px-3 py-2 rounded-l-md text-gray-800 focus:outline-none focus:ring-2 focus:ring-sky-500 w-full"}),h.jsx("button",{className:"bg-sky-600 hover:bg-sky-700 px-4 py-2 rounded-r-md font-medium transition",children:"Subscribe"})]})]})]})]}),h.jsx("div",{className:"bg-gradient-to-r from-sky-400 to-sky-600 h-2 mt-12"}),h.jsxs("div",{className:"text-center text-gray-400 text-sm mt-8",children:[" ",new Date().getFullYear()," Beach Warriors. All rights reserved."]})]})]})},GE=()=>{};var z1={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d_=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},$E=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){const o=n[t++],s=n[t++],a=n[t++],l=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const o=n[t++],s=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},h_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const o=n[i],s=i+1<n.length,a=s?n[i+1]:0,l=i+2<n.length,u=l?n[i+2]:0,f=o>>2,p=(o&3)<<4|a>>4;let m=(a&15)<<2|u>>6,v=u&63;l||(v=64,s||(m=64)),r.push(t[f],t[p],t[m],t[v])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(d_(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):$E(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const o=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;const u=i<n.length?t[n.charAt(i)]:64;++i;const p=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||a==null||u==null||p==null)throw new qE;const m=o<<2|a>>4;if(r.push(m),u!==64){const v=a<<4&240|u>>2;if(r.push(v),p!==64){const y=u<<6&192|p;r.push(y)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class qE extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const KE=function(n){const e=d_(n);return h_.encodeByteArray(e,!0)},lf=function(n){return KE(n).replace(/\./g,"")},f_=function(n){try{return h_.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XE(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YE=()=>XE().__FIREBASE_DEFAULTS__,JE=()=>{if(typeof process>"u"||typeof z1>"u")return;const n=z1.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},QE=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&f_(n[1]);return e&&JSON.parse(e)},Wg=()=>{try{return GE()||YE()||JE()||QE()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},p_=n=>{var e,t;return(t=(e=Wg())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},ZE=n=>{const e=p_(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},m_=()=>{var n;return(n=Wg())===null||n===void 0?void 0:n.config},g_=n=>{var e;return(e=Wg())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eN{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zu(n){return n.endsWith(".cloudworkstations.dev")}async function v_(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tN(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[lf(JSON.stringify(t)),lf(JSON.stringify(s)),""].join(".")}const hu={};function nN(){const n={prod:[],emulator:[]};for(const e of Object.keys(hu))hu[e]?n.emulator.push(e):n.prod.push(e);return n}function rN(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let W1=!1;function x_(n,e){if(typeof window>"u"||typeof document>"u"||!zu(window.location.host)||hu[n]===e||hu[n]||W1)return;hu[n]=e;function t(m){return`__firebase__banner__${m}`}const r="__firebase__banner",o=nN().prod.length>0;function s(){const m=document.getElementById(r);m&&m.remove()}function a(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function l(m,v){m.setAttribute("width","24"),m.setAttribute("id",v),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function u(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{W1=!0,s()},m}function f(m,v){m.setAttribute("id",v),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function p(){const m=rN(r),v=t("text"),y=document.getElementById(v)||document.createElement("span"),w=t("learnmore"),_=document.getElementById(w)||document.createElement("a"),k=t("preprendIcon"),E=document.getElementById(k)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const N=m.element;a(N),f(_,w);const S=u();l(E,k),N.append(E,y,_,S),document.body.appendChild(N)}o?(y.innerText="Preview backend disconnected.",E.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(E.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,y.innerText="Preview backend running in this workspace."),y.setAttribute("id",v)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function iN(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(qn())}function oN(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function sN(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function aN(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function lN(){const n=qn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function cN(){try{return typeof indexedDB=="object"}catch{return!1}}function uN(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dN="FirebaseError";class So extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=dN,Object.setPrototypeOf(this,So.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Wu.prototype.create)}}class Wu{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?hN(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new So(i,a,r)}}function hN(n,e){return n.replace(fN,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const fN=/\{\$([^}]+)}/g;function pN(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function ba(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const o=n[i],s=e[i];if(V1(o)&&V1(s)){if(!ba(o,s))return!1}else if(o!==s)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function V1(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vu(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function su(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function au(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function mN(n,e){const t=new gN(n,e);return t.subscribe.bind(t)}class gN{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");vN(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=Qm),i.error===void 0&&(i.error=Qm),i.complete===void 0&&(i.complete=Qm);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function vN(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Qm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ia(n){return n&&n._delegate?n._delegate:n}class wa{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ca="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xN{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new eN;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(bN(e))try{this.getOrInitializeService({instanceIdentifier:ca})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=ca){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ca){return this.instances.has(e)}getOptions(e=ca){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[o,s]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,t){var r;const i=this.normalizeInstanceIdentifier(t),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);const s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:yN(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ca){return this.component?this.component.multipleInstances?e:ca:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function yN(n){return n===ca?void 0:n}function bN(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wN{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new xN(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ft;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(ft||(ft={}));const _N={debug:ft.DEBUG,verbose:ft.VERBOSE,info:ft.INFO,warn:ft.WARN,error:ft.ERROR,silent:ft.SILENT},kN=ft.INFO,CN={[ft.DEBUG]:"log",[ft.VERBOSE]:"log",[ft.INFO]:"info",[ft.WARN]:"warn",[ft.ERROR]:"error"},EN=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=CN[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Vg{constructor(e){this.name=e,this._logLevel=kN,this._logHandler=EN,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ft))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?_N[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ft.DEBUG,...e),this._logHandler(this,ft.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ft.VERBOSE,...e),this._logHandler(this,ft.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ft.INFO,...e),this._logHandler(this,ft.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ft.WARN,...e),this._logHandler(this,ft.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ft.ERROR,...e),this._logHandler(this,ft.ERROR,...e)}}const NN=(n,e)=>e.some(t=>n instanceof t);let U1,H1;function SN(){return U1||(U1=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function IN(){return H1||(H1=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const y_=new WeakMap,Y0=new WeakMap,b_=new WeakMap,Zm=new WeakMap,Ug=new WeakMap;function AN(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",s)},o=()=>{t(vs(n.result)),i()},s=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",s)});return e.then(t=>{t instanceof IDBCursor&&y_.set(t,n)}).catch(()=>{}),Ug.set(e,n),e}function RN(n){if(Y0.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",s),n.removeEventListener("abort",s)},o=()=>{t(),i()},s=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",s),n.addEventListener("abort",s)});Y0.set(n,e)}let J0={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Y0.get(n);if(e==="objectStoreNames")return n.objectStoreNames||b_.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return vs(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function jN(n){J0=n(J0)}function TN(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(e0(this),e,...t);return b_.set(r,e.sort?e.sort():[e]),vs(r)}:IN().includes(n)?function(...e){return n.apply(e0(this),e),vs(y_.get(this))}:function(...e){return vs(n.apply(e0(this),e))}}function DN(n){return typeof n=="function"?TN(n):(n instanceof IDBTransaction&&RN(n),NN(n,SN())?new Proxy(n,J0):n)}function vs(n){if(n instanceof IDBRequest)return AN(n);if(Zm.has(n))return Zm.get(n);const e=DN(n);return e!==n&&(Zm.set(n,e),Ug.set(e,n)),e}const e0=n=>Ug.get(n);function MN(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){const s=indexedDB.open(n,e),a=vs(s);return r&&s.addEventListener("upgradeneeded",l=>{r(vs(s.result),l.oldVersion,l.newVersion,vs(s.transaction),l)}),t&&s.addEventListener("blocked",l=>t(l.oldVersion,l.newVersion,l)),a.then(l=>{o&&l.addEventListener("close",()=>o()),i&&l.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const PN=["get","getKey","getAll","getAllKeys","count"],ON=["put","add","delete","clear"],t0=new Map;function G1(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(t0.get(e))return t0.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=ON.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||PN.includes(t)))return;const o=async function(s,...a){const l=this.transaction(s,i?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[t](...a),i&&l.done]))[0]};return t0.set(e,o),o}jN(n=>({...n,get:(e,t,r)=>G1(e,t)||n.get(e,t,r),has:(e,t)=>!!G1(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FN{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(LN(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function LN(n){const e=n.getComponent();return e?.type==="VERSION"}const Q0="@firebase/app",$1="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eo=new Vg("@firebase/app"),BN="@firebase/app-compat",zN="@firebase/analytics-compat",WN="@firebase/analytics",VN="@firebase/app-check-compat",UN="@firebase/app-check",HN="@firebase/auth",GN="@firebase/auth-compat",$N="@firebase/database",qN="@firebase/data-connect",KN="@firebase/database-compat",XN="@firebase/functions",YN="@firebase/functions-compat",JN="@firebase/installations",QN="@firebase/installations-compat",ZN="@firebase/messaging",e5="@firebase/messaging-compat",t5="@firebase/performance",n5="@firebase/performance-compat",r5="@firebase/remote-config",i5="@firebase/remote-config-compat",o5="@firebase/storage",s5="@firebase/storage-compat",a5="@firebase/firestore",l5="@firebase/ai",c5="@firebase/firestore-compat",u5="firebase",d5="11.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z0="[DEFAULT]",h5={[Q0]:"fire-core",[BN]:"fire-core-compat",[WN]:"fire-analytics",[zN]:"fire-analytics-compat",[UN]:"fire-app-check",[VN]:"fire-app-check-compat",[HN]:"fire-auth",[GN]:"fire-auth-compat",[$N]:"fire-rtdb",[qN]:"fire-data-connect",[KN]:"fire-rtdb-compat",[XN]:"fire-fn",[YN]:"fire-fn-compat",[JN]:"fire-iid",[QN]:"fire-iid-compat",[ZN]:"fire-fcm",[e5]:"fire-fcm-compat",[t5]:"fire-perf",[n5]:"fire-perf-compat",[r5]:"fire-rc",[i5]:"fire-rc-compat",[o5]:"fire-gcs",[s5]:"fire-gcs-compat",[a5]:"fire-fst",[c5]:"fire-fst-compat",[l5]:"fire-vertex","fire-js":"fire-js",[u5]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cf=new Map,f5=new Map,eg=new Map;function q1(n,e){try{n.container.addComponent(e)}catch(t){Eo.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Gl(n){const e=n.name;if(eg.has(e))return Eo.debug(`There were multiple attempts to register component ${e}.`),!1;eg.set(e,n);for(const t of cf.values())q1(t,n);for(const t of f5.values())q1(t,n);return!0}function Hg(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function zr(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p5={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},xs=new Wu("app","Firebase",p5);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m5{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new wa("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw xs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ec=d5;function w_(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Z0,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw xs.create("bad-app-name",{appName:String(i)});if(t||(t=m_()),!t)throw xs.create("no-options");const o=cf.get(i);if(o){if(ba(t,o.options)&&ba(r,o.config))return o;throw xs.create("duplicate-app",{appName:i})}const s=new wN(i);for(const l of eg.values())s.addComponent(l);const a=new m5(t,r,s);return cf.set(i,a),a}function __(n=Z0){const e=cf.get(n);if(!e&&n===Z0&&m_())return w_();if(!e)throw xs.create("no-app",{appName:n});return e}function ys(n,e,t){var r;let i=(r=h5[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);const o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){const a=[`Unable to register library "${i}" with version "${e}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Eo.warn(a.join(" "));return}Gl(new wa(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g5="firebase-heartbeat-database",v5=1,ku="firebase-heartbeat-store";let n0=null;function k_(){return n0||(n0=MN(g5,v5,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(ku)}catch(t){console.warn(t)}}}}).catch(n=>{throw xs.create("idb-open",{originalErrorMessage:n.message})})),n0}async function x5(n){try{const t=(await k_()).transaction(ku),r=await t.objectStore(ku).get(C_(n));return await t.done,r}catch(e){if(e instanceof So)Eo.warn(e.message);else{const t=xs.create("idb-get",{originalErrorMessage:e?.message});Eo.warn(t.message)}}}async function K1(n,e){try{const r=(await k_()).transaction(ku,"readwrite");await r.objectStore(ku).put(e,C_(n)),await r.done}catch(t){if(t instanceof So)Eo.warn(t.message);else{const r=xs.create("idb-set",{originalErrorMessage:t?.message});Eo.warn(r.message)}}}function C_(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y5=1024,b5=30;class w5{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new k5(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=X1();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>b5){const s=C5(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Eo.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=X1(),{heartbeatsToSend:r,unsentEntries:i}=_5(this._heartbeatsCache.heartbeats),o=lf(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return Eo.warn(t),""}}}function X1(){return new Date().toISOString().substring(0,10)}function _5(n,e=y5){const t=[];let r=n.slice();for(const i of n){const o=t.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),Y1(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),Y1(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class k5{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return cN()?uN().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await x5(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return K1(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return K1(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Y1(n){return lf(JSON.stringify({version:2,heartbeats:n})).length}function C5(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E5(n){Gl(new wa("platform-logger",e=>new FN(e),"PRIVATE")),Gl(new wa("heartbeat",e=>new w5(e),"PRIVATE")),ys(Q0,$1,n),ys(Q0,$1,"esm2017"),ys("fire-js","")}E5("");function Gg(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function E_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const N5=E_,N_=new Wu("auth","Firebase",E_());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uf=new Vg("@firebase/auth");function S5(n,...e){uf.logLevel<=ft.WARN&&uf.warn(`Auth (${ec}): ${n}`,...e)}function ef(n,...e){uf.logLevel<=ft.ERROR&&uf.error(`Auth (${ec}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function di(n,...e){throw $g(n,...e)}function Di(n,...e){return $g(n,...e)}function S_(n,e,t){const r=Object.assign(Object.assign({},N5()),{[e]:t});return new Wu("auth","Firebase",r).create(e,{appName:n.name})}function Co(n){return S_(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function $g(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return N_.create(n,...e)}function We(n,e,...t){if(!n)throw $g(e,...t)}function yo(n){const e="INTERNAL ASSERTION FAILED: "+n;throw ef(e),new Error(e)}function No(n,e){n||yo(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tg(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function I5(){return J1()==="http:"||J1()==="https:"}function J1(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A5(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(I5()||sN()||"connection"in navigator)?navigator.onLine:!0}function R5(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uu{constructor(e,t){this.shortDelay=e,this.longDelay=t,No(t>e,"Short delay should be less than long delay!"),this.isMobile=iN()||aN()}get(){return A5()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qg(n,e){No(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I_{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;yo("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;yo("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;yo("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j5={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T5=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],D5=new Uu(3e4,6e4);function Is(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function As(n,e,t,r,i={}){return A_(n,i,async()=>{let o={},s={};r&&(e==="GET"?s=r:o={body:JSON.stringify(r)});const a=Vu(Object.assign({key:n.config.apiKey},s)).slice(1),l=await n._getAdditionalHeaders();l["Content-Type"]="application/json",n.languageCode&&(l["X-Firebase-Locale"]=n.languageCode);const u=Object.assign({method:e,headers:l},o);return oN()||(u.referrerPolicy="no-referrer"),n.emulatorConfig&&zu(n.emulatorConfig.host)&&(u.credentials="include"),I_.fetch()(await R_(n,n.config.apiHost,t,a),u)})}async function A_(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},j5),e);try{const i=new P5(n),o=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const s=await o.json();if("needConfirmation"in s)throw wh(n,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{const a=o.ok?s.errorMessage:s.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw wh(n,"credential-already-in-use",s);if(l==="EMAIL_EXISTS")throw wh(n,"email-already-in-use",s);if(l==="USER_DISABLED")throw wh(n,"user-disabled",s);const f=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw S_(n,f,u);di(n,f)}}catch(i){if(i instanceof So)throw i;di(n,"network-request-failed",{message:String(i)})}}async function Hu(n,e,t,r,i={}){const o=await As(n,e,t,r,i);return"mfaPendingCredential"in o&&di(n,"multi-factor-auth-required",{_serverResponse:o}),o}async function R_(n,e,t,r){const i=`${e}${t}?${r}`,o=n,s=o.config.emulator?qg(n.config,i):`${n.config.apiScheme}://${i}`;return T5.includes(t)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s}function M5(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class P5{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Di(this.auth,"network-request-failed")),D5.get())})}}function wh(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=Di(n,e,r);return i.customData._tokenResponse=t,i}function Q1(n){return n!==void 0&&n.enterprise!==void 0}class O5{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return M5(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function F5(n,e){return As(n,"GET","/v2/recaptchaConfig",Is(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function L5(n,e){return As(n,"POST","/v1/accounts:delete",e)}async function df(n,e){return As(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fu(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function B5(n,e=!1){const t=Ia(n),r=await t.getIdToken(e),i=Kg(r);We(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:fu(r0(i.auth_time)),issuedAtTime:fu(r0(i.iat)),expirationTime:fu(r0(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}}function r0(n){return Number(n)*1e3}function Kg(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return ef("JWT malformed, contained fewer than 3 sections"),null;try{const i=f_(t);return i?JSON.parse(i):(ef("Failed to decode base64 JWT payload"),null)}catch(i){return ef("Caught error parsing JWT payload as JSON",i?.toString()),null}}function Z1(n){const e=Kg(n);return We(e,"internal-error"),We(typeof e.exp<"u","internal-error"),We(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cu(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof So&&z5(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function z5({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W5{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ng{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=fu(this.lastLoginAt),this.creationTime=fu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hf(n){var e;const t=n.auth,r=await n.getIdToken(),i=await Cu(n,df(t,{idToken:r}));We(i?.users.length,t,"internal-error");const o=i.users[0];n._notifyReloadListener(o);const s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?j_(o.providerUserInfo):[],a=U5(n.providerData,s),l=n.isAnonymous,u=!(n.email&&o.passwordHash)&&!a?.length,f=l?u:!1,p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new ng(o.createdAt,o.lastLoginAt),isAnonymous:f};Object.assign(n,p)}async function V5(n){const e=Ia(n);await hf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function U5(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function j_(n){return n.map(e=>{var{providerId:t}=e,r=Gg(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function H5(n,e){const t=await A_(n,{},async()=>{const r=Vu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,s=await R_(n,i,"/v1/token",`key=${o}`),a=await n._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:a,body:r};return n.emulatorConfig&&zu(n.emulatorConfig.host)&&(l.credentials="include"),I_.fetch()(s,l)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function G5(n,e){return As(n,"POST","/v2/accounts:revokeToken",Is(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){We(e.idToken,"internal-error"),We(typeof e.idToken<"u","internal-error"),We(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Z1(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){We(e.length!==0,"internal-error");const t=Z1(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(We(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:o}=await H5(e,t);this.updateTokensAndExpiration(r,i,Number(o))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:o}=t,s=new Dl;return r&&(We(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(We(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(We(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Dl,this.toJSON())}_performRefresh(){return yo("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function os(n,e){We(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class si{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,o=Gg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new W5(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new ng(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await Cu(this,this.stsTokenManager.getToken(this.auth,e));return We(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return B5(this,e)}reload(){return V5(this)}_assign(e){this!==e&&(We(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new si(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){We(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await hf(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(zr(this.auth.app))return Promise.reject(Co(this.auth));const e=await this.getIdToken();return await Cu(this,L5(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,o,s,a,l,u,f;const p=(r=t.displayName)!==null&&r!==void 0?r:void 0,m=(i=t.email)!==null&&i!==void 0?i:void 0,v=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,y=(s=t.photoURL)!==null&&s!==void 0?s:void 0,w=(a=t.tenantId)!==null&&a!==void 0?a:void 0,_=(l=t._redirectEventId)!==null&&l!==void 0?l:void 0,k=(u=t.createdAt)!==null&&u!==void 0?u:void 0,E=(f=t.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:N,emailVerified:S,isAnonymous:A,providerData:P,stsTokenManager:D}=t;We(N&&D,e,"internal-error");const j=Dl.fromJSON(this.name,D);We(typeof N=="string",e,"internal-error"),os(p,e.name),os(m,e.name),We(typeof S=="boolean",e,"internal-error"),We(typeof A=="boolean",e,"internal-error"),os(v,e.name),os(y,e.name),os(w,e.name),os(_,e.name),os(k,e.name),os(E,e.name);const T=new si({uid:N,auth:e,email:m,emailVerified:S,displayName:p,isAnonymous:A,photoURL:y,phoneNumber:v,tenantId:w,stsTokenManager:j,createdAt:k,lastLoginAt:E});return P&&Array.isArray(P)&&(T.providerData=P.map(M=>Object.assign({},M))),_&&(T._redirectEventId=_),T}static async _fromIdTokenResponse(e,t,r=!1){const i=new Dl;i.updateFromServerResponse(t);const o=new si({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await hf(o),o}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];We(i.localId!==void 0,"internal-error");const o=i.providerUserInfo!==void 0?j_(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new Dl;a.updateFromIdToken(r);const l=new si({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new ng(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(l,u),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eb=new Map;function bo(n){No(n instanceof Function,"Expected a class definition");let e=eb.get(n);return e?(No(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,eb.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}T_.type="NONE";const tb=T_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tf(n,e,t){return`firebase:${n}:${e}:${t}`}class Ml{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:o}=this.auth;this.fullUserKey=tf(this.userKey,i.apiKey,o),this.fullPersistenceKey=tf("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await df(this.auth,{idToken:e}).catch(()=>{});return t?si._fromGetAccountInfoResponse(this.auth,t,e):null}return si._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Ml(bo(tb),e,r);const i=(await Promise.all(t.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let o=i[0]||bo(tb);const s=tf(r,e.config.apiKey,e.name);let a=null;for(const u of t)try{const f=await u._get(s);if(f){let p;if(typeof f=="string"){const m=await df(e,{idToken:f}).catch(()=>{});if(!m)break;p=await si._fromGetAccountInfoResponse(e,m,f)}else p=si._fromJSON(e,f);u!==o&&(a=p),o=u;break}}catch{}const l=i.filter(u=>u._shouldAllowMigration);return!o._shouldAllowMigration||!l.length?new Ml(o,e,r):(o=l[0],a&&await o._set(s,a.toJSON()),await Promise.all(t.map(async u=>{if(u!==o)try{await u._remove(s)}catch{}})),new Ml(o,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nb(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(O_(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(D_(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(L_(e))return"Blackberry";if(B_(e))return"Webos";if(M_(e))return"Safari";if((e.includes("chrome/")||P_(e))&&!e.includes("edge/"))return"Chrome";if(F_(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function D_(n=qn()){return/firefox\//i.test(n)}function M_(n=qn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function P_(n=qn()){return/crios\//i.test(n)}function O_(n=qn()){return/iemobile/i.test(n)}function F_(n=qn()){return/android/i.test(n)}function L_(n=qn()){return/blackberry/i.test(n)}function B_(n=qn()){return/webos/i.test(n)}function Xg(n=qn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function $5(n=qn()){var e;return Xg(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function q5(){return lN()&&document.documentMode===10}function z_(n=qn()){return Xg(n)||F_(n)||B_(n)||L_(n)||/windows phone/i.test(n)||O_(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W_(n,e=[]){let t;switch(n){case"Browser":t=nb(qn());break;case"Worker":t=`${nb(qn())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ec}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K5{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=o=>new Promise((s,a)=>{try{const l=e(o);s(l)}catch(l){a(l)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function X5(n,e={}){return As(n,"GET","/v2/passwordPolicy",Is(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y5=6;class J5{constructor(e){var t,r,i,o;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=s.minPasswordLength)!==null&&t!==void 0?t:Y5,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,o,s,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(t=l.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(o=l.containsUppercaseLetter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(s=l.containsNumericCharacter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q5{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new rb(this),this.idTokenSubscription=new rb(this),this.beforeStateQueue=new K5(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=N_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=bo(t)),this._initializationPromise=this.queue(async()=>{var r,i,o;if(!this._deleted&&(this.persistenceManager=await Ml.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await df(this,{idToken:e}),r=await si._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(zr(this.app)){const s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const s=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i?._redirectEventId,l=await this.tryRedirectSignIn(e);(!s||s===a)&&l?.user&&(i=l.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return We(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await hf(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=R5()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(zr(this.app))return Promise.reject(Co(this));const t=e?Ia(e):null;return t&&We(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&We(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return zr(this.app)?Promise.reject(Co(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return zr(this.app)?Promise.reject(Co(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(bo(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await X5(this),t=new J5(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Wu("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await G5(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&bo(e)||this._popupRedirectResolver;We(t,this,"argument-error"),this.redirectPersistenceManager=await Ml.create(this,[bo(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const o=typeof t=="function"?t:t.next.bind(t);let s=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(We(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof t=="function"){const l=e.addObserver(t,r,i);return()=>{s=!0,l()}}else{const l=e.addObserver(t);return()=>{s=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return We(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=W_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;if(zr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t?.error&&S5(`Error while retrieving App Check token: ${t.error}`),t?.token}}function Aa(n){return Ia(n)}class rb{constructor(e){this.auth=e,this.observer=null,this.addObserver=mN(t=>this.observer=t)}get next(){return We(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Kf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Z5(n){Kf=n}function V_(n){return Kf.loadJS(n)}function eS(){return Kf.recaptchaEnterpriseScript}function tS(){return Kf.gapiScript}function nS(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class rS{constructor(){this.enterprise=new iS}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class iS{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const oS="recaptcha-enterprise",U_="NO_RECAPTCHA";class sS{constructor(e){this.type=oS,this.auth=Aa(e)}async verify(e="verify",t=!1){async function r(o){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(s,a)=>{F5(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const u=new O5(l);return o.tenantId==null?o._agentRecaptchaConfig=u:o._tenantRecaptchaConfigs[o.tenantId]=u,s(u.siteKey)}}).catch(l=>{a(l)})})}function i(o,s,a){const l=window.grecaptcha;Q1(l)?l.enterprise.ready(()=>{l.enterprise.execute(o,{action:e}).then(u=>{s(u)}).catch(()=>{s(U_)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new rS().execute("siteKey",{action:"verify"}):new Promise((o,s)=>{r(this.auth).then(a=>{if(!t&&Q1(window.grecaptcha))i(a,o,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let l=eS();l.length!==0&&(l+=a),V_(l).then(()=>{i(a,o,s)}).catch(u=>{s(u)})}}).catch(a=>{s(a)})})}}async function ib(n,e,t,r=!1,i=!1){const o=new sS(n);let s;if(i)s=U_;else try{s=await o.verify(t)}catch{s=await o.verify(t,!0)}const a=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const l=a.phoneEnrollmentInfo.phoneNumber,u=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:u,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const l=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function rg(n,e,t,r,i){var o;if(!((o=n._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await ib(n,e,t,t==="getOobCode");return r(n,s)}else return r(n,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await ib(n,e,t,t==="getOobCode");return r(n,a)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aS(n,e){const t=Hg(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),o=t.getOptions();if(ba(o,e??{}))return i;di(i,"already-initialized")}return t.initialize({options:e})}function lS(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(bo);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function cS(n,e,t){const r=Aa(n);We(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,o=H_(e),{host:s,port:a}=uS(e),l=a===null?"":`:${a}`,u={url:`${o}//${s}${l}/`},f=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){We(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),We(ba(u,r.config.emulator)&&ba(f,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=f,r.settings.appVerificationDisabledForTesting=!0,zu(s)?(v_(`${o}//${s}${l}`),x_("Auth",!0)):dS()}function H_(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function uS(n){const e=H_(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const o=i[1];return{host:o,port:ob(r.substr(o.length+1))}}else{const[o,s]=r.split(":");return{host:o,port:ob(s)}}}function ob(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function dS(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yg{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return yo("not implemented")}_getIdTokenResponse(e){return yo("not implemented")}_linkToIdToken(e,t){return yo("not implemented")}_getReauthenticationResolver(e){return yo("not implemented")}}async function hS(n,e){return As(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fS(n,e){return Hu(n,"POST","/v1/accounts:signInWithPassword",Is(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pS(n,e){return Hu(n,"POST","/v1/accounts:signInWithEmailLink",Is(n,e))}async function mS(n,e){return Hu(n,"POST","/v1/accounts:signInWithEmailLink",Is(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eu extends Yg{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new Eu(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new Eu(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return rg(e,t,"signInWithPassword",fS);case"emailLink":return pS(e,{email:this._email,oobCode:this._password});default:di(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return rg(e,r,"signUpPassword",hS);case"emailLink":return mS(e,{idToken:t,email:this._email,oobCode:this._password});default:di(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pl(n,e){return Hu(n,"POST","/v1/accounts:signInWithIdp",Is(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gS="http://localhost";class _a extends Yg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new _a(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):di("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,o=Gg(t,["providerId","signInMethod"]);if(!r||!i)return null;const s=new _a(r,i);return s.idToken=o.idToken||void 0,s.accessToken=o.accessToken||void 0,s.secret=o.secret,s.nonce=o.nonce,s.pendingToken=o.pendingToken||null,s}_getIdTokenResponse(e){const t=this.buildRequest();return Pl(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Pl(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Pl(e,t)}buildRequest(){const e={requestUri:gS,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Vu(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vS(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function xS(n){const e=su(au(n)).link,t=e?su(au(e)).deep_link_id:null,r=su(au(n)).deep_link_id;return(r?su(au(r)).link:null)||r||t||e||n}class Jg{constructor(e){var t,r,i,o,s,a;const l=su(au(e)),u=(t=l.apiKey)!==null&&t!==void 0?t:null,f=(r=l.oobCode)!==null&&r!==void 0?r:null,p=vS((i=l.mode)!==null&&i!==void 0?i:null);We(u&&f&&p,"argument-error"),this.apiKey=u,this.operation=p,this.code=f,this.continueUrl=(o=l.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(s=l.lang)!==null&&s!==void 0?s:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const t=xS(e);try{return new Jg(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tc{constructor(){this.providerId=tc.PROVIDER_ID}static credential(e,t){return Eu._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=Jg.parseLink(t);return We(r,"argument-error"),Eu._fromEmailAndCode(e,r.code,r.tenantId)}}tc.PROVIDER_ID="password";tc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";tc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G_{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gu extends G_{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls extends Gu{constructor(){super("facebook.com")}static credential(e){return _a._fromParams({providerId:ls.PROVIDER_ID,signInMethod:ls.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ls.credentialFromTaggedObject(e)}static credentialFromError(e){return ls.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ls.credential(e.oauthAccessToken)}catch{return null}}}ls.FACEBOOK_SIGN_IN_METHOD="facebook.com";ls.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs extends Gu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return _a._fromParams({providerId:cs.PROVIDER_ID,signInMethod:cs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return cs.credentialFromTaggedObject(e)}static credentialFromError(e){return cs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return cs.credential(t,r)}catch{return null}}}cs.GOOGLE_SIGN_IN_METHOD="google.com";cs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us extends Gu{constructor(){super("github.com")}static credential(e){return _a._fromParams({providerId:us.PROVIDER_ID,signInMethod:us.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return us.credentialFromTaggedObject(e)}static credentialFromError(e){return us.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return us.credential(e.oauthAccessToken)}catch{return null}}}us.GITHUB_SIGN_IN_METHOD="github.com";us.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds extends Gu{constructor(){super("twitter.com")}static credential(e,t){return _a._fromParams({providerId:ds.PROVIDER_ID,signInMethod:ds.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ds.credentialFromTaggedObject(e)}static credentialFromError(e){return ds.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return ds.credential(t,r)}catch{return null}}}ds.TWITTER_SIGN_IN_METHOD="twitter.com";ds.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yS(n,e){return Hu(n,"POST","/v1/accounts:signUp",Is(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ka{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const o=await si._fromIdTokenResponse(e,r,i),s=sb(r);return new ka({user:o,providerId:s,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=sb(r);return new ka({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function sb(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ff extends So{constructor(e,t,r,i){var o;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,ff.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new ff(e,t,r,i)}}function $_(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?ff._fromErrorAndOperation(n,o,e,r):o})}async function bS(n,e,t=!1){const r=await Cu(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return ka._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wS(n,e,t=!1){const{auth:r}=n;if(zr(r.app))return Promise.reject(Co(r));const i="reauthenticate";try{const o=await Cu(n,$_(r,i,e,n),t);We(o.idToken,r,"internal-error");const s=Kg(o.idToken);We(s,r,"internal-error");const{sub:a}=s;return We(n.uid===a,r,"user-mismatch"),ka._forOperation(n,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&di(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function q_(n,e,t=!1){if(zr(n.app))return Promise.reject(Co(n));const r="signIn",i=await $_(n,r,e),o=await ka._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(o.user),o}async function _S(n,e){return q_(Aa(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function K_(n){const e=Aa(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function kS(n,e,t){if(zr(n.app))return Promise.reject(Co(n));const r=Aa(n),s=await rg(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",yS).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&K_(n),l}),a=await ka._fromIdTokenResponse(r,"signIn",s);return await r._updateCurrentUser(a.user),a}function CS(n,e,t){return zr(n.app)?Promise.reject(Co(n)):_S(Ia(n),tc.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&K_(n),r})}function ES(n,e,t,r){return Ia(n).onIdTokenChanged(e,t,r)}function NS(n,e,t){return Ia(n).beforeAuthStateChanged(e,t)}const pf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X_{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(pf,"1"),this.storage.removeItem(pf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SS=1e3,IS=10;class Y_ extends X_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=z_(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((s,a,l)=>{this.notifyListeners(s,l)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const s=this.storage.getItem(r);!t&&this.localCache[r]===s||this.notifyListeners(r,s)},o=this.storage.getItem(r);q5()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,IS):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},SS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Y_.type="LOCAL";const AS=Y_;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J_ extends X_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}J_.type="SESSION";const Q_=J_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RS(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new Xf(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:o}=t.data,s=this.handlersMap[i];if(!s?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(s).map(async u=>u(t.origin,o)),l=await RS(a);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Xf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qg(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jS{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,l)=>{const u=Qg("",20);i.port1.start();const f=setTimeout(()=>{l(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(p){const m=p;if(m.data.eventId===u)switch(m.data.status){case"ack":clearTimeout(f),o=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(m.data.response);break;default:clearTimeout(f),clearTimeout(o),l(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:u,data:t},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mi(){return window}function TS(n){Mi().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z_(){return typeof Mi().WorkerGlobalScope<"u"&&typeof Mi().importScripts=="function"}async function DS(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function MS(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function PS(){return Z_()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ek="firebaseLocalStorageDb",OS=1,mf="firebaseLocalStorage",tk="fbase_key";class $u{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Yf(n,e){return n.transaction([mf],e?"readwrite":"readonly").objectStore(mf)}function FS(){const n=indexedDB.deleteDatabase(ek);return new $u(n).toPromise()}function ig(){const n=indexedDB.open(ek,OS);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(mf,{keyPath:tk})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(mf)?e(r):(r.close(),await FS(),e(await ig()))})})}async function ab(n,e,t){const r=Yf(n,!0).put({[tk]:e,value:t});return new $u(r).toPromise()}async function LS(n,e){const t=Yf(n,!1).get(e),r=await new $u(t).toPromise();return r===void 0?null:r.value}function lb(n,e){const t=Yf(n,!0).delete(e);return new $u(t).toPromise()}const BS=800,zS=3;class nk{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await ig(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>zS)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Z_()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Xf._getInstance(PS()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await DS(),!this.activeServiceWorker)return;this.sender=new jS(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||MS()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await ig();return await ab(e,pf,"1"),await lb(e,pf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>ab(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>LS(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>lb(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const o=Yf(i,!1).getAll();return new $u(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:o}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(o)&&(this.notifyListeners(i,o),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),BS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}nk.type="LOCAL";const WS=nk;new Uu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VS(n,e){return e?bo(e):(We(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zg extends Yg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Pl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Pl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Pl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function US(n){return q_(n.auth,new Zg(n),n.bypassAuthState)}function HS(n){const{auth:e,user:t}=n;return We(t,e,"internal-error"),wS(t,new Zg(n),n.bypassAuthState)}async function GS(n){const{auth:e,user:t}=n;return We(t,e,"internal-error"),bS(t,new Zg(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rk{constructor(e,t,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=e;if(s){this.reject(s);return}const l={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return US;case"linkViaPopup":case"linkViaRedirect":return GS;case"reauthViaPopup":case"reauthViaRedirect":return HS;default:di(this.auth,"internal-error")}}resolve(e){No(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){No(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $S=new Uu(2e3,1e4);class Tl extends rk{constructor(e,t,r,i,o){super(e,t,i,o),this.provider=r,this.authWindow=null,this.pollId=null,Tl.currentPopupAction&&Tl.currentPopupAction.cancel(),Tl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return We(e,this.auth,"internal-error"),e}async onExecution(){No(this.filter.length===1,"Popup operations only handle one event");const e=Qg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Di(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Di(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Tl.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Di(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,$S.get())};e()}}Tl.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qS="pendingRedirect",nf=new Map;class KS extends rk{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=nf.get(this.auth._key());if(!e){try{const r=await XS(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}nf.set(this.auth._key(),e)}return this.bypassAuthState||nf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function XS(n,e){const t=QS(e),r=JS(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}function YS(n,e){nf.set(n._key(),e)}function JS(n){return bo(n._redirectPersistence)}function QS(n){return tf(qS,n.config.apiKey,n.name)}async function ZS(n,e,t=!1){if(zr(n.app))return Promise.reject(Co(n));const r=Aa(n),i=VS(r,e),s=await new KS(r,i,t).execute();return s&&!t&&(delete s.user._redirectEventId,await r._persistUserIfCurrent(s.user),await r._setRedirectUser(null,e)),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eI=10*60*1e3;class tI{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!nI(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!ik(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Di(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=eI&&this.cachedEventUids.clear(),this.cachedEventUids.has(cb(e))}saveEventToCache(e){this.cachedEventUids.add(cb(e)),this.lastProcessedEventTime=Date.now()}}function cb(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function ik({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function nI(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ik(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rI(n,e={}){return As(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iI=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,oI=/^https?/;async function sI(n){if(n.config.emulator)return;const{authorizedDomains:e}=await rI(n);for(const t of e)try{if(aI(t))return}catch{}di(n,"unauthorized-domain")}function aI(n){const e=tg(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const s=new URL(n);return s.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&s.hostname===r}if(!oI.test(t))return!1;if(iI.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lI=new Uu(3e4,6e4);function ub(){const n=Mi().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function cI(n){return new Promise((e,t)=>{var r,i,o;function s(){ub(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{ub(),t(Di(n,"network-request-failed"))},timeout:lI.get()})}if(!((i=(r=Mi().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=Mi().gapi)===null||o===void 0)&&o.load)s();else{const a=nS("iframefcb");return Mi()[a]=()=>{gapi.load?s():t(Di(n,"network-request-failed"))},V_(`${tS()}?onload=${a}`).catch(l=>t(l))}}).catch(e=>{throw rf=null,e})}let rf=null;function uI(n){return rf=rf||cI(n),rf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dI=new Uu(5e3,15e3),hI="__/auth/iframe",fI="emulator/auth/iframe",pI={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},mI=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function gI(n){const e=n.config;We(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?qg(e,fI):`https://${n.config.authDomain}/${hI}`,r={apiKey:e.apiKey,appName:n.name,v:ec},i=mI.get(n.config.apiHost);i&&(r.eid=i);const o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${Vu(r).slice(1)}`}async function vI(n){const e=await uI(n),t=Mi().gapi;return We(t,n,"internal-error"),e.open({where:document.body,url:gI(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:pI,dontclear:!0},r=>new Promise(async(i,o)=>{await r.restyle({setHideOnLeave:!1});const s=Di(n,"network-request-failed"),a=Mi().setTimeout(()=>{o(s)},dI.get());function l(){Mi().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{o(s)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xI={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},yI=500,bI=600,wI="_blank",_I="http://localhost";class db{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function kI(n,e,t,r=yI,i=bI){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},xI),{width:r.toString(),height:i.toString(),top:o,left:s}),u=qn().toLowerCase();t&&(a=P_(u)?wI:t),D_(u)&&(e=e||_I,l.scrollbars="yes");const f=Object.entries(l).reduce((m,[v,y])=>`${m}${v}=${y},`,"");if($5(u)&&a!=="_self")return CI(e||"",a),new db(null);const p=window.open(e||"",a,f);We(p,n,"popup-blocked");try{p.focus()}catch{}return new db(p)}function CI(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EI="__/auth/handler",NI="emulator/auth/handler",SI=encodeURIComponent("fac");async function hb(n,e,t,r,i,o){We(n.config.authDomain,n,"auth-domain-config-required"),We(n.config.apiKey,n,"invalid-api-key");const s={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:ec,eventId:i};if(e instanceof G_){e.setDefaultLanguage(n.languageCode),s.providerId=e.providerId||"",pN(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,p]of Object.entries({}))s[f]=p}if(e instanceof Gu){const f=e.getScopes().filter(p=>p!=="");f.length>0&&(s.scopes=f.join(","))}n.tenantId&&(s.tid=n.tenantId);const a=s;for(const f of Object.keys(a))a[f]===void 0&&delete a[f];const l=await n._getAppCheckToken(),u=l?`#${SI}=${encodeURIComponent(l)}`:"";return`${II(n)}?${Vu(a).slice(1)}${u}`}function II({config:n}){return n.emulator?qg(n,NI):`https://${n.authDomain}/${EI}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i0="webStorageSupport";class AI{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Q_,this._completeRedirectFn=ZS,this._overrideRedirectResult=YS}async _openPopup(e,t,r,i){var o;No((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const s=await hb(e,t,r,tg(),i);return kI(e,s,Qg())}async _openRedirect(e,t,r,i){await this._originValidation(e);const o=await hb(e,t,r,tg(),i);return TS(o),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:o}=this.eventManagers[t];return i?Promise.resolve(i):(No(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await vI(e),r=new tI(e);return t.register("authEvent",i=>(We(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(i0,{type:i0},i=>{var o;const s=(o=i?.[0])===null||o===void 0?void 0:o[i0];s!==void 0&&t(!!s),di(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=sI(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return z_()||M_()||Xg()}}const RI=AI;var fb="@firebase/auth",pb="1.10.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jI{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){We(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TI(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function DI(n){Gl(new wa("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;We(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:s,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:W_(n)},u=new Q5(r,i,o,l);return lS(u,t),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Gl(new wa("auth-internal",e=>{const t=Aa(e.getProvider("auth").getImmediate());return(r=>new jI(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ys(fb,pb,TI(n)),ys(fb,pb,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MI=5*60,PI=g_("authIdTokenMaxAge")||MI;let mb=null;const OI=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>PI)return;const i=t?.token;mb!==i&&(mb=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function FI(n=__()){const e=Hg(n,"auth");if(e.isInitialized())return e.getImmediate();const t=aS(n,{popupRedirectResolver:RI,persistence:[WS,AS,Q_]}),r=g_("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const s=OI(o.toString());NS(t,s,()=>s(t.currentUser)),ES(t,a=>s(a))}}const i=p_("auth");return i&&cS(t,`http://${i}`),t}function LI(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}Z5({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const o=Di("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",LI().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});DI("Browser");var BI="firebase",zI="11.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ys(BI,zI,"app");var gb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ok;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(D,j){function T(){}T.prototype=j.prototype,D.D=j.prototype,D.prototype=new T,D.prototype.constructor=D,D.C=function(M,L,B){for(var F=Array(arguments.length-2),K=2;K<arguments.length;K++)F[K-2]=arguments[K];return j.prototype[L].apply(M,F)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(D,j,T){T||(T=0);var M=Array(16);if(typeof j=="string")for(var L=0;16>L;++L)M[L]=j.charCodeAt(T++)|j.charCodeAt(T++)<<8|j.charCodeAt(T++)<<16|j.charCodeAt(T++)<<24;else for(L=0;16>L;++L)M[L]=j[T++]|j[T++]<<8|j[T++]<<16|j[T++]<<24;j=D.g[0],T=D.g[1],L=D.g[2];var B=D.g[3],F=j+(B^T&(L^B))+M[0]+3614090360&4294967295;j=T+(F<<7&4294967295|F>>>25),F=B+(L^j&(T^L))+M[1]+3905402710&4294967295,B=j+(F<<12&4294967295|F>>>20),F=L+(T^B&(j^T))+M[2]+606105819&4294967295,L=B+(F<<17&4294967295|F>>>15),F=T+(j^L&(B^j))+M[3]+3250441966&4294967295,T=L+(F<<22&4294967295|F>>>10),F=j+(B^T&(L^B))+M[4]+4118548399&4294967295,j=T+(F<<7&4294967295|F>>>25),F=B+(L^j&(T^L))+M[5]+1200080426&4294967295,B=j+(F<<12&4294967295|F>>>20),F=L+(T^B&(j^T))+M[6]+2821735955&4294967295,L=B+(F<<17&4294967295|F>>>15),F=T+(j^L&(B^j))+M[7]+4249261313&4294967295,T=L+(F<<22&4294967295|F>>>10),F=j+(B^T&(L^B))+M[8]+1770035416&4294967295,j=T+(F<<7&4294967295|F>>>25),F=B+(L^j&(T^L))+M[9]+2336552879&4294967295,B=j+(F<<12&4294967295|F>>>20),F=L+(T^B&(j^T))+M[10]+4294925233&4294967295,L=B+(F<<17&4294967295|F>>>15),F=T+(j^L&(B^j))+M[11]+2304563134&4294967295,T=L+(F<<22&4294967295|F>>>10),F=j+(B^T&(L^B))+M[12]+1804603682&4294967295,j=T+(F<<7&4294967295|F>>>25),F=B+(L^j&(T^L))+M[13]+4254626195&4294967295,B=j+(F<<12&4294967295|F>>>20),F=L+(T^B&(j^T))+M[14]+2792965006&4294967295,L=B+(F<<17&4294967295|F>>>15),F=T+(j^L&(B^j))+M[15]+1236535329&4294967295,T=L+(F<<22&4294967295|F>>>10),F=j+(L^B&(T^L))+M[1]+4129170786&4294967295,j=T+(F<<5&4294967295|F>>>27),F=B+(T^L&(j^T))+M[6]+3225465664&4294967295,B=j+(F<<9&4294967295|F>>>23),F=L+(j^T&(B^j))+M[11]+643717713&4294967295,L=B+(F<<14&4294967295|F>>>18),F=T+(B^j&(L^B))+M[0]+3921069994&4294967295,T=L+(F<<20&4294967295|F>>>12),F=j+(L^B&(T^L))+M[5]+3593408605&4294967295,j=T+(F<<5&4294967295|F>>>27),F=B+(T^L&(j^T))+M[10]+38016083&4294967295,B=j+(F<<9&4294967295|F>>>23),F=L+(j^T&(B^j))+M[15]+3634488961&4294967295,L=B+(F<<14&4294967295|F>>>18),F=T+(B^j&(L^B))+M[4]+3889429448&4294967295,T=L+(F<<20&4294967295|F>>>12),F=j+(L^B&(T^L))+M[9]+568446438&4294967295,j=T+(F<<5&4294967295|F>>>27),F=B+(T^L&(j^T))+M[14]+3275163606&4294967295,B=j+(F<<9&4294967295|F>>>23),F=L+(j^T&(B^j))+M[3]+4107603335&4294967295,L=B+(F<<14&4294967295|F>>>18),F=T+(B^j&(L^B))+M[8]+1163531501&4294967295,T=L+(F<<20&4294967295|F>>>12),F=j+(L^B&(T^L))+M[13]+2850285829&4294967295,j=T+(F<<5&4294967295|F>>>27),F=B+(T^L&(j^T))+M[2]+4243563512&4294967295,B=j+(F<<9&4294967295|F>>>23),F=L+(j^T&(B^j))+M[7]+1735328473&4294967295,L=B+(F<<14&4294967295|F>>>18),F=T+(B^j&(L^B))+M[12]+2368359562&4294967295,T=L+(F<<20&4294967295|F>>>12),F=j+(T^L^B)+M[5]+4294588738&4294967295,j=T+(F<<4&4294967295|F>>>28),F=B+(j^T^L)+M[8]+2272392833&4294967295,B=j+(F<<11&4294967295|F>>>21),F=L+(B^j^T)+M[11]+1839030562&4294967295,L=B+(F<<16&4294967295|F>>>16),F=T+(L^B^j)+M[14]+4259657740&4294967295,T=L+(F<<23&4294967295|F>>>9),F=j+(T^L^B)+M[1]+2763975236&4294967295,j=T+(F<<4&4294967295|F>>>28),F=B+(j^T^L)+M[4]+1272893353&4294967295,B=j+(F<<11&4294967295|F>>>21),F=L+(B^j^T)+M[7]+4139469664&4294967295,L=B+(F<<16&4294967295|F>>>16),F=T+(L^B^j)+M[10]+3200236656&4294967295,T=L+(F<<23&4294967295|F>>>9),F=j+(T^L^B)+M[13]+681279174&4294967295,j=T+(F<<4&4294967295|F>>>28),F=B+(j^T^L)+M[0]+3936430074&4294967295,B=j+(F<<11&4294967295|F>>>21),F=L+(B^j^T)+M[3]+3572445317&4294967295,L=B+(F<<16&4294967295|F>>>16),F=T+(L^B^j)+M[6]+76029189&4294967295,T=L+(F<<23&4294967295|F>>>9),F=j+(T^L^B)+M[9]+3654602809&4294967295,j=T+(F<<4&4294967295|F>>>28),F=B+(j^T^L)+M[12]+3873151461&4294967295,B=j+(F<<11&4294967295|F>>>21),F=L+(B^j^T)+M[15]+530742520&4294967295,L=B+(F<<16&4294967295|F>>>16),F=T+(L^B^j)+M[2]+3299628645&4294967295,T=L+(F<<23&4294967295|F>>>9),F=j+(L^(T|~B))+M[0]+4096336452&4294967295,j=T+(F<<6&4294967295|F>>>26),F=B+(T^(j|~L))+M[7]+1126891415&4294967295,B=j+(F<<10&4294967295|F>>>22),F=L+(j^(B|~T))+M[14]+2878612391&4294967295,L=B+(F<<15&4294967295|F>>>17),F=T+(B^(L|~j))+M[5]+4237533241&4294967295,T=L+(F<<21&4294967295|F>>>11),F=j+(L^(T|~B))+M[12]+1700485571&4294967295,j=T+(F<<6&4294967295|F>>>26),F=B+(T^(j|~L))+M[3]+2399980690&4294967295,B=j+(F<<10&4294967295|F>>>22),F=L+(j^(B|~T))+M[10]+4293915773&4294967295,L=B+(F<<15&4294967295|F>>>17),F=T+(B^(L|~j))+M[1]+2240044497&4294967295,T=L+(F<<21&4294967295|F>>>11),F=j+(L^(T|~B))+M[8]+1873313359&4294967295,j=T+(F<<6&4294967295|F>>>26),F=B+(T^(j|~L))+M[15]+4264355552&4294967295,B=j+(F<<10&4294967295|F>>>22),F=L+(j^(B|~T))+M[6]+2734768916&4294967295,L=B+(F<<15&4294967295|F>>>17),F=T+(B^(L|~j))+M[13]+1309151649&4294967295,T=L+(F<<21&4294967295|F>>>11),F=j+(L^(T|~B))+M[4]+4149444226&4294967295,j=T+(F<<6&4294967295|F>>>26),F=B+(T^(j|~L))+M[11]+3174756917&4294967295,B=j+(F<<10&4294967295|F>>>22),F=L+(j^(B|~T))+M[2]+718787259&4294967295,L=B+(F<<15&4294967295|F>>>17),F=T+(B^(L|~j))+M[9]+3951481745&4294967295,D.g[0]=D.g[0]+j&4294967295,D.g[1]=D.g[1]+(L+(F<<21&4294967295|F>>>11))&4294967295,D.g[2]=D.g[2]+L&4294967295,D.g[3]=D.g[3]+B&4294967295}r.prototype.u=function(D,j){j===void 0&&(j=D.length);for(var T=j-this.blockSize,M=this.B,L=this.h,B=0;B<j;){if(L==0)for(;B<=T;)i(this,D,B),B+=this.blockSize;if(typeof D=="string"){for(;B<j;)if(M[L++]=D.charCodeAt(B++),L==this.blockSize){i(this,M),L=0;break}}else for(;B<j;)if(M[L++]=D[B++],L==this.blockSize){i(this,M),L=0;break}}this.h=L,this.o+=j},r.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var j=1;j<D.length-8;++j)D[j]=0;var T=8*this.o;for(j=D.length-8;j<D.length;++j)D[j]=T&255,T/=256;for(this.u(D),D=Array(16),j=T=0;4>j;++j)for(var M=0;32>M;M+=8)D[T++]=this.g[j]>>>M&255;return D};function o(D,j){var T=a;return Object.prototype.hasOwnProperty.call(T,D)?T[D]:T[D]=j(D)}function s(D,j){this.h=j;for(var T=[],M=!0,L=D.length-1;0<=L;L--){var B=D[L]|0;M&&B==j||(T[L]=B,M=!1)}this.g=T}var a={};function l(D){return-128<=D&&128>D?o(D,function(j){return new s([j|0],0>j?-1:0)}):new s([D|0],0>D?-1:0)}function u(D){if(isNaN(D)||!isFinite(D))return p;if(0>D)return _(u(-D));for(var j=[],T=1,M=0;D>=T;M++)j[M]=D/T|0,T*=4294967296;return new s(j,0)}function f(D,j){if(D.length==0)throw Error("number format error: empty string");if(j=j||10,2>j||36<j)throw Error("radix out of range: "+j);if(D.charAt(0)=="-")return _(f(D.substring(1),j));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var T=u(Math.pow(j,8)),M=p,L=0;L<D.length;L+=8){var B=Math.min(8,D.length-L),F=parseInt(D.substring(L,L+B),j);8>B?(B=u(Math.pow(j,B)),M=M.j(B).add(u(F))):(M=M.j(T),M=M.add(u(F)))}return M}var p=l(0),m=l(1),v=l(16777216);n=s.prototype,n.m=function(){if(w(this))return-_(this).m();for(var D=0,j=1,T=0;T<this.g.length;T++){var M=this.i(T);D+=(0<=M?M:4294967296+M)*j,j*=4294967296}return D},n.toString=function(D){if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(y(this))return"0";if(w(this))return"-"+_(this).toString(D);for(var j=u(Math.pow(D,6)),T=this,M="";;){var L=S(T,j).g;T=k(T,L.j(j));var B=((0<T.g.length?T.g[0]:T.h)>>>0).toString(D);if(T=L,y(T))return B+M;for(;6>B.length;)B="0"+B;M=B+M}},n.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h};function y(D){if(D.h!=0)return!1;for(var j=0;j<D.g.length;j++)if(D.g[j]!=0)return!1;return!0}function w(D){return D.h==-1}n.l=function(D){return D=k(this,D),w(D)?-1:y(D)?0:1};function _(D){for(var j=D.g.length,T=[],M=0;M<j;M++)T[M]=~D.g[M];return new s(T,~D.h).add(m)}n.abs=function(){return w(this)?_(this):this},n.add=function(D){for(var j=Math.max(this.g.length,D.g.length),T=[],M=0,L=0;L<=j;L++){var B=M+(this.i(L)&65535)+(D.i(L)&65535),F=(B>>>16)+(this.i(L)>>>16)+(D.i(L)>>>16);M=F>>>16,B&=65535,F&=65535,T[L]=F<<16|B}return new s(T,T[T.length-1]&-2147483648?-1:0)};function k(D,j){return D.add(_(j))}n.j=function(D){if(y(this)||y(D))return p;if(w(this))return w(D)?_(this).j(_(D)):_(_(this).j(D));if(w(D))return _(this.j(_(D)));if(0>this.l(v)&&0>D.l(v))return u(this.m()*D.m());for(var j=this.g.length+D.g.length,T=[],M=0;M<2*j;M++)T[M]=0;for(M=0;M<this.g.length;M++)for(var L=0;L<D.g.length;L++){var B=this.i(M)>>>16,F=this.i(M)&65535,K=D.i(L)>>>16,te=D.i(L)&65535;T[2*M+2*L]+=F*te,E(T,2*M+2*L),T[2*M+2*L+1]+=B*te,E(T,2*M+2*L+1),T[2*M+2*L+1]+=F*K,E(T,2*M+2*L+1),T[2*M+2*L+2]+=B*K,E(T,2*M+2*L+2)}for(M=0;M<j;M++)T[M]=T[2*M+1]<<16|T[2*M];for(M=j;M<2*j;M++)T[M]=0;return new s(T,0)};function E(D,j){for(;(D[j]&65535)!=D[j];)D[j+1]+=D[j]>>>16,D[j]&=65535,j++}function N(D,j){this.g=D,this.h=j}function S(D,j){if(y(j))throw Error("division by zero");if(y(D))return new N(p,p);if(w(D))return j=S(_(D),j),new N(_(j.g),_(j.h));if(w(j))return j=S(D,_(j)),new N(_(j.g),j.h);if(30<D.g.length){if(w(D)||w(j))throw Error("slowDivide_ only works with positive integers.");for(var T=m,M=j;0>=M.l(D);)T=A(T),M=A(M);var L=P(T,1),B=P(M,1);for(M=P(M,2),T=P(T,2);!y(M);){var F=B.add(M);0>=F.l(D)&&(L=L.add(T),B=F),M=P(M,1),T=P(T,1)}return j=k(D,L.j(j)),new N(L,j)}for(L=p;0<=D.l(j);){for(T=Math.max(1,Math.floor(D.m()/j.m())),M=Math.ceil(Math.log(T)/Math.LN2),M=48>=M?1:Math.pow(2,M-48),B=u(T),F=B.j(j);w(F)||0<F.l(D);)T-=M,B=u(T),F=B.j(j);y(B)&&(B=m),L=L.add(B),D=k(D,F)}return new N(L,D)}n.A=function(D){return S(this,D).h},n.and=function(D){for(var j=Math.max(this.g.length,D.g.length),T=[],M=0;M<j;M++)T[M]=this.i(M)&D.i(M);return new s(T,this.h&D.h)},n.or=function(D){for(var j=Math.max(this.g.length,D.g.length),T=[],M=0;M<j;M++)T[M]=this.i(M)|D.i(M);return new s(T,this.h|D.h)},n.xor=function(D){for(var j=Math.max(this.g.length,D.g.length),T=[],M=0;M<j;M++)T[M]=this.i(M)^D.i(M);return new s(T,this.h^D.h)};function A(D){for(var j=D.g.length+1,T=[],M=0;M<j;M++)T[M]=D.i(M)<<1|D.i(M-1)>>>31;return new s(T,D.h)}function P(D,j){var T=j>>5;j%=32;for(var M=D.g.length-T,L=[],B=0;B<M;B++)L[B]=0<j?D.i(B+T)>>>j|D.i(B+T+1)<<32-j:D.i(B+T);return new s(L,D.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=u,s.fromString=f,ok=s}).apply(typeof gb<"u"?gb:typeof self<"u"?self:typeof window<"u"?window:{});var _h=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(x,I,O){return x==Array.prototype||x==Object.prototype||(x[I]=O.value),x};function t(x){x=[typeof globalThis=="object"&&globalThis,x,typeof window=="object"&&window,typeof self=="object"&&self,typeof _h=="object"&&_h];for(var I=0;I<x.length;++I){var O=x[I];if(O&&O.Math==Math)return O}throw Error("Cannot find global object")}var r=t(this);function i(x,I){if(I)e:{var O=r;x=x.split(".");for(var W=0;W<x.length-1;W++){var ie=x[W];if(!(ie in O))break e;O=O[ie]}x=x[x.length-1],W=O[x],I=I(W),I!=W&&I!=null&&e(O,x,{configurable:!0,writable:!0,value:I})}}function o(x,I){x instanceof String&&(x+="");var O=0,W=!1,ie={next:function(){if(!W&&O<x.length){var de=O++;return{value:I(de,x[de]),done:!1}}return W=!0,{done:!0,value:void 0}}};return ie[Symbol.iterator]=function(){return ie},ie}i("Array.prototype.values",function(x){return x||function(){return o(this,function(I,O){return O})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},a=this||self;function l(x){var I=typeof x;return I=I!="object"?I:x?Array.isArray(x)?"array":I:"null",I=="array"||I=="object"&&typeof x.length=="number"}function u(x){var I=typeof x;return I=="object"&&x!=null||I=="function"}function f(x,I,O){return x.call.apply(x.bind,arguments)}function p(x,I,O){if(!x)throw Error();if(2<arguments.length){var W=Array.prototype.slice.call(arguments,2);return function(){var ie=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(ie,W),x.apply(I,ie)}}return function(){return x.apply(I,arguments)}}function m(x,I,O){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:p,m.apply(null,arguments)}function v(x,I){var O=Array.prototype.slice.call(arguments,1);return function(){var W=O.slice();return W.push.apply(W,arguments),x.apply(this,W)}}function y(x,I){function O(){}O.prototype=I.prototype,x.aa=I.prototype,x.prototype=new O,x.prototype.constructor=x,x.Qb=function(W,ie,de){for(var we=Array(arguments.length-2),gt=2;gt<arguments.length;gt++)we[gt-2]=arguments[gt];return I.prototype[ie].apply(W,we)}}function w(x){const I=x.length;if(0<I){const O=Array(I);for(let W=0;W<I;W++)O[W]=x[W];return O}return[]}function _(x,I){for(let O=1;O<arguments.length;O++){const W=arguments[O];if(l(W)){const ie=x.length||0,de=W.length||0;x.length=ie+de;for(let we=0;we<de;we++)x[ie+we]=W[we]}else x.push(W)}}class k{constructor(I,O){this.i=I,this.j=O,this.h=0,this.g=null}get(){let I;return 0<this.h?(this.h--,I=this.g,this.g=I.next,I.next=null):I=this.i(),I}}function E(x){return/^[\s\xa0]*$/.test(x)}function N(){var x=a.navigator;return x&&(x=x.userAgent)?x:""}function S(x){return S[" "](x),x}S[" "]=function(){};var A=N().indexOf("Gecko")!=-1&&!(N().toLowerCase().indexOf("webkit")!=-1&&N().indexOf("Edge")==-1)&&!(N().indexOf("Trident")!=-1||N().indexOf("MSIE")!=-1)&&N().indexOf("Edge")==-1;function P(x,I,O){for(const W in x)I.call(O,x[W],W,x)}function D(x,I){for(const O in x)I.call(void 0,x[O],O,x)}function j(x){const I={};for(const O in x)I[O]=x[O];return I}const T="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function M(x,I){let O,W;for(let ie=1;ie<arguments.length;ie++){W=arguments[ie];for(O in W)x[O]=W[O];for(let de=0;de<T.length;de++)O=T[de],Object.prototype.hasOwnProperty.call(W,O)&&(x[O]=W[O])}}function L(x){var I=1;x=x.split(":");const O=[];for(;0<I&&x.length;)O.push(x.shift()),I--;return x.length&&O.push(x.join(":")),O}function B(x){a.setTimeout(()=>{throw x},0)}function F(){var x=Y;let I=null;return x.g&&(I=x.g,x.g=x.g.next,x.g||(x.h=null),I.next=null),I}class K{constructor(){this.h=this.g=null}add(I,O){const W=te.get();W.set(I,O),this.h?this.h.next=W:this.g=W,this.h=W}}var te=new k(()=>new se,x=>x.reset());class se{constructor(){this.next=this.g=this.h=null}set(I,O){this.h=I,this.g=O,this.next=null}reset(){this.next=this.g=this.h=null}}let q,$=!1,Y=new K,Q=()=>{const x=a.Promise.resolve(void 0);q=()=>{x.then(H)}};var H=()=>{for(var x;x=F();){try{x.h.call(x.g)}catch(O){B(O)}var I=te;I.j(x),100>I.h&&(I.h++,x.next=I.g,I.g=x)}$=!1};function ne(){this.s=this.s,this.C=this.C}ne.prototype.s=!1,ne.prototype.ma=function(){this.s||(this.s=!0,this.N())},ne.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function fe(x,I){this.type=x,this.g=this.target=I,this.defaultPrevented=!1}fe.prototype.h=function(){this.defaultPrevented=!0};var ye=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var x=!1,I=Object.defineProperty({},"passive",{get:function(){x=!0}});try{const O=()=>{};a.addEventListener("test",O,I),a.removeEventListener("test",O,I)}catch{}return x}();function be(x,I){if(fe.call(this,x?x.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,x){var O=this.type=x.type,W=x.changedTouches&&x.changedTouches.length?x.changedTouches[0]:null;if(this.target=x.target||x.srcElement,this.g=I,I=x.relatedTarget){if(A){e:{try{S(I.nodeName);var ie=!0;break e}catch{}ie=!1}ie||(I=null)}}else O=="mouseover"?I=x.fromElement:O=="mouseout"&&(I=x.toElement);this.relatedTarget=I,W?(this.clientX=W.clientX!==void 0?W.clientX:W.pageX,this.clientY=W.clientY!==void 0?W.clientY:W.pageY,this.screenX=W.screenX||0,this.screenY=W.screenY||0):(this.clientX=x.clientX!==void 0?x.clientX:x.pageX,this.clientY=x.clientY!==void 0?x.clientY:x.pageY,this.screenX=x.screenX||0,this.screenY=x.screenY||0),this.button=x.button,this.key=x.key||"",this.ctrlKey=x.ctrlKey,this.altKey=x.altKey,this.shiftKey=x.shiftKey,this.metaKey=x.metaKey,this.pointerId=x.pointerId||0,this.pointerType=typeof x.pointerType=="string"?x.pointerType:_e[x.pointerType]||"",this.state=x.state,this.i=x,x.defaultPrevented&&be.aa.h.call(this)}}y(be,fe);var _e={2:"touch",3:"pen",4:"mouse"};be.prototype.h=function(){be.aa.h.call(this);var x=this.i;x.preventDefault?x.preventDefault():x.returnValue=!1};var Se="closure_listenable_"+(1e6*Math.random()|0),Ne=0;function De(x,I,O,W,ie){this.listener=x,this.proxy=null,this.src=I,this.type=O,this.capture=!!W,this.ha=ie,this.key=++Ne,this.da=this.fa=!1}function Xe(x){x.da=!0,x.listener=null,x.proxy=null,x.src=null,x.ha=null}function He(x){this.src=x,this.g={},this.h=0}He.prototype.add=function(x,I,O,W,ie){var de=x.toString();x=this.g[de],x||(x=this.g[de]=[],this.h++);var we=Ye(x,I,W,ie);return-1<we?(I=x[we],O||(I.fa=!1)):(I=new De(I,this.src,de,!!W,ie),I.fa=O,x.push(I)),I};function nt(x,I){var O=I.type;if(O in x.g){var W=x.g[O],ie=Array.prototype.indexOf.call(W,I,void 0),de;(de=0<=ie)&&Array.prototype.splice.call(W,ie,1),de&&(Xe(I),x.g[O].length==0&&(delete x.g[O],x.h--))}}function Ye(x,I,O,W){for(var ie=0;ie<x.length;++ie){var de=x[ie];if(!de.da&&de.listener==I&&de.capture==!!O&&de.ha==W)return ie}return-1}var dt="closure_lm_"+(1e6*Math.random()|0),ht={};function mt(x,I,O,W,ie){if(Array.isArray(I)){for(var de=0;de<I.length;de++)mt(x,I[de],O,W,ie);return null}return O=Vn(O),x&&x[Se]?x.K(I,O,u(W)?!!W.capture:!1,ie):Cn(x,I,O,!1,W,ie)}function Cn(x,I,O,W,ie,de){if(!I)throw Error("Invalid event type");var we=u(ie)?!!ie.capture:!!ie,gt=Nn(x);if(gt||(x[dt]=gt=new He(x)),O=gt.add(I,O,W,we,de),O.proxy)return O;if(W=Wn(),O.proxy=W,W.src=x,W.listener=O,x.addEventListener)ye||(ie=we),ie===void 0&&(ie=!1),x.addEventListener(I.toString(),W,ie);else if(x.attachEvent)x.attachEvent(Xt(I.toString()),W);else if(x.addListener&&x.removeListener)x.addListener(W);else throw Error("addEventListener and attachEvent are unavailable.");return O}function Wn(){function x(O){return I.call(x.src,x.listener,O)}const I=Kn;return x}function Gt(x,I,O,W,ie){if(Array.isArray(I))for(var de=0;de<I.length;de++)Gt(x,I[de],O,W,ie);else W=u(W)?!!W.capture:!!W,O=Vn(O),x&&x[Se]?(x=x.i,I=String(I).toString(),I in x.g&&(de=x.g[I],O=Ye(de,O,W,ie),-1<O&&(Xe(de[O]),Array.prototype.splice.call(de,O,1),de.length==0&&(delete x.g[I],x.h--)))):x&&(x=Nn(x))&&(I=x.g[I.toString()],x=-1,I&&(x=Ye(I,O,W,ie)),(O=-1<x?I[x]:null)&&En(O))}function En(x){if(typeof x!="number"&&x&&!x.da){var I=x.src;if(I&&I[Se])nt(I.i,x);else{var O=x.type,W=x.proxy;I.removeEventListener?I.removeEventListener(O,W,x.capture):I.detachEvent?I.detachEvent(Xt(O),W):I.addListener&&I.removeListener&&I.removeListener(W),(O=Nn(I))?(nt(O,x),O.h==0&&(O.src=null,I[dt]=null)):Xe(x)}}}function Xt(x){return x in ht?ht[x]:ht[x]="on"+x}function Kn(x,I){if(x.da)x=!0;else{I=new be(I,this);var O=x.listener,W=x.ha||x.src;x.fa&&En(x),x=O.call(W,I)}return x}function Nn(x){return x=x[dt],x instanceof He?x:null}var fr="__closure_events_fn_"+(1e9*Math.random()>>>0);function Vn(x){return typeof x=="function"?x:(x[fr]||(x[fr]=function(I){return x.handleEvent(I)}),x[fr])}function jt(){ne.call(this),this.i=new He(this),this.M=this,this.F=null}y(jt,ne),jt.prototype[Se]=!0,jt.prototype.removeEventListener=function(x,I,O,W){Gt(this,x,I,O,W)};function yt(x,I){var O,W=x.F;if(W)for(O=[];W;W=W.F)O.push(W);if(x=x.M,W=I.type||I,typeof I=="string")I=new fe(I,x);else if(I instanceof fe)I.target=I.target||x;else{var ie=I;I=new fe(W,x),M(I,ie)}if(ie=!0,O)for(var de=O.length-1;0<=de;de--){var we=I.g=O[de];ie=$t(we,W,!0,I)&&ie}if(we=I.g=x,ie=$t(we,W,!0,I)&&ie,ie=$t(we,W,!1,I)&&ie,O)for(de=0;de<O.length;de++)we=I.g=O[de],ie=$t(we,W,!1,I)&&ie}jt.prototype.N=function(){if(jt.aa.N.call(this),this.i){var x=this.i,I;for(I in x.g){for(var O=x.g[I],W=0;W<O.length;W++)Xe(O[W]);delete x.g[I],x.h--}}this.F=null},jt.prototype.K=function(x,I,O,W){return this.i.add(String(x),I,!1,O,W)},jt.prototype.L=function(x,I,O,W){return this.i.add(String(x),I,!0,O,W)};function $t(x,I,O,W){if(I=x.i.g[String(I)],!I)return!0;I=I.concat();for(var ie=!0,de=0;de<I.length;++de){var we=I[de];if(we&&!we.da&&we.capture==O){var gt=we.listener,Yt=we.ha||we.src;we.fa&&nt(x.i,we),ie=gt.call(Yt,W)!==!1&&ie}}return ie&&!W.defaultPrevented}function Hi(x,I,O){if(typeof x=="function")O&&(x=m(x,O));else if(x&&typeof x.handleEvent=="function")x=m(x.handleEvent,x);else throw Error("Invalid listener argument");return 2147483647<Number(I)?-1:a.setTimeout(x,I||0)}function pi(x){x.g=Hi(()=>{x.g=null,x.i&&(x.i=!1,pi(x))},x.l);const I=x.h;x.h=null,x.m.apply(null,I)}class Gi extends ne{constructor(I,O){super(),this.m=I,this.l=O,this.h=null,this.i=!1,this.g=null}j(I){this.h=arguments,this.g?this.i=!0:pi(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function $i(x){ne.call(this),this.h=x,this.g={}}y($i,ne);var qi=[];function Ki(x){P(x.g,function(I,O){this.g.hasOwnProperty(O)&&En(I)},x),x.g={}}$i.prototype.N=function(){$i.aa.N.call(this),Ki(this)},$i.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Xi=a.JSON.stringify,oc=a.JSON.parse,sc=class{stringify(x){return a.JSON.stringify(x,void 0)}parse(x){return a.JSON.parse(x,void 0)}};function Ps(){}Ps.prototype.h=null;function Oa(x){return x.h||(x.h=x.i())}function ac(){}var Ar={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function mi(){fe.call(this,"d")}y(mi,fe);function Fa(){fe.call(this,"c")}y(Fa,fe);var Yi={},lc=null;function La(){return lc=lc||new jt}Yi.La="serverreachability";function cc(x){fe.call(this,Yi.La,x)}y(cc,fe);function Ji(x){const I=La();yt(I,new cc(I))}Yi.STAT_EVENT="statevent";function uc(x,I){fe.call(this,Yi.STAT_EVENT,x),this.stat=I}y(uc,fe);function Wt(x){const I=La();yt(I,new uc(I,x))}Yi.Ma="timingevent";function Ba(x,I){fe.call(this,Yi.Ma,x),this.size=I}y(Ba,fe);function Hr(x,I){if(typeof x!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){x()},I)}function Os(){this.g=!0}Os.prototype.xa=function(){this.g=!1};function Fs(x,I,O,W,ie,de){x.info(function(){if(x.g)if(de)for(var we="",gt=de.split("&"),Yt=0;Yt<gt.length;Yt++){var it=gt[Yt].split("=");if(1<it.length){var an=it[0];it=it[1];var ln=an.split("_");we=2<=ln.length&&ln[1]=="type"?we+(an+"="+it+"&"):we+(an+"=redacted&")}}else we=null;else we=de;return"XMLHTTP REQ ("+W+") [attempt "+ie+"]: "+I+`
`+O+`
`+we})}function za(x,I,O,W,ie,de,we){x.info(function(){return"XMLHTTP RESP ("+W+") [ attempt "+ie+"]: "+I+`
`+O+`
`+de+" "+we})}function Gr(x,I,O,W){x.info(function(){return"XMLHTTP TEXT ("+I+"): "+bp(x,O)+(W?" "+W:"")})}function dc(x,I){x.info(function(){return"TIMEOUT: "+I})}Os.prototype.info=function(){};function bp(x,I){if(!x.g)return I;if(!I)return null;try{var O=JSON.parse(I);if(O){for(x=0;x<O.length;x++)if(Array.isArray(O[x])){var W=O[x];if(!(2>W.length)){var ie=W[1];if(Array.isArray(ie)&&!(1>ie.length)){var de=ie[0];if(de!="noop"&&de!="stop"&&de!="close")for(var we=1;we<ie.length;we++)ie[we]=""}}}}return Xi(O)}catch{return I}}var hc={NO_ERROR:0,TIMEOUT:8},wp={},$r;function Ls(){}y(Ls,Ps),Ls.prototype.g=function(){return new XMLHttpRequest},Ls.prototype.i=function(){return{}},$r=new Ls;function qr(x,I,O,W){this.j=x,this.i=I,this.l=O,this.R=W||1,this.U=new $i(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ad}function ad(){this.i=null,this.g="",this.h=!1}var fc={},Wa={};function Va(x,I,O){x.L=1,x.v=Bo(mr(I)),x.m=O,x.P=!0,pc(x,null)}function pc(x,I){x.F=Date.now(),bt(x),x.A=mr(x.v);var O=x.A,W=x.R;Array.isArray(W)||(W=[String(W)]),Wo(O.i,"t",W),x.C=0,O=x.j.J,x.h=new ad,x.g=Ed(x.j,O?I:null,!x.m),0<x.O&&(x.M=new Gi(m(x.Y,x,x.g),x.O)),I=x.U,O=x.g,W=x.ca;var ie="readystatechange";Array.isArray(ie)||(ie&&(qi[0]=ie.toString()),ie=qi);for(var de=0;de<ie.length;de++){var we=mt(O,ie[de],W||I.handleEvent,!1,I.h||I);if(!we)break;I.g[we.key]=we}I=x.H?j(x.H):{},x.m?(x.u||(x.u="POST"),I["Content-Type"]="application/x-www-form-urlencoded",x.g.ea(x.A,x.u,x.m,I)):(x.u="GET",x.g.ea(x.A,x.u,null,I)),Ji(),Fs(x.i,x.u,x.A,x.l,x.R,x.m)}qr.prototype.ca=function(x){x=x.target;const I=this.M;I&&Yn(x)==3?I.j():this.Y(x)},qr.prototype.Y=function(x){try{if(x==this.g)e:{const ln=Yn(this.g);var I=this.g.Ba();const bi=this.g.Z();if(!(3>ln)&&(ln!=3||this.g&&(this.h.h||this.g.oa()||bc(this.g)))){this.J||ln!=4||I==7||(I==8||0>=bi?Ji(3):Ji(2)),Bs(this);var O=this.g.Z();this.X=O;t:if(ld(this)){var W=bc(this.g);x="";var ie=W.length,de=Yn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Rr(this),Po(this);var we="";break t}this.h.i=new a.TextDecoder}for(I=0;I<ie;I++)this.h.h=!0,x+=this.h.i.decode(W[I],{stream:!(de&&I==ie-1)});W.length=0,this.h.g+=x,this.C=0,we=this.h.g}else we=this.g.oa();if(this.o=O==200,za(this.i,this.u,this.A,this.l,this.R,ln,O),this.o){if(this.T&&!this.K){t:{if(this.g){var gt,Yt=this.g;if((gt=Yt.g?Yt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E(gt)){var it=gt;break t}}it=null}if(O=it)Gr(this.i,this.l,O,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,mc(this,O);else{this.o=!1,this.s=3,Wt(12),Rr(this),Po(this);break e}}if(this.P){O=!0;let xn;for(;!this.J&&this.C<we.length;)if(xn=_p(this,we),xn==Wa){ln==4&&(this.s=4,Wt(14),O=!1),Gr(this.i,this.l,null,"[Incomplete Response]");break}else if(xn==fc){this.s=4,Wt(15),Gr(this.i,this.l,we,"[Invalid Chunk]"),O=!1;break}else Gr(this.i,this.l,xn,null),mc(this,xn);if(ld(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ln!=4||we.length!=0||this.h.h||(this.s=1,Wt(16),O=!1),this.o=this.o&&O,!O)Gr(this.i,this.l,we,"[Invalid Chunked Response]"),Rr(this),Po(this);else if(0<we.length&&!this.W){this.W=!0;var an=this.j;an.g==this&&an.ba&&!an.M&&(an.j.info("Great, no buffering proxy detected. Bytes received: "+we.length),_c(an),an.M=!0,Wt(11))}}else Gr(this.i,this.l,we,null),mc(this,we);ln==4&&Rr(this),this.o&&!this.J&&(ln==4?Za(this.j,this):(this.o=!1,bt(this)))}else Ka(this.g),O==400&&0<we.indexOf("Unknown SID")?(this.s=3,Wt(12)):(this.s=0,Wt(13)),Rr(this),Po(this)}}}catch{}finally{}};function ld(x){return x.g?x.u=="GET"&&x.L!=2&&x.j.Ca:!1}function _p(x,I){var O=x.C,W=I.indexOf(`
`,O);return W==-1?Wa:(O=Number(I.substring(O,W)),isNaN(O)?fc:(W+=1,W+O>I.length?Wa:(I=I.slice(W,W+O),x.C=W+O,I)))}qr.prototype.cancel=function(){this.J=!0,Rr(this)};function bt(x){x.S=Date.now()+x.I,cd(x,x.I)}function cd(x,I){if(x.B!=null)throw Error("WatchDog timer not null");x.B=Hr(m(x.ba,x),I)}function Bs(x){x.B&&(a.clearTimeout(x.B),x.B=null)}qr.prototype.ba=function(){this.B=null;const x=Date.now();0<=x-this.S?(dc(this.i,this.A),this.L!=2&&(Ji(),Wt(17)),Rr(this),this.s=2,Po(this)):cd(this,this.S-x)};function Po(x){x.j.G==0||x.J||Za(x.j,x)}function Rr(x){Bs(x);var I=x.M;I&&typeof I.ma=="function"&&I.ma(),x.M=null,Ki(x.U),x.g&&(I=x.g,x.g=null,I.abort(),I.ma())}function mc(x,I){try{var O=x.j;if(O.G!=0&&(O.g==x||Un(O.h,x))){if(!x.K&&Un(O.h,x)&&O.G==3){try{var W=O.Da.g.parse(I)}catch{W=null}if(Array.isArray(W)&&W.length==3){var ie=W;if(ie[0]==0){e:if(!O.u){if(O.g)if(O.g.F+3e3<x.F)Qa(O),Qr(O);else break e;Ja(O),Wt(18)}}else O.za=ie[1],0<O.za-O.T&&37500>ie[2]&&O.F&&O.v==0&&!O.C&&(O.C=Hr(m(O.Za,O),6e3));if(1>=dd(O.h)&&O.ca){try{O.ca()}catch{}O.ca=void 0}}else no(O,11)}else if((x.K||O.g==x)&&Qa(O),!E(I))for(ie=O.Da.g.parse(I),I=0;I<ie.length;I++){let it=ie[I];if(O.T=it[0],it=it[1],O.G==2)if(it[0]=="c"){O.K=it[1],O.ia=it[2];const an=it[3];an!=null&&(O.la=an,O.j.info("VER="+O.la));const ln=it[4];ln!=null&&(O.Aa=ln,O.j.info("SVER="+O.Aa));const bi=it[5];bi!=null&&typeof bi=="number"&&0<bi&&(W=1.5*bi,O.L=W,O.j.info("backChannelRequestTimeoutMs_="+W)),W=O;const xn=x.g;if(xn){const el=xn.g?xn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(el){var de=W.h;de.g||el.indexOf("spdy")==-1&&el.indexOf("quic")==-1&&el.indexOf("h2")==-1||(de.j=de.l,de.g=new Set,de.h&&(gc(de,de.h),de.h=null))}if(W.D){const tl=xn.g?xn.g.getResponseHeader("X-HTTP-Session-Id"):null;tl&&(W.ya=tl,xt(W.I,W.D,tl))}}O.G=3,O.l&&O.l.ua(),O.ba&&(O.R=Date.now()-x.F,O.j.info("Handshake RTT: "+O.R+"ms")),W=O;var we=x;if(W.qa=Cd(W,W.J?W.ia:null,W.W),we.K){hd(W.h,we);var gt=we,Yt=W.L;Yt&&(gt.I=Yt),gt.B&&(Bs(gt),bt(gt)),W.g=we}else Gs(W);0<O.i.length&&yi(O)}else it[0]!="stop"&&it[0]!="close"||no(O,7);else O.G==3&&(it[0]=="stop"||it[0]=="close"?it[0]=="stop"?no(O,7):vn(O):it[0]!="noop"&&O.l&&O.l.ta(it),O.v=0)}}Ji(4)}catch{}}var ud=class{constructor(x,I){this.g=x,this.map=I}};function zs(x){this.l=x||10,a.PerformanceNavigationTiming?(x=a.performance.getEntriesByType("navigation"),x=0<x.length&&(x[0].nextHopProtocol=="hq"||x[0].nextHopProtocol=="h2")):x=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=x?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function pr(x){return x.h?!0:x.g?x.g.size>=x.j:!1}function dd(x){return x.h?1:x.g?x.g.size:0}function Un(x,I){return x.h?x.h==I:x.g?x.g.has(I):!1}function gc(x,I){x.g?x.g.add(I):x.h=I}function hd(x,I){x.h&&x.h==I?x.h=null:x.g&&x.g.has(I)&&x.g.delete(I)}zs.prototype.cancel=function(){if(this.i=fd(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const x of this.g.values())x.cancel();this.g.clear()}};function fd(x){if(x.h!=null)return x.i.concat(x.h.D);if(x.g!=null&&x.g.size!==0){let I=x.i;for(const O of x.g.values())I=I.concat(O.D);return I}return w(x.i)}function Ua(x){if(x.V&&typeof x.V=="function")return x.V();if(typeof Map<"u"&&x instanceof Map||typeof Set<"u"&&x instanceof Set)return Array.from(x.values());if(typeof x=="string")return x.split("");if(l(x)){for(var I=[],O=x.length,W=0;W<O;W++)I.push(x[W]);return I}I=[],O=0;for(W in x)I[O++]=x[W];return I}function Ha(x){if(x.na&&typeof x.na=="function")return x.na();if(!x.V||typeof x.V!="function"){if(typeof Map<"u"&&x instanceof Map)return Array.from(x.keys());if(!(typeof Set<"u"&&x instanceof Set)){if(l(x)||typeof x=="string"){var I=[];x=x.length;for(var O=0;O<x;O++)I.push(O);return I}I=[],O=0;for(const W in x)I[O++]=W;return I}}}function Oo(x,I){if(x.forEach&&typeof x.forEach=="function")x.forEach(I,void 0);else if(l(x)||typeof x=="string")Array.prototype.forEach.call(x,I,void 0);else for(var O=Ha(x),W=Ua(x),ie=W.length,de=0;de<ie;de++)I.call(void 0,W[de],O&&O[de],x)}var Ws=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function kp(x,I){if(x){x=x.split("&");for(var O=0;O<x.length;O++){var W=x[O].indexOf("="),ie=null;if(0<=W){var de=x[O].substring(0,W);ie=x[O].substring(W+1)}else de=x[O];I(de,ie?decodeURIComponent(ie.replace(/\+/g," ")):"")}}}function Qi(x){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,x instanceof Qi){this.h=x.h,Vs(this,x.j),this.o=x.o,this.g=x.g,Fo(this,x.s),this.l=x.l;var I=x.i,O=new gi;O.i=I.i,I.g&&(O.g=new Map(I.g),O.h=I.h),Lo(this,O),this.m=x.m}else x&&(I=String(x).match(Ws))?(this.h=!1,Vs(this,I[1]||"",!0),this.o=rt(I[2]||""),this.g=rt(I[3]||"",!0),Fo(this,I[4]),this.l=rt(I[5]||"",!0),Lo(this,I[6]||"",!0),this.m=rt(I[7]||"")):(this.h=!1,this.i=new gi(null,this.h))}Qi.prototype.toString=function(){var x=[],I=this.j;I&&x.push(zo(I,Ga,!0),":");var O=this.g;return(O||I=="file")&&(x.push("//"),(I=this.o)&&x.push(zo(I,Ga,!0),"@"),x.push(encodeURIComponent(String(O)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),O=this.s,O!=null&&x.push(":",String(O))),(O=this.l)&&(this.g&&O.charAt(0)!="/"&&x.push("/"),x.push(zo(O,O.charAt(0)=="/"?gd:md,!0))),(O=this.i.toString())&&x.push("?",O),(O=this.m)&&x.push("#",zo(O,vc)),x.join("")};function mr(x){return new Qi(x)}function Vs(x,I,O){x.j=O?rt(I,!0):I,x.j&&(x.j=x.j.replace(/:$/,""))}function Fo(x,I){if(I){if(I=Number(I),isNaN(I)||0>I)throw Error("Bad port number "+I);x.s=I}else x.s=null}function Lo(x,I,O){I instanceof gi?(x.i=I,vi(x.i,x.h)):(O||(I=zo(I,vd)),x.i=new gi(I,x.h))}function xt(x,I,O){x.i.set(I,O)}function Bo(x){return xt(x,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),x}function rt(x,I){return x?I?decodeURI(x.replace(/%25/g,"%2525")):decodeURIComponent(x):""}function zo(x,I,O){return typeof x=="string"?(x=encodeURI(x).replace(I,pd),O&&(x=x.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x):null}function pd(x){return x=x.charCodeAt(0),"%"+(x>>4&15).toString(16)+(x&15).toString(16)}var Ga=/[#\/\?@]/g,md=/[#\?:]/g,gd=/[#\?]/g,vd=/[#\?@]/g,vc=/#/g;function gi(x,I){this.h=this.g=null,this.i=x||null,this.j=!!I}function gn(x){x.g||(x.g=new Map,x.h=0,x.i&&kp(x.i,function(I,O){x.add(decodeURIComponent(I.replace(/\+/g," ")),O)}))}n=gi.prototype,n.add=function(x,I){gn(this),this.i=null,x=jr(this,x);var O=this.g.get(x);return O||this.g.set(x,O=[]),O.push(I),this.h+=1,this};function Kr(x,I){gn(x),I=jr(x,I),x.g.has(I)&&(x.i=null,x.h-=x.g.get(I).length,x.g.delete(I))}function Xr(x,I){return gn(x),I=jr(x,I),x.g.has(I)}n.forEach=function(x,I){gn(this),this.g.forEach(function(O,W){O.forEach(function(ie){x.call(I,ie,W,this)},this)},this)},n.na=function(){gn(this);const x=Array.from(this.g.values()),I=Array.from(this.g.keys()),O=[];for(let W=0;W<I.length;W++){const ie=x[W];for(let de=0;de<ie.length;de++)O.push(I[W])}return O},n.V=function(x){gn(this);let I=[];if(typeof x=="string")Xr(this,x)&&(I=I.concat(this.g.get(jr(this,x))));else{x=Array.from(this.g.values());for(let O=0;O<x.length;O++)I=I.concat(x[O])}return I},n.set=function(x,I){return gn(this),this.i=null,x=jr(this,x),Xr(this,x)&&(this.h-=this.g.get(x).length),this.g.set(x,[I]),this.h+=1,this},n.get=function(x,I){return x?(x=this.V(x),0<x.length?String(x[0]):I):I};function Wo(x,I,O){Kr(x,I),0<O.length&&(x.i=null,x.g.set(jr(x,I),w(O)),x.h+=O.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const x=[],I=Array.from(this.g.keys());for(var O=0;O<I.length;O++){var W=I[O];const de=encodeURIComponent(String(W)),we=this.V(W);for(W=0;W<we.length;W++){var ie=de;we[W]!==""&&(ie+="="+encodeURIComponent(String(we[W]))),x.push(ie)}}return this.i=x.join("&")};function jr(x,I){return I=String(I),x.j&&(I=I.toLowerCase()),I}function vi(x,I){I&&!x.j&&(gn(x),x.i=null,x.g.forEach(function(O,W){var ie=W.toLowerCase();W!=ie&&(Kr(this,W),Wo(this,ie,O))},x)),x.j=I}function Cp(x,I){const O=new Os;if(a.Image){const W=new Image;W.onload=v(Xn,O,"TestLoadImage: loaded",!0,I,W),W.onerror=v(Xn,O,"TestLoadImage: error",!1,I,W),W.onabort=v(Xn,O,"TestLoadImage: abort",!1,I,W),W.ontimeout=v(Xn,O,"TestLoadImage: timeout",!1,I,W),a.setTimeout(function(){W.ontimeout&&W.ontimeout()},1e4),W.src=x}else I(!1)}function xd(x,I){const O=new Os,W=new AbortController,ie=setTimeout(()=>{W.abort(),Xn(O,"TestPingServer: timeout",!1,I)},1e4);fetch(x,{signal:W.signal}).then(de=>{clearTimeout(ie),de.ok?Xn(O,"TestPingServer: ok",!0,I):Xn(O,"TestPingServer: server error",!1,I)}).catch(()=>{clearTimeout(ie),Xn(O,"TestPingServer: error",!1,I)})}function Xn(x,I,O,W,ie){try{ie&&(ie.onload=null,ie.onerror=null,ie.onabort=null,ie.ontimeout=null),W(O)}catch{}}function Ep(){this.g=new sc}function yd(x,I,O){const W=O||"";try{Oo(x,function(ie,de){let we=ie;u(ie)&&(we=Xi(ie)),I.push(W+de+"="+encodeURIComponent(we))})}catch(ie){throw I.push(W+"type="+encodeURIComponent("_badmap")),ie}}function Zi(x){this.l=x.Ub||null,this.j=x.eb||!1}y(Zi,Ps),Zi.prototype.g=function(){return new Us(this.l,this.j)},Zi.prototype.i=function(x){return function(){return x}}({});function Us(x,I){jt.call(this),this.D=x,this.o=I,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}y(Us,jt),n=Us.prototype,n.open=function(x,I){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=x,this.A=I,this.readyState=1,Jr(this)},n.send=function(x){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const I={headers:this.u,method:this.B,credentials:this.m,cache:void 0};x&&(I.body=x),(this.D||a).fetch(new Request(this.A,I)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Yr(this)),this.readyState=0},n.Sa=function(x){if(this.g&&(this.l=x,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=x.headers,this.readyState=2,Jr(this)),this.g&&(this.readyState=3,Jr(this),this.g)))if(this.responseType==="arraybuffer")x.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in x){if(this.j=x.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;bd(this)}else x.text().then(this.Ra.bind(this),this.ga.bind(this))};function bd(x){x.j.read().then(x.Pa.bind(x)).catch(x.ga.bind(x))}n.Pa=function(x){if(this.g){if(this.o&&x.value)this.response.push(x.value);else if(!this.o){var I=x.value?x.value:new Uint8Array(0);(I=this.v.decode(I,{stream:!x.done}))&&(this.response=this.responseText+=I)}x.done?Yr(this):Jr(this),this.readyState==3&&bd(this)}},n.Ra=function(x){this.g&&(this.response=this.responseText=x,Yr(this))},n.Qa=function(x){this.g&&(this.response=x,Yr(this))},n.ga=function(){this.g&&Yr(this)};function Yr(x){x.readyState=4,x.l=null,x.j=null,x.v=null,Jr(x)}n.setRequestHeader=function(x,I){this.u.append(x,I)},n.getResponseHeader=function(x){return this.h&&this.h.get(x.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const x=[],I=this.h.entries();for(var O=I.next();!O.done;)O=O.value,x.push(O[0]+": "+O[1]),O=I.next();return x.join(`\r
`)};function Jr(x){x.onreadystatechange&&x.onreadystatechange.call(x)}Object.defineProperty(Us.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(x){this.m=x?"include":"same-origin"}});function eo(x){let I="";return P(x,function(O,W){I+=W,I+=":",I+=O,I+=`\r
`}),I}function Vo(x,I,O){e:{for(W in O){var W=!1;break e}W=!0}W||(O=eo(O),typeof x=="string"?O!=null&&encodeURIComponent(String(O)):xt(x,I,O))}function Tt(x){jt.call(this),this.headers=new Map,this.o=x||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}y(Tt,jt);var Np=/^https?$/i,xc=["POST","PUT"];n=Tt.prototype,n.Ha=function(x){this.J=x},n.ea=function(x,I,O,W){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+x);I=I?I.toUpperCase():"GET",this.D=x,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():$r.g(),this.v=this.o?Oa(this.o):Oa($r),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(I,String(x),!0),this.B=!1}catch(de){Hs(this,de);return}if(x=O||"",O=new Map(this.headers),W)if(Object.getPrototypeOf(W)===Object.prototype)for(var ie in W)O.set(ie,W[ie]);else if(typeof W.keys=="function"&&typeof W.get=="function")for(const de of W.keys())O.set(de,W.get(de));else throw Error("Unknown input type for opt_headers: "+String(W));W=Array.from(O.keys()).find(de=>de.toLowerCase()=="content-type"),ie=a.FormData&&x instanceof a.FormData,!(0<=Array.prototype.indexOf.call(xc,I,void 0))||W||ie||O.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[de,we]of O)this.g.setRequestHeader(de,we);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{qa(this),this.u=!0,this.g.send(x),this.u=!1}catch(de){Hs(this,de)}};function Hs(x,I){x.h=!1,x.g&&(x.j=!0,x.g.abort(),x.j=!1),x.l=I,x.m=5,$a(x),gr(x)}function $a(x){x.A||(x.A=!0,yt(x,"complete"),yt(x,"error"))}n.abort=function(x){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=x||7,yt(this,"complete"),yt(this,"abort"),gr(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),gr(this,!0)),Tt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?yc(this):this.bb())},n.bb=function(){yc(this)};function yc(x){if(x.h&&typeof s<"u"&&(!x.v[1]||Yn(x)!=4||x.Z()!=2)){if(x.u&&Yn(x)==4)Hi(x.Ea,0,x);else if(yt(x,"readystatechange"),Yn(x)==4){x.h=!1;try{const we=x.Z();e:switch(we){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var I=!0;break e;default:I=!1}var O;if(!(O=I)){var W;if(W=we===0){var ie=String(x.D).match(Ws)[1]||null;!ie&&a.self&&a.self.location&&(ie=a.self.location.protocol.slice(0,-1)),W=!Np.test(ie?ie.toLowerCase():"")}O=W}if(O)yt(x,"complete"),yt(x,"success");else{x.m=6;try{var de=2<Yn(x)?x.g.statusText:""}catch{de=""}x.l=de+" ["+x.Z()+"]",$a(x)}}finally{gr(x)}}}}function gr(x,I){if(x.g){qa(x);const O=x.g,W=x.v[0]?()=>{}:null;x.g=null,x.v=null,I||yt(x,"ready");try{O.onreadystatechange=W}catch{}}}function qa(x){x.I&&(a.clearTimeout(x.I),x.I=null)}n.isActive=function(){return!!this.g};function Yn(x){return x.g?x.g.readyState:0}n.Z=function(){try{return 2<Yn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(x){if(this.g){var I=this.g.responseText;return x&&I.indexOf(x)==0&&(I=I.substring(x.length)),oc(I)}};function bc(x){try{if(!x.g)return null;if("response"in x.g)return x.g.response;switch(x.H){case"":case"text":return x.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in x.g)return x.g.mozResponseArrayBuffer}return null}catch{return null}}function Ka(x){const I={};x=(x.g&&2<=Yn(x)&&x.g.getAllResponseHeaders()||"").split(`\r
`);for(let W=0;W<x.length;W++){if(E(x[W]))continue;var O=L(x[W]);const ie=O[0];if(O=O[1],typeof O!="string")continue;O=O.trim();const de=I[ie]||[];I[ie]=de,de.push(O)}D(I,function(W){return W.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function xi(x,I,O){return O&&O.internalChannelParams&&O.internalChannelParams[x]||I}function wc(x){this.Aa=0,this.i=[],this.j=new Os,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=xi("failFast",!1,x),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=xi("baseRetryDelayMs",5e3,x),this.cb=xi("retryDelaySeedMs",1e4,x),this.Wa=xi("forwardChannelMaxRetries",2,x),this.wa=xi("forwardChannelRequestTimeoutMs",2e4,x),this.pa=x&&x.xmlHttpFactory||void 0,this.Xa=x&&x.Tb||void 0,this.Ca=x&&x.useFetchStreams||!1,this.L=void 0,this.J=x&&x.supportsCrossDomainXhr||!1,this.K="",this.h=new zs(x&&x.concurrentRequestLimit),this.Da=new Ep,this.P=x&&x.fastHandshake||!1,this.O=x&&x.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=x&&x.Rb||!1,x&&x.xa&&this.j.xa(),x&&x.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&x&&x.detectBufferingProxy||!1,this.ja=void 0,x&&x.longPollingTimeout&&0<x.longPollingTimeout&&(this.ja=x.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=wc.prototype,n.la=8,n.G=1,n.connect=function(x,I,O,W){Wt(0),this.W=x,this.H=I||{},O&&W!==void 0&&(this.H.OSID=O,this.H.OAID=W),this.F=this.X,this.I=Cd(this,null,this.W),yi(this)};function vn(x){if(Xa(x),x.G==3){var I=x.U++,O=mr(x.I);if(xt(O,"SID",x.K),xt(O,"RID",I),xt(O,"TYPE","terminate"),to(x,O),I=new qr(x,x.j,I),I.L=2,I.v=Bo(mr(O)),O=!1,a.navigator&&a.navigator.sendBeacon)try{O=a.navigator.sendBeacon(I.v.toString(),"")}catch{}!O&&a.Image&&(new Image().src=I.v,O=!0),O||(I.g=Ed(I.j,null),I.g.ea(I.v)),I.F=Date.now(),bt(I)}kd(x)}function Qr(x){x.g&&(_c(x),x.g.cancel(),x.g=null)}function Xa(x){Qr(x),x.u&&(a.clearTimeout(x.u),x.u=null),Qa(x),x.h.cancel(),x.s&&(typeof x.s=="number"&&a.clearTimeout(x.s),x.s=null)}function yi(x){if(!pr(x.h)&&!x.s){x.s=!0;var I=x.Ga;q||Q(),$||(q(),$=!0),Y.add(I,x),x.B=0}}function Sp(x,I){return dd(x.h)>=x.h.j-(x.s?1:0)?!1:x.s?(x.i=I.D.concat(x.i),!0):x.G==1||x.G==2||x.B>=(x.Va?0:x.Wa)?!1:(x.s=Hr(m(x.Ga,x,I),_d(x,x.B)),x.B++,!0)}n.Ga=function(x){if(this.s)if(this.s=null,this.G==1){if(!x){this.U=Math.floor(1e5*Math.random()),x=this.U++;const ie=new qr(this,this.j,x);let de=this.o;if(this.S&&(de?(de=j(de),M(de,this.S)):de=this.S),this.m!==null||this.O||(ie.H=de,de=null),this.P)e:{for(var I=0,O=0;O<this.i.length;O++){t:{var W=this.i[O];if("__data__"in W.map&&(W=W.map.__data__,typeof W=="string")){W=W.length;break t}W=void 0}if(W===void 0)break;if(I+=W,4096<I){I=O;break e}if(I===4096||O===this.i.length-1){I=O+1;break e}}I=1e3}else I=1e3;I=Uo(this,ie,I),O=mr(this.I),xt(O,"RID",x),xt(O,"CVER",22),this.D&&xt(O,"X-HTTP-Session-Id",this.D),to(this,O),de&&(this.O?I="headers="+encodeURIComponent(String(eo(de)))+"&"+I:this.m&&Vo(O,this.m,de)),gc(this.h,ie),this.Ua&&xt(O,"TYPE","init"),this.P?(xt(O,"$req",I),xt(O,"SID","null"),ie.T=!0,Va(ie,O,null)):Va(ie,O,I),this.G=2}}else this.G==3&&(x?Ya(this,x):this.i.length==0||pr(this.h)||Ya(this))};function Ya(x,I){var O;I?O=I.l:O=x.U++;const W=mr(x.I);xt(W,"SID",x.K),xt(W,"RID",O),xt(W,"AID",x.T),to(x,W),x.m&&x.o&&Vo(W,x.m,x.o),O=new qr(x,x.j,O,x.B+1),x.m===null&&(O.H=x.o),I&&(x.i=I.D.concat(x.i)),I=Uo(x,O,1e3),O.I=Math.round(.5*x.wa)+Math.round(.5*x.wa*Math.random()),gc(x.h,O),Va(O,W,I)}function to(x,I){x.H&&P(x.H,function(O,W){xt(I,W,O)}),x.l&&Oo({},function(O,W){xt(I,W,O)})}function Uo(x,I,O){O=Math.min(x.i.length,O);var W=x.l?m(x.l.Na,x.l,x):null;e:{var ie=x.i;let de=-1;for(;;){const we=["count="+O];de==-1?0<O?(de=ie[0].g,we.push("ofs="+de)):de=0:we.push("ofs="+de);let gt=!0;for(let Yt=0;Yt<O;Yt++){let it=ie[Yt].g;const an=ie[Yt].map;if(it-=de,0>it)de=Math.max(0,ie[Yt].g-100),gt=!1;else try{yd(an,we,"req"+it+"_")}catch{W&&W(an)}}if(gt){W=we.join("&");break e}}}return x=x.i.splice(0,O),I.D=x,W}function Gs(x){if(!x.g&&!x.u){x.Y=1;var I=x.Fa;q||Q(),$||(q(),$=!0),Y.add(I,x),x.v=0}}function Ja(x){return x.g||x.u||3<=x.v?!1:(x.Y++,x.u=Hr(m(x.Fa,x),_d(x,x.v)),x.v++,!0)}n.Fa=function(){if(this.u=null,wd(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var x=2*this.R;this.j.info("BP detection timer enabled: "+x),this.A=Hr(m(this.ab,this),x)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Wt(10),Qr(this),wd(this))};function _c(x){x.A!=null&&(a.clearTimeout(x.A),x.A=null)}function wd(x){x.g=new qr(x,x.j,"rpc",x.Y),x.m===null&&(x.g.H=x.o),x.g.O=0;var I=mr(x.qa);xt(I,"RID","rpc"),xt(I,"SID",x.K),xt(I,"AID",x.T),xt(I,"CI",x.F?"0":"1"),!x.F&&x.ja&&xt(I,"TO",x.ja),xt(I,"TYPE","xmlhttp"),to(x,I),x.m&&x.o&&Vo(I,x.m,x.o),x.L&&(x.g.I=x.L);var O=x.g;x=x.ia,O.L=1,O.v=Bo(mr(I)),O.m=null,O.P=!0,pc(O,x)}n.Za=function(){this.C!=null&&(this.C=null,Qr(this),Ja(this),Wt(19))};function Qa(x){x.C!=null&&(a.clearTimeout(x.C),x.C=null)}function Za(x,I){var O=null;if(x.g==I){Qa(x),_c(x),x.g=null;var W=2}else if(Un(x.h,I))O=I.D,hd(x.h,I),W=1;else return;if(x.G!=0){if(I.o)if(W==1){O=I.m?I.m.length:0,I=Date.now()-I.F;var ie=x.B;W=La(),yt(W,new Ba(W,O)),yi(x)}else Gs(x);else if(ie=I.s,ie==3||ie==0&&0<I.X||!(W==1&&Sp(x,I)||W==2&&Ja(x)))switch(O&&0<O.length&&(I=x.h,I.i=I.i.concat(O)),ie){case 1:no(x,5);break;case 4:no(x,10);break;case 3:no(x,6);break;default:no(x,2)}}}function _d(x,I){let O=x.Ta+Math.floor(Math.random()*x.cb);return x.isActive()||(O*=2),O*I}function no(x,I){if(x.j.info("Error code "+I),I==2){var O=m(x.fb,x),W=x.Xa;const ie=!W;W=new Qi(W||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Vs(W,"https"),Bo(W),ie?Cp(W.toString(),O):xd(W.toString(),O)}else Wt(2);x.G=0,x.l&&x.l.sa(I),kd(x),Xa(x)}n.fb=function(x){x?(this.j.info("Successfully pinged google.com"),Wt(2)):(this.j.info("Failed to ping google.com"),Wt(1))};function kd(x){if(x.G=0,x.ka=[],x.l){const I=fd(x.h);(I.length!=0||x.i.length!=0)&&(_(x.ka,I),_(x.ka,x.i),x.h.i.length=0,w(x.i),x.i.length=0),x.l.ra()}}function Cd(x,I,O){var W=O instanceof Qi?mr(O):new Qi(O);if(W.g!="")I&&(W.g=I+"."+W.g),Fo(W,W.s);else{var ie=a.location;W=ie.protocol,I=I?I+"."+ie.hostname:ie.hostname,ie=+ie.port;var de=new Qi(null);W&&Vs(de,W),I&&(de.g=I),ie&&Fo(de,ie),O&&(de.l=O),W=de}return O=x.D,I=x.ya,O&&I&&xt(W,O,I),xt(W,"VER",x.la),to(x,W),W}function Ed(x,I,O){if(I&&!x.J)throw Error("Can't create secondary domain capable XhrIo object.");return I=x.Ca&&!x.pa?new Tt(new Zi({eb:O})):new Tt(x.pa),I.Ha(x.J),I}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function kc(){}n=kc.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Jn(x,I){jt.call(this),this.g=new wc(I),this.l=x,this.h=I&&I.messageUrlParams||null,x=I&&I.messageHeaders||null,I&&I.clientProtocolHeaderRequired&&(x?x["X-Client-Protocol"]="webchannel":x={"X-Client-Protocol":"webchannel"}),this.g.o=x,x=I&&I.initMessageHeaders||null,I&&I.messageContentType&&(x?x["X-WebChannel-Content-Type"]=I.messageContentType:x={"X-WebChannel-Content-Type":I.messageContentType}),I&&I.va&&(x?x["X-WebChannel-Client-Profile"]=I.va:x={"X-WebChannel-Client-Profile":I.va}),this.g.S=x,(x=I&&I.Sb)&&!E(x)&&(this.g.m=x),this.v=I&&I.supportsCrossDomainXhr||!1,this.u=I&&I.sendRawJson||!1,(I=I&&I.httpSessionIdParam)&&!E(I)&&(this.g.D=I,x=this.h,x!==null&&I in x&&(x=this.h,I in x&&delete x[I])),this.j=new Ho(this)}y(Jn,jt),Jn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Jn.prototype.close=function(){vn(this.g)},Jn.prototype.o=function(x){var I=this.g;if(typeof x=="string"){var O={};O.__data__=x,x=O}else this.u&&(O={},O.__data__=Xi(x),x=O);I.i.push(new ud(I.Ya++,x)),I.G==3&&yi(I)},Jn.prototype.N=function(){this.g.l=null,delete this.j,vn(this.g),delete this.g,Jn.aa.N.call(this)};function Nd(x){mi.call(this),x.__headers__&&(this.headers=x.__headers__,this.statusCode=x.__status__,delete x.__headers__,delete x.__status__);var I=x.__sm__;if(I){e:{for(const O in I){x=O;break e}x=void 0}(this.i=x)&&(x=this.i,I=I!==null&&x in I?I[x]:void 0),this.data=I}else this.data=x}y(Nd,mi);function Sd(){Fa.call(this),this.status=1}y(Sd,Fa);function Ho(x){this.g=x}y(Ho,kc),Ho.prototype.ua=function(){yt(this.g,"a")},Ho.prototype.ta=function(x){yt(this.g,new Nd(x))},Ho.prototype.sa=function(x){yt(this.g,new Sd)},Ho.prototype.ra=function(){yt(this.g,"b")},Jn.prototype.send=Jn.prototype.o,Jn.prototype.open=Jn.prototype.m,Jn.prototype.close=Jn.prototype.close,hc.NO_ERROR=0,hc.TIMEOUT=8,hc.HTTP_ERROR=6,wp.COMPLETE="complete",ac.EventType=Ar,Ar.OPEN="a",Ar.CLOSE="b",Ar.ERROR="c",Ar.MESSAGE="d",jt.prototype.listen=jt.prototype.K,Tt.prototype.listenOnce=Tt.prototype.L,Tt.prototype.getLastError=Tt.prototype.Ka,Tt.prototype.getLastErrorCode=Tt.prototype.Ba,Tt.prototype.getStatus=Tt.prototype.Z,Tt.prototype.getResponseJson=Tt.prototype.Oa,Tt.prototype.getResponseText=Tt.prototype.oa,Tt.prototype.send=Tt.prototype.ea,Tt.prototype.setWithCredentials=Tt.prototype.Ha}).apply(typeof _h<"u"?_h:typeof self<"u"?self:typeof window<"u"?window:{});const vb="@firebase/firestore",xb="4.7.17";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $n{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}$n.UNAUTHENTICATED=new $n(null),$n.GOOGLE_CREDENTIALS=new $n("google-credentials-uid"),$n.FIRST_PARTY=new $n("first-party-uid"),$n.MOCK_USER=new $n("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qu="11.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $l=new Vg("@firebase/firestore");function ai(n,...e){if($l.logLevel<=ft.DEBUG){const t=e.map(ev);$l.debug(`Firestore (${qu}): ${n}`,...t)}}function sk(n,...e){if($l.logLevel<=ft.ERROR){const t=e.map(ev);$l.error(`Firestore (${qu}): ${n}`,...t)}}function WI(n,...e){if($l.logLevel<=ft.WARN){const t=e.map(ev);$l.warn(`Firestore (${qu}): ${n}`,...t)}}function ev(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ak(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,lk(n,r,t)}function lk(n,e,t){let r=`FIRESTORE (${qu}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw sk(r),new Error(r)}function pu(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||lk(e,i,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sr={CANCELLED:"cancelled",INVALID_ARGUMENT:"invalid-argument",FAILED_PRECONDITION:"failed-precondition"};class ar extends So{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mu{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ck{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class VI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t($n.UNAUTHENTICATED))}shutdown(){}}class UI{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class HI{constructor(e){this.t=e,this.currentUser=$n.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){pu(this.o===void 0,42304);let r=this.i;const i=l=>this.i!==r?(r=this.i,t(l)):Promise.resolve();let o=new mu;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new mu,e.enqueueRetryable(()=>i(this.currentUser))};const s=()=>{const l=o;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{ai("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(ai("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new mu)}},0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(ai("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(pu(typeof r.accessToken=="string",31837,{l:r}),new ck(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return pu(e===null||typeof e=="string",2055,{h:e}),new $n(e)}}class GI{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=$n.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class $I{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new GI(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t($n.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class yb{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class qI{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,zr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){pu(this.o===void 0,3512);const r=o=>{o.error!=null&&ai("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const s=o.token!==this.m;return this.m=o.token,ai("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const i=o=>{ai("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?i(o):ai("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new yb(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(pu(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new yb(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function KI(n){return n.name==="IndexedDbTransactionError"}const og="(default)";class gf{constructor(e,t){this.projectId=e,this.database=t||og}static empty(){return new gf("","")}get isDefaultDatabase(){return this.database===og}isEqual(e){return e instanceof gf&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var bb,ot;(ot=bb||(bb={}))[ot.OK=0]="OK",ot[ot.CANCELLED=1]="CANCELLED",ot[ot.UNKNOWN=2]="UNKNOWN",ot[ot.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ot[ot.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ot[ot.NOT_FOUND=5]="NOT_FOUND",ot[ot.ALREADY_EXISTS=6]="ALREADY_EXISTS",ot[ot.PERMISSION_DENIED=7]="PERMISSION_DENIED",ot[ot.UNAUTHENTICATED=16]="UNAUTHENTICATED",ot[ot.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ot[ot.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ot[ot.ABORTED=10]="ABORTED",ot[ot.OUT_OF_RANGE=11]="OUT_OF_RANGE",ot[ot.UNIMPLEMENTED=12]="UNIMPLEMENTED",ot[ot.INTERNAL=13]="INTERNAL",ot[ot.UNAVAILABLE=14]="UNAVAILABLE",ot[ot.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new ok([4294967295,4294967295],0);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XI=41943040;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YI=1048576;function o0(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JI{constructor(e,t,r=1e3,i=1.5,o=6e4){this.xi=e,this.timerId=t,this.A_=r,this.R_=i,this.V_=o,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(e){this.cancel();const t=Math.floor(this.m_+this.w_()),r=Math.max(0,Date.now()-this.g_),i=Math.max(0,t-r);i>0&&ai("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.m_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.f_=this.xi.enqueueAfterDelay(this.timerId,i,()=>(this.g_=Date.now(),e())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){this.f_!==null&&(this.f_.skipDelay(),this.f_=null)}cancel(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tv{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new mu,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){const s=Date.now()+r,a=new tv(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ar(sr.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}var wb,_b;(_b=wb||(wb={})).xa="default",_b.Cache="cache";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QI(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kb=new Map;function ZI(n,e,t,r){if(e===!0&&r===!0)throw new ar(sr.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function eA(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":ak(12329,{type:typeof n})}function tA(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ar(sr.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=eA(n);throw new ar(sr.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uk="firestore.googleapis.com",Cb=!0;class Eb{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ar(sr.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=uk,this.ssl=Cb}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:Cb;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=XI;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<YI)throw new ar(sr.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}ZI("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=QI((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new ar(sr.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new ar(sr.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new ar(sr.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class dk{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Eb({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ar(sr.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ar(sr.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Eb(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new VI;switch(r.type){case"firstParty":return new $I(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ar(sr.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=kb.get(t);r&&(ai("ComponentProvider","Removing Datastore"),kb.delete(t),r.terminate())}(this),Promise.resolve()}}function nA(n,e,t,r={}){var i;n=tA(n,dk);const o=zu(e),s=n._getSettings(),a=Object.assign(Object.assign({},s),{emulatorOptions:n._getEmulatorOptions()}),l=`${e}:${t}`;o&&(v_(`https://${l}`),x_("Firestore",!0)),s.host!==uk&&s.host!==l&&WI("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u=Object.assign(Object.assign({},s),{host:l,ssl:o,emulatorOptions:r});if(!ba(u,a)&&(n._setSettings(u),r.mockUserToken)){let f,p;if(typeof r.mockUserToken=="string")f=r.mockUserToken,p=$n.MOCK_USER;else{f=tN(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new ar(sr.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new $n(m)}n._authCredentials=new UI(new ck(f,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nb="AsyncQueue";class Sb{constructor(e=Promise.resolve()){this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new JI(this,"async_queue_retry"),this.rc=()=>{const r=o0();r&&ai(Nb,"Visibility state changed to "+r.visibilityState),this.x_.b_()},this.sc=e;const t=o0();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.oc(),this._c(e)}enterRestrictedMode(e){if(!this.Yu){this.Yu=!0,this.tc=e||!1;const t=o0();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.rc)}}enqueue(e){if(this.oc(),this.Yu)return new Promise(()=>{});const t=new mu;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ju.push(e),this.ac()))}async ac(){if(this.Ju.length!==0){try{await this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(e){if(!KI(e))throw e;ai(Nb,"Operation failed with retryable error: "+e)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}}_c(e){const t=this.sc.then(()=>(this.ec=!0,e().catch(r=>{throw this.Xu=r,this.ec=!1,sk("INTERNAL UNHANDLED ERROR: ",Ib(r)),r}).then(r=>(this.ec=!1,r))));return this.sc=t,t}enqueueAfterDelay(e,t,r){this.oc(),this.nc.indexOf(e)>-1&&(t=0);const i=tv.createAndSchedule(this,e,t,r,o=>this.uc(o));return this.Zu.push(i),i}oc(){this.Xu&&ak(47125,{cc:Ib(this.Xu)})}verifyOperationInProgress(){}async lc(){let e;do e=this.sc,await e;while(e!==this.sc)}hc(e){for(const t of this.Zu)if(t.timerId===e)return!0;return!1}Pc(e){return this.lc().then(()=>{this.Zu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Zu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.lc()})}Tc(e){this.nc.push(e)}uc(e){const t=this.Zu.indexOf(e);this.Zu.splice(t,1)}}function Ib(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class rA extends dk{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Sb,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Sb(e),this._firestoreClient=void 0,await e}}}function iA(n,e){const t=typeof n=="object"?n:__(),r=typeof n=="string"?n:og,i=Hg(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const o=ZE("firestore");o&&nA(i,...o)}return i}(function(e,t=!0){(function(i){qu=i})(ec),Gl(new wa("firestore",(r,{instanceIdentifier:i,options:o})=>{const s=r.getProvider("app").getImmediate(),a=new rA(new HI(r.getProvider("auth-internal")),new qI(s,r.getProvider("app-check-internal")),function(u,f){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new ar(sr.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new gf(u.options.projectId,f)}(s,i),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),ys(vb,xb,e),ys(vb,xb,"esm2017")})();const oA={apiKey:"AIzaSyCwBsaERr-wwst0hlgvYYDu8Q5l0ZsB7BI",authDomain:"beach-warriors-45ee9.firebaseapp.com",projectId:"beach-warriors-45ee9",storageBucket:"beach-warriors-45ee9.firebasestorage.app",messagingSenderId:"173169031157",appId:"1:173169031157:web:965dc2a04c233c498292bc"},hk=w_(oA),fk=FI(hk);iA(hk);const sA=({navigateTo:n})=>{const[e,t]=re.useState(!0),[r,i]=re.useState(""),[o,s]=re.useState(""),[a,l]=re.useState(""),[u,f]=re.useState(""),[p,m]=re.useState("Welcome Back"),[v,y]=re.useState("Sign in to continue your ocean mission"),w={email:"abc@gmail.com",password:"12345678"},_=()=>{t(N=>{const S=!N;return S?(m("Welcome Back"),y("Sign in to continue your ocean mission")):(m("Organizer Portal"),y("Access your cleanup management dashboard")),i(""),s(""),l(""),f(""),S})},k=async N=>{if(N.preventDefault(),console.log("Volunteer Login Attempt:",{volunteerEmail:r,volunteerPassword:o}),r==="admin1@beachwarriors.com"&&o==="Beach@Admin123"){n("adminDashboard");return}try{await CS(fk,r,o),console.log("Volunteer login successful!"),n("voldashboard")}catch(S){console.error("Volunteer login failed:",S.message),alert("Login failed: "+S.message)}},E=N=>{N.preventDefault(),a===w.email&&u===w.password?n("orgdashboard"):alert("Invalid credentials")};return h.jsxs(h.Fragment,{children:[h.jsx("style",{children:`
                @import url('https://fonts.googleapis.com/css2?family=Quicksand:wght@400;500;600;700&family=Poppins:wght@400;500;600;700&display=swap');
                
                body {
                    font-family: 'Quicksand', sans-serif;
                    background-color: #f0f9ff;
                    min-height: 100vh;
                }
                
                h1, h2, h3, h4, h5 {
                    font-family: 'Poppins', sans-serif;
                }
                
                .login-bg {
                    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100%25' height='100%25'%3E%3Cdefs%3E%3ClinearGradient id='a' gradientUnits='userSpaceOnUse' x1='0' x2='0' y1='0' y2='100%25' gradientTransform='rotate(240)'%3E%3Cstop offset='0' stop-color='%230ea5e9'/%3E%3Cstop offset='1' stop-color='%2306b6d4'/%3E%3C/linearGradient%3E%3Cpattern patternUnits='userSpaceOnUse' id='b' width='540' height='450' x='0' y='0' viewBox='0 0 1080 900'%3E%3Cg fill-opacity='0.1'%3E%3Cpolygon fill='%23444' points='90 150 0 300 180 300'/%3E%3Cpolygon points='90 150 180 0 0 0'/%3E%3Cpolygon fill='%23AAA' points='270 150 360 0 180 0'/%3E%3Cpolygon fill='%23DDD' points='450 150 360 300 540 300'/%3E%3Cpolygon fill='%23999' points='450 150 540 0 360 0'/%3E%3Cpolygon points='630 150 540 300 720 300'/%3E%3Cpolygon fill='%23DDD' points='630 150 720 0 540 0'/%3E%3Cpolygon fill='%23444' points='810 150 720 300 900 300'/%3E%3Cpolygon fill='%23FFF' points='810 150 900 0 720 0'/%3E%3Cpolygon fill='%23DDD' points='990 150 900 300 1080 300'/%3E%3Cpolygon fill='%23444' points='990 150 1080 0 900 0'/%3E%3Cpolygon fill='%23DDD' points='90 450 0 600 180 600'/%3E%3Cpolygon points='90 450 180 300 0 300'/%3E%3Cpolygon fill='%23666' points='270 450 180 600 360 600'/%3E%3Cpolygon fill='%23AAA' points='270 450 360 300 180 300'/%3E%3Cpolygon fill='%23DDD' points='450 450 360 600 540 600'/%3E%3Cpolygon fill='%23999' points='450 450 540 300 360 300'/%3E%3Cpolygon fill='%23999' points='630 450 540 600 720 600'/%3E%3Cpolygon fill='%23FFF' points='630 450 720 300 540 300'/%3E%3Cpolygon points='810 450 720 600 900 600'/%3E%3Cpolygon fill='%23DDD' points='810 450 900 300 720 300'/%3E%3Cpolygon fill='%23AAA' points='990 450 900 600 1080 600'/%3E%3Cpolygon fill='%23444' points='990 450 1080 300 900 300'/%3E%3Cpolygon fill='%23222' points='90 750 0 900 180 900'/%3E%3Cpolygon points='270 750 180 900 360 900'/%3E%3Cpolygon fill='%23DDD' points='270 750 360 600 180 600'/%3E%3Cpolygon points='450 750 540 600 360 600'/%3E%3Cpolygon points='630 750 540 900 720 900'/%3E%3Cpolygon fill='%23444' points='630 750 720 600 540 600'/%3E%3Cpolygon fill='%23AAA' points='810 750 720 900 900 900'/%3E%3Cpolygon fill='%23666' points='810 750 900 600 720 600'/%3E%3Cpolygon fill='%23999' points='990 750 900 900 1080 900'/%3E%3Cpolygon fill='%23999' points='180 0 90 150 270 150'/%3E%3Cpolygon fill='%23444' points='360 0 270 150 450 150'/%3E%3Cpolygon fill='%23FFF' points='540 0 450 150 630 150'/%3E%3Cpolygon points='900 0 810 150 990 150'/%3E%3Cpolygon fill='%23222' points='0 300 -90 450 90 450'/%3E%3Cpolygon fill='%23FFF' points='0 300 90 150 -90 150'/%3E%3Cpolygon fill='%23FFF' points='180 300 90 450 270 450'/%3E%3Cpolygon fill='%23666' points='180 300 270 150 90 150'/%3E%3Cpolygon fill='%23222' points='360 300 270 450 450 450'/%3E%3Cpolygon fill='%23FFF' points='360 300 450 150 270 150'/%3E%3Cpolygon fill='%23444' points='540 300 450 450 630 450'/%3E%3Cpolygon fill='%23222' points='540 300 630 150 450 150'/%3E%3Cpolygon fill='%23AAA' points='720 300 630 450 810 450'/%3E%3Cpolygon fill='%23666' points='720 300 810 150 630 150'/%3E%3Cpolygon fill='%23FFF' points='900 300 810 450 990 450'/%3E%3Cpolygon fill='%23999' points='900 300 990 150 810 150'/%3E%3Cpolygon points='0 600 -90 750 90 750'/%3E%3Cpolygon fill='%23666' points='0 600 90 450 -90 450'/%3E%3Cpolygon fill='%23AAA' points='180 600 90 750 270 750'/%3E%3Cpolygon fill='%23444' points='180 600 270 450 90 450'/%3E%3Cpolygon fill='%23444' points='360 600 270 750 450 750'/%3E%3Cpolygon fill='%23999' points='360 600 450 450 270 450'/%3E%3Cpolygon fill='%23666' points='540 600 630 450 450 450'/%3E%3Cpolygon fill='%23222' points='720 600 630 750 810 750'/%3E%3Cpolygon fill='%23FFF' points='900 600 810 750 990 750'/%3E%3Cpolygon fill='%23222' points='900 600 990 450 810 450'/%3E%3Cpolygon fill='%23DDD' points='0 900 90 750 -90 750'/%3E%3Cpolygon fill='%23444' points='180 900 270 750 90 750'/%3E%3Cpolygon fill='%23FFF' points='360 900 450 750 270 750'/%3E%3Cpolygon fill='%23AAA' points='540 900 630 750 450 750'/%3E%3Cpolygon fill='%23FFF' points='720 900 810 750 630 750'/%3E%3Cpolygon fill='%23222' points='900 900 990 750 810 750'/%3E%3Cpolygon fill='%23222' points='1080 300 990 450 1170 450'/%3E%3Cpolygon fill='%23FFF' points='1080 300 1170 150 990 150'/%3E%3Cpolygon points='1080 600 990 750 1170 750'/%3E%3Cpolygon fill='%23666' points='1080 600 1170 450 990 450'/%3E%3Cpolygon fill='%23DDD' points='1080 900 1170 750 990 750'/%3E%3C/g%3E%3C/pattern%3E%3C/defs%3E%3Crect x='0' y='0' fill='url(%23a)' width='100%25' height='100%25'/%3E%3Crect x='0' y='0' fill='url(%23b)' width='100%25' height='100%25'/%3E%3C/svg%3E");
                    background-size: cover;
                }
                
                .toggle-checkbox:checked {
                    right: 0;
                    border-color: #0ea5e9;
                }
                
                .toggle-checkbox:checked + .toggle-label {
                    background-color: #0ea5e9;
                }
                
                .bubble {
                    position: absolute;
                    background-color: rgba(255, 255, 255, 0.4);
                    border-radius: 50%;
                    animation: float 8s infinite ease-in-out;
                }
                
                @keyframes float {
                    0%, 100% {
                        transform: translateY(0);
                    }
                    50% {
                        transform: translateY(-20px);
                    }
                }
                
                .login-form-container {
                    transition: all 0.5s ease;
                }
                `}),h.jsxs("div",{className:"min-h-screen flex flex-col",children:[h.jsx("nav",{className:"bg-sky-500 text-white shadow-lg z-50",children:h.jsxs("div",{className:"container mx-auto px-4 py-3 flex justify-between items-center",children:[h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),h.jsx("span",{className:"text-xl font-bold",children:"Beach Warriors"})]}),h.jsxs("div",{className:"hidden md:flex space-x-8",children:[h.jsx("button",{onClick:()=>n("home"),className:"hover:text-sky-100 transition",children:"Home"}),h.jsx("button",{onClick:()=>n("home","about-section"),className:"hover:text-sky-100 transition",children:"About"}),h.jsx("button",{onClick:()=>n("home","articles-section"),className:"hover:text-sky-100 transition",children:"Articles"})]}),h.jsx("div",{className:"md:hidden",children:h.jsx("button",{id:"menu-toggle",className:"focus:outline-none",onClick:()=>console.log("Mobile menu toggle not implemented on login page"),children:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h16"})})})})]})}),h.jsxs("div",{className:"flex-grow flex items-center justify-center login-bg relative py-12 px-4",children:[h.jsx("div",{className:"bubble",style:{width:"30px",height:"30px",top:"20%",left:"10%",animationDelay:"0s"}}),h.jsx("div",{className:"bubble",style:{width:"20px",height:"20px",top:"30%",left:"20%",animationDelay:"1s"}}),h.jsx("div",{className:"bubble",style:{width:"25px",height:"25px",top:"50%",left:"80%",animationDelay:"2s"}}),h.jsx("div",{className:"bubble",style:{width:"15px",height:"15px",top:"70%",left:"70%",animationDelay:"3s"}}),h.jsx("div",{className:"bubble",style:{width:"35px",height:"35px",top:"40%",left:"90%",animationDelay:"4s"}}),h.jsxs("div",{className:"max-w-md w-full bg-white rounded-xl shadow-2xl overflow-hidden z-10",children:[h.jsxs("div",{className:"p-8",children:[h.jsx("div",{className:"flex items-center justify-center mb-6",children:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12 text-sky-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})})}),h.jsx("h2",{className:"text-2xl font-bold text-center text-gray-800 mb-2",children:p}),h.jsx("p",{className:"text-center text-gray-600 mb-6",children:v}),h.jsx("div",{className:"flex justify-center mb-8",children:h.jsxs("div",{className:"relative inline-flex items-center",children:[h.jsx("span",{className:`mr-3 text-sm font-medium ${e?"text-sky-600":"text-gray-400"}`,children:"Volunteer"}),h.jsxs("div",{className:"relative",children:[h.jsx("input",{type:"checkbox",id:"user-toggle",className:"toggle-checkbox absolute block w-6 h-6 rounded-full bg-white border-4 border-gray-300 appearance-none cursor-pointer transition-all duration-300 ease-in-out",checked:!e,onChange:_}),h.jsx("label",{htmlFor:"user-toggle",className:`toggle-label block overflow-hidden h-6 rounded-full bg-gray-300 cursor-pointer w-12 transition-all duration-300 ease-in-out ${e?"":"bg-sky-500"}`})]}),h.jsx("span",{className:`ml-3 text-sm font-medium ${e?"text-gray-400":"text-sky-600"}`,children:"Organizer"})]})}),e?h.jsxs("div",{id:"volunteer-form",className:"login-form-container",children:[h.jsxs("form",{onSubmit:k,children:[" ",h.jsxs("div",{className:"mb-4",children:[h.jsx("label",{htmlFor:"volunteer-email",className:"block text-gray-700 text-sm font-medium mb-2",children:"Email Address"}),h.jsx("input",{type:"email",id:"volunteer-email",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-sky-500 focus:border-transparent transition",placeholder:"your.email@example.com",required:!0,value:r,onChange:N=>i(N.target.value)})]}),h.jsxs("div",{className:"mb-6",children:[h.jsx("label",{htmlFor:"volunteer-password",className:"block text-gray-700 text-sm font-medium mb-2",children:"Password"}),h.jsx("input",{type:"password",id:"volunteer-password",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-sky-500 focus:border-transparent transition",placeholder:"",required:!0,value:o,onChange:N=>s(N.target.value)}),h.jsx("div",{className:"flex justify-end mt-2",children:h.jsx("a",{href:"#",className:"text-sm text-sky-600 hover:text-sky-800 transition",children:"Forgot password?"})})]}),h.jsx("button",{type:"submit",className:"w-full bg-sky-500 hover:bg-sky-600 text-white font-bold py-3 px-4 rounded-lg shadow transition",children:"Sign In"}),h.jsx("div",{className:"text-center mt-6",children:h.jsxs("p",{className:"text-gray-600",children:["Don't have an account?",h.jsx("button",{type:"button",onClick:()=>n("signup"),className:"text-sky-600 hover:text-sky-800 font-medium transition ml-1",children:"Sign up now"})]})})]}),h.jsx("div",{className:"mt-8 flex items-center justify-center",children:h.jsx("div",{className:"bg-sky-100 rounded-full p-3",children:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-sky-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M14.828 14.828a4 4 0 01-5.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),h.jsx("div",{className:"text-center mt-4",children:h.jsx("p",{className:"text-sm text-gray-500",children:"Join our community of 10,000+ volunteers"})})]}):h.jsxs("div",{id:"organizer-form",className:"login-form-container",children:[h.jsxs("form",{onSubmit:E,children:[" ",h.jsxs("div",{className:"mb-4",children:[h.jsx("label",{htmlFor:"organizer-id",className:"block text-gray-700 text-sm font-medium mb-2",children:"Organizer Email"}),h.jsx("input",{type:"text",id:"organizer-id",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-sky-500 focus:border-transparent transition",placeholder:"Enter your organizer email",required:!0,value:a,onChange:N=>l(N.target.value)})]}),h.jsxs("div",{className:"mb-6",children:[h.jsx("label",{htmlFor:"organizer-password",className:"block text-gray-700 text-sm font-medium mb-2",children:"Password"}),h.jsx("input",{type:"password",id:"organizer-password",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-sky-500 focus:border-transparent transition",placeholder:"",required:!0,value:u,onChange:N=>f(N.target.value)}),h.jsx("div",{className:"flex justify-end mt-2",children:h.jsx("a",{href:"#",className:"text-sm text-sky-600 hover:text-sky-800 transition",children:"Forgot password?"})})]}),h.jsx("button",{type:"submit",className:"w-full bg-sky-600 hover:bg-sky-700 text-white font-bold py-3 px-4 rounded-lg shadow transition",children:"Access Organizer Portal"})]}),h.jsx("div",{className:"mt-8 flex items-center justify-center",children:h.jsx("div",{className:"bg-sky-100 rounded-full p-3",children:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-sky-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})})}),h.jsxs("div",{className:"text-center mt-4",children:[h.jsx("p",{className:"text-sm text-gray-500",children:"Organizer access is restricted to approved team leaders"}),h.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Need access?"," ",h.jsx("a",{href:"#",className:"text-sky-600 hover:text-sky-800 transition",children:"Contact admin"})]})]})]})]}),h.jsx("div",{className:"bg-gradient-to-r from-sky-400 to-sky-600 h-2"})]})]}),h.jsx("footer",{className:"bg-sky-900 text-white py-6",children:h.jsxs("div",{className:"container mx-auto px-4 text-center",children:[h.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-4",children:[h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),h.jsx("span",{className:"text-lg font-bold",children:"Beach Warriors"})]}),h.jsx("p",{className:"text-sky-200 text-sm",children:"Join our mission to clean beaches and protect marine ecosystems"}),h.jsxs("div",{className:"flex justify-center space-x-4 mt-4",children:[h.jsx("a",{href:"#",className:"text-white hover:text-sky-300 transition",children:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{d:"M22.675 0h-21.35c-.732 0-1.325.593-1.325 1.325v21.351c0 .731.593 1.324 1.325 1.324h11.495v-9.294h-3.128v-3.622h3.128v-2.671c0-3.1 1.893-4.788 4.659-4.788 1.325 0 2.463.099 2.795.143v3.24l-1.918.001c-1.504 0-1.795.715-1.795 1.763v2.313h3.587l-.467 3.622h-3.12v9.293h6.116c.73 0 1.323-.593 1.323-1.325v-21.35c0-.732-.593-1.325-1.325-1.325z"})})}),h.jsx("a",{href:"#",className:"text-white hover:text-sky-300 transition",children:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{d:"M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723 10.054 10.054 0 01-3.127 1.184 4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"})})}),h.jsx("a",{href:"#",className:"text-white hover:text-sky-300 transition",children:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{d:"M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"})})})]}),h.jsx("p",{className:"text-xs text-sky-300 mt-4",children:" 2023 Beach Warriors. All rights reserved."})]})})]})]})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var pk=function(n,e){return(pk=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])})(n,e)};function hi(n,e){function t(){this.constructor=n}pk(n,e),n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}function Re(n,e,t,r){return new(t||(t=Promise))(function(i,o){function s(u){try{l(r.next(u))}catch(f){o(f)}}function a(u){try{l(r.throw(u))}catch(f){o(f)}}function l(u){u.done?i(u.value):new t(function(f){f(u.value)}).then(s,a)}l((r=r.apply(n,[])).next())})}function je(n,e){var t,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return function(f){if(t)throw new TypeError("Generator is already executing.");for(;s;)try{if(t=1,r&&(i=2&f[0]?r.return:f[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,f[1])).done)return i;switch(r=0,i&&(f=[2&f[0],i.value]),f[0]){case 0:case 1:i=f;break;case 4:return s.label++,{value:f[1],done:!1};case 5:s.label++,r=f[1],f=[0];continue;case 7:f=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(f[0]===6||f[0]===2)){s=0;continue}if(f[0]===3&&(!i||f[1]>i[0]&&f[1]<i[3])){s.label=f[1];break}if(f[0]===6&&s.label<i[1]){s.label=i[1],i=f;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(f);break}i[2]&&s.ops.pop(),s.trys.pop();continue}f=e.call(n,s)}catch(p){f=[6,p],r=0}finally{t=i=0}if(5&f[0])throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}([l,u])}}}var aA=function(){function n(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.populateURLFlags()}return n.prototype.setPlatform=function(e,t){this.platform!=null&&console.warn("Platform "+this.platformName+" has already been set. Overwriting the platform with "+t+"."),this.platformName=e,this.platform=t},n.prototype.registerFlag=function(e,t,r){if(this.flagRegistry[e]={evaluationFn:t,setHook:r},this.urlFlags[e]!=null){var i=this.urlFlags[e];console.warn("Setting feature override from URL "+e+": "+i+"."),this.set(e,i)}},n.prototype.get=function(e){return e in this.flags?this.flags[e]:(this.flags[e]=this.evaluateFlag(e),this.flags[e])},n.prototype.getNumber=function(e){return this.get(e)},n.prototype.getBool=function(e){return this.get(e)},n.prototype.getFlags=function(){return this.flags},Object.defineProperty(n.prototype,"features",{get:function(){return this.flags},enumerable:!0,configurable:!0}),n.prototype.set=function(e,t){if(this.flagRegistry[e]==null)throw new Error("Cannot set flag "+e+" as it has not been registered.");this.flags[e]=t,this.flagRegistry[e].setHook!=null&&this.flagRegistry[e].setHook(t)},n.prototype.evaluateFlag=function(e){if(this.flagRegistry[e]==null)throw new Error("Cannot evaluate flag '"+e+"': no evaluation function found.");return this.flagRegistry[e].evaluationFn()},n.prototype.setFlags=function(e){this.flags=Object.assign({},e)},n.prototype.reset=function(){this.flags={},this.urlFlags={},this.populateURLFlags()},n.prototype.populateURLFlags=function(){var e=this;if(this.global!==void 0&&this.global.location!==void 0&&this.global.location.search!==void 0){var t,r,i=(t=this.global.location.search,r={},t.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,function(o){for(var s=[],a=1;a<arguments.length;a++)s[a-1]=arguments[a];return lA(r,s[0],s[1]),s.join("=")}),r);"tfjsflags"in i&&i.tfjsflags.split(",").forEach(function(o){var s=o.split(":"),a=s[0],l=s[1];e.urlFlags[a]=function(u,f){if((f=f.toLowerCase())==="true"||f==="false")return f==="true";if(""+ +f===f)return+f;throw new Error("Could not parse value flag value "+f+" for flag "+u+".")}(a,l)})}},n}();function lA(n,e,t){n[decodeURIComponent(e)]=decodeURIComponent(t||"")}function he(){return mk}var mk=null,vf=new Map,sg=new Map;function gk(n,e){var t=xk(n,e);return vf.get(t)}function cA(n){return sg.get(n)}function Ab(n){for(var e=vf.entries(),t=[];;){var r=e.next(),i=r.done,o=r.value;if(i)break;var s=o[0],a=o[1];s.split("_")[0]===n&&t.push(a)}return t}function vk(n){var e=n.kernelName,t=n.backendName,r=xk(e,t);if(vf.has(r))throw new Error("The kernel '"+e+"' for backend '"+t+"' is already registered");vf.set(r,n)}function uA(n){var e=n.kernelName;sg.has(e)&&console.warn("Overriding the gradient for '"+e+"'"),sg.set(e,n)}function xk(n,e){return e+"_"+n}function ag(n,e,t){return Math.max(n,Math.min(e,t))}function yk(n){return n%2==0?n:n+1}function dA(n){for(var e=0,t=0;t<n.length;t++)e+=n[t];return e}function U(n,e){if(!n)throw new Error(typeof e=="string"?e:e())}function pt(n,e,t){t===void 0&&(t=""),U(pn(n,e),function(){return t+" Shapes "+n+" and "+e+" must match"})}function nc(n){U(n!=null,function(){return"The input to the tensor constructor must be a non-null value."})}function ql(n,e,t){if(e===void 0&&(e=[]),t===void 0&&(t=!1),e==null&&(e=[]),Array.isArray(n)||Pi(n)&&!t)for(var r=0;r<n.length;++r)ql(n[r],e,t);else e.push(n);return e}function Me(n){if(n.length===0)return 1;for(var e=n[0],t=1;t<n.length;t++)e*=n[t];return e}function pn(n,e){if(n===e)return!0;if(n==null||e==null||n.length!==e.length)return!1;for(var t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}function Ht(n){return n%1==0}function hA(n){if(Math.tanh!=null)return Math.tanh(n);if(n===1/0)return 1;if(n===-1/0)return-1;var e=Math.exp(2*n);return(e-1)/(e+1)}function lg(n){var e=Math.ceil(Math.sqrt(n));return[e,Math.ceil(n/e)]}function Ol(n,e){return e<=n.length?n:n+" ".repeat(e-n.length)}function Rb(n,e,t){return e===void 0&&(e=function(r){return 0}),new Promise(function(r,i){var o=0,s=function(){if(n())r();else{o++;var a=e(o);t!=null&&o>=t?i():setTimeout(s,a)}};s()})}function fA(n,e){for(var t=1,r=-1,i=0;i<n.length;++i)if(n[i]>=0)t*=n[i];else if(n[i]===-1){if(r!==-1)throw Error("Shapes can only have 1 implicit size. Found -1 at dim "+r+" and dim "+i);r=i}else if(n[i]<0)throw Error("Shapes can not be < 0. Found "+n[i]+" at dim "+i);if(r===-1){if(e>0&&e!==t)throw Error("Size("+e+") must match the product of shape "+n);return n}if(t===0)throw Error("Cannot infer the missing size in ["+n+"] when there are 0 elements");if(e%t!=0)throw Error("The implicit shape can't be a fractional number. Got "+e+" / "+t);var o=n.slice();return o[r]=e/t,o}function sn(n,e){var t=e.length;return U((n=n==null?e.map(function(r,i){return i}):[].concat(n)).every(function(r){return r>=-t&&r<t}),function(){return"All values in axis param must be in range [-"+t+", "+t+") but got axis "+n}),U(n.every(function(r){return Ht(r)}),function(){return"All values in axis param must be integers but got axis "+n}),n.map(function(r){return r<0?t+r:r})}function pa(n,e){for(var t=[],r=[],i=e!=null&&Array.isArray(e)&&e.length===0,o=e==null||i?null:sn(e,n).sort(),s=0,a=0;a<n.length;++a){if(o!=null){if(o[s]===a&&n[a]!==1)throw new Error("Can't squeeze axis "+a+" since its dim '"+n[a]+"' is not 1");(o[s]==null||o[s]>a)&&n[a]===1&&(t.push(n[a]),r.push(a)),o[s]<=a&&s++}n[a]!==1&&(t.push(n[a]),r.push(a))}return{newShape:t,keptDims:r}}function Nu(n,e){var t=null;if(n==null||n==="float32")t=new Float32Array(e);else if(n==="int32")t=new Int32Array(e);else{if(n!=="bool")throw new Error("Unknown data type "+n);t=new Uint8Array(e)}return t}function xf(n,e){var t=null;if(n==null||n==="float32")t=new Float32Array(e);else if(n==="int32")t=new Int32Array(e);else if(n==="bool")t=new Uint8Array(e);else{if(n!=="string")throw new Error("Unknown data type "+n);t=new Array(e)}return t}function pA(n,e){for(var t=0;t<n.length;t++){var r=n[t];if(isNaN(r)||!isFinite(r))throw Error("A tensor of type "+e+" being uploaded contains "+r+".")}}function mA(n){return n==="bool"||n==="complex64"||n==="float32"||n==="int32"||n==="string"}function gA(n,e){return e!=="complex64"&&(e!=="float32"||n==="complex64")&&(e!=="int32"||n==="float32"||n==="complex64")&&(e!=="bool"||n!=="bool")}function Pi(n){return n instanceof Float32Array||n instanceof Int32Array||n instanceof Uint8Array}function bk(n){if(n==="float32"||n==="int32")return 4;if(n==="complex64")return 8;if(n==="bool")return 1;throw new Error("Unknown dtype "+n)}function vA(n){if(n==null)return 0;var e=0;return n.forEach(function(t){return e+=t.length}),e}function nv(n){return typeof n=="string"||n instanceof String}function xA(n){return typeof n=="boolean"}function yA(n){return typeof n=="number"}function Ku(n){return Array.isArray(n)?Ku(n[0]):n instanceof Float32Array?"float32":n instanceof Int32Array||n instanceof Uint8Array?"int32":yA(n)?"float32":nv(n)?"string":xA(n)?"bool":"float32"}function cg(n){return!!(n&&n.constructor&&n.call&&n.apply)}function ug(n,e){for(var t=e;t<n;++t)if(n%t==0)return t;return n}function Oi(n){var e=n.length;if(e<2)return[];var t=new Array(e-1);t[e-2]=n[e-1];for(var r=e-3;r>=0;--r)t[r]=t[r+1]*n[r+1];return t}function wk(n,e,t){if(e==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(n)&&(n=ql(n)),t&&pA(n,e),function(o,s){return o instanceof Float32Array&&s==="float32"||o instanceof Int32Array&&s==="int32"||o instanceof Uint8Array&&s==="bool"}(n,e))return n;if(e==null||e==="float32"||e==="complex64")return new Float32Array(n);if(e==="int32")return new Int32Array(n);if(e==="bool"){for(var r=new Uint8Array(n.length),i=0;i<r.length;++i)Math.round(n[i])!==0&&(r[i]=1);return r}throw new Error("Unknown data type "+e)}function jb(n,e){if(n.length===0)return e[0];var t=n.reduce(function(r,i){return r*i});if(t===0)return[];if(t!==e.length)throw new Error("["+n+"] does not match the input size.");return function r(i,o,s){var a=new Array;if(o.length===1)for(var l=o[0],u=0;u<l;u++)a[u]=s[i+u];else{l=o[0];var f=o.slice(1),p=f.reduce(function(m,v){return m*v});for(u=0;u<l;u++)a[u]=r(i+u*p,f,s)}return a}(0,n,e)}function _k(n,e){for(var t=Xu(n,e),r=0;r<t.length;r++)t[r]=1;return t}function Xu(n,e){if(e==null||e==="float32"||e==="complex64")return new Float32Array(n);if(e==="int32")return new Int32Array(n);if(e==="bool")return new Uint8Array(n);throw new Error("Unknown data type "+e)}function Ai(){return he().platform.now()}function kk(n){n.forEach(function(e){U(Number.isInteger(e)&&e>=0,function(){return"Tensor must have a shape comprised of positive integers but got shape ["+n+"]."})})}function bA(n,e){return e===void 0&&(e="utf-8"),e=e||"utf-8",he().platform.encode(n,e)}function yf(n,e){return e===void 0&&(e="utf-8"),e=e||"utf-8",he().platform.decode(n,e)}function Tb(n,e,t){if(e===0)return 0;if(e===1)return n[0];for(var r=n[n.length-1],i=0;i<n.length-1;++i)r+=t[i]*n[i];return r}function wA(n,e,t){if(e===0)return[];if(e===1)return[n];for(var r=new Array(e),i=0;i<r.length-1;++i)r[i]=Math.floor(n/t[i]),n-=r[i]*t[i];return r[r.length-1]=n,r}var _A=function(){function n(e,t){this.backendTimer=e,this.logger=t,t==null&&(this.logger=new kA)}return n.prototype.profileKernel=function(e,t,r){var i,o=this,s=this.backendTimer.time(function(){i=r()});return i.forEach(function(a){a.data().then(function(l){(function(u,f,p){if(f!=="float32")return!1;for(var m=0;m<u.length;m++){var v=u[m];if(isNaN(v)||!isFinite(v))return console.warn("Found "+v+" in the result of '"+p+"'"),!0}})(l,a.dtype,e),s.then(function(u){var f="";u.getExtraProfileInfo!=null&&(f=u.getExtraProfileInfo()),o.logger.logKernelProfile(e,a,l,u.kernelMs,t,f)})})}),i},n}(),kA=function(){function n(){}return n.prototype.logKernelProfile=function(e,t,r,i,o,s){var a=typeof i=="number"?Ol(i+"ms",9):i.error,l=Ol(e,25),u=t.rank,f=t.size,p=Ol(t.shape.toString(),14),m="";for(var v in o){var y=o[v].shape||t.shape,w=y.length;m+=v+": "+w+"D "+(w>0?y:"")+" "}console.log("%c"+l+"	%c"+a+"	%c"+u+"D "+p+"	%c"+f+"	%c"+m+"	%c"+s,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")},n}(),Db=20,Kc=3,s0=7;function CA(n,e,t,r){var i=Oi(e),o=function(u,f,p,m){var v=Me(f),y=m[m.length-1],w=new Array(y).fill(0),_=f.length,k=p==="complex64"?Yc(u):u;if(_>1)for(var E=0;E<v/y;E++)for(var N=E*y,S=0;S<y;S++)w[S]=Math.max(w[S],Xc(k[N+S],0,p).length);return w}(n,e,t,i),s=e.length,a=function u(f,p,m,v,y,w){w===void 0&&(w=!0);var _=m==="complex64"?2:1,k=p[0],E=p.length;if(E===0)return m==="complex64"?[Xc(Yc(f)[0],0,m)]:m==="bool"?[Ck(f[0])]:[f[0].toString()];if(E===1){if(k>Db){var N=Kc*_,S=Array.from(f.slice(0,N)),A=Array.from(f.slice((k-Kc)*_,k*_));return m==="complex64"&&(S=Yc(S),A=Yc(A)),["["+S.map(function(te,se){return Xc(te,y[se],m)}).join(", ")+", ..., "+A.map(function(te,se){return Xc(te,y[k-Kc+se],m)}).join(", ")+"]"]}return["["+(m==="complex64"?Yc(f):Array.from(f)).map(function(te,se){return Xc(te,y[se],m)}).join(", ")+"]"]}var P=p.slice(1),D=v.slice(1),j=v[0]*_,T=[];if(k>Db){for(var M=0;M<Kc;M++){var L=(B=M*j)+j;T.push.apply(T,u(f.slice(B,L),P,m,D,y,!1))}for(T.push("..."),M=k-Kc;M<k;M++)L=(B=M*j)+j,T.push.apply(T,u(f.slice(B,L),P,m,D,y,M===k-1))}else for(M=0;M<k;M++){var B;L=(B=M*j)+j,T.push.apply(T,u(f.slice(B,L),P,m,D,y,M===k-1))}var F=E===2?",":"";for(T[0]="["+T[0]+F,M=1;M<T.length-1;M++)T[M]=" "+T[M]+F;var K=`,
`;for(M=2;M<E;M++)K+=`
`;return T[T.length-1]=" "+T[T.length-1]+"]"+(w?"":K),T}(n,e,t,i,o),l=["Tensor"];return r&&(l.push("  dtype: "+t),l.push("  rank: "+s),l.push("  shape: ["+e+"]"),l.push("  values:")),l.push(a.map(function(u){return"    "+u}).join(`
`)),l.join(`
`)}function Xc(n,e,t){return Ol(Array.isArray(n)?parseFloat(n[0].toFixed(s0))+" + "+parseFloat(n[1].toFixed(s0))+"j":nv(n)?"'"+n+"'":t==="bool"?Ck(n):parseFloat(n.toFixed(s0)).toString(),e)}function Ck(n){return n===0?"false":"true"}function Yc(n){for(var e=[],t=0;t<n.length;t+=2)e.push([n[t],n[t+1]]);return e}var Su=function(){function n(e,t,r){var i=this;if(this.dtype=t,this.shape=e.slice(),this.size=Me(e),r!=null){var o=r.length;U(o===this.size,function(){return"Length of values '"+o+"' does not match the size inferred by the shape '"+i.size+"'."})}if(t==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||xf(t,this.size),this.strides=Oi(e)}return n.prototype.set=function(e){for(var t=this,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];r.length===0&&(r=[0]),U(r.length===this.rank,function(){return"The number of provided coordinates ("+r.length+") must match the rank ("+t.rank+")"});var o=this.locToIndex(r);this.values[o]=e},n.prototype.get=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];e.length===0&&(e=[0]);for(var r=0,i=0,o=e;i<o.length;i++){var s=o[i];if(s<0||s>=this.shape[r]){var a="Requested out of range element at "+e+".   Buffer shape="+this.shape;throw new Error(a)}r++}for(var l=e[e.length-1],u=0;u<e.length-1;++u)l+=this.strides[u]*e[u];return this.values[l]},n.prototype.locToIndex=function(e){if(this.rank===0)return 0;if(this.rank===1)return e[0];for(var t=e[e.length-1],r=0;r<e.length-1;++r)t+=this.strides[r]*e[r];return t},n.prototype.indexToLoc=function(e){if(this.rank===0)return[];if(this.rank===1)return[e];for(var t=new Array(this.shape.length),r=0;r<t.length-1;++r)t[r]=Math.floor(e/this.strides[r]),e-=t[r]*this.strides[r];return t[t.length-1]=e,t},Object.defineProperty(n.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),n.prototype.toTensor=function(){return Ri().makeTensor(this.values,this.shape,this.dtype)},n}(),Ri=null,ue=null,Ek=null,Pt=function(){function n(e,t,r,i){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=t||"float32",this.size=Me(e),this.strides=Oi(e),this.dataId=r,this.id=i,this.rankType=this.rank<5?this.rank.toString():"higher"}return n.prototype.flatten=function(){return this.throwIfDisposed(),this.as1D()},n.prototype.asScalar=function(){return this.throwIfDisposed(),U(this.size===1,function(){return"The array must have only 1 element."}),this.reshape([])},n.prototype.as1D=function(){return this.throwIfDisposed(),this.reshape([this.size])},n.prototype.as2D=function(e,t){return this.throwIfDisposed(),this.reshape([e,t])},n.prototype.as3D=function(e,t,r){return this.throwIfDisposed(),this.reshape([e,t,r])},n.prototype.as4D=function(e,t,r,i){return this.throwIfDisposed(),this.reshape([e,t,r,i])},n.prototype.as5D=function(e,t,r,i,o){return this.throwIfDisposed(),this.reshape([e,t,r,i,o])},n.prototype.asType=function(e){return this.throwIfDisposed(),ue.cast(this,e)},Object.defineProperty(n.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),n.prototype.buffer=function(){return Re(this,void 0,void 0,function(){var e;return je(this,function(t){switch(t.label){case 0:return[4,this.data()];case 1:return e=t.sent(),[2,ue.buffer(this.shape,this.dtype,e)]}})})},n.prototype.bufferSync=function(){return ue.buffer(this.shape,this.dtype,this.dataSync())},n.prototype.array=function(){return Re(this,void 0,void 0,function(){var e;return je(this,function(t){switch(t.label){case 0:return[4,this.data()];case 1:return e=t.sent(),[2,jb(this.shape,e)]}})})},n.prototype.arraySync=function(){return jb(this.shape,this.dataSync())},n.prototype.data=function(){return Re(this,void 0,void 0,function(){var e,t;return je(this,function(r){switch(r.label){case 0:return this.throwIfDisposed(),e=Ri().read(this.dataId),this.dtype!=="string"?[3,2]:[4,e];case 1:t=r.sent();try{return[2,t.map(function(i){return yf(i)})]}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}r.label=2;case 2:return[2,e]}})})},n.prototype.dataSync=function(){this.throwIfDisposed();var e=Ri().readSync(this.dataId);if(this.dtype==="string")try{return e.map(function(t){return yf(t)})}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e},n.prototype.bytes=function(){return Re(this,void 0,void 0,function(){var e;return je(this,function(t){switch(t.label){case 0:return this.throwIfDisposed(),[4,Ri().read(this.dataId)];case 1:return e=t.sent(),this.dtype==="string"?[2,e]:[2,new Uint8Array(e.buffer)]}})})},n.prototype.dispose=function(){this.isDisposed||(Ri().disposeTensor(this),this.isDisposedInternal=!0)},Object.defineProperty(n.prototype,"isDisposed",{get:function(){return this.isDisposedInternal},enumerable:!0,configurable:!0}),n.prototype.throwIfDisposed=function(){if(this.isDisposed)throw new Error("Tensor is disposed.")},n.prototype.toFloat=function(){return this.asType("float32")},n.prototype.toInt=function(){return this.asType("int32")},n.prototype.toBool=function(){return this.asType("bool")},n.prototype.print=function(e){return e===void 0&&(e=!1),ue.print(this,e)},n.prototype.reshape=function(e){return this.throwIfDisposed(),ue.reshape(this,e)},n.prototype.reshapeAs=function(e){return this.throwIfDisposed(),this.reshape(e.shape)},n.prototype.expandDims=function(e){return e===void 0&&(e=0),ue.expandDims(this,e)},n.prototype.cumsum=function(e,t,r){return e===void 0&&(e=0),t===void 0&&(t=!1),r===void 0&&(r=!1),ue.cumsum(this,e,t,r)},n.prototype.squeeze=function(e){return this.throwIfDisposed(),ue.squeeze(this,e)},n.prototype.clone=function(){return this.throwIfDisposed(),ue.clone(this)},n.prototype.oneHot=function(e,t,r){return this.throwIfDisposed(),ue.oneHot(this,e,t,r)},n.prototype.toString=function(e){return e===void 0&&(e=!1),CA(this.dataSync(),this.shape,this.dtype,e)},n.prototype.tile=function(e){return this.throwIfDisposed(),ue.tile(this,e)},n.prototype.gather=function(e,t){return t===void 0&&(t=0),this.throwIfDisposed(),ue.gather(this,e,t)},n.prototype.matMul=function(e,t,r){return t===void 0&&(t=!1),r===void 0&&(r=!1),this.throwIfDisposed(),ue.matMul(this,e,t,r)},n.prototype.dot=function(e){return this.throwIfDisposed(),ue.dot(this,e)},n.prototype.norm=function(e,t,r){return e===void 0&&(e="euclidean"),t===void 0&&(t=null),r===void 0&&(r=!1),this.throwIfDisposed(),ue.norm(this,e,t,r)},n.prototype.slice=function(e,t){return this.throwIfDisposed(),ue.slice(this,e,t)},n.prototype.reverse=function(e){return this.throwIfDisposed(),ue.reverse(this,e)},n.prototype.concat=function(e,t){return t===void 0&&(t=0),this.throwIfDisposed(),e instanceof n&&(e=[e]),ue.concat([this].concat(e),t)},n.prototype.split=function(e,t){return t===void 0&&(t=0),this.throwIfDisposed(),ue.split(this,e,t)},n.prototype.stack=function(e,t){return t===void 0&&(t=0),ue.stack([this,e],t)},n.prototype.unstack=function(e){return e===void 0&&(e=0),ue.unstack(this,e)},n.prototype.pad=function(e,t){return t===void 0&&(t=0),ue.pad(this,e,t)},n.prototype.batchNormalization=function(e,t,r,i,o){return r===void 0&&(r=.001),Ek("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon"),this.batchNorm(e,t,o,i,r)},n.prototype.batchNorm=function(e,t,r,i,o){return o===void 0&&(o=.001),this.throwIfDisposed(),ue.batchNorm(this,e,t,r,i,o)},n.prototype.all=function(e,t){return e===void 0&&(e=null),t===void 0&&(t=!1),this.throwIfDisposed(),ue.all(this,e,t)},n.prototype.any=function(e,t){return e===void 0&&(e=null),t===void 0&&(t=!1),this.throwIfDisposed(),ue.any(this,e,t)},n.prototype.logSumExp=function(e,t){return e===void 0&&(e=null),t===void 0&&(t=!1),this.throwIfDisposed(),ue.logSumExp(this,e,t)},n.prototype.sum=function(e,t){return e===void 0&&(e=null),t===void 0&&(t=!1),this.throwIfDisposed(),ue.sum(this,e,t)},n.prototype.prod=function(e,t){return e===void 0&&(e=null),t===void 0&&(t=!1),this.throwIfDisposed(),ue.prod(this,e,t)},n.prototype.mean=function(e,t){return e===void 0&&(e=null),t===void 0&&(t=!1),this.throwIfDisposed(),ue.mean(this,e,t)},n.prototype.min=function(e,t){return e===void 0&&(e=null),t===void 0&&(t=!1),this.throwIfDisposed(),ue.min(this,e,t)},n.prototype.max=function(e,t){return e===void 0&&(e=null),t===void 0&&(t=!1),this.throwIfDisposed(),ue.max(this,e,t)},n.prototype.argMin=function(e){return e===void 0&&(e=null),this.throwIfDisposed(),ue.argMin(this,e)},n.prototype.argMax=function(e){return e===void 0&&(e=null),this.throwIfDisposed(),ue.argMax(this,e)},n.prototype.cast=function(e){return this.throwIfDisposed(),ue.cast(this,e)},n.prototype.add=function(e){return this.throwIfDisposed(),ue.add(this,e)},n.prototype.addStrict=function(e){return this.throwIfDisposed(),ue.addStrict(this,e)},n.prototype.atan2=function(e){return this.throwIfDisposed(),ue.atan2(this,e)},n.prototype.sub=function(e){return this.throwIfDisposed(),ue.sub(this,e)},n.prototype.subStrict=function(e){return this.throwIfDisposed(),ue.subStrict(this,e)},n.prototype.pow=function(e){return this.throwIfDisposed(),ue.pow(this,e)},n.prototype.powStrict=function(e){return this.throwIfDisposed(),ue.powStrict(this,e)},n.prototype.mul=function(e){return this.throwIfDisposed(),ue.mul(this,e)},n.prototype.mulStrict=function(e){return this.throwIfDisposed(),ue.mulStrict(this,e)},n.prototype.div=function(e){return this.throwIfDisposed(),ue.div(this,e)},n.prototype.divNoNan=function(e){return this.throwIfDisposed(),ue.divNoNan(this,e)},n.prototype.floorDiv=function(e){return this.throwIfDisposed(),ue.floorDiv(this,e)},n.prototype.divStrict=function(e){return this.throwIfDisposed(),ue.divStrict(this,e)},n.prototype.minimum=function(e){return this.throwIfDisposed(),ue.minimum(this,e)},n.prototype.minimumStrict=function(e){return this.throwIfDisposed(),ue.minimumStrict(this,e)},n.prototype.maximum=function(e){return this.throwIfDisposed(),ue.maximum(this,e)},n.prototype.maximumStrict=function(e){return this.throwIfDisposed(),ue.maximumStrict(this,e)},n.prototype.mod=function(e){return this.throwIfDisposed(),ue.mod(this,e)},n.prototype.modStrict=function(e){return this.throwIfDisposed(),ue.modStrict(this,e)},n.prototype.squaredDifferenceStrict=function(e){return this.throwIfDisposed(),ue.squaredDifferenceStrict(this,e)},n.prototype.transpose=function(e){return this.throwIfDisposed(),ue.transpose(this,e)},n.prototype.notEqual=function(e){return this.throwIfDisposed(),ue.notEqual(this,e)},n.prototype.notEqualStrict=function(e){return this.throwIfDisposed(),ue.notEqualStrict(this,e)},n.prototype.less=function(e){return this.throwIfDisposed(),ue.less(this,e)},n.prototype.lessStrict=function(e){return this.throwIfDisposed(),ue.lessStrict(this,e)},n.prototype.equal=function(e){return this.throwIfDisposed(),ue.equal(this,e)},n.prototype.equalStrict=function(e){return this.throwIfDisposed(),ue.equalStrict(this,e)},n.prototype.lessEqual=function(e){return this.throwIfDisposed(),ue.lessEqual(this,e)},n.prototype.lessEqualStrict=function(e){return this.throwIfDisposed(),ue.lessEqualStrict(this,e)},n.prototype.greater=function(e){return this.throwIfDisposed(),ue.greater(this,e)},n.prototype.greaterStrict=function(e){return this.throwIfDisposed(),ue.greaterStrict(this,e)},n.prototype.greaterEqual=function(e){return this.throwIfDisposed(),ue.greaterEqual(this,e)},n.prototype.greaterEqualStrict=function(e){return this.throwIfDisposed(),ue.greaterEqualStrict(this,e)},n.prototype.logicalAnd=function(e){return this.throwIfDisposed(),ue.logicalAnd(this,e)},n.prototype.logicalOr=function(e){return this.throwIfDisposed(),ue.logicalOr(this,e)},n.prototype.logicalNot=function(){return this.throwIfDisposed(),ue.logicalNot(this)},n.prototype.logicalXor=function(e){return this.throwIfDisposed(),ue.logicalXor(this,e)},n.prototype.where=function(e,t){return this.throwIfDisposed(),ue.where(e,this,t)},n.prototype.neg=function(){return this.throwIfDisposed(),ue.neg(this)},n.prototype.ceil=function(){return this.throwIfDisposed(),ue.ceil(this)},n.prototype.floor=function(){return this.throwIfDisposed(),ue.floor(this)},n.prototype.sign=function(){return this.throwIfDisposed(),ue.sign(this)},n.prototype.isNaN=function(){return this.throwIfDisposed(),ue.isNaN(this)},n.prototype.isInf=function(){return this.throwIfDisposed(),ue.isInf(this)},n.prototype.isFinite=function(){return this.throwIfDisposed(),ue.isFinite(this)},n.prototype.exp=function(){return this.throwIfDisposed(),ue.exp(this)},n.prototype.expm1=function(){return this.throwIfDisposed(),ue.expm1(this)},n.prototype.log=function(){return this.throwIfDisposed(),ue.log(this)},n.prototype.log1p=function(){return this.throwIfDisposed(),ue.log1p(this)},n.prototype.sqrt=function(){return this.throwIfDisposed(),ue.sqrt(this)},n.prototype.rsqrt=function(){return this.throwIfDisposed(),ue.rsqrt(this)},n.prototype.square=function(){return this.throwIfDisposed(),ue.square(this)},n.prototype.reciprocal=function(){return this.throwIfDisposed(),ue.reciprocal(this)},n.prototype.abs=function(){return this.throwIfDisposed(),ue.abs(this)},n.prototype.clipByValue=function(e,t){return this.throwIfDisposed(),ue.clipByValue(this,e,t)},n.prototype.relu=function(){return this.throwIfDisposed(),ue.relu(this)},n.prototype.relu6=function(){return this.throwIfDisposed(),ue.relu6(this)},n.prototype.elu=function(){return this.throwIfDisposed(),ue.elu(this)},n.prototype.selu=function(){return this.throwIfDisposed(),ue.selu(this)},n.prototype.leakyRelu=function(e){return e===void 0&&(e=.2),this.throwIfDisposed(),ue.leakyRelu(this,e)},n.prototype.prelu=function(e){return this.throwIfDisposed(),ue.prelu(this,e)},n.prototype.sigmoid=function(){return this.throwIfDisposed(),ue.sigmoid(this)},n.prototype.logSigmoid=function(){return this.throwIfDisposed(),ue.logSigmoid(this)},n.prototype.softplus=function(){return this.throwIfDisposed(),ue.softplus(this)},n.prototype.zerosLike=function(){return this.throwIfDisposed(),ue.zerosLike(this)},n.prototype.onesLike=function(){return this.throwIfDisposed(),ue.onesLike(this)},n.prototype.sin=function(){return this.throwIfDisposed(),ue.sin(this)},n.prototype.cos=function(){return this.throwIfDisposed(),ue.cos(this)},n.prototype.tan=function(){return this.throwIfDisposed(),ue.tan(this)},n.prototype.asin=function(){return this.throwIfDisposed(),ue.asin(this)},n.prototype.acos=function(){return this.throwIfDisposed(),ue.acos(this)},n.prototype.atan=function(){return this.throwIfDisposed(),ue.atan(this)},n.prototype.sinh=function(){return this.throwIfDisposed(),ue.sinh(this)},n.prototype.cosh=function(){return this.throwIfDisposed(),ue.cosh(this)},n.prototype.tanh=function(){return this.throwIfDisposed(),ue.tanh(this)},n.prototype.asinh=function(){return this.throwIfDisposed(),ue.asinh(this)},n.prototype.acosh=function(){return this.throwIfDisposed(),ue.acosh(this)},n.prototype.atanh=function(){return this.throwIfDisposed(),ue.atanh(this)},n.prototype.erf=function(){return this.throwIfDisposed(),ue.erf(this)},n.prototype.round=function(){return this.throwIfDisposed(),ue.round(this)},n.prototype.step=function(e){return e===void 0&&(e=0),this.throwIfDisposed(),ue.step(this,e)},n.prototype.softmax=function(e){return e===void 0&&(e=-1),this.throwIfDisposed(),ue.softmax(this,e)},n.prototype.logSoftmax=function(e){return e===void 0&&(e=-1),this.throwIfDisposed(),ue.logSoftmax(this,e)},n.prototype.resizeBilinear=function(e,t){return t===void 0&&(t=!1),this.throwIfDisposed(),ue.image.resizeBilinear(this,e,t)},n.prototype.resizeNearestNeighbor=function(e,t){return t===void 0&&(t=!1),this.throwIfDisposed(),ue.image.resizeNearestNeighbor(this,e,t)},n.prototype.conv1d=function(e,t,r,i,o,s){return i===void 0&&(i="NWC"),o===void 0&&(o=1),this.throwIfDisposed(),ue.conv1d(this,e,t,r,i,o,s)},n.prototype.conv2d=function(e,t,r,i,o,s){return i===void 0&&(i="NHWC"),o===void 0&&(o=[1,1]),this.throwIfDisposed(),ue.conv2d(this,e,t,r,i,o,s)},n.prototype.conv2dTranspose=function(e,t,r,i,o){return this.throwIfDisposed(),ue.conv2dTranspose(this,e,t,r,i,o)},n.prototype.depthwiseConv2D=function(e,t,r,i,o,s){return i===void 0&&(i="NHWC"),o===void 0&&(o=[1,1]),this.throwIfDisposed(),ue.depthwiseConv2d(this,e,t,r,i,o,s)},n.prototype.separableConv2d=function(e,t,r,i,o,s){return o===void 0&&(o=[1,1]),s===void 0&&(s="NHWC"),this.throwIfDisposed(),ue.separableConv2d(this,e,t,r,i,o,s)},n.prototype.avgPool=function(e,t,r,i){return this.throwIfDisposed(),ue.avgPool(this,e,t,r,i)},n.prototype.maxPool=function(e,t,r,i){return this.throwIfDisposed(),ue.maxPool(this,e,t,r,i)},n.prototype.localResponseNormalization=function(e,t,r,i){return e===void 0&&(e=5),t===void 0&&(t=1),r===void 0&&(r=1),i===void 0&&(i=.5),ue.localResponseNormalization(this,e,t,r,i)},n.prototype.pool=function(e,t,r,i,o){return this.throwIfDisposed(),ue.pool(this,e,t,r,i,o)},n.prototype.variable=function(e,t,r){return e===void 0&&(e=!0),this.throwIfDisposed(),Ri().makeVariable(this,e,t,r)},n.prototype.unsortedSegmentSum=function(e,t){return this.throwIfDisposed(),ue.unsortedSegmentSum(this,e,t)},n.prototype.batchToSpaceND=function(e,t){return this.throwIfDisposed(),ue.batchToSpaceND(this,e,t)},n.prototype.spaceToBatchND=function(e,t){return this.throwIfDisposed(),ue.spaceToBatchND(this,e,t)},n.prototype.topk=function(e,t){return e===void 0&&(e=1),t===void 0&&(t=!0),this.throwIfDisposed(),ue.topk(this,e,t)},n.prototype.stridedSlice=function(e,t,r,i,o,s,a,l){return i===void 0&&(i=0),o===void 0&&(o=0),s===void 0&&(s=0),a===void 0&&(a=0),l===void 0&&(l=0),this.throwIfDisposed(),ue.stridedSlice(this,e,t,r,i,o,s,a,l)},n.prototype.depthToSpace=function(e,t){return this.throwIfDisposed(),ue.depthToSpace(this,e,t)},n.prototype.fft=function(){return this.throwIfDisposed(),ue.spectral.fft(this)},n.prototype.ifft=function(){return this.throwIfDisposed(),ue.spectral.ifft(this)},n.prototype.rfft=function(){return this.throwIfDisposed(),ue.spectral.rfft(this)},n.prototype.irfft=function(){return this.throwIfDisposed(),ue.spectral.irfft(this)},n}();Object.defineProperty(Pt,Symbol.hasInstance,{value:function(n){return!!n&&n.dataId!=null&&n.shape!=null&&n.dtype!=null}});var Mb,dg,hg,fg,pg,Kl=function(n){function e(t,r,i,o){var s=n.call(this,t.shape,t.dtype,t.dataId,o)||this;return s.trainable=r,s.name=i,s}return hi(e,n),e.prototype.assign=function(t){if(t.dtype!==this.dtype)throw new Error("dtype of the new value ("+t.dtype+") and previous value ("+this.dtype+") must match");if(!pn(t.shape,this.shape))throw new Error("shape of the new value ("+t.shape+") and previous value ("+this.shape+") must match");Ri().disposeTensor(this),this.dataId=t.dataId,Ri().incRef(this,null)},e.prototype.dispose=function(){Ri().disposeVariable(this),this.isDisposedInternal=!0},e}(Pt);Object.defineProperty(Kl,Symbol.hasInstance,{value:function(n){return n instanceof Pt&&n.assign!=null&&n.assign instanceof Function}}),function(n){n.R0="R0",n.R1="R1",n.R2="R2",n.R3="R3",n.R4="R4",n.R5="R5",n.R6="R6"}(Mb||(Mb={})),function(n){n.float32="float32",n.int32="int32",n.bool="int32",n.complex64="complex64"}(dg||(dg={})),function(n){n.float32="float32",n.int32="int32",n.bool="bool",n.complex64="complex64"}(hg||(hg={})),function(n){n.float32="float32",n.int32="float32",n.bool="float32",n.complex64="complex64"}(fg||(fg={})),function(n){n.float32="complex64",n.int32="complex64",n.bool="complex64",n.complex64="complex64"}(pg||(pg={}));var EA={float32:fg,int32:dg,bool:hg,complex64:pg};function _n(n,e){if(n==="string"||e==="string"){if(n==="string"&&e==="string")return"string";throw new Error("Can not upcast "+n+" with "+e)}return EA[n][e]}function a0(n){return _n(n,"int32")}function Ft(n,e){if(n.dtype===e.dtype)return[n,e];var t=_n(n.dtype,e.dtype);return[n.cast(t),e.cast(t)]}function NA(n,e){U(n.dtype===e.dtype,function(){return"The dtypes of the first("+n.dtype+") and second("+e.dtype+") input must match"})}function Nk(n){var e=[];return function t(r,i,o){if(r!=null){if(r instanceof Pt)return void i.push(r);if(s=r,!(!Array.isArray(s)&&typeof s!="object")){var s,a=r;for(var l in a){var u=a[l];o.has(u)||(o.add(u),t(u,i,o))}}}}(n,e,new Set),e}var l0,Pb=function(){function n(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null}}return n.prototype.dispose=function(){for(var e in this.registeredVariables)this.registeredVariables[e].dispose()},n}(),SA=function(){function n(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new Pb}return n.prototype.ready=function(){return Re(this,void 0,void 0,function(){var e,t,r;return je(this,function(i){switch(i.label){case 0:if(this.pendingBackendInit!=null)return[2,this.pendingBackendInit.then(function(){})];if(this.backendInstance!=null)return[2];e=this.getSortedBackends(),t=0,i.label=1;case 1:return t<e.length?(r=e[t],[4,this.initializeBackend(r).success]):[3,5];case 2:return i.sent()?[4,this.setBackend(r)]:[3,4];case 3:return i.sent(),[2];case 4:return t++,[3,1];case 5:throw new Error("Could not initialize any backends, all backend initializations failed.")}})})},Object.defineProperty(n.prototype,"backend",{get:function(){if(this.pendingBackendInit!=null)throw new Error("Backend '"+this.backendName+"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");if(this.backendInstance==null){var e=this.initializeBackendsAndReturnBest(),t=e.name;if(e.asyncInit)throw new Error("The highest priority backend '"+t+"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");this.setBackend(t)}return this.backendInstance},enumerable:!0,configurable:!0}),n.prototype.backendNames=function(){return Object.keys(this.registryFactory)},n.prototype.findBackend=function(e){return!(e in this.registry)&&(!(e in this.registryFactory)||this.initializeBackend(e).asyncInit)?null:this.registry[e]},n.prototype.findBackendFactory=function(e){return e in this.registryFactory?this.registryFactory[e].factory:null},n.prototype.registerBackend=function(e,t,r){return r===void 0&&(r=1),e in this.registryFactory?(console.warn(e+" backend was already registered. Reusing existing backend factory."),!1):(this.registryFactory[e]={factory:t,priority:r},!0)},n.prototype.setBackend=function(e){return Re(this,void 0,void 0,function(){var t,r,i;return je(this,function(o){switch(o.label){case 0:if(this.registryFactory[e]==null)throw new Error("Backend name '"+e+"' not found in registry");return this.backendName=e,this.registry[e]!=null?[3,4]:(this.backendInstance=null,t=this.initializeBackend(e),r=t.success,t.asyncInit?[4,r]:[3,2]);case 1:return i=o.sent(),[3,3];case 2:i=r,o.label=3;case 3:if(!i)return[2,!1];o.label=4;case 4:return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new _A(this.backendInstance),[2,!0]}})})},n.prototype.setupRegisteredKernels=function(){var e=this;Ab(this.backendName).forEach(function(t){t.setupFunc!=null&&t.setupFunc(e.backendInstance)})},n.prototype.disposeRegisteredKernels=function(e){var t=this;Ab(e).forEach(function(r){r.disposeFunc!=null&&r.disposeFunc(t.registry[e])})},n.prototype.initializeBackend=function(e){var t=this,r=this.registryFactory[e];if(r==null)throw new Error("Cannot initialize backend "+e+", no registration found.");try{var i=r.factory();if(Promise.resolve(i)===i){var o=++this.pendingBackendInitId,s=i.then(function(a){return!(o<t.pendingBackendInitId)&&(t.registry[e]=a,t.pendingBackendInit=null,!0)}).catch(function(a){return!(o<t.pendingBackendInitId)&&(t.pendingBackendInit=null,console.warn("Initialization of backend "+e+" failed"),console.warn(a.stack||a.message),!1)});return this.pendingBackendInit=s,{success:s,asyncInit:!0}}return this.registry[e]=i,{success:!0,asyncInit:!1}}catch(a){return console.warn("Initialization of backend "+e+" failed"),console.warn(a.stack||a.message),{success:!1,asyncInit:!1}}},n.prototype.removeBackend=function(e){if(!(e in this.registryFactory))throw new Error(e+" backend not found in registry");this.backendName===e&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)},n.prototype.getSortedBackends=function(){var e=this;if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort(function(t,r){return e.registryFactory[r].priority-e.registryFactory[t].priority})},n.prototype.initializeBackendsAndReturnBest=function(){for(var e=this.getSortedBackends(),t=0;t<e.length;t++){var r=e[t],i=this.initializeBackend(r),o=i.success,s=i.asyncInit;if(s||o)return{name:r,asyncInit:s}}throw new Error("Could not initialize any backends, all backend initializations failed.")},n.prototype.moveData=function(e,t){var r=this.state.tensorInfo.get(t),i=r.backend,o=this.readSync(t);i.disposeData(t),r.backend=e,e.move(t,o,r.shape,r.dtype),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++},n.prototype.tidy=function(e,t){var r,i=this,o=null;if(t==null){if(typeof e!="function")throw new Error("Please provide a function to tidy()");t=e}else{if(typeof e!="string"&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof t!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");o=e}return this.scopedRun(function(){return i.startScope(o)},function(){return i.endScope(r)},function(){return(r=t())instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),r})},n.prototype.scopedRun=function(e,t,r){e();try{var i=r();return t(),i}catch(o){throw t(),o}},n.prototype.nextTensorId=function(){return n.nextTensorId++},n.prototype.nextVariableId=function(){return n.nextVariableId++},n.prototype.clone=function(e){var t=this.makeTensorFromDataId(e.dataId,e.shape,e.dtype),r={x:e};return this.addTapeNode(this.state.activeScope.name,r,[t],function(i){return{x:function(){return i.toFloat()}}},[]),t},n.prototype.runKernel=function(e,t,r,i,o){return this.runKernelFunc(null,t,null,e,r,i,o)},n.prototype.shouldCheckForMemLeaks=function(){return this.ENV.getBool("IS_TEST")},n.prototype.checkKernelForMemLeak=function(e,t,r){var i=this.backend.numDataIds(),o=0;r.forEach(function(l){o+=l.dtype==="complex64"?3:1});var s=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],a=i-t-o-s;if(a>0)throw new Error("Backend '"+this.backendName+"' has an internal memory leak ("+a+" data ids) after running '"+e+"'")},n.prototype.runKernelFunc=function(e,t,r,i,o,s,a){var l,u=this;s===void 0&&(s=[]),a===void 0&&(a=[]);var f=[],p=this.isTapeOn();i==null&&(i=this.state.activeScope!=null?this.state.activeScope.name:"");var m,v=function(E){p&&(f=E.map(function(N){return u.keep(u.clone(N))}))},y=this.state.numBytes,w=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);var _,k=gk(i,this.backendName);return m=k!=null?function(){var E=u.backend.numDataIds();_=k.kernelFunc({inputs:t,attrs:o,backend:u.backend});var N=Array.isArray(_)?_:[_];u.shouldCheckForMemLeaks()&&u.checkKernelForMemLeak(i,E,N);var S=N.map(function(P){var D=P.dataId,j=P.shape,T=P.dtype;return u.makeTensorFromDataId(D,j,T)}),A=S.filter(function(P,D){return a[D]});return v((s||[]).slice().concat(A)),S}:function(){var E=u.backend.numDataIds();_=u.tidy(function(){return e(u.backend,v)});var N=Array.isArray(_)?_:[_];return u.shouldCheckForMemLeaks()&&u.checkKernelForMemLeak(i,E,N),N},this.scopedRun(function(){return u.state.kernelDepth++},function(){return u.state.kernelDepth--},function(){l=u.ENV.getBool("DEBUG")?u.profiler.profileKernel(i,t,function(){return m()}):m()}),p&&this.addTapeNode(i,t,l,r,f),this.state.profiling&&this.state.activeProfile.kernels.push({name:i,bytesAdded:this.state.numBytes-y,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-w,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(t).map(function(E){return t[E].shape}),outputShapes:l.map(function(E){return E.shape})}),Array.isArray(_)?l:l[0]},n.prototype.makeTensor=function(e,t,r,i){if(e==null)throw new Error("Values passed to engine.makeTensor() are null");r=r||"float32",i=i||this.backend;var o=e;r==="string"&&nv(e[0])&&(o=e.map(function(f){return bA(f)}));var s=i.write(o,t,r),a=new Pt(t,r,s,this.nextTensorId());if(this.incRef(a,i),r==="string"){var l=this.state.tensorInfo.get(s),u=vA(o);this.state.numBytes+=u-l.bytes,l.bytes=u}return a},n.prototype.makeTensorFromDataId=function(e,t,r,i){var o=new Pt(t,r=r||"float32",e,this.nextTensorId());return this.incRef(o,i),o},n.prototype.makeVariable=function(e,t,r,i){t===void 0&&(t=!0),r=r||this.nextVariableId().toString(),i!=null&&i!==e.dtype&&(e=e.asType(i));var o=new Kl(e,t,r,this.nextTensorId());if(this.state.registeredVariables[o.name]!=null)throw new Error("Variable with name "+o.name+" was already registered");return this.state.registeredVariables[o.name]=o,this.incRef(o,this.backend),o},n.prototype.incRef=function(e,t){var r=this.state.tensorInfo.has(e.dataId)?this.state.tensorInfo.get(e.dataId).refCount:0;if(this.state.numTensors++,e.dtype==="string"&&this.state.numStringTensors++,r===0){this.state.numDataBuffers++;var i=0;e.dtype!=="complex64"&&e.dtype!=="string"&&(i=e.size*bk(e.dtype)),this.state.tensorInfo.set(e.dataId,{backend:t||this.backend,dtype:e.dtype,shape:e.shape,bytes:i,refCount:0}),this.state.numBytes+=i}this.state.tensorInfo.get(e.dataId).refCount++,e instanceof Kl||this.track(e)},n.prototype.disposeTensor=function(e){if(this.state.tensorInfo.has(e.dataId)){this.state.numTensors--,e.dtype==="string"&&this.state.numStringTensors--;var t=this.state.tensorInfo.get(e.dataId);t.refCount<=1?(e.dtype!=="complex64"&&(this.state.numBytes-=t.bytes),this.state.numDataBuffers--,t.backend.disposeData(e.dataId),this.state.tensorInfo.delete(e.dataId)):this.state.tensorInfo.get(e.dataId).refCount--}},n.prototype.disposeVariables=function(){for(var e in this.state.registeredVariables){var t=this.state.registeredVariables[e];this.disposeVariable(t)}},n.prototype.disposeVariable=function(e){this.disposeTensor(e),this.state.registeredVariables[e.name]!=null&&delete this.state.registeredVariables[e.name]},n.prototype.memory=function(){var e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,e.reasons==null&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e},n.prototype.profile=function(e){return Re(this,void 0,void 0,function(){var t,r;return je(this,function(i){return this.state.profiling=!0,t=this.state.numBytes,r=this.state.numTensors,this.state.activeProfile.kernels=[],this.state.activeProfile.result=e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max.apply(Math,this.state.activeProfile.kernels.map(function(o){return o.totalBytesSnapshot})),this.state.activeProfile.newBytes=this.state.numBytes-t,this.state.activeProfile.newTensors=this.state.numTensors-r,[2,this.state.activeProfile]})})},n.prototype.isTapeOn=function(){return this.state.gradientDepth>0&&this.state.kernelDepth===0},n.prototype.addTapeNode=function(e,t,r,i,o){var s=this,a={id:this.state.nextTapeNodeId++,kernelName:e,inputs:t,outputs:r,saved:o},l=cA(e);l!=null&&(i=l.gradFunc),i!=null&&(a.gradient=function(u){return u=u.map(function(f,p){if(f==null){var m=r[p],v=Xu(m.size,m.dtype);return s.makeTensor(v,m.shape,m.dtype)}return f}),i(u.length>1?u:u[0],o)}),this.state.activeTape.push(a)},n.prototype.keep=function(e){return e.kept=!0,e},n.prototype.startTape=function(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++},n.prototype.endTape=function(){this.state.gradientDepth--},n.prototype.startScope=function(e){var t={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(t.name=e),this.state.scopeStack.push(t),this.state.activeScope=t},n.prototype.endScope=function(e){for(var t=this,r=Nk(e),i=new Set(r.map(function(l){return l.id})),o=0;o<this.state.activeScope.track.length;o++){var s=this.state.activeScope.track[o];s.kept||i.has(s.id)||s.dispose()}var a=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],r.forEach(function(l){l.kept||l.scopeId!==a.id||t.track(l)})},n.prototype.gradients=function(e,t,r,i){var o=this;if(i===void 0&&(i=!1),U(t.length>0,function(){return"gradients() received an empty list of xs."}),r!=null&&r.dtype!=="float32")throw new Error("dy must have 'float32' dtype, but has '"+r.dtype+"'");var s=this.scopedRun(function(){return o.startTape()},function(){return o.endTape()},function(){return o.tidy("forward",e)});U(s instanceof Pt,function(){return"The result y returned by f() must be a tensor."});var a=function(l,u,f){for(var p={},m={},v=0;v<u.length;v++)p[u[v].id]=!0;for(v=0;v<l.length;v++){var y=(P=l[v]).inputs;for(var w in y){for(var _=y[w],k=!1,E=0;E<u.length;E++)if(p[_.id]){P.outputs.forEach(function(M){return p[M.id]=!0}),k=!0,m[P.id]=!0;break}if(k)break}}var N={};N[f.id]=!0;var S={};for(v=l.length-1;v>=0;v--)for(y=(P=l[v]).inputs,E=0;E<P.outputs.length;E++)if(N[P.outputs[E].id]){for(var w in y)N[y[w].id]=!0,S[P.id]=!0;break}var A=[];for(v=0;v<l.length;v++){var P;if(m[(P=l[v]).id]&&S[P.id]){var D={};for(var w in P.inputs){var j=P.inputs[w];p[j.id]&&(D[w]=j)}var T=Object.assign({},P);T.inputs=D,T.outputs=P.outputs,A.push(T)}}return A}(this.state.activeTape,t,s);if(!i&&a.length===0&&t.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",function(){var l,u,f={};f[s.id]=r??(l=s.shape,u=_k(Me(l),"float32"),Z.makeTensor(u,l,"float32")),function(m,v,y){for(var w=function(k){var E=v[k],N=[];if(E.outputs.forEach(function(D){var j=m[D.id];j!=null?N.push(j):N.push(null)}),E.gradient==null)throw new Error("Cannot compute gradient: gradient function not found for "+E.kernelName+".");var S=E.gradient(N),A=function(D){if(!(D in S))throw new Error("Cannot backprop through input "+D+". Available gradients found: "+Object.keys(S)+".");var j=y(function(){return S[D]()});if(j.dtype!=="float32")throw new Error("Error in gradient for op "+E.kernelName+". The gradient of input "+D+" must have 'float32' dtype, but has '"+j.dtype+"'");var T=E.inputs[D];if(!pn(j.shape,T.shape))throw new Error("Error in gradient for op "+E.kernelName+". The gradient of input '"+D+"' has shape '"+j.shape+"', which does not match the shape of the input '"+T.shape+"'");if(m[T.id]==null)m[T.id]=j;else{var M=m[T.id];m[T.id]=M.add(j),M.dispose()}};for(var P in E.inputs)A(P)},_=v.length-1;_>=0;_--)w(_)}(f,a,function(m){return o.tidy(m)});var p=t.map(function(m){return f[m.id]});return o.state.gradientDepth===0&&(o.state.activeTape.forEach(function(m){for(var v=0,y=m.saved;v<y.length;v++)y[v].dispose()}),o.state.activeTape=null),{value:s,grads:p}})},n.prototype.customGrad=function(e){var t=this;return U(cg(e),function(){return"The f passed in customGrad(f) must be a function."}),function(){for(var r,i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];U(i.every(function(a){return a instanceof Pt}),function(){return"The args passed in customGrad(f)(x1, x2,...) must all be tensors"});var s={};return i.forEach(function(a,l){s[l]=a}),t.runKernelFunc(function(a,l){return U((r=e.apply(void 0,i.concat([l]))).value instanceof Pt,function(){return"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"}),U(cg(r.gradFunc),function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."}),r.value},s,function(a,l){var u=r.gradFunc(a,l),f=Array.isArray(u)?u:[u];U(f.length===i.length,function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."}),U(f.every(function(m){return m instanceof Pt}),function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."});var p={};return f.forEach(function(m,v){p[v]=function(){return m}}),p})}},n.prototype.readSync=function(e){return this.state.tensorInfo.get(e).backend.readSync(e)},n.prototype.read=function(e){return this.state.tensorInfo.get(e).backend.read(e)},n.prototype.time=function(e){return Re(this,void 0,void 0,function(){var t,r;return je(this,function(i){switch(i.label){case 0:return t=Ai(),[4,this.backend.time(e)];case 1:return(r=i.sent()).wallMs=Ai()-t,[2,r]}})})},n.prototype.track=function(e){return this.state.activeScope!=null&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e},Object.defineProperty(n.prototype,"registeredVariables",{get:function(){return this.state.registeredVariables},enumerable:!0,configurable:!0}),n.prototype.reset=function(){for(var e in this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new Pb,this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null},n.nextTensorId=0,n.nextVariableId=0,n}(),Z=function(){var n=function(){if(l0==null){var t=void 0;if(typeof window<"u")t=window;else if(typeof global<"u")t=global;else if(typeof process<"u")t=process;else{if(typeof self>"u")throw new Error("Could not find a global object");t=self}l0=t}return l0}();if(n._tfengine==null){var e=new aA(n);n._tfengine=new SA(e)}return function(t){mk=t}(n._tfengine.ENV),Ri=function(){return n._tfengine},n._tfengine}();function Sk(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}var ho=he();ho.registerFlag("DEBUG",function(){return!1},function(n){n&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")}),ho.registerFlag("IS_BROWSER",function(){return Sk()}),ho.registerFlag("IS_NODE",function(){return typeof process<"u"&&process.versions!==void 0&&process.versions.node!==void 0}),ho.registerFlag("IS_CHROME",function(){return typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}),ho.registerFlag("PROD",function(){return!1}),ho.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",function(){return ho.getBool("DEBUG")}),ho.registerFlag("DEPRECATION_WARNINGS_ENABLED",function(){return!0}),ho.registerFlag("IS_TEST",function(){return!1});var Iu,kr,_r,ua={},c0={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function IA(n,e){ua[n]=e}function zi(n){n in ua||(ua[n]=function(t){if(t!==1&&t!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");var r=function(i){if(typeof OffscreenCanvas<"u"&&i===2)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}(t);return r.addEventListener("webglcontextlost",function(i){i.preventDefault(),delete ua[t]},!1),t===1?r.getContext("webgl",c0)||r.getContext("experimental-webgl",c0):r.getContext("webgl2",c0)}(n));var e=ua[n];return e.isContextLost()?(delete ua[n],zi(n)):(e.disable(e.DEPTH_TEST),e.disable(e.STENCIL_TEST),e.disable(e.BLEND),e.disable(e.DITHER),e.disable(e.POLYGON_OFFSET_FILL),e.disable(e.SAMPLE_COVERAGE),e.enable(e.SCISSOR_TEST),e.enable(e.CULL_FACE),e.cullFace(e.BACK),ua[n])}function Jf(n,e){return[e,n]}function gu(n){var e=Me(n);return lg(Math.ceil(e/4))}function Yu(n,e){return[Math.max(1,Math.ceil(e/2)),Math.max(1,Math.ceil(n/2))]}function rv(n,e){var t,r,i,o,s,a,l,u,f,p=n;return he().getNumber("WEBGL_VERSION")===2?(t=p.R32F,r=p.R16F,i=p.RGBA16F,o=p.RGBA32F,s=p.RED,a=4,l=1,u=p.HALF_FLOAT,f=p.FLOAT):(t=n.RGBA,r=n.RGBA,i=n.RGBA,o=p.RGBA,s=n.RGBA,a=4,l=4,u=e!=null?e.HALF_FLOAT_OES:null,f=n.FLOAT),{internalFormatFloat:t,internalFormatHalfFloat:r,internalFormatPackedHalfFloat:i,internalFormatPackedFloat:o,textureFormatFloat:s,downloadTextureFormat:n.RGBA,downloadUnpackNumChannels:a,defaultNumChannels:l,textureTypeHalfFloat:u,textureTypeFloat:f}}function Oe(n,e,t){var r=t();return e&&function(i){var o=i.getError();if(o!==i.NO_ERROR)throw new Error("WebGL Error: "+TA(i,o))}(n),r}(function(n){n[n.DENSE=0]="DENSE",n[n.SHARED_BATCH=1]="SHARED_BATCH"})(Iu||(Iu={})),function(n){n[n.RENDER=0]="RENDER",n[n.UPLOAD=1]="UPLOAD",n[n.PIXELS=2]="PIXELS",n[n.DOWNLOAD=3]="DOWNLOAD"}(kr||(kr={})),function(n){n[n.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",n[n.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",n[n.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",n[n.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",n[n.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}(_r||(_r={}));var AA=596e-10,RA=65504;function jA(n){return!!(he().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||n===0||AA<Math.abs(n)&&Math.abs(n)<RA)}function TA(n,e){switch(e){case n.NO_ERROR:return"NO_ERROR";case n.INVALID_ENUM:return"INVALID_ENUM";case n.INVALID_VALUE:return"INVALID_VALUE";case n.INVALID_OPERATION:return"INVALID_OPERATION";case n.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case n.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case n.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code "+e}}function kh(n,e,t){return Io(n,e,function(){return n.getExtension(t)},'Extension "'+t+'" not supported on this browser.')}function DA(n,e,t){var r=Io(n,e,function(){return n.createShader(n.VERTEX_SHADER)},"Unable to create vertex WebGLShader.");if(Oe(n,e,function(){return n.shaderSource(r,t)}),Oe(n,e,function(){return n.compileShader(r)}),n.getShaderParameter(r,n.COMPILE_STATUS)===!1)throw console.log(n.getShaderInfoLog(r)),new Error("Failed to compile vertex shader.");return r}function MA(n,e,t){var r=Io(n,e,function(){return n.createShader(n.FRAGMENT_SHADER)},"Unable to create fragment WebGLShader.");if(Oe(n,e,function(){return n.shaderSource(r,t)}),Oe(n,e,function(){return n.compileShader(r)}),n.getShaderParameter(r,n.COMPILE_STATUS)===!1)throw function(i,o){var s=PA.exec(o);if(s==null)return console.log("Couldn't parse line number in error: "+o),void console.log(i);for(var a=+s[1],l=i.split(`
`),u=l.length.toString().length+2,f=l.map(function(_,k){return Ol((k+1).toString(),u)+_}),p=0,m=0;m<f.length;m++)p=Math.max(f[m].length,p);var v=f.slice(0,a-1),y=f.slice(a-1,a),w=f.slice(a);console.log(v.join(`
`)),console.log(o.split(`
`)[0]),console.log("%c "+Ol(y[0],p),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(w.join(`
`))}(t,n.getShaderInfoLog(r)),new Error("Failed to compile fragment shader.");return r}var u0,d0,PA=/ERROR: [0-9]+:([0-9]+):/g;function OA(n,e){return Io(n,e,function(){return n.createProgram()},"Unable to create WebGLProgram.")}function FA(n,e,t){if(Oe(n,e,function(){return n.linkProgram(t)}),n.getProgramParameter(t,n.LINK_STATUS)===!1)throw console.log(n.getProgramInfoLog(t)),new Error("Failed to link vertex and fragment shaders.")}function h0(n,e,t){if(Oe(n,e,function(){return n.validateProgram(t)}),n.getProgramParameter(t,n.VALIDATE_STATUS)===!1)throw console.log(n.getProgramInfoLog(t)),new Error("Shader program validation failed.")}function LA(n,e,t){var r=Io(n,e,function(){return n.createBuffer()},"Unable to create WebGLBuffer");return Oe(n,e,function(){return n.bindBuffer(n.ARRAY_BUFFER,r)}),Oe(n,e,function(){return n.bufferData(n.ARRAY_BUFFER,t,n.STATIC_DRAW)}),r}function BA(n,e,t){var r=Io(n,e,function(){return n.createBuffer()},"Unable to create WebGLBuffer");return Oe(n,e,function(){return n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,r)}),Oe(n,e,function(){return n.bufferData(n.ELEMENT_ARRAY_BUFFER,t,n.STATIC_DRAW)}),r}function zA(n,e){return Io(n,e,function(){return n.createTexture()},"Unable to create WebGLTexture.")}function WA(n,e){var t=he().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(n<=0||e<=0){var r="["+n+"x"+e+"]";throw new Error("Requested texture size "+r+" is invalid.")}if(n>t||e>t)throw r="["+n+"x"+e+"]",new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU "+("["+t+"x"+t+"]")+".")}function VA(n,e){return Io(n,e,function(){return n.createFramebuffer()},"Unable to create WebGLFramebuffer.")}function Ob(n,e,t,r,i,o,s,a){var l=n.getAttribLocation(t,r);return l!==-1&&(Oe(n,e,function(){return n.bindBuffer(n.ARRAY_BUFFER,i)}),Oe(n,e,function(){return n.vertexAttribPointer(l,o,n.FLOAT,!1,s,a)}),Oe(n,e,function(){return n.enableVertexAttribArray(l)}),!0)}function UA(n,e,t,r){KA(n,r),Oe(n,e,function(){return n.activeTexture(n.TEXTURE0+r)}),Oe(n,e,function(){return n.bindTexture(n.TEXTURE_2D,t)})}function HA(n,e,t,r){return Io(n,e,function(){return n.getUniformLocation(t,r)},'uniform "'+r+'" not present in program.')}function GA(n,e,t){return n.getUniformLocation(e,t)}function $A(n,e,t,r,i,o){Oe(n,e,function(){return UA(n,e,r,o)}),Oe(n,e,function(){return n.uniform1i(i,o)})}function f0(n,e,t,r){Oe(n,e,function(){return n.bindFramebuffer(n.FRAMEBUFFER,r)}),Oe(n,e,function(){return n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,t,0)})}function Fb(n,e,t){Oe(n,e,function(){return n.bindFramebuffer(n.FRAMEBUFFER,t)}),Oe(n,e,function(){return n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,null,0)})}function Ch(n){var e=n.checkFramebufferStatus(n.FRAMEBUFFER);if(e!==n.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+qA(n,e))}function qA(n,e){switch(e){case n.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case n.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case n.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case n.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error "+e}}function Io(n,e,t,r){var i=Oe(n,e,function(){return t()});if(i==null)throw new Error(r);return i}function KA(n,e){var t=n.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=e+n.TEXTURE0;if(r<n.TEXTURE0||r>t)throw new Error("textureUnit must be in "+("[gl.TEXTURE0, gl.TEXTURE"+t+"]")+".")}function bf(n,e){return e===void 0&&(e=2),Me(n.slice(0,n.length-e))}function wf(n){if(n.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[n.length>1?n[n.length-2]:1,n[n.length-1]]}function p0(n){var e=[1,1,1];return n.length===0||n.length===1&&n[0]===1||(e=[bf(n)].concat(wf(n))),e}function XA(n,e){var t;e===void 0&&(e=!1);var r=he().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e&&(r*=2,(n=n.map(function(u,f){return f>=n.length-2?yk(n[f]):n[f]})).length===1&&(n=[2,n[0]])),n.length!==2){var i=pa(n);n=i.newShape}var o=Me(n);if(n.length<=1&&o<=r)return[1,o];if(n.length===2&&n[0]<=r&&n[1]<=r)return n;if(n.length===3&&n[0]*n[1]<=r&&n[2]<=r)return[n[0]*n[1],n[2]];if(n.length===3&&n[0]<=r&&n[1]*n[2]<=r)return[n[0],n[1]*n[2]];if(n.length===4&&n[0]*n[1]*n[2]<=r&&n[3]<=r)return[n[0]*n[1]*n[2],n[3]];if(n.length===4&&n[0]<=r&&n[1]*n[2]*n[3]<=r)return[n[0],n[1]*n[2]*n[3]];if(e){var s=bf(n),a=2,l=2;return n.length&&(a=(t=wf(n))[0],l=t[1]),lg(o=s*(a/2)*(l/2)).map(function(u){return 2*u})}return lg(o)}function Eh(n){return n%2==0}function Nh(n,e){if(pn(n=n.slice(-2),e=e.slice(-2))||!n.length||!e.length||n[0]===0||n[1]===0||e[0]===0||e[1]===0)return!0;if(n.length!==e.length){var t=n.slice(-1)[0],r=e.slice(-1)[0];if(t===r||Eh(t)&&Eh(r)&&(n[0]===1||e[0]===1))return!0}return n[1]===e[1]&&Eh(n[0])&&Eh(e[0])}function YA(n){if(u0==null){var e=zi(n);u0=e.getParameter(e.MAX_TEXTURE_SIZE)}return u0}function JA(n){if(d0==null){var e=zi(n);d0=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,d0)}function QA(n){if(n===0)return 0;var e=zi(n);return Vr(e,"EXT_disjoint_timer_query_webgl2")&&n===2?2:Vr(e,"EXT_disjoint_timer_query")?1:0}function Vr(n,e){return n.getExtension(e)!=null}function Lb(n){try{if(zi(n)!=null)return!0}catch{return!1}return!1}function ZA(n){if(n===0)return!1;var e=zi(n);if(n===1){if(!Vr(e,"OES_texture_float"))return!1}else if(!Vr(e,"EXT_color_buffer_float"))return!1;return mg(e)}function eR(n){if(n===0)return!1;var e=zi(n);if(n!==1){if(Vr(e,"EXT_color_buffer_float"))return mg(e);if(Vr(e,"EXT_color_buffer_half_float")){var t=e.getExtension("EXT_color_buffer_half_float");return function(r,i){var o=rv(r,i),s=r.createTexture();r.bindTexture(r.TEXTURE_2D,s),r.texImage2D(r.TEXTURE_2D,0,o.internalFormatHalfFloat,1,1,0,o.textureFormatFloat,o.textureTypeHalfFloat,null);var a=r.createFramebuffer();r.bindFramebuffer(r.FRAMEBUFFER,a),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,s,0);var l=r.checkFramebufferStatus(r.FRAMEBUFFER)===r.FRAMEBUFFER_COMPLETE;return r.bindTexture(r.TEXTURE_2D,null),r.bindFramebuffer(r.FRAMEBUFFER,null),r.deleteTexture(s),r.deleteFramebuffer(a),l}(e,t)}return!1}return!!Vr(e,"OES_texture_float")&&!!Vr(e,"WEBGL_color_buffer_float")&&mg(e)}function mg(n){var e=rv(n),t=n.createTexture();n.bindTexture(n.TEXTURE_2D,t),n.texImage2D(n.TEXTURE_2D,0,e.internalFormatFloat,1,1,0,e.textureFormatFloat,e.textureTypeFloat,null);var r=n.createFramebuffer();n.bindFramebuffer(n.FRAMEBUFFER,r),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,t,0);var i=n.checkFramebufferStatus(n.FRAMEBUFFER)===n.FRAMEBUFFER_COMPLETE;return n.bindTexture(n.TEXTURE_2D,null),n.bindFramebuffer(n.FRAMEBUFFER,null),n.deleteTexture(t),n.deleteFramebuffer(r),i}function tR(n){return n===2&&zi(n).fenceSync!=null}var Ue=he();function Ik(n){he().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(n+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function Ee(n,e){return Z.tidy(n,e)}function ur(n){Nk(n).forEach(function(e){return e.dispose()})}function nR(n){return Z.keep(n)}function _f(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];he().getBool("IS_TEST")||console.warn.apply(console,n)}function Rs(n,e){var t=n;if(Pi(n))return e==="string"?[]:[n.length];if(!Array.isArray(n))return[];for(var r=[];Array.isArray(t)||Pi(t)&&e!=="string";)r.push(t.length),t=t[0];return Array.isArray(n)&&he().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&function i(o,s,a){if(a=a||[],!Array.isArray(o)&&!Pi(o))return void U(s.length===0,function(){return"Element arr["+a.join("][")+"] is a primitive, but should be an array/TypedArray of "+s[0]+" elements"});U(s.length>0,function(){return"Element arr["+a.join("][")+"] should be a primitive, but is an array of "+o.length+" elements"}),U(o.length===s[0],function(){return"Element arr["+a.join("][")+"] should have "+s[0]+" elements, but has "+o.length+" elements"});for(var l=s.slice(1),u=0;u<o.length;++u)i(o[u],l,a.concat(u))}(n,r,[]),r}function Bb(n,e,t,r){if(n!=null&&(n!=="numeric"&&n!==e||n==="numeric"&&e==="string"))throw new Error("Argument '"+t+"' passed to '"+r+"' must be "+n+" tensor, but got "+e+" tensor")}function V(n,e,t,r){if(r===void 0&&(r="numeric"),n instanceof Pt)return Bb(r,n.dtype,e,t),n;var i=Ku(n);if(i!=="string"&&["bool","int32","float32"].indexOf(r)>=0&&(i=r),Bb(r,i,e,t),n==null||!Pi(n)&&!Array.isArray(n)&&typeof n!="number"&&typeof n!="boolean"&&typeof n!="string"){var o=n==null?"null":n.constructor.name;throw new Error("Argument '"+e+"' passed to '"+t+"' must be a Tensor or TensorLike, but got '"+o+"'")}var s=Rs(n,i);Pi(n)||Array.isArray(n)||(n=[n]);var a=i!=="string"?wk(n,i,he().getBool("DEBUG")):ql(n,[],!0);return Z.makeTensor(a,s,i)}function kf(n,e,t,r){if(r===void 0&&(r="numeric"),!Array.isArray(n))throw new Error("Argument "+e+" passed to "+t+" must be a `Tensor[]` or `TensorLike[]`");return n.map(function(i,o){return V(i,e+"["+o+"]",t)},r)}function Ak(n,e){for(var t=0;t<n.length;++t)if(n[n.length-t-1]!==e-1-t)return!1;return!0}function rR(n,e,t){for(var r=n.length+e.length,i=[],o=0,s=0,a=0;a<r;a++)t.indexOf(a)===-1?i.push(n[o++]):i.push(e[s++]);return i}function Tn(n,e){for(var t=[],r=n.length,i=0;i<r;i++)e.indexOf(i)===-1&&t.push(n[i]);return[t,e.map(function(o){return n[o]})]}function dr(n,e){return rR(n,e.map(function(t){return 1}),e)}function wr(n,e,t){U(Ak(e,t),function(){return n+" supports only inner-most axes for now. Got axes "+e+" and rank-"+t+" input."})}function Wi(n,e){if(Ak(n,e))return null;for(var t=[],r=0;r<e;++r)n.indexOf(r)===-1&&t.push(r);return n.forEach(function(i){return t.push(i)}),t}function iv(n){return n.map(function(e,t){return[t,e]}).sort(function(e,t){return e[1]-t[1]}).map(function(e){return e[0]})}function Vi(n,e){for(var t=[],r=e-n;r<e;++r)t.push(r);return t}function iR(n,e){var t=n[0].length;n.forEach(function(i,o){U(i.length===t,function(){return"Error in concat"+t+"D: rank of tensors["+o+"] must be the same as the rank of the rest ("+t+")"})}),U(e>=0&&e<t,function(){return"Error in concat"+t+"D: axis must be between 0 and "+(t-1)+"."});var r=n[0];n.forEach(function(i,o){for(var s=0;s<t;s++)U(s===e||i[s]===r[s],function(){return"Error in concat"+t+"D: Shape of tensors["+o+"] ("+i+") does not match the shape of the rest ("+r+") along the non-concatenated axis "+o+"."})})}function Xl(n,e){for(var t=n[0].slice(),r=1;r<n.length;r++)t[e]+=n[r][e];return t}function X(n){var e=Object.keys(n);if(e.length!==1)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+e.length+" keys.");var t=e[0],r=n[t];t.endsWith("_")&&(t=t.substring(0,t.length-1));var i=function(){for(var o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];Z.startScope(t);try{var a=r.apply(void 0,o);return a instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),Z.endScope(a),a}catch(l){throw Z.endScope(null),l}};return Object.defineProperty(i,"name",{value:t,configurable:!0}),i}Ue.registerFlag("HAS_WEBGL",function(){return Ue.getNumber("WEBGL_VERSION")>0}),Ue.registerFlag("WEBGL_VERSION",function(){return Lb(2)?2:Lb(1)?1:0}),Ue.registerFlag("WEBGL_BUFFER_SUPPORTED",function(){return Ue.get("WEBGL_VERSION")===2}),Ue.registerFlag("WEBGL_CPU_FORWARD",function(){return!0}),Ue.registerFlag("WEBGL_FORCE_F16_TEXTURES",function(){return!1}),Ue.registerFlag("WEBGL_PACK",function(){return Ue.getBool("HAS_WEBGL")}),Ue.registerFlag("WEBGL_PACK_NORMALIZATION",function(){return Ue.getBool("WEBGL_PACK")}),Ue.registerFlag("WEBGL_PACK_CLIP",function(){return Ue.getBool("WEBGL_PACK")}),Ue.registerFlag("WEBGL_PACK_DEPTHWISECONV",function(){return!1}),Ue.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",function(){return Ue.getBool("WEBGL_PACK")}),Ue.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",function(){return Ue.getBool("WEBGL_PACK")}),Ue.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",function(){return Ue.getBool("WEBGL_PACK")}),Ue.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",function(){return Ue.getBool("WEBGL_PACK")}),Ue.registerFlag("WEBGL_PACK_REDUCE",function(){return Ue.getBool("WEBGL_PACK")}),Ue.registerFlag("WEBGL_LAZILY_UNPACK",function(){return Ue.getBool("WEBGL_PACK")}),Ue.registerFlag("WEBGL_CONV_IM2COL",function(){return Ue.getBool("WEBGL_PACK")}),Ue.registerFlag("WEBGL_MAX_TEXTURE_SIZE",function(){return YA(Ue.getNumber("WEBGL_VERSION"))}),Ue.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",function(){return JA(Ue.getNumber("WEBGL_VERSION"))}),Ue.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",function(){var n=Ue.getNumber("WEBGL_VERSION");return n===0?0:QA(n)}),Ue.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",function(){return Ue.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&(n=navigator.userAgent||navigator.vendor||window.opera,!(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(n)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(n.substr(0,4))));var n}),Ue.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",function(){return ZA(Ue.getNumber("WEBGL_VERSION"))}),Ue.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",function(){return!Ue.getBool("WEBGL_FORCE_F16_TEXTURES")&&Ue.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")}),Ue.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",function(){return eR(Ue.getNumber("WEBGL_VERSION"))}),Ue.registerFlag("WEBGL_FENCE_API_ENABLED",function(){return tR(Ue.getNumber("WEBGL_VERSION"))}),Ue.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",function(){return Ue.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0}),Ek=Ik;var wn=X({complex_:function(n,e){var t=V(n,"real","complex"),r=V(e,"imag","complex");return pt(t.shape,r.shape,"real and imag shapes, "+t.shape+" and "+r.shape+", must match in call to tf.complex()."),Z.runKernelFunc(function(i){return i.complex(t,r)},{$real:t,$imag:r})}}),Wr=X({real_:function(n){var e=V(n,"input","real");return Z.runKernelFunc(function(t){return t.real(e)},{$input:e})}}),ji=X({imag_:function(n){var e=V(n,"input","imag");return Z.runKernelFunc(function(t){return t.imag(e)},{$input:e})}});function kn(n,e,t){return js(n,e,Rs(n,t),t)}function js(n,e,t,r){if(r==null&&(r=Ku(n)),r==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!Pi(n)&&!Array.isArray(n)&&typeof n!="number"&&typeof n!="boolean"&&typeof n!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(e!=null){kk(e);var i=Me(e),o=Me(t);U(i===o,function(){return"Based on the provided shape, ["+e+"], the tensor should have "+i+" values but has "+o});for(var s=0;s<t.length;++s){var a=t[s],l=s!==t.length-1||a!==Me(e.slice(s));U(t[s]===e[s]||!l,function(){return"Error creating a new Tensor. Inferred shape ("+t+") does not match the provided shape ("+e+"). "})}}return Pi(n)||Array.isArray(n)||(n=[n]),e=e||t,n=r!=="string"?wk(n,r,he().getBool("DEBUG")):ql(n,[],!0),Z.makeTensor(n,e,r)}function ke(n,e){if((Pi(n)&&e!=="string"||Array.isArray(n))&&e!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(e==="string"&&Pi(n)&&!(n instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return js(n,[],[],e)}function Kt(n,e){nc(n);var t=Rs(n,e);if(t.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return js(n,null,t,e)}function bs(n,e,t){if(nc(n),e!=null&&e.length!==2)throw new Error("tensor2d() requires shape to have two numbers");var r=Rs(n,t);if(r.length!==2&&r.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return js(n,e,r,t)}function ov(n,e,t){if(nc(n),e!=null&&e.length!==3)throw new Error("tensor3d() requires shape to have three numbers");var r=Rs(n,t);if(r.length!==3&&r.length!==1)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return js(n,e,r,t)}function or(n,e,t){if(nc(n),e!=null&&e.length!==4)throw new Error("tensor4d() requires shape to have four numbers");var r=Rs(n,t);if(r.length!==4&&r.length!==1)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return js(n,e,r,t)}function oR(n,e,t){if(nc(n),e!=null&&e.length!==5)throw new Error("tensor5d() requires shape to have five numbers");var r=Rs(n,t);if(r.length!==5&&r.length!==1)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return js(n,e,r,t)}function sR(n,e,t){if(nc(n),e!=null&&e.length!==6)throw new Error("tensor6d() requires shape to have six numbers");var r=Rs(n,t);if(r.length!==6&&r.length!==1)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return js(n,e=e||r,r,t)}function aR(n,e,t,r){return e===void 0&&(e=!0),Z.makeVariable(n,e,t,r)}function rc(n,e){if(e===void 0&&(e="float32"),e==="complex64"){var t=rc(n,"float32"),r=Nt(n,"float32");return wn(t,r)}var i=_k(Me(n),e);return Z.makeTensor(i,n,e)}function Nt(n,e){if(e===void 0&&(e="float32"),e==="complex64"){var t=Nt(n,"float32"),r=Nt(n,"float32");return wn(t,r)}var i=Xu(Me(n),e);return Z.makeTensor(i,n,e)}function Fi(n,e,t){return Z.runKernelFunc(function(r){return r.fill(n,e,t)},{})}function lR(n,e,t){if(t<=0)throw new Error("The number of values should be positive.");return Z.runKernelFunc(function(r){return r.linspace(n,e,t)},{})}function Cf(n,e,t,r){if(t===void 0&&(t=1),r===void 0&&(r="float32"),t===0)throw new Error("Cannot have a step of zero");if(n===e||n<e&&t<0||e<n&&t>1)return Nt([0],r);var i=Xu(Math.abs(Math.ceil((e-n)/t)),r);e<n&&t===1&&(t=-1),i[0]=n;for(var o=1;o<i.length;o++)i[o]=i[o-1]+t;return Kt(i,r)}var Rk=X({onesLike_:function(n){var e=V(n,"x","onesLike");if(e.dtype==="complex64"){var t=Rk(Wr(e)),r=st(ji(e));return wn(t,r)}return Z.runKernelFunc(function(i){return i.onesLike(e)},{$x:e},function(i,o){return{$x:function(){return st(i)}}})}}),st=X({zerosLike_:function(n){var e=V(n,"x","zerosLike");return Z.runKernelFunc(function(t){return t.zerosLike(e)},{$x:e},function(t,r){return{$x:function(){return st(t)}}})}}),tn=X({concat_:function(n,e){e===void 0&&(e=0),U(n.length>=1,function(){return"Pass at least one tensor to concat"});var t=kf(n,"tensors","concat");t[0].dtype==="complex64"&&t.forEach(function(a){if(a.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype `+a.dtype+". ")}),e=sn(e,t[0].shape)[0];var r=Xl(t.map(function(a){return a.shape}),e);if(Me(r)===0)return kn([],r);if((t=t.filter(function(a){return a.size>0})).length===1)return t[0];var i=t.map(function(a){return a.shape});iR(i,e);var o=t,s={axis:e};return Z.runKernelFunc(function(a){return a.concat(t,e)},o,function(a){var l=i.map(function(u){return u[e]});return sv(a,l,e).map(function(u){return function(){return u}})},"Concat",s)}}),cR=X({concat1d_:function(n){return tn(n,0)}}),uR=X({concat2d_:function(n,e){return tn(n,e)}}),dR=X({concat3d_:function(n,e){return tn(n,e)}}),hR=X({concat4d_:function(n,e){return tn(n,e)}}),sv=X({split_:function(n,e,t){t===void 0&&(t=0);var r,i=V(n,"x","split");return t=sn(t,i.shape)[0],typeof e=="number"?(U(i.shape[t]%e==0,function(){return"Number of splits must evenly divide the axis."}),r=new Array(e).fill(i.shape[t]/e)):(U(i.shape[t]===e.reduce(function(o,s){return o+s}),function(){return"The sum of sizes must match the size of the axis dimension."}),r=e),Z.runKernelFunc(function(o){return o.split(i,r,t)},{$x:i},function(o){return{$x:function(){return tn(o,t)}}})}});function Ra(n,e){return n(e={exports:{}},e.exports),e.exports}var fR=Ra(function(n){(function(e,t,r){function i(a){var l,u=this,f=(l=4022871197,function(p){p=p.toString();for(var m=0;m<p.length;m++){var v=.02519603282416938*(l+=p.charCodeAt(m));v-=l=v>>>0,l=(v*=l)>>>0,l+=4294967296*(v-=l)}return 23283064365386963e-26*(l>>>0)});u.next=function(){var p=2091639*u.s0+23283064365386963e-26*u.c;return u.s0=u.s1,u.s1=u.s2,u.s2=p-(u.c=0|p)},u.c=1,u.s0=f(" "),u.s1=f(" "),u.s2=f(" "),u.s0-=f(a),u.s0<0&&(u.s0+=1),u.s1-=f(a),u.s1<0&&(u.s1+=1),u.s2-=f(a),u.s2<0&&(u.s2+=1),f=null}function o(a,l){return l.c=a.c,l.s0=a.s0,l.s1=a.s1,l.s2=a.s2,l}function s(a,l){var u=new i(a),f=l&&l.state,p=u.next;return p.int32=function(){return 4294967296*u.next()|0},p.double=function(){return p()+11102230246251565e-32*(2097152*p()|0)},p.quick=p,f&&(typeof f=="object"&&o(f,u),p.state=function(){return o(u,{})}),p}t&&t.exports?t.exports=s:this.alea=s})(0,n)}),pR=Ra(function(n){(function(e,t,r){function i(a){var l=this,u="";l.x=0,l.y=0,l.z=0,l.w=0,l.next=function(){var p=l.x^l.x<<11;return l.x=l.y,l.y=l.z,l.z=l.w,l.w^=l.w>>>19^p^p>>>8},a===(0|a)?l.x=a:u+=a;for(var f=0;f<u.length+64;f++)l.x^=0|u.charCodeAt(f),l.next()}function o(a,l){return l.x=a.x,l.y=a.y,l.z=a.z,l.w=a.w,l}function s(a,l){var u=new i(a),f=l&&l.state,p=function(){return(u.next()>>>0)/4294967296};return p.double=function(){do var m=((u.next()>>>11)+(u.next()>>>0)/4294967296)/2097152;while(m===0);return m},p.int32=u.next,p.quick=p,f&&(typeof f=="object"&&o(f,u),p.state=function(){return o(u,{})}),p}t&&t.exports?t.exports=s:this.xor128=s})(0,n)}),mR=Ra(function(n){(function(e,t,r){function i(a){var l=this,u="";l.next=function(){var p=l.x^l.x>>>2;return l.x=l.y,l.y=l.z,l.z=l.w,l.w=l.v,(l.d=l.d+362437|0)+(l.v=l.v^l.v<<4^p^p<<1)|0},l.x=0,l.y=0,l.z=0,l.w=0,l.v=0,a===(0|a)?l.x=a:u+=a;for(var f=0;f<u.length+64;f++)l.x^=0|u.charCodeAt(f),f==u.length&&(l.d=l.x<<10^l.x>>>4),l.next()}function o(a,l){return l.x=a.x,l.y=a.y,l.z=a.z,l.w=a.w,l.v=a.v,l.d=a.d,l}function s(a,l){var u=new i(a),f=l&&l.state,p=function(){return(u.next()>>>0)/4294967296};return p.double=function(){do var m=((u.next()>>>11)+(u.next()>>>0)/4294967296)/2097152;while(m===0);return m},p.int32=u.next,p.quick=p,f&&(typeof f=="object"&&o(f,u),p.state=function(){return o(u,{})}),p}t&&t.exports?t.exports=s:this.xorwow=s})(0,n)}),gR=Ra(function(n){(function(e,t,r){function i(a){var l=this;l.next=function(){var u,f,p=l.x,m=l.i;return u=p[m],f=(u^=u>>>7)^u<<24,f^=(u=p[m+1&7])^u>>>10,f^=(u=p[m+3&7])^u>>>3,f^=(u=p[m+4&7])^u<<7,u=p[m+7&7],f^=(u^=u<<13)^u<<9,p[m]=f,l.i=m+1&7,f},function(u,f){var p,m=[];if(f===(0|f))m[0]=f;else for(f=""+f,p=0;p<f.length;++p)m[7&p]=m[7&p]<<15^f.charCodeAt(p)+m[p+1&7]<<13;for(;m.length<8;)m.push(0);for(p=0;p<8&&m[p]===0;++p);for(p==8?m[7]=-1:m[p],u.x=m,u.i=0,p=256;p>0;--p)u.next()}(l,a)}function o(a,l){return l.x=a.x.slice(),l.i=a.i,l}function s(a,l){a==null&&(a=+new Date);var u=new i(a),f=l&&l.state,p=function(){return(u.next()>>>0)/4294967296};return p.double=function(){do var m=((u.next()>>>11)+(u.next()>>>0)/4294967296)/2097152;while(m===0);return m},p.int32=u.next,p.quick=p,f&&(f.x&&o(f,u),p.state=function(){return o(u,{})}),p}t&&t.exports?t.exports=s:this.xorshift7=s})(0,n)}),vR=Ra(function(n){(function(e,t,r){function i(a){var l=this;l.next=function(){var u,f,p=l.w,m=l.X,v=l.i;return l.w=p=p+1640531527|0,f=m[v+34&127],u=m[v=v+1&127],f^=f<<13,u^=u<<17,f^=f>>>15,u^=u>>>12,f=m[v]=f^u,l.i=v,f+(p^p>>>16)|0},function(u,f){var p,m,v,y,w,_=[],k=128;for(f===(0|f)?(m=f,f=null):(f+="\0",m=0,k=Math.max(k,f.length)),v=0,y=-32;y<k;++y)f&&(m^=f.charCodeAt((y+32)%f.length)),y===0&&(w=m),m^=m<<10,m^=m>>>15,m^=m<<4,m^=m>>>13,y>=0&&(w=w+1640531527|0,v=(p=_[127&y]^=m+w)==0?v+1:0);for(v>=128&&(_[127&(f&&f.length||0)]=-1),v=127,y=512;y>0;--y)m=_[v+34&127],p=_[v=v+1&127],m^=m<<13,p^=p<<17,m^=m>>>15,p^=p>>>12,_[v]=m^p;u.w=w,u.X=_,u.i=v}(l,a)}function o(a,l){return l.i=a.i,l.w=a.w,l.X=a.X.slice(),l}function s(a,l){a==null&&(a=+new Date);var u=new i(a),f=l&&l.state,p=function(){return(u.next()>>>0)/4294967296};return p.double=function(){do var m=((u.next()>>>11)+(u.next()>>>0)/4294967296)/2097152;while(m===0);return m},p.int32=u.next,p.quick=p,f&&(f.X&&o(f,u),p.state=function(){return o(u,{})}),p}t&&t.exports?t.exports=s:this.xor4096=s})(0,n)}),xR=Ra(function(n){(function(e,t,r){function i(a){var l=this,u="";l.next=function(){var p=l.b,m=l.c,v=l.d,y=l.a;return p=p<<25^p>>>7^m,m=m-v|0,v=v<<24^v>>>8^y,y=y-p|0,l.b=p=p<<20^p>>>12^m,l.c=m=m-v|0,l.d=v<<16^m>>>16^y,l.a=y-p|0},l.a=0,l.b=0,l.c=-1640531527,l.d=1367130551,a===Math.floor(a)?(l.a=a/4294967296|0,l.b=0|a):u+=a;for(var f=0;f<u.length+20;f++)l.b^=0|u.charCodeAt(f),l.next()}function o(a,l){return l.a=a.a,l.b=a.b,l.c=a.c,l.d=a.d,l}function s(a,l){var u=new i(a),f=l&&l.state,p=function(){return(u.next()>>>0)/4294967296};return p.double=function(){do var m=((u.next()>>>11)+(u.next()>>>0)/4294967296)/2097152;while(m===0);return m},p.int32=u.next,p.quick=p,f&&(typeof f=="object"&&o(f,u),p.state=function(){return o(u,{})}),p}t&&t.exports?t.exports=s:this.tychei=s})(0,n)}),da=Ra(function(n){(function(e,t){var r,i=this,o=256,s=6,a="random",l=t.pow(o,s),u=t.pow(2,52),f=2*u,p=o-1;function m(k,E,N){var S=[],A=w(function j(T,M){var L,B=[],F=typeof T;if(M&&F=="object")for(L in T)try{B.push(j(T[L],M-1))}catch{}return B.length?B:F=="string"?T:T+"\0"}((E=E==1?{entropy:!0}:E||{}).entropy?[k,_(e)]:k??function(){try{var j;return r&&(j=r.randomBytes)?j=j(o):(j=new Uint8Array(o),(i.crypto||i.msCrypto).getRandomValues(j)),_(j)}catch{var T=i.navigator,M=T&&T.plugins;return[+new Date,i,M,i.screen,_(e)]}}(),3),S),P=new v(S),D=function(){for(var j=P.g(s),T=l,M=0;j<u;)j=(j+M)*o,T*=o,M=P.g(1);for(;j>=f;)j/=2,T/=2,M>>>=1;return(j+M)/T};return D.int32=function(){return 0|P.g(4)},D.quick=function(){return P.g(4)/4294967296},D.double=D,w(_(P.S),e),(E.pass||N||function(j,T,M,L){return L&&(L.S&&y(L,P),j.state=function(){return y(P,{})}),M?(t[a]=j,T):j})(D,A,"global"in E?E.global:this==t,E.state)}function v(k){var E,N=k.length,S=this,A=0,P=S.i=S.j=0,D=S.S=[];for(N||(k=[N++]);A<o;)D[A]=A++;for(A=0;A<o;A++)D[A]=D[P=p&P+k[A%N]+(E=D[A])],D[P]=E;(S.g=function(j){for(var T,M=0,L=S.i,B=S.j,F=S.S;j--;)T=F[L=p&L+1],M=M*o+F[p&(F[L]=F[B=p&B+T])+(F[B]=T)];return S.i=L,S.j=B,M})(o)}function y(k,E){return E.i=k.i,E.j=k.j,E.S=k.S.slice(),E}function w(k,E){for(var N,S=k+"",A=0;A<S.length;)E[p&A]=p&(N^=19*E[p&A])+S.charCodeAt(A++);return _(E)}function _(k){return String.fromCharCode.apply(0,k)}if(t["seed"+a]=m,w(t.random(),e),n.exports){n.exports=m;try{r=require("crypto")}catch{}}})([],Math)});da.alea=fR,da.xor128=pR,da.xorwow=mR,da.xorshift7=gR,da.xor4096=vR,da.tychei=xR;var Qf=da.alea,av=function(){function n(e,t,r,i,o){this.mean=e,this.stdDev=t,this.dtype=r,this.nextVal=NaN,this.truncated=i,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);var s=o||Math.random();this.random=Qf(s.toString())}return n.prototype.nextValue=function(){if(!isNaN(this.nextVal)){var e=this.nextVal;return this.nextVal=NaN,e}for(var t,r,i=!1;!i;){var o=void 0,s=void 0,a=void 0;do a=(o=2*this.random()-1)*o+(s=2*this.random()-1)*s;while(a>=1||a===0);var l=Math.sqrt(-2*Math.log(a)/a);t=this.mean+this.stdDev*o*l,r=this.mean+this.stdDev*s*l,this.truncated&&!this.isValidTruncated(t)||(i=!0)}return this.truncated&&!this.isValidTruncated(r)||(this.nextVal=this.convertValue(r)),this.convertValue(t)},n.prototype.convertValue=function(e){return this.dtype==null||this.dtype==="float32"?e:Math.round(e)},n.prototype.isValidTruncated=function(e){return e<=this.upper&&e>=this.lower},n}(),yR=function(){function n(e,t,r,i){this.alpha=e,this.beta=1/t,this.dtype=r;var o=i||Math.random();this.randu=Qf(o.toString()),this.randn=new av(0,1,r,!1,this.randu()),this.d=e<1?e+2/3:e-1/3,this.c=1/Math.sqrt(9*this.d)}return n.prototype.nextValue=function(){for(var e,t,r,i,o,s;;){do i=this.randn.nextValue(),s=1+this.c*i;while(s<=0);if(s*=s*s,t=1-.331*(e=i*i)*e,r=.5*e+this.d*(1-s+Math.log(s)),(o=this.randu())<t||Math.log(o)<r)break}return s=1/this.beta*this.d*s,this.alpha<1&&(s*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(s)},n.prototype.convertValue=function(e){return this.dtype==="float32"?e:Math.round(e)},n}(),bR=function(){function n(e,t,r,i){var o=this;if(e===void 0&&(e=0),t===void 0&&(t=1),this.canReturnFloat=function(){return o.dtype==null||o.dtype==="float32"},this.min=e,this.range=t-e,this.dtype=r,i==null&&(i=Math.random()),typeof i=="number"&&(i=i.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error("The difference between "+e+" - "+t+" <= 1 and dtype is not float");this.random=Qf(i)}return n.prototype.convertValue=function(e){return this.canReturnFloat()?e:Math.round(e)},n.prototype.nextValue=function(){return this.convertValue(this.min+this.range*this.random())},n}();function $e(n,e,t){return e===void 0&&(e="float32"),e=e||"float32",kk(n),new Su(n,e,t)}function wR(n,e){e===void 0&&(e=!1),console.log(n.toString(e))}var jk=X({batchToSpaceND_:function(n,e,t){var r=V(n,"x","batchToSpaceND"),i=e.reduce(function(o,s){return o*s});return U(r.rank>=1+e.length,function(){return"input rank is "+r.rank+" but should be > than blockShape.length "+e.length}),U(t.length===e.length,function(){return"crops.length is "+t.length+" but should be equal to blockShape.length  "+e.length}),U(r.shape[0]%i==0,function(){return"input tensor batch is "+r.shape[0]+" but is not divisible by the product of the elements of blockShape "+e.join(" * ")+" === "+i}),Z.runKernelFunc(function(o){return o.batchToSpaceND(r,e,t)},{$x:r},function(o){return{$x:function(){return o.spaceToBatchND(e,t)}}})}}),_R=X({broadcastTo_:function(n,e){var t=V(n,"broadcastTo","x"),r=t.shape;if(e.some(function(l){return!(l>0)||l%1!=0}))throw new Error("broadcastTo(): Invalid broadcast shape ["+e+"].");if(e.length<t.rank)throw new Error("broadcastTo(): shape.length="+e.length+" < input.rank="+t.rank+".");if(e.length>t.rank){for(var i=t.shape.slice();i.length<e.length;)i.unshift(1);t=t.reshape(i)}for(var o=Array.from(e),s=e.length-1;s>=0;s--)if(t.shape[s]===e[s])o[s]=1;else if(t.shape[s]!==1)throw new Error("broadcastTo(): ["+r+"] cannot be broadcast to ["+e+"].");var a=o.map(function(l,u){return l>1?u:-1}).filter(function(l){return l>=0});return a.length===0?t.clone():Z.runKernelFunc(function(l){return l.tile(t,o)},{input:t},function(l){return{input:function(){return l.sum(a,!0)}}})}}),kR=X({cast_:function(n,e){var t=V(n,"x","cast");if(!mA(e))throw new Error("Failed to cast to unknown dtype "+e);if(e==="string"&&t.dtype!=="string"||e!=="string"&&t.dtype==="string")throw new Error("Only strings can be casted to strings");var r={dtype:e};return Z.runKernelFunc(function(i){return i.cast(t,e)},{x:t},function(i){return{x:function(){return i.clone()}}},"Cast",r)}}),CR=X({clone_:function(n){var e=V(n,"x","clone",null);return Z.runKernelFunc(function(){return Z.makeTensorFromDataId(e.dataId,e.shape,e.dtype)},{$x:e},function(t){return{$x:function(){return t.toFloat()}}})}}),ER=X({cumsum_:function(n,e,t,r){e===void 0&&(e=0),t===void 0&&(t=!1),r===void 0&&(r=!1);var i=V(n,"x","cumsum"),o=Wi([e|=0],i.rank),s=i;o!=null&&(s=i.transpose(o));var a=Vi(1,i.rank)[0],l=Z.runKernelFunc(function(u){return u.cumsum(s,a,t,r)},{permutedX:s},function(u){return{permutedX:function(){return u.cumsum(e,t,!r)}}});return o!=null&&(l=l.transpose(o)),l}}),NR=X({depthToSpace_:function(n,e,t){t===void 0&&(t="NHWC");var r=V(n,"x","depthToSpace"),i=t==="NHWC"?r.shape[1]:r.shape[2],o=t==="NHWC"?r.shape[2]:r.shape[3],s=t==="NHWC"?r.shape[3]:r.shape[1];return U(i*e>=0,function(){return`Negative dimension size caused by overflow when multiplying
      `+i+" and "+e+`  for depthToSpace with input shape
      `+r.shape}),U(o*e>=0,function(){return`Negative dimension size caused by overflow when multiplying
      `+o+" and "+e+` for depthToSpace with input shape
          `+r.shape}),U(s%(e*e)==0,function(){return"Dimension size must be evenly divisible by "+e*e+" but is "+s+" for depthToSpace with input shape "+r.shape}),Z.runKernelFunc(function(a){return a.depthToSpace(r,e,t)},{$x:r})}}),Br=X({expandDims_:function(n,e){e===void 0&&(e=0);var t=V(n,"x","expandDims",null);U(e<=t.rank,function(){return"Axis must be <= rank of the tensor"});var r=t.shape.slice();return e<0&&(U(-(t.rank+1)<=e,function(){return"Axis must be in the interval ["+-(t.rank+1)+", "+t.rank+"]"}),e=t.rank+e+1),r.splice(e,0,1),li(t,r)}}),Tk=X({eye_:function(n,e,t,r){r===void 0&&(r="float32"),e==null&&(e=n);for(var i=$e([n,e],r),o=n<=e?n:e,s=0;s<o;++s)i.set(1,s,s);var a=i.toTensor().as2D(n,e);if(t==null)return a;if(t.length===1)return Fl(Br(a,0),[t[0],1,1]);if(t.length===2)return Fl(Br(Br(a,0),0),[t[0],t[1],1,1]);if(t.length===3)return Fl(Br(Br(Br(a,0),0),0),[t[0],t[1],t[2],1,1]);throw new Error("eye() currently supports only 1D and 2D batchShapes, but received "+t.length+"D.")}}),SR=X({multinomial_:function(n,e,t,r){r===void 0&&(r=!1);var i=V(n,"logits","multinomial"),o=i.size,s=i.rank;if(o<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got "+o+".");if(s>2)throw new Error("Rank of probabilities must be 1 or 2, but is "+s);t=t||Math.random();var a=s===1?i.as2D(1,-1):i,l=Z.runKernelFunc(function(u){return u.multinomial(a,r,e,t)},{logits2D:a});return s===1?l.as1D():l}}),gg=X({oneHot_:function(n,e,t,r){if(t===void 0&&(t=1),r===void 0&&(r=0),e<2)throw new Error("Error in oneHot: depth must be >=2, but it is "+e);var i=V(n,"indices","oneHot","int32"),o=i.shape.concat([e]);return i=i.flatten(),Z.runKernelFunc(function(s){return s.oneHot(i,e,t,r)},{$indices:i},function(s){return{$indices:function(){return Nt(i.shape,"float32")}}}).reshape(o)}}),ja=X({pad_:function(n,e,t){t===void 0&&(t=0);var r=V(n,"x","pad");if(r.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");var i={paddings:e,constantValue:t};return Z.runKernelFunc(function(o){return o.pad(r,e,t)},{x:r},function(o){var s=e.map(function(a){return a[0]});return{x:function(){return o.slice(s,r.shape)}}},"PadV2",i)}}),IR=X({pad1d_:function(n,e,t){return t===void 0&&(t=0),U(e.length===2,function(){return"Invalid number of paddings. Must be length of 2."}),ja(n,[e],t)}}),AR=X({pad2d_:function(n,e,t){return t===void 0&&(t=0),U(e.length===2&&e[0].length===2&&e[1].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),ja(n,e,t)}}),RR=X({pad3d_:function(n,e,t){return t===void 0&&(t=0),U(e.length===3&&e[0].length===2&&e[1].length===2&&e[2].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),ja(n,e,t)}}),jR=X({pad4d_:function(n,e,t){return t===void 0&&(t=0),U(e.length===4&&e[0].length===2&&e[1].length===2&&e[2].length===2&&e[3].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),ja(n,e,t)}}),TR=X({rand_:function(n,e,t){var r=Me(n),i=null;if(t==null||t==="float32")i=new Float32Array(r);else if(t==="int32")i=new Int32Array(r);else{if(t!=="bool")throw new Error("Unknown data type "+t);i=new Uint8Array(r)}for(var o=0;o<r;o++)i[o]=e();return Z.makeTensor(i,n,t)}}),DR=X({randomNormal_:function(n,e,t,r,i){if(e===void 0&&(e=0),t===void 0&&(t=1),r!=null&&r==="bool")throw new Error("Unsupported data type "+r);for(var o=new av(e,t,r,!1,i),s=$e(n,r),a=0;a<s.values.length;a++)s.values[a]=o.nextValue();return s.toTensor()}}),MR=X({randomGamma_:function(n,e,t,r,i){if(t===void 0&&(t=1),r===void 0&&(r="float32"),t==null&&(t=1),r==null&&(r="float32"),r!=="float32"&&r!=="int32")throw new Error("Unsupported data type "+r);for(var o=new yR(e,t,r,i),s=$e(n,r),a=0;a<s.values.length;a++)s.values[a]=o.nextValue();return s.toTensor()}}),Dk=X({randomUniform_:function(n,e,t,r,i){e===void 0&&(e=0),t===void 0&&(t=1),r===void 0&&(r="float32");for(var o=$e(n,r),s=new bR(e,t,null,i),a=0;a<o.values.length;a++)o.values[a]=s.nextValue();return o.toTensor()}}),li=X({reshape_:function(n,e){var t=V(n,"x","reshape",null);e=fA(e,t.size),U(t.size===Me(e),function(){return"new shape and old shape must have the same number of elements."});var r={shape:e};return Z.runKernelFunc(function(i){return i.reshape(t,e)},{x:t},function(i){return{x:function(){return i.reshape(t.shape)}}},"Reshape",r)}}),Mk=X({spaceToBatchND_:function(n,e,t){var r=V(n,"x","spaceToBatchND");return U(r.rank>=1+e.length,function(){return"input rank "+r.rank+" should be > than [blockShape] "+e.length}),U(t.length===e.length,function(){return"paddings.shape[0] "+t.length+" must be equal to [blockShape] "+e.length}),U(r.shape.reduce(function(i,o,s){return s>0&&s<=e.length?i&&(o+t[s-1][0]+t[s-1][1])%e[s-1]==0:i},!0),function(){return"input spatial dimensions "+r.shape.slice(1)+" with paddings "+t.toString()+" must be divisible by blockShapes "+e.toString()}),Z.runKernelFunc(function(i){return i.spaceToBatchND(r,e,t)},{$x:r},function(i){return{$x:function(){return i.batchToSpaceND(e,t)}}})}}),Pk=X({squeeze_:function(n,e){var t=V(n,"x","squeeze");return li(t,pa(t.shape,e).newShape)}}),Sr=X({stack_:function(n,e){e===void 0&&(e=0);var t=kf(n,"tensors","stack");if(U(t.length>=1,function(){return"Pass at least one tensor to tf.stack"}),t.length===1)return t[0].expandDims(e);var r=t[0].rank,i=t[0].shape,o=t[0].dtype;U(e<=r,function(){return"Axis must be <= rank of the tensor"}),t.forEach(function(a){pt(i,a.shape,"All tensors passed to stack must have matching shapes")}),t.forEach(function(a){U(o===a.dtype,function(){return"All tensors passed to stack must have matching dtypes"})});var s=t.map(function(a){return a.expandDims(e)});return tn(s,e)}}),Fl=X({tile_:function(n,e){var t=V(n,"x","tile",null);U(t.rank===e.length,function(){return"Error in transpose: rank of input "+t.rank+" must match length of reps "+e+"."});var r=[t],i={reps:e};return Z.runKernelFunc(function(o,s){var a=o.tile(t,e);return s([t]),a},{x:t},function(o,s){var a=s[0];return{x:function(){var l=st(a);if(a.rank===1)for(var u=0;u<e[0];++u)l=l.add(o.slice([u*a.shape[0]],[a.shape[0]]));else if(a.rank===2)for(u=0;u<e[0];++u)for(var f=0;f<e[1];++f)l=l.add(o.slice([u*a.shape[0],f*a.shape[1]],[a.shape[0],a.shape[1]]));else if(a.rank===3)for(u=0;u<e[0];++u)for(f=0;f<e[1];++f)for(var p=0;p<e[2];++p)l=l.add(o.slice([u*a.shape[0],f*a.shape[1],p*a.shape[2]],[a.shape[0],a.shape[1],a.shape[2]]));else{if(a.rank!==4)throw new Error("Gradient for tile operation is not implemented for rank-"+a.rank+" tensors yet.");for(u=0;u<e[0];++u)for(f=0;f<e[1];++f)for(p=0;p<e[2];++p)for(var m=0;m<e[3];++m)l=l.add(o.slice([u*a.shape[0],f*a.shape[1],p*a.shape[2],m*a.shape[3]],[a.shape[0],a.shape[1],a.shape[2],a.shape[3]]))}return l}}},"Tile",i,r)}}),PR=X({truncatedNormal_:function(n,e,t,r,i){if(e===void 0&&(e=0),t===void 0&&(t=1),r!=null&&r==="bool")throw new Error("Unsupported data type "+r);for(var o=new av(e,t,r,!0,i),s=$e(n,r),a=0;a<s.values.length;a++)s.values[a]=o.nextValue();return s.toTensor()}}),nn=X({unstack_:function(n,e){e===void 0&&(e=0),e=e||0;var t=V(n,"x","unstack");U(e>=-t.shape.length&&e<t.shape.length,function(){return"Axis = "+e+" is not in [-"+t.shape.length+", "+t.shape.length+")"}),e<0&&(e+=t.shape.length);var r={axis:e};return Z.runKernelFunc(function(i){return i.unstack(t,e)},{x:t},function(i){return{x:function(){return Sr(i,e)}}},"Unpack",r)}}),OR=function(n,e){return Re(this,void 0,void 0,function(){var t,r,i,o,s,a,l,u,f,p;return je(this,function(m){switch(m.label){case 0:return t=V(n,"x","setdiff1d"),r=V(e,"y","setdiff1d"),U(t.dtype===r.dtype,function(){return"x and y should have the same dtype, but got x ("+t.dtype+") and y ("+r.dtype+")."}),U(t.rank===1,function(){return"x should be 1D tensor, but got x ("+t.shape+")."}),U(r.rank===1,function(){return"y should be 1D tensor, but got y ("+r.shape+")."}),[4,t.data()];case 1:return i=m.sent(),[4,r.data()];case 2:for(o=m.sent(),s=new Set(o),a=0,f=0;f<i.length;f++)s.has(i[f])||a++;for(l=new Su([a],t.dtype),u=new Su([a],"int32"),f=0,p=0;f<i.length;f++)s.has(i[f])||(l.values[p]=i[f],u.values[p]=f,p++);return[2,[l.toTensor(),u.toTensor()]]}})})};function Ef(n,e,t,r){r===void 0&&(r=!0);var i=[];if(r)(i=i.concat(e.slice(0))).push(n[0]/t),i=i.concat(n.slice(1));else{i=i.concat(n[0]);for(var o=e.length,s=0;s<o;++s)i=i.concat([n[s+1]/e[s],e[s]]);i=i.concat(n.slice(o+1))}return i}function Nf(n,e,t){t===void 0&&(t=!0);var r=[];if(t){r.push(e);for(var i=e+1;i<n;++i)i<=2*e?(r.push(i),r.push(i-(e+1))):r.push(i)}else{var o=[],s=[];for(i=1;i<n;++i)i>=2*e+1||i%2==1?s.push(i):o.push(i);r.push.apply(r,o),r.push(0),r.push.apply(r,s)}return r}function Sf(n,e,t,r){r===void 0&&(r=!0);var i=[];r?i.push(n[0]/t):i.push(n[0]*t);for(var o=1;o<n.length;++o)o<=e.length?r?i.push(e[o-1]*n[o]):i.push(n[o]/e[o-1]):i.push(n[o]);return i}function Ok(n,e){for(var t=[0],r=0;r<e;++r)t.push(n[r][0]);return t}function Fk(n,e,t){for(var r=n.slice(0,1),i=0;i<t;++i)r.push(n[i+1]-e[i][0]-e[i][1]);return r}function Lk(n,e){if(n.rank<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher, but the rank was "+n.rank+".");if(e.rank<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher, but the rank was "+e.rank+".");if(e.dtype!=="int32")throw new Error("tf.gatherND() expects the indices to be int32 type, but the dtype was "+e.dtype+".");if(e.shape[e.rank-1]>n.rank)throw new Error("index innermost dimension length must be <= tensor rank; saw: "+e.shape[e.rank-1]+" vs. "+n.rank);if(n.size===0)throw new Error("Requested more than 0 entries, but input is empty. Input shape: "+n.shape+".");for(var t=e.shape,r=t[t.length-1],i=1,o=0;o<t.length-1;++o)i*=t[o];var s=n.shape,a=t.slice();a.pop();var l=1;for(o=r;o<n.rank;++o)l*=s[o],a.push(s[o]);var u=Oi(n.shape).map(function(f){return f/l}).concat([1]).slice(0,r);return[a,i,l,u]}var Bk=30;function m0(n){return n<=Bk?n:ug(n,Math.floor(Math.sqrt(n)))}function FR(n,e,t){var r=e.rank>1?e.shape[e.rank-1]:1,i=e.rank>1?e.rank-1:1,o="Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: "+t.shape+", indices.shape: "+e.shape+", shape: "+n+", sliceDim: "+r+", and batchDim: "+i+".";if(t.rank<i)throw new Error(o+" update.rank < "+i+". ");if(n.length<r+(t.rank-i))throw new Error(o+" Output shape length < "+(r+(t.rank-i)));if(t.rank!==i+n.length-r)throw new Error(o+" update.rank != "+(i+n.length-r));for(var s=0;s<i;++s)if(t.shape[s]!==e.shape[s])throw new Error(o+" updates.shape["+s+"] ("+t.shape[s]+") != indices.shape["+s+"] ("+e.shape[s]+").");for(s=0;s<t.rank-i;++s)if(t.shape[s+i]!==n[s+r])throw new Error(o+" updates.shape["+(s+i)+"] ("+t.shape[s+i]+") != shape["+(s+i)+"] ("+n[s+i]+")")}function LR(n,e,t){if(e.rank<1)throw new Error("tf.scatterND() expects the indices to be rank 1 or higher, but the rank was "+e.rank+".");if(n.rank<1)throw new Error("tf.scatterND() expects the updates to be rank 1 or higher, but the rank was "+n.rank+".");if(e.dtype!=="int32")throw new Error("The dtype of 'indices' should be int32, but got dtype: "+e.dtype);if(t.length<1)throw new Error("Output rank must be greater or equal to 1, but got shape: "+t);if(t.length===0){if(e.size===0)throw new Error("Indices specified for empty output. indices shape: "+e.shape);if(n.size===0)throw new Error("Updates specified for empty output. updates shape: "+n.shape)}FR(t,e,n)}function If(n,e,t){for(var r=e.shape.length,i=r>1?e.shape[r-1]:1,o=t.length,s=1,a=i;a<o;++a)s*=t[a];var l=i<1?1:i;return{sliceRank:i,numUpdates:Me(e.shape)/l,sliceSize:s,strides:Oi(t.slice(0,i)).concat([1]),outputSize:Me(t)}}function BR(n,e,t){U(n.rank===e.length,function(){return"Error in slice"+n.rank+"D: Length of begin "+e+" must match the rank of the array ("+n.rank+")."}),U(n.rank===t.length,function(){return"Error in slice"+n.rank+"D: Length of size "+t+" must match the rank of the array ("+n.rank+")."});for(var r=function(o){U(e[o]+t[o]<=n.shape[o],function(){return"Error in slice"+n.rank+"D: begin["+o+"] + size["+o+"] ("+(e[o]+t[o])+") would overflow input.shape["+o+"] ("+n.shape[o]+")"})},i=0;i<n.rank;++i)r(i)}function zb(n){for(var e=[],t=0;n>0;)1&n&&e.push(t),n/=2,t++;return e}function lv(n,e,t){for(var r=[],i=0;i<n.length;i++)r[i]=Math.ceil((e[i]-n[i])/t[i]);return r}function zR(n,e,t,r,i){var o=e[i],s=t[i]||1;(n&1<<i||o==null)&&(o=s>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);var a=r[i];return o<0&&(o+=a),o=ag(0,o,a-1)}function WR(n,e,t,r,i){var o=e[i],s=t[i]||1;(n&1<<i||o==null)&&(o=s>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);var a=r[i];return o<0&&(o+=a),o=s>0?ag(0,o,a):ag(-1,o,a-1)}function zk(n,e,t){for(var r=t.length,i=0;i<t.length;i++)if(t[i]>1){r=i;break}for(i=r+1;i<t.length;i++)if(e[i]>0||t[i]!==n[i])return!1;return!0}function Wk(n,e){for(var t=n.length>0?n[n.length-1]:1,r=0;r<n.length-1;r++)t+=n[r]*e[r];return t}function VR(n,e){U(cg(n),function(){return"The f passed in variableGrads(f) must be a function"}),U(e==null||Array.isArray(e)&&e.every(function(f){return f instanceof Kl}),function(){return"The varList passed in variableGrads(f, varList) must be an array of variables"});var t=e!=null;if(!t)for(var r in e=[],Z.registeredVariables)e.push(Z.registeredVariables[r]);var i=t?e.filter(function(f){return!f.trainable}):null,o=e.length;U((e=e.filter(function(f){return f.trainable})).length>0,function(){return"variableGrads() expects at least one of the input variables to be trainable, but none of the "+o+" variables is trainable."});var s=Z.gradients(n,e,null,!0),a=s.value,l=s.grads;U(l.some(function(f){return f!=null}),function(){return"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."}),U(a.rank===0,function(){return"The f passed in variableGrads(f) must return a scalar, but it returned a rank-"+a.rank+" tensor"});var u={};return e.forEach(function(f,p){l[p]!=null&&(u[f.name]=l[p])}),i?.forEach(function(f){return u[f.name]=null}),{value:a,grads:u}}function Zf(n){return Z.customGrad(n)}var Ao=X({softmax_:function(n,e){e===void 0&&(e=-1);var t=V(n,"logits","softmax","float32");if(e===-1&&(e=t.rank-1),e!==t.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. Logits was rank "+t.rank+" and dim was "+e);return Z.runKernelFunc(function(r,i){var o=r.softmax(t,e);return i([o]),o},{logits:t},function(r,i){var o=i[0],s=r.mul(o);return{logits:function(){return s.sub(s.sum([e],!0).mul(o))}}},"Softmax",{dim:e},[],[!0])}}),UR=X({logSoftmax_:function(n,e){e===void 0&&(e=-1);var t=V(n,"logits","logSoftmax");if(e===-1&&(e=t.rank-1),e!==t.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. Logits was rank "+t.rank+" and axis was "+e);return Zf(function(r,i){var o=r.max(e,!0),s=r.sub(o),a=s.toFloat().sub(s.exp().sum(e,!0).log());return i([a]),{value:a,gradFunc:function(l,u){var f=u[0].exp();return l.sub(l.sum(e,!0).mul(f))}}})(t)}}),Vk=function(){function n(e,t){this.backend=e,this.dataMover=t,this.data=new WeakMap,this.dataIdsCount=0}return n.prototype.get=function(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)},n.prototype.set=function(e,t){this.dataIdsCount++,this.data.set(e,t)},n.prototype.has=function(e){return this.data.has(e)},n.prototype.delete=function(e){return this.dataIdsCount--,this.data.delete(e)},n.prototype.numDataIds=function(){return this.dataIdsCount},n}(),Uk=function(){function n(){}return n.prototype.time=function(e){return le("time")},n.prototype.read=function(e){return le("read")},n.prototype.readSync=function(e){return le("readSync")},n.prototype.numDataIds=function(){return le("numDataIds")},n.prototype.disposeData=function(e){return le("disposeData")},n.prototype.write=function(e,t,r){return le("write")},n.prototype.move=function(e,t,r,i){return le("move")},n.prototype.memory=function(){return le("memory")},n.prototype.floatPrecision=function(){return le("floatPrecision")},n.prototype.epsilon=function(){return this.floatPrecision()===32?1e-7:1e-4},n.prototype.batchMatMul=function(e,t,r,i){return le("batchMatMul")},n.prototype.fusedBatchMatMul=function(e){return e.a,e.b,e.transposeA,e.transposeB,e.bias,e.activation,e.preluActivationWeights,le("fusedBatchMatMul")},n.prototype.slice=function(e,t,r){return le("slice")},n.prototype.stridedSlice=function(e,t,r,i){return le("stridedSlice")},n.prototype.unstack=function(e,t){return le("unstack")},n.prototype.reverse=function(e,t){return le("reverse")},n.prototype.concat=function(e,t){return le("concat")},n.prototype.neg=function(e){return le("neg")},n.prototype.add=function(e,t){return le("add")},n.prototype.addN=function(e){return le("addN")},n.prototype.subtract=function(e,t){return le("subtract")},n.prototype.multiply=function(e,t){return le("multiply")},n.prototype.realDivide=function(e,t){return le("realDivide")},n.prototype.floorDiv=function(e,t){return le("floorDiv")},n.prototype.sum=function(e,t){return le("sum")},n.prototype.prod=function(e,t){return le("prod")},n.prototype.unsortedSegmentSum=function(e,t,r){return le("unsortedSegmentSum")},n.prototype.argMin=function(e,t){return le("argMin")},n.prototype.argMax=function(e,t){return le("argMax")},n.prototype.equal=function(e,t){return le("equal")},n.prototype.notEqual=function(e,t){return le("notEqual")},n.prototype.less=function(e,t){return le("less")},n.prototype.lessEqual=function(e,t){return le("lessEqual")},n.prototype.greater=function(e,t){return le("greater")},n.prototype.greaterEqual=function(e,t){return le("greaterEqual")},n.prototype.logicalNot=function(e){return le("logicalNot")},n.prototype.logicalAnd=function(e,t){return le("logicalAnd")},n.prototype.logicalOr=function(e,t){return le("logicalOr")},n.prototype.where=function(e){return le("where")},n.prototype.select=function(e,t,r){return le("select")},n.prototype.topk=function(e,t,r){return le("topk")},n.prototype.min=function(e,t){return le("min")},n.prototype.minimum=function(e,t){return le("minimum")},n.prototype.mod=function(e,t){return le("mod")},n.prototype.max=function(e,t){return le("max")},n.prototype.maximum=function(e,t){return le("maximum")},n.prototype.all=function(e,t){return le("all")},n.prototype.any=function(e,t){return le("any")},n.prototype.squaredDifference=function(e,t){return le("squaredDifference")},n.prototype.ceil=function(e){return le("ceil")},n.prototype.floor=function(e){return le("floor")},n.prototype.round=function(e){return le("round")},n.prototype.sign=function(e){return le("sign")},n.prototype.isNaN=function(e){return le("isNaN")},n.prototype.isInf=function(e){return le("isInf")},n.prototype.isFinite=function(e){return le("isFinite")},n.prototype.pow=function(e,t){return le("pow")},n.prototype.exp=function(e){return le("exp")},n.prototype.expm1=function(e){return le("expm1")},n.prototype.softmax=function(e,t){return le("softmax")},n.prototype.log=function(e){return le("log")},n.prototype.log1p=function(e){return le("log1p")},n.prototype.sqrt=function(e){return le("sqrt")},n.prototype.rsqrt=function(e){return le("rsqrt")},n.prototype.square=function(e){return le("square")},n.prototype.reciprocal=function(e){return le("reciprocal")},n.prototype.relu=function(e){return le("relu")},n.prototype.relu6=function(e){return le("relu6")},n.prototype.prelu=function(e,t){return le("prelu")},n.prototype.elu=function(e){return le("elu")},n.prototype.eluDer=function(e,t){return le("eluDer")},n.prototype.selu=function(e){return le("selu")},n.prototype.int=function(e){return le("int")},n.prototype.clip=function(e,t,r){return le("clip")},n.prototype.abs=function(e){return le("abs")},n.prototype.complexAbs=function(e){return le("complexAbs")},n.prototype.sigmoid=function(e){return le("sigmoid")},n.prototype.softplus=function(e){return le("softplus")},n.prototype.sin=function(e){return le("sin")},n.prototype.cos=function(e){return le("cos")},n.prototype.tan=function(e){return le("tan")},n.prototype.asin=function(e){return le("asin")},n.prototype.acos=function(e){return le("acos")},n.prototype.atan=function(e){return le("atan")},n.prototype.atan2=function(e,t){return le("atan2")},n.prototype.sinh=function(e){return le("sinh")},n.prototype.cosh=function(e){return le("cosh")},n.prototype.tanh=function(e){return le("tanh")},n.prototype.asinh=function(e){return le("asinh")},n.prototype.acosh=function(e){return le("acosh")},n.prototype.atanh=function(e){return le("atanh")},n.prototype.erf=function(e){return le("erf")},n.prototype.step=function(e,t){return le("step")},n.prototype.fusedConv2d=function(e){return e.input,e.filter,e.convInfo,e.bias,e.activation,e.preluActivationWeights,le("fusedConv2d")},n.prototype.conv2d=function(e,t,r){return le("conv2d")},n.prototype.conv2dDerInput=function(e,t,r){return le("conv2dDerInput")},n.prototype.conv2dDerFilter=function(e,t,r){return le("conv2dDerFilter")},n.prototype.fusedDepthwiseConv2D=function(e){return e.input,e.filter,e.convInfo,e.bias,e.activation,e.preluActivationWeights,le("fusedDepthwiseConv2D")},n.prototype.depthwiseConv2D=function(e,t,r){return le("depthwiseConv2D")},n.prototype.depthwiseConv2DDerInput=function(e,t,r){return le("depthwiseConv2DDerInput")},n.prototype.depthwiseConv2DDerFilter=function(e,t,r){return le("depthwiseConv2DDerFilter")},n.prototype.conv3d=function(e,t,r){return le("conv3d")},n.prototype.conv3dDerInput=function(e,t,r){return le("conv3dDerInput")},n.prototype.conv3dDerFilter=function(e,t,r){return le("conv3dDerFilter")},n.prototype.maxPool=function(e,t){return le("maxPool")},n.prototype.maxPoolBackprop=function(e,t,r,i){return le("maxPoolBackprop")},n.prototype.avgPool=function(e,t){return le("avgPool")},n.prototype.avgPoolBackprop=function(e,t,r){return le("avgPoolBackprop")},n.prototype.avgPool3d=function(e,t){return le("avgPool3d")},n.prototype.avgPool3dBackprop=function(e,t,r){return le("avgPool3dBackprop")},n.prototype.maxPool3d=function(e,t){return le("maxPool3d")},n.prototype.maxPool3dBackprop=function(e,t,r,i){return le("maxPool3dBackprop")},n.prototype.reshape=function(e,t){return le("reshape")},n.prototype.cast=function(e,t){return le("cast")},n.prototype.tile=function(e,t){return le("tile")},n.prototype.pad=function(e,t,r){return le("pad")},n.prototype.transpose=function(e,t){return le("transpose")},n.prototype.gather=function(e,t,r){return le("gather")},n.prototype.gatherND=function(e,t){return le("gatherND")},n.prototype.scatterND=function(e,t,r){return le("scatterND")},n.prototype.batchToSpaceND=function(e,t,r){return le("batchToSpaceND")},n.prototype.spaceToBatchND=function(e,t,r){return le("spaceToBatchND")},n.prototype.resizeBilinear=function(e,t,r,i){return le("resizeBilinear")},n.prototype.resizeBilinearBackprop=function(e,t,r){return le("resizeBilinearBackprop")},n.prototype.resizeNearestNeighbor=function(e,t,r,i){return le("resizeNearestNeighbor")},n.prototype.resizeNearestNeighborBackprop=function(e,t,r){return le("resizeNearestNeighborBackprop")},n.prototype.batchNormalization=function(e,t,r,i,o,s){return le("batchNormalization")},n.prototype.localResponseNormalization4D=function(e,t,r,i,o){return le("localResponseNormalization4D")},n.prototype.LRNGrad=function(e,t,r,i,o,s,a){return le("LRNGrad")},n.prototype.multinomial=function(e,t,r,i){return le("multinomial")},n.prototype.oneHot=function(e,t,r,i){return le("oneHot")},n.prototype.cumsum=function(e,t,r,i){return le("cumsum")},n.prototype.nonMaxSuppression=function(e,t,r,i,o){return le("nonMaxSuppression")},n.prototype.fft=function(e){return le("fft")},n.prototype.ifft=function(e){return le("ifft")},n.prototype.complex=function(e,t){return le("complex")},n.prototype.real=function(e){return le("real")},n.prototype.imag=function(e){return le("imag")},n.prototype.cropAndResize=function(e,t,r,i,o,s){return le("cropAndResize")},n.prototype.depthToSpace=function(e,t,r){return le("depthToSpace")},n.prototype.split=function(e,t,r){return le("split")},n.prototype.sparseToDense=function(e,t,r,i){return le("sparseToDense")},n.prototype.diag=function(e){return le("diag")},n.prototype.fill=function(e,t,r){return le("fill")},n.prototype.onesLike=function(e){return le("onesLike")},n.prototype.zerosLike=function(e){return le("zerosLike")},n.prototype.linspace=function(e,t,r){return le("linspace")},n.prototype.dispose=function(){return le("dispose")},n}();function le(n){throw new Error("'"+n+"' not yet implemented or not found in the registry. Did you forget to import the kernel?")}function hs(n,e){for(var t=n.length,r=[],i=0;i<t;i++){var o=t-1-i,s=n[o]||1;(e[e.length-1-i]||1)>1&&s===1&&r.unshift(o)}return r}function rn(n,e){for(var t=[],r=0;r<e.length;r++){var i=n[n.length-r-1],o=e.length-r-1,s=e[o];(i==null||i===1&&s>1)&&t.unshift(o)}return t}function et(n,e){for(var t=[],r=Math.max(n.length,e.length),i=0;i<r;i++){var o=n[n.length-i-1];o==null&&(o=1);var s=e[e.length-i-1];if(s==null&&(s=1),o===1)t.unshift(s);else if(s===1)t.unshift(o);else{if(o!==s)throw Error("Operands could not be broadcast together with shapes "+n+" and "+e+".");t.unshift(o)}}return t}function Au(n,e,t,r,i,o,s){s===void 0&&(s="channelsLast");var a,l=jf(e),u=l[0],f=l[1];if(s==="channelsLast")a=[u,f,n[3],n[3]];else{if(s!=="channelsFirst")throw new Error("Unknown dataFormat "+s);a=[u,f,n[1],n[1]]}return Ta(n,a,t,r,i,o,!1,s)}function Af(n,e,t,r,i,o,s){s===void 0&&(s="NDHWC");var a,l,u=vg(e),f=u[0],p=u[1],m=u[2];if(s==="NDHWC")l="channelsLast",a=[f,p,m,n[4],n[4]];else{if(s!=="NCDHW")throw new Error("Unknown dataFormat "+s);l="channelsFirst",a=[f,p,m,n[1],n[1]]}return Rf(n,a,t,r,i,!1,l,o)}function Ta(n,e,t,r,i,o,s,a){s===void 0&&(s=!1),a===void 0&&(a="channelsLast");var l=[-1,-1,-1,-1],u=l[0],f=l[1],p=l[2],m=l[3];if(a==="channelsLast")u=n[0],f=n[1],p=n[2],m=n[3];else{if(a!=="channelsFirst")throw new Error("Unknown dataFormat "+a);u=n[0],m=n[1],f=n[2],p=n[3]}var v,y=e[0],w=e[1],_=e[3],k=jf(t),E=k[0],N=k[1],S=jf(r),A=S[0],P=S[1],D=Ll(y,A),j=Ll(w,P),T=function(K,te,se,q,$,Y,Q,H){var ne,fe,ye;if(typeof K=="number"){ne={top:K,bottom:K,left:K,right:K,type:K===0?"VALID":"NUMBER"};var be=function(He,nt,Ye,dt,ht){dt==null&&(dt=Hk(He,nt,Ye));var mt=He[0],Cn=He[1],Wn=vu((mt-nt+2*dt)/Ye+1,ht);U(Ht(Wn),function(){return"The output # of rows ("+Wn+") must be an integer. Change the stride and/or zero pad parameters"});var Gt=vu((Cn-nt+2*dt)/Ye+1,ht);return U(Ht(Gt),function(){return"The output # of columns ("+Gt+") must be an integer. Change the stride and/or zero pad parameters"}),[Wn,Gt]}([te,se],Y,q,K,H);fe=be[0],ye=be[1]}else if(K==="same"){fe=Math.ceil(te/q),ye=Math.ceil(se/$);var _e=Math.max(0,(fe-1)*q+Y-te),Se=Math.max(0,(ye-1)*$+Q-se),Ne=Math.floor(_e/2),De=_e-Ne,Xe=Math.floor(Se/2);ne={top:Ne,bottom:De,left:Xe,right:Se-Xe,type:"SAME"}}else{if(K!=="valid")throw Error("Unknown padding parameter: "+K);ne={top:0,bottom:0,left:0,right:0,type:"VALID"},fe=Math.ceil((te-Y+1)/q),ye=Math.ceil((se-Q+1)/$)}return{padInfo:ne,outHeight:fe,outWidth:ye}}(i,f,p,E,N,D,j,o),M=T.padInfo,L=T.outHeight,B=T.outWidth,F=s?_*m:_;return a==="channelsFirst"?v=[u,F,L,B]:a==="channelsLast"&&(v=[u,L,B,F]),{batchSize:u,dataFormat:a,inHeight:f,inWidth:p,inChannels:m,outHeight:L,outWidth:B,outChannels:F,padInfo:M,strideHeight:E,strideWidth:N,filterHeight:y,filterWidth:w,effectiveFilterHeight:D,effectiveFilterWidth:j,dilationHeight:A,dilationWidth:P,inShape:n,outShape:v,filterShape:e}}function Rf(n,e,t,r,i,o,s,a){o===void 0&&(o=!1),s===void 0&&(s="channelsLast");var l=[-1,-1,-1,-1,-1],u=l[0],f=l[1],p=l[2],m=l[3],v=l[4];if(s==="channelsLast")u=n[0],f=n[1],p=n[2],m=n[3],v=n[4];else{if(s!=="channelsFirst")throw new Error("Unknown dataFormat "+s);u=n[0],v=n[1],f=n[2],p=n[3],m=n[4]}var y,w=e[0],_=e[1],k=e[2],E=e[4],N=vg(t),S=N[0],A=N[1],P=N[2],D=vg(r),j=D[0],T=D[1],M=D[2],L=Ll(w,j),B=Ll(_,T),F=Ll(k,M),K=function(Q,H,ne,fe,ye,be,_e,Se,Ne,De,Xe){var He,nt,Ye,dt;if(typeof Q=="number"){He={top:Q,bottom:Q,left:Q,right:Q,front:Q,back:Q,type:Q===0?"VALID":"NUMBER"};var ht=function(fr,Vn,jt,yt,$t,Hi){$t==null&&($t=Hk(fr,Vn,yt));var pi=fr[0],Gi=fr[1],$i=fr[2],qi=vu((pi-Vn+2*$t)/yt+1,Hi);U(Ht(qi),function(){return"The output # of depths ("+qi+") must be an integer. Change the stride and/or zero pad parameters"});var Ki=vu((Gi-Vn+2*$t)/yt+1,Hi);U(Ht(Ki),function(){return"The output # of rows ("+Ki+") must be an integer. Change the stride and/or zero pad parameters"});var Xi=vu(($i-Vn+2*$t)/yt+1,Hi);return U(Ht(Xi),function(){return"The output # of columns ("+Xi+") must be an integer. Change the stride and/or zero pad parameters"}),[qi,Ki,Xi,jt]}([H,ne,fe,1],Se,1,ye,Q,Xe);nt=ht[0],Ye=ht[1],dt=ht[2]}else if(Q==="same"){nt=Math.ceil(H/ye),Ye=Math.ceil(ne/be),dt=Math.ceil(fe/_e);var mt=(nt-1)*ye+Se-H,Cn=(Ye-1)*be+Ne-ne,Wn=(dt-1)*_e+De-fe,Gt=Math.floor(mt/2),En=mt-Gt,Xt=Math.floor(Cn/2),Kn=Cn-Xt,Nn=Math.floor(Wn/2);He={top:Xt,bottom:Kn,left:Nn,right:Wn-Nn,front:Gt,back:En,type:"SAME"}}else{if(Q!=="valid")throw Error("Unknown padding parameter: "+Q);He={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},nt=Math.ceil((H-Se+1)/ye),Ye=Math.ceil((ne-Ne+1)/be),dt=Math.ceil((fe-De+1)/_e)}return{padInfo:He,outDepth:nt,outHeight:Ye,outWidth:dt}}(i,f,p,m,S,A,P,L,B,F,a),te=K.padInfo,se=K.outDepth,q=K.outHeight,$=K.outWidth,Y=o?E*v:E;return s==="channelsFirst"?y=[u,Y,se,q,$]:s==="channelsLast"&&(y=[u,se,q,$,Y]),{batchSize:u,dataFormat:s,inDepth:f,inHeight:p,inWidth:m,inChannels:v,outDepth:se,outHeight:q,outWidth:$,outChannels:Y,padInfo:te,strideDepth:S,strideHeight:A,strideWidth:P,filterDepth:w,filterHeight:_,filterWidth:k,effectiveFilterDepth:L,effectiveFilterHeight:B,effectiveFilterWidth:F,dilationDepth:j,dilationHeight:T,dilationWidth:M,inShape:n,outShape:y,filterShape:e}}function Hk(n,e,t,r){r===void 0&&(r=1);var i=Ll(e,r);return Math.floor((n[0]*(t-1)-t+i)/2)}function jf(n){return typeof n=="number"?[n,n,n]:n.length===2?[n[0],n[1],1]:n}function vg(n){return typeof n=="number"?[n,n,n]:n}function Ll(n,e){return e<=1?n:n+(n-1)*(e-1)}function vu(n,e){if(!e)return n;switch(e){case"round":return Math.round(n);case"ceil":return Math.ceil(n);case"floor":return Math.floor(n);default:throw new Error("Unknown roundingMode "+e)}}function Yl(n){var e=jf(n),t=e[0],r=e[1],i=e[2];return t===1&&r===1&&i===1}function hr(n,e){return Yl(n)||Yl(e)}function cv(n){if(n==="NHWC")return"channelsLast";if(n==="NCHW")return"channelsFirst";throw new Error("Unknown dataFormat "+n)}function Gk(n,e,t){if(e==="complex64"){if(n.dtype==="complex64")return n.clone();var r=Nt(n.shape),i=n.toFloat(),o=t.complex(i,r);return r.dispose(),i.dispose(),o}if(!gA(n.dtype,e))return Z.makeTensorFromDataId(n.dataId,n.shape,e);if(n.dtype==="complex64"){var s=t.real(n);return o=s.cast(e),s.dispose(),o}if(e==="int32")return t.int(n);if(e==="bool"){var a=ke(0,n.dtype);return o=t.notEqual(n,a),a.dispose(),o}throw new Error("Error in Cast: failed to cast "+n.dtype+" to "+e)}function xg(n,e){return Z.makeTensorFromDataId(n.dataId,e,n.dtype)}function $k(n,e,t){var r=(e-n)/(t-1),i=Xu(t,"float32");i[0]=n;for(var o=1;o<i.length;o++)i[o]=i[o-1]+r;return Kt(i,"float32")}function yg(n,e){if(n.length!==e.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:"+n.length+", imag: "+e.length+".");for(var t=new Float32Array(2*n.length),r=0;r<t.length;r+=2)t[r]=n[r/2],t[r+1]=e[r/2];return t}function Wb(n,e){return{real:n[2*e],imag:n[2*e+1]}}function HR(n,e,t,r){n[2*r]=e,n[2*r+1]=t}function GR(n,e,t){var r=(t?2:-2)*Math.PI*(n/e);return{real:Math.cos(r),imag:Math.sin(r)}}function $R(n,e,t){var r=function(o,s,a){return function(l,u,f){for(var p=0,m=l.length,v=0,y=!1;p<m;){var w=f(u,l[v=p+(m-p>>>1)]);w>0?p=v+1:(m=v,y=!w)}return y?p:-p-1}(o,s,a||qR)}(n,e,t),i=r<0?-(r+1):r;n.splice(i,0,e)}function qR(n,e){return n>e?1:n<e?-1:0}function uv(n,e,t,r,i){return qk(n,e,t,r,i,0).selectedIndices}function dv(n,e,t,r,i,o){var s=qk(n,e,t,r,i,o);return s.numValidOutputs.dispose(),{selectedIndices:s.selectedIndices,selectedScores:s.selectedScores}}function qk(n,e,t,r,i,o,s,a){a===void 0&&(a=!1);for(var l=Array.from(e).map(function(S,A){return{score:S,boxIndex:A,suppressBeginIndex:0}}).filter(function(S){return S.score>i}).sort(Vb),u=o>0?-.5/o:0,f=[],p=[];f.length<t&&l.length>0;){var m=l.pop(),v=m.score,y=m.boxIndex,w=m.suppressBeginIndex;if(v<i)break;for(var _=!1,k=f.length-1;k>=w;--k){var E=KR(n,y,f[k]);if(E>=r){_=!0;break}if(m.score=m.score*XR(r,u,E),m.score<=i)break}m.suppressBeginIndex=f.length,_||(m.score===v?(f.push(y),p.push(m.score)):m.score>i&&$R(l,m,Vb))}var N=f.length;return a&&(f.fill(0,N),p.fill(0,N)),{selectedIndices:Kt(f,"int32"),selectedScores:Kt(p,"float32"),numValidOutputs:ke(N,"int32")}}function KR(n,e,t){var r=n.subarray(4*e,4*e+4),i=n.subarray(4*t,4*t+4),o=Math.min(r[0],r[2]),s=Math.min(r[1],r[3]),a=Math.max(r[0],r[2]),l=Math.max(r[1],r[3]),u=Math.min(i[0],i[2]),f=Math.min(i[1],i[3]),p=Math.max(i[0],i[2]),m=Math.max(i[1],i[3]),v=(a-o)*(l-s),y=(p-u)*(m-f);if(v<=0||y<=0)return 0;var w=Math.max(o,u),_=Math.max(s,f),k=Math.min(a,p),E=Math.min(l,m),N=Math.max(k-w,0)*Math.max(E-_,0);return N/(v+y-N)}function XR(n,e,t){var r=Math.exp(e*t*t);return t<=n?r:0}function Vb(n,e){return n.score-e.score||n.score===e.score&&e.boxIndex-n.boxIndex}function Kk(n,e,t){var r=new Array(n.rank).fill(0),i=n.shape.slice();return e.map(function(o){i[t]=o;var s=n.slice(r,i);return r[t]+=o,s})}function Xk(n,e){for(var t=new Array(n.rank),r=0;r<t.length;r++)t[r]=n.shape[r]*e[r];var i=$e(t,n.dtype);for(r=0;r<i.values.length;++r){for(var o=i.indexToLoc(r),s=new Array(n.rank),a=0;a<s.length;a++)s[a]=o[a]%n.shape[a];var l=n.locToIndex(s);i.values[r]=n.values[l]}return i.toTensor()}function Yk(n,e,t,r,i){for(var o=e[e.length-1],s=[n.length/o,o],a=s[0],l=s[1],u=Nu(t,a*r),f=Nu("int32",a*r),p=0;p<a;p++){for(var m=p*l,v=n.subarray(m,m+l),y=[],w=0;w<v.length;w++)y.push({value:v[w],index:w});y.sort(function(S,A){return A.value-S.value});var _=p*r,k=u.subarray(_,_+r),E=f.subarray(_,_+r);for(w=0;w<r;w++)k[w]=y[w].value,E[w]=y[w].index}var N=e.slice();return N[N.length-1]=r,[kn(u,N,t),kn(f,N,"int32")]}function hv(n,e){for(var t=[],r=0;r<e.length;r++)e[r]&&t.push(r);var i=$e(n,"int32"),o=$e([t.length,n.length],"int32");for(r=0;r<t.length;r++){var s=i.indexToLoc(t[r]),a=r*n.length;o.values.set(s,a)}return o.toTensor()}var YR=function(n,e){this.outputShape=[],this.outputShape=n,this.variableNames=e.map(function(i,o){return"T"+o});var t=[];this.variableNames.forEach(function(i){t.push("float v"+i+" = get"+i+"AtOutCoords();")});var r=this.variableNames.map(function(i){return"v"+i}).join(" + ");this.userCode=`
      void main() {
        `+t.join(`
        `)+`

        float result = `+r+`;
        setOutput(result);
      }
    `},JR=function(n,e){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n,this.variableNames=e.map(function(i,o){return"T"+o});var t=[];this.variableNames.forEach(function(i){t.push("vec4 v"+i+" = get"+i+"AtOutCoords();")});var r=this.variableNames.map(function(i){return"v"+i}).join(" + ");this.userCode=`
      void main() {
        `+t.join(`
        `)+`

        vec4 result = `+r+`;
        setOutput(result);
      }
    `},QR=function(n,e,t){this.variableNames=["A"];var r=n.windowSize,i=n.batchSize,o=n.inSize,s=Math.ceil(o/r);t||this.variableNames.push("bestIndicesA"),this.outputShape=[i,s];var a=e==="max"?">":"<",l=t?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * `+r+`;

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < `+r+`; i++) {
          int inIdx = `+l+`;
          float candidate = getA(batch, inIdx);
          if (candidate `+a+` bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `};function Jk(n,e){return["x","y","z","w","u","v"].slice(0,e).map(function(t){return n+"."+t})}function lr(n,e){return e===1?[n]:Jk(n,e)}function Pn(){var n,e,t,r,i,o,s,a,l,u;return he().getNumber("WEBGL_VERSION")===2?(n="#version 300 es",e="in",t="out",r="in",i="texture",o="outputColor",s="out vec4 outputColor;",a=`
      bool isnan_custom(float val) {
        return (val > 0.0 || val < 0.0) ? false : val != 0.0;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `,l="",u=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(n="",e="attribute",t="varying",r="varying",i="texture2D",o="gl_FragColor",s="",a=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,l=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,u=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:n,attribute:e,varyingVs:t,varyingFs:r,texture2D:i,output:o,defineOutput:s,defineSpecialNaN:a,defineSpecialInf:l,defineRound:u}}function ma(n,e,t){t===void 0&&(t="index");var r=Oi(e);return r.map(function(i,o){return"int "+n[o]+" = "+t+" / "+i+"; "+(o===r.length-1?"int "+n[o+1]+" = "+t+" - "+n[o]+" * "+i:"index -= "+n[o]+" * "+i)+";"}).join("")}function fv(n){var e=Oi(n).map(function(t){return t.toString()});return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * `+e[0]+" + coords.y * "+e[1]+` + coords.z;
  }
`}var Qk=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`;function ZR(n,e,t,r){var i=[];n.forEach(function(v){var y=Me(v.shapeInfo.logicalShape);v.shapeInfo.isUniform?i.push("uniform float "+v.name+(y>1?"["+y+"]":"")+";"):(i.push("uniform sampler2D "+v.name+";"),i.push("uniform int offset"+v.name+";"))});var o,s,a=i.join(`
`),l=n.map(function(v){return function(y,w,_){_===void 0&&(_=!1);var k="";k+=_?Zk(y):Il(y);var E=y.shapeInfo.logicalShape,N=w.logicalShape;return E.length<=N.length&&(k+=_?function(S,A){var P,D=S.name,j=D.charAt(0).toUpperCase()+D.slice(1),T="get"+j+"AtOutCoords",M=S.shapeInfo.logicalShape.length,L=A.logicalShape.length,B=hs(S.shapeInfo.logicalShape,A.logicalShape),F=kt(L),K=L-M,te=["x","y","z","w","u","v"];P=M===0?"":L<2&&B.length>=1?"coords = 0;":B.map(function(ne){return"coords."+te[ne+K]+" = 0;"}).join(`
`);var se="";se=L<2&&M>0?"coords":S.shapeInfo.logicalShape.map(function(ne,fe){return"coords."+te[fe+K]}).join(", ");var q="return outputValue;",$=Me(S.shapeInfo.logicalShape)===1,Y=Me(A.logicalShape)===1;if(M!==1||$||Y){if($&&!Y)q=L===1?`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:`
        return vec4(outputValue.x);
      `;else if(B.length){var Q=M-2,H=M-1;B.indexOf(Q)>-1&&B.indexOf(H)>-1?q="return vec4(outputValue.x);":B.indexOf(Q)>-1?q="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":B.indexOf(H)>-1&&(q="return vec4(outputValue.xx, outputValue.zz);")}}else q=`
      return vec4(outputValue.xy, outputValue.xy);
    `;return`
    vec4 `+T+`() {
      `+F+` coords = getOutputCoords();
      `+P+`
      vec4 outputValue = get`+j+"("+se+`);
      `+q+`
    }
  `}(y,w):function(S,A){var P=S.name,D=P.charAt(0).toUpperCase()+P.slice(1),j="get"+D+"AtOutCoords",T=A.texShape,M=S.shapeInfo.texShape,L=S.shapeInfo.logicalShape.length,B=A.logicalShape.length;if(!S.shapeInfo.isUniform&&L===B&&S.shapeInfo.flatOffset==null&&pn(M,T))return`
      float `+j+`() {
        return sampleTexture(`+P+`, resultUV);
      }
    `;var F,K=kt(B),te=hs(S.shapeInfo.logicalShape,A.logicalShape),se=B-L,q=["x","y","z","w","u","v"];F=L===0?"":B<2&&te.length>=1?"coords = 0;":te.map(function(Y){return"coords."+q[Y+se]+" = 0;"}).join(`
`);var $="";return $=B<2&&L>0?"coords":S.shapeInfo.logicalShape.map(function(Y,Q){return"coords."+q[Q+se]}).join(", "),`
    float `+j+`() {
      `+K+` coords = getOutputCoords();
      `+F+`
      return get`+D+"("+$+`);
    }
  `}(y,w)),k}(v,e,r)}).join(`
`),u=e.texShape,f=Pn(),p=function(v){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return `+v.texture2D+`(textureSampler, uv).r;
    }
  `}(f),m=function(v){return v.version+`
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    `+v.varyingFs+` vec2 resultUV;
    `+v.defineOutput+`
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    `+v.defineSpecialNaN+`
    `+v.defineSpecialInf+`
    `+v.defineRound+`

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    `+ej+`
    `+tj+`
    `+nj+`
  `}(f);return e.isPacked?(o=function(v,y){switch(v.length){case 0:return`
    int getOutputCoords() {
      return 0;
    }
  `;case 1:return function(S,A){var P=[Math.ceil(A[0]/2),Math.ceil(A[1]/2)];return P[0]===1?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * `+P[1]+`.0);
      }
    `:P[1]===1?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * `+P[0]+`.0);
      }
    `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+P[0]+", "+P[1]+`));
      return 2 * (resTexRC.x * `+P[1]+` + resTexRC.y);
    }
  `}(0,y);case 2:return function(S,A){var P=[Math.ceil(A[0]/2),Math.ceil(A[1]/2)];if(pn(S,A))return`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(`+P[0]+", "+P[1]+`));
      }
    `;var D=Math.ceil(S[1]/2);return`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+P[0]+", "+P[1]+`));

      int index = resTexRC.x * `+P[1]+` + resTexRC.y;
      int r = 2 * (index / `+D+`);
      int c = imod(index, `+D+`) * 2;

      return ivec2(r, c);
    }
  `}(v,y);case 3:return w=v,_=y,k=[Math.ceil(_[0]/2),Math.ceil(_[1]/2)],E=Math.ceil(w[2]/2),N=E*Math.ceil(w[1]/2),`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+k[0]+", "+k[1]+`));
      int index = resTexRC.x * `+k[1]+` + resTexRC.y;

      int b = index / `+N+`;
      index -= b * `+N+`;

      int r = 2 * (index / `+E+`);
      int c = imod(index, `+E+`) * 2;

      return ivec3(b, r, c);
    }
  `;default:return function(S,A){for(var P=[Math.ceil(A[0]/2),Math.ceil(A[1]/2)],D=Math.ceil(S[S.length-1]/2),j=D*Math.ceil(S[S.length-2]/2),T=j,M="",L="b, r, c",B=2;B<S.length-1;B++)T*=S[S.length-B-1],M=`
      int b`+B+" = index / "+T+`;
      index -= b`+B+" * "+T+`;
    `+M,L="b"+B+", "+L;return`
    ivec`+S.length+` getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+P[0]+", "+P[1]+`));
      int index = resTexRC.x * `+P[1]+` + resTexRC.y;

      `+M+`

      int b = index / `+j+`;
      index -= b * `+j+`;

      int r = 2 * (index / `+D+`);
      int c = imod(index, `+D+`) * 2;

      return ivec`+S.length+"("+L+`);
    }
  `}(v,y)}var w,_,k,E,N}(e.logicalShape,u),s=function(v){return`
    void setOutput(vec4 val) {
      `+v.output+` = val;
    }
  `}(f)):(o=function(v,y){switch(v.length){case 0:return`
    int getOutputCoords() {
      return 0;
    }
  `;case 1:return function(k,E){return E[0]===1?`
      int getOutputCoords() {
        return int(resultUV.x * `+E[1]+`.0);
      }
    `:E[1]===1?`
      int getOutputCoords() {
        return int(resultUV.y * `+E[0]+`.0);
      }
    `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+E[0]+", "+E[1]+`));
      return resTexRC.x * `+E[1]+` + resTexRC.y;
    }
  `}(0,y);case 2:return function(k,E){return pn(k,E)?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(`+E[0]+", "+E[1]+`));
      }
    `:k[1]===1?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(`+E[0]+", "+E[1]+`));
        int index = resTexRC.x * `+E[1]+` + resTexRC.y;
        return ivec2(index, 0);
      }
    `:k[0]===1?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(`+E[0]+", "+E[1]+`));
        int index = resTexRC.x * `+E[1]+` + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+E[0]+", "+E[1]+`));
      int index = resTexRC.x * `+E[1]+` + resTexRC.y;
      int r = index / `+k[1]+`;
      int c = index - r * `+k[1]+`;
      return ivec2(r, c);
    }
  `}(v,y);case 3:return w=y,_=ma(["r","c","d"],v),`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+w[0]+", "+w[1]+`));
      int index = resTexRC.x * `+w[1]+` + resTexRC.y;
      `+_+`
      return ivec3(r, c, d);
    }
  `;case 4:return function(k,E){var N=ma(["r","c","d","d2"],k);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(`+E[0]+", "+E[1]+`));
      int index = resTexRC.x * `+E[1]+` + resTexRC.y;
      `+N+`
      return ivec4(r, c, d, d2);
    }
  `}(v,y);case 5:return function(k,E){var N=ma(["r","c","d","d2","d3"],k);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(`+E[0]+`,
                             `+E[1]+`));

      int index = resTexRC.x * `+E[1]+` + resTexRC.y;

      `+N+`

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `}(v,y);case 6:return function(k,E){var N=ma(["r","c","d","d2","d3","d4"],k);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(`+E[0]+", "+E[1]+`));
      int index = resTexRC.x * `+E[1]+` + resTexRC.y;

      `+N+`

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `}(v,y);default:throw new Error(v.length+"-D output sampling is not yet supported")}var w,_}(e.logicalShape,u),s=function(v){return`
    void setOutput(float val) {
      `+v.output+` = vec4(val, 0, 0, 0);
    }
  `}(f)),r&&(m+=rj),[m,p,s,a,o,l,t].join(`
`)}function Il(n){var e=n.shapeInfo.logicalShape;switch(e.length){case 0:return function(t){var r=t.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1);if(t.shapeInfo.isUniform)return"float "+i+"() {return "+r+";}";var o=t.shapeInfo.texShape,s=o[0],a=o[1];if(s===1&&a===1)return`
      float `+i+`() {
        return sampleTexture(`+r+`, halfCR);
      }
    `;var l=t.shapeInfo.texShape,u=l[0],f=l[1],p=ia(r);return`
    float `+i+`() {
      vec2 uv = uvFromFlat(`+u+", "+f+", "+p+`);
      return sampleTexture(`+r+`, uv);
    }
  `}(n);case 1:return function(t){var r=t.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1);if(t.shapeInfo.isUniform)return`
      float `+i+`(int index) {
        `+_l(t)+`
      }
    `;var o=t.shapeInfo.texShape,s=o[0],a=o[1];if(a===1&&s===1)return`
      float `+i+`(int index) {
        return sampleTexture(`+r+`, halfCR);
      }
    `;var l=ia(r);return a===1?`
      float `+i+`(int index) {
        vec2 uv = vec2(0.5, (float(index + `+l+") + 0.5) / "+s+`.0);
        return sampleTexture(`+r+`, uv);
      }
    `:s===1?`
      float `+i+`(int index) {
        vec2 uv = vec2((float(index + `+l+") + 0.5) / "+a+`.0, 0.5);
        return sampleTexture(`+r+`, uv);
      }
    `:`
    float `+i+`(int index) {
      vec2 uv = uvFromFlat(`+s+", "+a+", index + "+l+`);
      return sampleTexture(`+r+`, uv);
    }
  `}(n);case 2:return function(t){var r=t.shapeInfo.logicalShape,i=t.name,o="get"+i.charAt(0).toUpperCase()+i.slice(1),s=t.shapeInfo.texShape;if(s!=null&&pn(r,s)){var a=s[0],l=s[1];return`
    float `+o+`(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(`+l+".0, "+a+`.0);
      return sampleTexture(`+i+`, uv);
    }
  `}var u=pa(r),f=u.newShape,p=u.keptDims,m=f;if(m.length<r.length){var v=Al(t,m);return`
      `+Il(v)+`
      float `+o+`(int row, int col) {
        return `+o+"("+Rl(["row","col"],p)+`);
      }
    `}if(t.shapeInfo.isUniform)return`
      float `+o+`(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(`+r[1]+`, 1)));
        `+_l(t)+`
      }
    `;var y=s[0],w=s[1],_=ia(i);return w===1?`
    float `+o+`(int row, int col) {
      float index = dot(vec3(row, col, `+_+"), vec3("+r[1]+`, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / `+y+`.0);
      return sampleTexture(`+i+`, uv);
    }
  `:y===1?`
    float `+o+`(int row, int col) {
      float index = dot(vec3(row, col, `+_+"), vec3("+r[1]+`, 1, 1));
      vec2 uv = vec2((index + 0.5) / `+w+`.0, 0.5);
      return sampleTexture(`+i+`, uv);
    }
  `:`
  float `+o+`(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * `+r[1]+" + col + "+_+`;
    vec2 uv = uvFromFlat(`+y+", "+w+`, index);
    return sampleTexture(`+i+`, uv);
  }
`}(n);case 3:return function(t){var r=t.shapeInfo.logicalShape,i=t.name,o="get"+i.charAt(0).toUpperCase()+i.slice(1),s=r[1]*r[2],a=r[2],l=pa(r),u=l.newShape,f=l.keptDims,p=u;if(p.length<r.length){var m=Al(t,p);return`
        `+Il(m)+`
        float `+o+`(int row, int col, int depth) {
          return `+o+"("+Rl(["row","col","depth"],f)+`);
        }
      `}if(t.shapeInfo.isUniform)return`
      float `+o+`(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(`+s+", "+a+`, 1)));
        `+_l(t)+`
      }
    `;var v=t.shapeInfo.texShape,y=v[0],w=v[1],_=t.shapeInfo.flatOffset;if(w===s&&_==null)return`
        float `+o+`(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(`+a+`, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(`+w+".0, "+y+`.0);
          return sampleTexture(`+i+`, uv);
        }
      `;if(w===a&&_==null)return`
    float `+o+`(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(`+r[1]+`, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+w+".0, "+y+`.0);
      return sampleTexture(`+i+`, uv);
    }
  `;var k=ia(i);return`
      float `+o+`(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * `+s+" + col * "+a+" + depth + "+k+`;
        vec2 uv = uvFromFlat(`+y+", "+w+`, index);
        return sampleTexture(`+i+`, uv);
      }
  `}(n);case 4:return function(t){var r=t.shapeInfo.logicalShape,i=t.name,o="get"+i.charAt(0).toUpperCase()+i.slice(1),s=r[3],a=r[2]*s,l=r[1]*a,u=pa(r),f=u.newShape,p=u.keptDims;if(f.length<r.length){var m=Al(t,f);return`
      `+Il(m)+`
      float `+o+`(int row, int col, int depth, int depth2) {
        return `+o+"("+Rl(["row","col","depth","depth2"],p)+`);
      }
    `}if(t.shapeInfo.isUniform)return`
      float `+o+`(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(`+l+", "+a+", "+s+`, 1)));
        `+_l(t)+`
      }
    `;var v=t.shapeInfo.flatOffset,y=t.shapeInfo.texShape,w=y[0],_=y[1];if(_===l&&v==null)return`
      float `+o+`(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(`+a+", "+s+`, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+_+".0, "+w+`.0);
        return sampleTexture(`+i+`, uv);
      }
    `;if(_===s&&v==null)return`
      float `+o+`(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(`+r[1]*r[2]+", "+r[2]+`, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+_+".0, "+w+`.0);
        return sampleTexture(`+i+`, uv);
      }
    `;var k=ia(i);return`
    float `+o+`(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+l+" + col * "+a+` +
          depth * `+s+` + depth2;
      vec2 uv = uvFromFlat(`+w+", "+_+", index + "+k+`);
      return sampleTexture(`+i+`, uv);
    }
  `}(n);case 5:return function(t){var r=t.shapeInfo.logicalShape,i=t.name,o="get"+i.charAt(0).toUpperCase()+i.slice(1),s=r[4],a=r[3]*s,l=r[2]*a,u=r[1]*l,f=pa(r),p=f.newShape,m=f.keptDims;if(p.length<r.length){var v=Al(t,p);return`
      `+Il(v)+`
      float `+o+`(int row, int col, int depth, int depth2, int depth3) {
        return `+o+"("+Rl(["row","col","depth","depth2","depth3"],m)+`);
      }
    `}if(t.shapeInfo.isUniform)return`
      float `+o+`(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(`+u+", "+l+", "+a+", "+s+`)) +
          depth3;
        `+_l(t)+`
      }
    `;var y=t.shapeInfo.flatOffset,w=t.shapeInfo.texShape,_=w[0],k=w[1];if(k===u&&y==null)return`
      float `+o+`(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(`+l+", "+a+", "+s+`, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+k+".0, "+_+`.0);
        return sampleTexture(`+i+`, uv);
      }
    `;if(k===s&&y==null)return`
      float `+o+`(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(`+r[1]*r[2]*r[3]+`,
               `+r[2]*r[3]+", "+r[3]+`, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+k+".0, "+_+`.0);
        return sampleTexture(`+i+`, uv);
      }
    `;var E=ia(i);return`
    float `+o+`(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+u+" + col * "+l+" + depth * "+a+` +
          depth2 * `+s+" + depth3 + "+E+`;
      vec2 uv = uvFromFlat(`+_+", "+k+`, index);
      return sampleTexture(`+i+`, uv);
    }
  `}(n);case 6:return function(t){var r=t.shapeInfo.logicalShape,i=t.name,o="get"+i.charAt(0).toUpperCase()+i.slice(1),s=pa(r),a=s.newShape,l=s.keptDims;if(a.length<r.length){var u=Al(t,a);return`
      `+Il(u)+`
      float `+o+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return `+o+"("+Rl(["row","col","depth","depth2","depth3","depth4"],l)+`);
      }
    `}var f=r[5],p=r[4]*f,m=r[3]*p,v=r[2]*m,y=r[1]*v;if(t.shapeInfo.isUniform)return`
      float `+o+`(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(`+y+", "+v+", "+m+", "+p+`)) +
          dot(
            vec2(depth3, depth4),
            vec2(`+f+`, 1)));
        `+_l(t)+`
      }
    `;var w=t.shapeInfo.flatOffset,_=t.shapeInfo.texShape,k=_[0],E=_[1];if(E===y&&w==null)return`
      float `+o+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(`+v+", "+m+", "+p+", "+f+`)) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+E+".0, "+k+`.0);
        return sampleTexture(`+i+`, uv);
      }
    `;if(E===f&&w==null)return`
      float `+o+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(`+r[1]*r[2]*r[3]*r[4]+`,
               `+r[2]*r[3]*r[4]+`,
               `+r[3]*r[4]+`,
               `+r[4]+`)) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+E+".0, "+k+`.0);
        return sampleTexture(`+i+`, uv);
      }
    `;var N=ia(i);return`
    float `+o+`(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+y+" + col * "+v+" + depth * "+m+` +
          depth2 * `+p+" + depth3 * "+f+" + depth4 + "+N+`;
      vec2 uv = uvFromFlat(`+k+", "+E+`, index);
      return sampleTexture(`+i+`, uv);
    }
  `}(n);default:throw new Error(e.length+"-D input sampling is not yet supported")}}function Zk(n){var e,t,r;switch(n.shapeInfo.logicalShape.length){case 0:return e=n.name,t="get"+e.charAt(0).toUpperCase()+e.slice(1),r=Pn(),`
    vec4 `+t+`() {
      return `+r.texture2D+"("+e+`, halfCR);
    }
  `;case 1:return function(i){var o=i.name,s="get"+o.charAt(0).toUpperCase()+o.slice(1),a=i.shapeInfo.texShape,l=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)],u=Pn();return`
    vec4 `+s+`(int index) {
      vec2 uv = packedUVfrom1D(
        `+l[0]+", "+l[1]+`, index);
      return `+u.texture2D+"("+o+`, uv);
    }
  `}(n);case 2:return function(i){var o=i.shapeInfo.logicalShape,s=i.name,a="get"+s.charAt(0).toUpperCase()+s.slice(1),l=i.shapeInfo.texShape,u=l[0],f=l[1],p=Pn();if(l!=null&&pn(o,l))return`
      vec4 `+a+`(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(`+f+".0, "+u+`.0);

        return `+p.texture2D+"("+s+`, uv);
      }
    `;var m=[Math.ceil(l[0]/2),Math.ceil(l[1]/2)],v=Math.ceil(o[1]/2);return`
    vec4 `+a+`(int row, int col) {
      vec2 uv = packedUVfrom2D(`+v+", "+m[0]+", "+m[1]+`, row, col);
      return `+p.texture2D+"("+s+`, uv);
    }
  `}(n);case 3:return function(i){var o=i.shapeInfo.logicalShape,s=i.name,a="get"+s.charAt(0).toUpperCase()+s.slice(1),l=i.shapeInfo.texShape,u=[Math.ceil(l[0]/2),Math.ceil(l[1]/2)];if(o[0]===1){var f=o.slice(1),p=Al(i,f);return`
        `+Zk(p)+`
        vec4 `+a+`(int b, int row, int col) {
          return `+a+"("+Rl(["b","row","col"],[1,2])+`);
        }
      `}var m=u[0],v=u[1],y=Math.ceil(o[2]/2),w=y*Math.ceil(o[1]/2),_=Pn();return`
    vec4 `+a+`(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        `+m+", "+v+", "+w+", "+y+`, b, row, col);
      return `+_.texture2D+"("+s+`, uv);
    }
  `}(n);default:return function(i){for(var o=i.shapeInfo.logicalShape,s=o.length,a=i.name,l="get"+a.charAt(0).toUpperCase()+a.slice(1),u=i.shapeInfo.texShape,f=[Math.ceil(u[0]/2),Math.ceil(u[1]/2)],p=f[0],m=f[1],v=Math.ceil(o[s-1]/2),y=v*Math.ceil(o[s-2]/2),w="int b, int row, int col",_="b * "+y+" + (row / 2) * "+v+" + (col / 2)",k=2;k<s-1;k++)w="int b"+k+", "+w,y*=o[s-k-1],_="b"+k+" * "+y+" + "+_;var E=Pn();return`
    vec4 `+l+"("+w+`) {
      int index = `+_+`;
      int texR = index / `+m+`;
      int texC = index - texR * `+m+`;
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+m+", "+p+`);
      return `+E.texture2D+"("+a+`, uv);
    }
  `}(n)}}var ej=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,tj=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,nj=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,rj=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function ia(n){return"offset"+n}function _l(n){var e=n.name,t=Me(n.shapeInfo.logicalShape);return t<2?"return "+e+";":`
    for (int i = 0; i < `+t+`; i++) {
      if (i == index) {
        return `+e+`[i];
      }
    }
  `}function kt(n){if(n<=1)return"int";if(n===2)return"ivec2";if(n===3)return"ivec3";if(n===4)return"ivec4";if(n===5)return"ivec5";if(n===6)return"ivec6";throw Error("GPU for rank "+n+" is not yet supported")}function Al(n,e){var t=JSON.parse(JSON.stringify(n));return t.shapeInfo.logicalShape=e,t}function Rl(n,e){return e.map(function(t){return n[t]}).join(", ")}var ij=function(n,e,t,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,U(n.length>2,function(){return"Packed arg"+(t.charAt(0).toUpperCase()+t.slice(1))+" supports only inputs with rank above 2."});var i=n[n.length-1],o=Math.ceil(i/e);this.outputShape=n.slice(0,-1),o>1&&this.outputShape.push(o),r||this.variableNames.push("bestIndicesA");var s,a,l=this.outputShape,u=l.length,f=kt(u),p=lr("coords",u);if(o===1){var m=kt(a=u+1);s=`
        `+m+" sourceLocR = "+m+"("+p.join()+`, 0);
        ++`+p[u-1]+`;
        `+m+" sourceLocG = "+m+"("+p.join()+`, 0);
        ++`+p[u-2]+`;
        `+m+" sourceLocA = "+m+"("+p.join()+`, 0);
        --`+p[u-1]+`;
        `+m+" sourceLocB = "+m+"("+p.join()+`, 0);
        --`+p[u-2]+";"}else a=u,s=`
        `+f+` sourceLocR = coords;
        ++`+p[u-1]+`;
        `+f+` sourceLocG = coords;
        ++`+p[u-2]+`;
        `+f+` sourceLocA = coords;
        --`+p[u-1]+`;
        `+f+` sourceLocB = coords;
        --`+p[u-2]+";";var v=["x","y","z","w","u","v"].slice(0,a),y="."+v[a-1],w=v.map(function(j){return"int "+j}),_=lr("sourceLocR",a-1).concat("inIdx.r"),k=lr("sourceLocG",a-1).concat("inIdx.g"),E=lr("sourceLocB",a-1).concat("inIdx.b"),N=lr("sourceLocA",a-1).concat("inIdx.a"),S=t==="max"?"greaterThan":"lessThan",A=r?"":`
          inIdx = round(vec4(getBestIndicesAChannel(`+_.join()+`),
                             getBestIndicesAChannel(`+k.join()+`),
                             getBestIndicesAChannel(`+E.join()+`),
                             getBestIndicesAChannel(`+N.join()+")));",P=`vec4(
            getAChannel(`+_.join()+`),
            hasNextCol ? getAChannel(`+k.join()+`) : 0.,
            hasNextRow ? getAChannel(`+E.join()+`) : 0.,
            hasNextRow && hasNextCol ? getAChannel(`+N.join()+") : 0.)",D=r?"":`
      float getBestIndicesAChannel(`+w.join()+`) {
        return getChannel(getBestIndicesA(`+v.join()+`),
                                          vec2(`+v.slice(-2).join()+`));
      }`;this.userCode=`
      float getAChannel(`+w.join()+`) {
        return getChannel(getA(`+v.join()+`),
                               vec2(`+v.slice(-2).join()+`));
      }
      `+D+`
      void main() {
        `+f+` coords = getOutputCoords();
        bool hasNextCol = `+p[u-1]+" < "+(l[u-1]-1)+`;
        bool hasNextRow = `+p[u-2]+" < "+(l[u-2]-1)+`;
        `+s+`
        ivec4 srcIdx = ivec4(sourceLocR`+y+", sourceLocG"+y+`,
          sourceLocB`+y+", sourceLocA"+y+") * "+e+`;
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = `+P+`;

        for (int i = 0; i < `+e+`; i++) {
          inIdx = srcIdx;
          `+A+`
          vec4 candidate = `+P+`;
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(`+S+`(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `},oj=function(n){this.variableNames=["dy"],this.outputShape=n.inShape;var e=n.filterHeight,t=n.filterWidth,r=n.strideHeight,i=n.strideWidth,o=n.dilationHeight,s=n.dilationWidth,a=n.effectiveFilterHeight,l=n.effectiveFilterWidth,u=a-1-n.padInfo.top,f=l-1-n.padInfo.left,p=1/(e*t);this.userCode=`
      const ivec2 pads = ivec2(`+u+", "+f+`);
      const float avgMultiplier = float(`+p+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+a+`;
            wR += `+o+`) {
          float dyR = float(dyRCorner + wR) / `+r+`.0;

          if (dyR < 0.0 || dyR >= `+n.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < `+l+`;
            wC+= `+s+`) {
            float dyC = float(dyCCorner + wC) / `+i+`.0;

            if (dyC < 0.0 || dyC >= `+n.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `},sj=function(n){this.variableNames=["dy"],this.outputShape=n.inShape;var e=n.filterDepth,t=n.filterHeight,r=n.filterWidth,i=n.strideDepth,o=n.strideHeight,s=n.strideWidth,a=n.dilationDepth,l=n.dilationHeight,u=n.dilationWidth,f=n.effectiveFilterDepth,p=n.effectiveFilterHeight,m=n.effectiveFilterWidth,v=f-1-n.padInfo.front,y=p-1-n.padInfo.top,w=m-1-n.padInfo.left,_=1/(e*t*r);this.userCode=`
      const ivec3 pads = ivec3(`+v+", "+y+", "+w+`);
      const float avgMultiplier = float(`+_+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < `+f+`;
            wD += `+a+`) {
          float dyD = float(dyDCorner + wD) / `+i+`.0;

          if (dyD < 0.0 || dyD >= `+n.outDepth+`.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < `+p+`;
              wR += `+l+`) {
            float dyR = float(dyRCorner + wR) / `+o+`.0;

            if (dyR < 0.0 || dyR >= `+n.outHeight+`.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < `+m+`;
                wC += `+u+`) {
              float dyC = float(dyCCorner + wC) / `+s+`.0;

              if (dyC < 0.0 || dyC >= `+n.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `},aj=function(n,e,t,r,i,o){this.outputShape=[],this.variableNames=["x","mean","variance"],et(n,e),et(n,t);var s="0.0";r!=null&&(et(n,r),this.variableNames.push("offset"),s="getOffsetAtOutCoords()");var a="1.0";i!=null&&(et(n,i),this.variableNames.push("scale"),a="getScaleAtOutCoords()"),this.outputShape=n,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = `+s+`;
        float scale = `+a+`;
        float inv = scale * inversesqrt(variance + float(`+o+`));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `},lj=function(n,e,t,r,i,o){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],et(n,e),et(n,t);var s="vec4(0.0)";r!=null&&(et(n,r),this.variableNames.push("offset"),s="getOffsetAtOutCoords()");var a="vec4(1.0)";i!=null&&(et(n,i),this.variableNames.push("scale"),a="getScaleAtOutCoords()"),this.outputShape=n,this.userCode=`
      void main() {
        vec4 offset = `+s+`;
        vec4 scale = `+a+`;

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(`+o+`));

        setOutput((x - mean) * inv + offset);
      }
    `},cj="return areal * breal - aimag * bimag;",uj="return areal * bimag + aimag * breal;",Ub=function(n,e,t){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=et(e,t),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        `+n+`
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `},g0="return a + b;",v0="return a - b;",Hb="return a * b;",e4="return (a < 0.) ? b * a : a;",Bt=function(n,e,t){this.variableNames=["A","B"],this.outputShape=et(e,t),this.userCode=`
      float binaryOperation(float a, float b) {
        `+n+`
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `},t4=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`,po=function(n,e,t,r){r===void 0&&(r=!1),this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=et(e,t);var i=this.outputShape.length,o="";if(r)if(i===0||Me(this.outputShape)===1)o=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(o=`
          `+kt(i)+` coords = getOutputCoords();
        `,i===1)o+=`
            result.y = (coords + 1) >= `+this.outputShape[0]+` ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{var s=lr("coords",i);o+=`
            bool nextRowOutOfBounds =
              (`+s[i-2]+" + 1) >= "+this.outputShape[i-2]+`;
            bool nextColOutOfBounds =
              (`+s[i-1]+" + 1) >= "+this.outputShape[i-1]+`;
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        `+n+`
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        `+o+`

        setOutput(result);
      }
    `},dj=function(){function n(e){this.variableNames=["A"],this.outputShape=e,this.userCode=`
      uniform float minVal;
      uniform float maxVal;

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}return n.prototype.getCustomSetupFunc=function(e,t){var r=this;return function(i,o){r.minLoc==null&&(r.minLoc=i.getUniformLocationNoThrow(o,"minVal"),r.maxLoc=i.getUniformLocationNoThrow(o,"maxVal")),i.gl.uniform1f(r.minLoc,e),i.gl.uniform1f(r.maxLoc,t)}},n}(),hj=function(){function n(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.userCode=`
      uniform float minVal;
      uniform float maxVal;

      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}return n.prototype.getCustomSetupFunc=function(e,t){var r=this;return function(i,o){r.minLoc==null&&(r.minLoc=i.getUniformLocationNoThrow(o,"minVal"),r.maxLoc=i.getUniformLocationNoThrow(o,"maxVal")),i.gl.uniform1f(r.minLoc,e),i.gl.uniform1f(r.maxLoc,t)}},n}(),fj=function(n){this.variableNames=["real","imag"],this.outputShape=n,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `},pj=function(n){this.outputShape=[],this.outputShape=Xl(n,1),this.variableNames=n.map(function(a,l){return"T"+l});var e=new Array(n.length-1);e[0]=n[0][1];for(var t=1;t<e.length;t++)e[t]=e[t-1]+n[t][1];var r=["if (yC < "+e[0]+") setOutput(getT0(yR, yC));"];for(t=1;t<e.length;t++){var i=e[t-1];r.push("else if (yC < "+e[t]+") setOutput(getT"+t+"(yR, yC-"+i+"));")}var o=e.length,s=e[e.length-1];r.push("else setOutput(getT"+o+"(yR, yC-"+s+"));"),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        `+r.join(`
        `)+`
      }
    `},mj=function(n,e){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=Xl(n,e);var t=this.outputShape,r=t.length,i=kt(r),o=lr("coords",r),s=["x","y","z","w","u","v"].slice(0,r);this.variableNames=n.map(function(_,k){return"T"+k});var a=new Array(n.length-1);a[0]=n[0][e];for(var l=1;l<a.length;l++)a[l]=a[l-1]+n[l][e];var u=s[e],f=s.slice(-2),p=s.join(),m="if ("+u+" < "+a[0]+`) {
        return getChannel(
            getT0(`+p+"), vec2("+f.join()+`));
        }`;for(l=1;l<a.length;l++){var v=a[l-1];m+=`
        if (`+u+" < "+a[l]+"  && "+u+" >= "+a[l-1]+`) {
          return getChannel(
            getT`+l+"("+Sh(s,u,v)+`),
            vec2(`+Sh(f,u,v)+`));
        }`}var y=a.length,w=a[a.length-1];m+=`
        return getChannel(
          getT`+y+"("+Sh(s,u,w)+`),
          vec2(`+Sh(f,u,w)+"));",this.userCode=`
      float getValue(`+s.map(function(_){return"int "+_})+`) {
        `+m+`
      }

      void main() {
        `+i+` coords = getOutputCoords();
        vec4 result = vec4(getValue(`+o+`), 0., 0., 0.);

        `+o[r-1]+" = "+o[r-1]+` + 1;
        if (`+o[r-1]+" < "+t[r-1]+`) {
          result.g = getValue(`+o+`);
        }

        `+o[r-2]+" = "+o[r-2]+` + 1;
        if (`+o[r-2]+" < "+t[r-2]+`) {
          result.a = getValue(`+o+`);
        }

        `+o[r-1]+" = "+o[r-1]+` - 1;
        if (`+o[r-2]+" < "+t[r-2]+` &&
            `+o[r-1]+" < "+t[r-1]+`) {
          result.b = getValue(`+o+`);
        }
        setOutput(result);
      }
    `};function Sh(n,e,t){var r=n.indexOf(e);return n.map(function(i,o){return o===r?i+" - "+t:i}).join()}var gj=function(n){this.variableNames=["x","dy"],this.outputShape=n.filterShape;var e=n.strideHeight,t=n.strideWidth,r=n.padInfo.top,i=n.padInfo.left,o=n.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < `+n.batchSize+`; b++) {
          for (int yR = 0; yR < `+n.outHeight+`; yR++) {
            int xR = wR + yR * `+e+" - "+r+`;

            if (xR < 0 || xR >= `+n.inHeight+`) {
              continue;
            }

            for (int yC = 0; yC < `+n.outWidth+`; yC++) {
              int xC = wC + yC * `+t+" - "+i+`;

              if (xC < 0 || xC >= `+n.inWidth+`) {
                continue;
              }

              if (`+o+`) {
                float dyValue = getDy(b, yR, yC, d2);
                float xValue = getX(b, xR, xC, d1);
                dotProd += (xValue * dyValue);
              } else {
                float dyValue = getDy(b, d2, yR, yC);
                float xValue = getX(b, d1, xR, xC);
                dotProd += (xValue * dyValue);
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `},vj=function(n){this.variableNames=["dy","W"],this.outputShape=n.inShape;var e=n.filterHeight,t=n.filterWidth,r=n.strideHeight,i=n.strideWidth,o=n.dataFormat==="channelsLast",s=e-1-n.padInfo.top,a=t-1-n.padInfo.left,l=o?1:2,u=o?2:3,f=o?3:1;this.userCode=`
      const ivec2 pads = ivec2(`+s+", "+a+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[`+f+`];

        ivec2 dyCorner = ivec2(coords[`+l+"], coords["+u+`]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+e+`; wR++) {
          float dyR = float(dyRCorner + wR) / `+r+`.0;

          if (dyR < 0.0 || dyR >= `+n.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = `+e+` - 1 - wR;

          for (int wC = 0; wC < `+t+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+i+`.0;

            if (dyC < 0.0 || dyC >= `+n.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = `+t+` - 1 - wC;

            for (int d2 = 0; d2 < `+n.outChannels+`; d2++) {

              if (`+o+`) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `},xj=function(n){this.variableNames=["x","dy"],this.outputShape=n.filterShape;var e=n.strideDepth,t=n.strideHeight,r=n.strideWidth,i=n.padInfo.front,o=n.padInfo.top,s=n.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < `+n.batchSize+`; b++) {
          for (int yF = 0; yF < `+n.outDepth+`; yF++) {
            int xF = wF + yF * `+e+" - "+i+`;

            if (xF < 0 || xF >= `+n.inDepth+`) {
              continue;
            }

            for (int yR = 0; yR < `+n.outHeight+`; yR++) {
              int xR = wR + yR * `+t+" - "+o+`;

              if (xR < 0 || xR >= `+n.inHeight+`) {
                continue;
              }

              for (int yC = 0; yC < `+n.outWidth+`; yC++) {
                int xC = wC + yC * `+r+" - "+s+`;

                if (xC < 0 || xC >= `+n.inWidth+`) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `},yj=function(n){this.variableNames=["dy","W"],this.outputShape=n.inShape;var e=n.filterDepth,t=n.filterHeight,r=n.filterWidth,i=n.strideDepth,o=n.strideHeight,s=n.strideWidth,a=e-1-n.padInfo.front,l=t-1-n.padInfo.top,u=r-1-n.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(`+a+", "+l+", "+u+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < `+e+`; wF++) {
          float dyF = float(dyFCorner + wF) / `+i+`.0;

          if (dyF < 0.0 || dyF >= `+n.outDepth+`.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = `+e+` - 1 - wF;

          for (int wR = 0; wR < `+t+`; wR++) {
            float dyR = float(dyRCorner + wR) / `+o+`.0;

            if (dyR < 0.0 || dyR >= `+n.outHeight+`.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = `+t+` - 1 - wR;

            for (int wC = 0; wC < `+r+`; wC++) {
              float dyC = float(dyCCorner + wC) / `+s+`.0;

              if (dyC < 0.0 || dyC >= `+n.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = `+r+` - 1 - wC;

              for (int d2 = 0; d2 < `+n.outChannels+`; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `},bj=function(n){this.variableNames=["x","dy"],this.outputShape=n.filterShape;var e=n.strideHeight,t=n.strideWidth,r=n.padInfo.top,i=n.padInfo.left,o=n.outChannels/n.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * `+o+` + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < `+n.batchSize+`; b++) {
          for (int yR = 0; yR < `+n.outHeight+`; yR++) {
            int xR = wR + yR * `+e+" - "+r+`;

            if (xR < 0 || xR >= `+n.inHeight+`) {
              continue;
            }

            for (int yC = 0; yC < `+n.outWidth+`; yC++) {
              int xC = wC + yC * `+t+" - "+i+`;

              if (xC < 0 || xC >= `+n.inWidth+`) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `},wj=function(n){this.variableNames=["dy","W"],this.outputShape=n.inShape;var e=n.filterHeight,t=n.filterWidth,r=n.strideHeight,i=n.strideWidth,o=e-1-n.padInfo.top,s=t-1-n.padInfo.left,a=n.outChannels/n.inChannels;this.userCode=`
      const ivec2 pads = ivec2(`+o+", "+s+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < `+e+`; wR++) {
          float dyR = float(dyRCorner + wR) / `+r+`.0;

          if (dyR < 0.0 || dyR >= `+n.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = `+e+` - 1 - wR;

          for (int wC = 0; wC < `+t+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+i+`.0;

            if (dyC < 0.0 || dyC >= `+n.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = `+t+` - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < `+a+`; dm++) {
              int d2 = d1 * `+a+` + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `},Gb=function(n,e,t,r){e===void 0&&(e=!1),t===void 0&&(t=null),r===void 0&&(r=!1),this.variableNames=["x","W"],this.outputShape=n.outShape;var i=n.padInfo.top,o=n.padInfo.left,s=n.strideHeight,a=n.strideWidth,l=n.dilationHeight,u=n.dilationWidth,f=n.filterHeight,p=n.filterWidth,m=4*Math.floor(n.inChannels/4),v=n.inChannels%4,y=n.dataFormat==="channelsLast",w=y?1:2,_=y?2:3,k=y?3:1,E="",N="";t&&(E=r?`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          `+t+`
        }`:`
          float activation(float x) {
            `+t+`
          }
        `,N="result = activation(result);");var S=e?"result += getBiasAtOutCoords();":"";e&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+E+`

      const ivec2 strides = ivec2(`+s+", "+a+`);
      const ivec2 pads = ivec2(`+i+", "+o+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[`+k+`];

        ivec2 xRCCorner =
            ivec2(coords[`+w+"], coords["+_+`]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+f+`; wR++) {
          int xR = xRCorner + wR * `+l+`;

          if (xR < 0 || xR >= `+n.inHeight+`) {
            continue;
          }

          for (int wC = 0; wC < `+p+`; wC++) {
            int xC = xCCorner + wC * `+u+`;

            if (xC < 0 || xC >= `+n.inWidth+`) {
              continue;
            }

            for (int d1 = 0; d1 < `+m+`; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (`+y+`) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (`+(v===1)+`) {

              if (`+y+`) {
                dotProd +=
                    getX(batch, xR, xC, `+m+`) *
                    getW(wR, wC, `+m+`, d2);
              } else {
                dotProd +=
                    getX(batch, `+m+`, xR, xC) *
                    getW(wR, wC, `+m+`, d2);
              }

            } else if (`+(v===2)+`) {
              vec2 wValues = vec2(
                getW(wR, wC, `+m+`, d2),
                getW(wR, wC, `+m+` + 1, d2)
              );

              if (`+y+`) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, `+m+`),
                  getX(batch, xR, xC, `+m+` + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, `+m+`, xR, xC),
                  getX(batch, `+m+` + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (`+(v===3)+`) {
              vec3 wValues = vec3(
                getW(wR, wC, `+m+`, d2),
                getW(wR, wC, `+m+` + 1, d2),
                getW(wR, wC, `+m+` + 2, d2)
              );

              if (`+y+`) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, `+m+`),
                  getX(batch, xR, xC, `+m+` + 1),
                  getX(batch, xR, xC, `+m+` + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, `+m+`, xR, xC),
                  getX(batch, `+m+` + 1, xR, xC),
                  getX(batch, `+m+` + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        `+S+`
        `+N+`
        setOutput(result);
      }
    `},_j=function(n){this.variableNames=["x","W"],this.outputShape=n.outShape;var e=n.padInfo.front,t=n.padInfo.top,r=n.padInfo.left,i=n.strideDepth,o=n.strideHeight,s=n.strideWidth,a=n.dilationDepth,l=n.dilationHeight,u=n.dilationWidth,f=n.filterDepth,p=n.filterHeight,m=n.filterWidth,v=4*Math.floor(n.inChannels/4),y=n.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(`+i+", "+o+", "+s+`);
      const ivec3 pads = ivec3(`+e+", "+t+", "+r+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < `+f+`; wF++) {
          int xF = xFCorner + wF * `+a+`;

          if (xF < 0 || xF >= `+n.inDepth+`) {
            continue;
          }

          for (int wR = 0; wR < `+p+`; wR++) {
            int xR = xRCorner + wR * `+l+`;

            if (xR < 0 || xR >= `+n.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+m+`; wC++) {
              int xC = xCCorner + wC * `+u+`;

              if (xC < 0 || xC >= `+n.inWidth+`) {
                continue;
              }

              for (int d1 = 0; d1 < `+v+`; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (`+(y===1)+`) {
                dotProd +=
                  getX(batch, xF, xR, xC, `+v+`) *
                  getW(wF, wR, wC, `+v+`, d2);
              } else if (`+(y===2)+`) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, `+v+`),
                  getX(batch, xF, xR, xC, `+v+` + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, `+v+`, d2),
                  getW(wF, wR, wC, `+v+` + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (`+(y===3)+`) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, `+v+`),
                  getX(batch, xF, xR, xC, `+v+` + 1),
                  getX(batch, xF, xR, xC, `+v+` + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, `+v+`, d2),
                  getW(wF, wR, wC, `+v+` + 1, d2),
                  getW(wF, wR, wC, `+v+` + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `},$b=function(n,e,t,r){e===void 0&&(e=!1),t===void 0&&(t=null),r===void 0&&(r=!1),this.variableNames=["x","W"],this.outputShape=n.outShape;var i=n.inHeight,o=n.inWidth,s=n.padInfo.top,a=n.padInfo.left,l=n.strideHeight,u=n.strideWidth,f=n.dilationHeight,p=n.dilationWidth,m=n.filterHeight,v=n.filterWidth,y=n.outChannels/n.inChannels,w="",_="";t&&(w=r?`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          `+t+`
        }`:`
          float activation(float x) {
            `+t+`
          }
        `,_="result = activation(result);");var k=e?"result += getBiasAtOutCoords();":"";e&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+w+`

      const ivec2 strides = ivec2(`+l+", "+u+`);
      const ivec2 pads = ivec2(`+s+", "+a+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / `+y+`;
        int q = d2 - d1 * `+y+`;

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < `+m+`; wR++) {
          int xR = xRCorner + wR * `+f+`;

          if (xR < 0 || xR >= `+i+`) {
            continue;
          }

          for (int wC = 0; wC < `+v+`; wC++) {
            int xC = xCCorner + wC * `+p+`;

            if (xC < 0 || xC >= `+o+`) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        `+k+`
        `+_+`
        setOutput(result);
      }
    `},qb=function(n,e,t,r){e===void 0&&(e=!1),t===void 0&&(t=null),r===void 0&&(r=!1),this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n.outShape;for(var i=n.inHeight,o=n.inWidth,s=n.padInfo.top,a=n.padInfo.left,l=n.strideHeight,u=n.strideWidth,f=n.dilationHeight,p=n.dilationWidth,m=n.filterHeight,v=n.filterWidth,y=v,w="int xR; int xC; int xCOffset;",_=0;_<m;_++)for(var k=0;k<v;k++)w+=`
          vec4 xTexelR`+_+"C"+2*k+` = vec4(0.);
          vec4 wR`+_+"C"+k+` = vec4(0.);
          vec4 xR`+_+"C"+k+" = vec4(0.);";for(_=0;_<m;_++)for(var E=0;E<y;E++){if(w+=`
          xR = xRCorner + `+_*f+`;
          xC = xCCorner + `+(k=2*E)*p+`;
        `,u===1){if(k<v&&(w+=a%2==1?`
                xCOffset = xC + 1;
                if(xR >= 0 && xR < `+i+" && xCOffset >= 0 && xCOffset < "+o+`) {
                  xTexelR`+_+"C"+k+` = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if(xCOffset + 1 >= `+o+`) {
                    xTexelR`+_+"C"+k+`.zw = vec2(0.);
                  }
                } else {
                  xTexelR`+_+"C"+k+` = vec4(0.);
                }

                xCOffset = xC + 1 - 2;
                if(xR >= 0 && xR < `+i+" && xCOffset >= 0 && xCOffset < "+o+`) {
                  vec4 previous = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if(xCOffset + 1 >= `+o+`) {
                    previous.zw = vec2(0.);
                  }

                  xR`+_+"C"+k+" = vec4(previous.zw, xTexelR"+_+"C"+k+`.xy);
                } else {
                  xR`+_+"C"+k+" = vec4(0, 0, xTexelR"+_+"C"+k+`.xy);
                }
              `:`
                if(xR >= 0 && xR < `+i+" && xC >= 0 && xC < "+o+`) {
                  xTexelR`+_+"C"+k+` = getX(batch, xR, xC, d1);
                } else {
                  xTexelR`+_+"C"+k+` = vec4(0.);
                }

                xR`+_+"C"+k+" = xTexelR"+_+"C"+k+`;
              `,k+1<v)){var N=a%2==0?yk(p):p;p%2==0&&a%2==1||p%2!=0&&a%2!=1?(w+=`
                  xCOffset = xC + `+a%2+" + "+N+`;

                  if(xR >= 0 && xR < `+i+` &&
                    xCOffset >= 0 && xCOffset < `+o+`) {
                    xTexelR`+_+"C"+(k+2)+` = getX(batch, xR, xCOffset, d1);
                  }
                `,p>1&&(w+=`
                    xCOffset -= 2;
                    if(xR >= 0 && xR < `+i+` &&
                      xCOffset >= 0 && xCOffset < `+o+`) {
                      xTexelR`+_+"C"+k+` = getX(batch, xR, xCOffset, d1);
                    } else {
                      xTexelR`+_+"C"+k+` = vec4(0.);
                    }
                  `),w+=`
                  xR`+_+"C"+(k+1)+` = vec4(
                    xTexelR`+_+"C"+k+".zw, xTexelR"+_+"C"+(k+2)+`.xy);
                `):w+=`
                  xCOffset = xC + `+N+`;

                  if(xR >= 0 && xR < `+i+` &&
                    xCOffset >= 0 && xCOffset < `+o+`) {
                    xTexelR`+_+"C"+(k+2)+` = getX(batch, xR, xCOffset, d1);
                  }

                  xR`+_+"C"+(k+1)+" = xTexelR"+_+"C"+(k+2)+`;
                `}}else k<v&&(w+=`
              if(xR >= 0 && xR < `+i+`) {
            `,a%2==1?(w+=`
                xCOffset = xC + 1 - `+u+`;
                if(xCOffset >= 0 && xCOffset < `+o+`) {
                  xTexelR`+_+"C"+k+` = getX(batch, xR, xCOffset, d1);
                } else {
                  xTexelR`+_+"C"+k+` = vec4(0.);
                }

                if(xC + 1 >= 0 && xC + 1 < `+o+`) {
                  xTexelR`+_+"C"+(k+2)+` = getX(batch, xR, xC + 1, d1);
                } else {
                  xTexelR`+_+"C"+(k+2)+` = vec4(0.);
                }

                xR`+_+"C"+k+` = vec4(
                  xTexelR`+_+"C"+k+".zw, xTexelR"+_+"C"+(k+2)+`.zw);
              `,k+1<v&&(w+=`
                  vec4 final = vec4(0.);
                  xCOffset = xC + 1 + `+u+`;
                  if(xCOffset >= 0 && xCOffset < `+o+`) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xR`+_+"C"+(k+1)+" = vec4(xTexelR"+_+"C"+(k+2)+`.xy, final.xy);
                `)):(w+=`
                if(xC >= 0 && xC < `+o+`) {
                  xTexelR`+_+"C"+k+` = getX(batch, xR, xC, d1);
                } else {
                  xTexelR`+_+"C"+k+` = vec4(0.);
                }

                xCOffset = xC + `+u+`;
                if(xCOffset >= 0 && xCOffset < `+o+`) {
                  xTexelR`+_+"C"+(k+2)+` = getX(batch, xR, xCOffset, d1);
                } else {
                  xTexelR`+_+"C"+(k+2)+` = vec4(0.);
                }

                xR`+_+"C"+k+` = vec4(
                  xTexelR`+_+"C"+k+".xy, xTexelR"+_+"C"+(k+2)+`.xy);
              `,k+1<v&&(w+=`
                  xR`+_+"C"+(k+1)+` = vec4(
                    xTexelR`+_+"C"+k+".zw, xTexelR"+_+"C"+(k+2)+`.zw);
                `)),w+="}");k<v&&(w+=`
            vec4 wTexelR`+_+"C"+k+" = getW("+_+", "+k+`, d1, q);
            wR`+_+"C"+k+" = vec4(wTexelR"+_+"C"+k+".xz, wTexelR"+_+"C"+k+`.xz);
          `,k+1<v&&(w+=`
              vec4 wTexelR`+_+"C"+(k+1)+" = getW("+_+", "+(k+1)+`, d1, q);
              wR`+_+"C"+(k+1)+` =
                vec4(wTexelR`+_+"C"+(k+1)+".xz, wTexelR"+_+"C"+(k+1)+".xz);"))}for(_=0;_<m;_++)for(k=0;k<v;k++)w+="dotProd += xR"+_+"C"+k+" * wR"+_+"C"+k+";";var S="",A="";t&&(S=r?`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          `+t+`
        }`:`vec4 activation(vec4 x) {
          `+t+`
        }`,A="result = activation(result);");var P=e?"result += getBiasAtOutCoords();":"";e&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+S+`

      const ivec2 strides = ivec2(`+l+", "+u+`);
      const ivec2 pads = ivec2(`+s+", "+a+`);

      void main() {

        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2;
        int q = 0;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        vec4 dotProd = vec4(0.);

        `+w+`

        vec4 result = dotProd;
        `+P+`
        `+A+`
        setOutput(result);
      }
    `},kj=function(n,e,t,r,i){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];var o=n[0],s=n[1],a=n[2],l=n[3],u=e[0],f=t[0],p=t[1];this.outputShape=[u,f,p,l];var m=r==="bilinear"?1:0,v=[s-1+".0",a-1+".0"],y=v[0],w=v[1],_=f>1?[""+(s-1)/(f-1),"(y2-y1) * height_ratio","y1*"+y+" + float(y)*(height_scale)"]:["0.0","0.0","0.5 * (y1+y2) * "+y],k=_[0],E=_[1],N=_[2],S=p>1?[""+(a-1)/(p-1),"(x2-x1) * width_ratio","x1*"+w+" + float(x)*(width_scale)"]:["0.0","0.0","0.5 * (x1+x2) * "+w],A=S[0],P=S[1],D=S[2];this.userCode=`
      const float height_ratio = float(`+k+`);
      const float width_ratio = float(`+A+`);
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= `+o+`) {
          return;
        }

        float height_scale = `+E+`;
        float width_scale = `+P+`;

        float in_y = `+N+`;
        if( in_y < 0.0 || in_y > `+y+` ) {
          setOutput(float(`+i+`));
          return;
        }
        float in_x = `+D+`;
        if( in_x < 0.0 || in_x > `+w+` ) {
          setOutput(float(`+i+`));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(`+m+` == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `},Cj=function(n,e,t){this.variableNames=["x"],this.outputShape=n;var r=n.length,i=n[n.length-1],o=t?"<":">";this.userCode=`
      int getIndex(int i) {
        `+(t?"return "+i+" -i - 1;":"return i;")+`
      }

      void main() {
        `+kt(r)+` coords = getOutputCoords();
        int end = `+Kb(r,"coords")+`;
        float val = 0.0;
        for (int i = `+i+` - 1; i >= 0; i -= 1) {
          int idx = getIndex(i);
          if (idx `+o+` end) {
            continue;
          }
          if (idx == end && `+e+`) {
            continue;
          }
          `+Kb(r,"coords")+` = idx;
          val += getX(`+function(s,a){if(s===1)return""+a;if(s===2)return a+".x, "+a+".y";if(s===3)return a+".x, "+a+".y, "+a+".z";if(s===4)return a+".x, "+a+".y, "+a+".z, "+a+".w";throw Error("Cumulative sum for rank "+s+" is not yet supported")}(r,"coords")+`);
        }
        setOutput(val);
      }
    `};function Kb(n,e){if(n===1)return""+e;if(n===2)return e+".y";if(n===3)return e+".z";if(n===4)return e+".w";throw Error("Cumulative sum for rank "+n+" is not yet supported")}var Ej=function(n){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=Iu.DENSE;var e=gu(n),t=Pn();this.outputShape=n,this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        `+ma(["r","c","d"],n)+`
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx *
          vec2(`+e[0]+", "+e[1]+`));
        int index = 4 * (resTexRC.x * `+e[1]+` + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        `+t.output+` = result;
      }
    `},Nj=function(n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=Iu.DENSE;var e=gu(n),t=Pn();this.outputShape=n,this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        `+ma(["r","c","d"],n)+`
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx *
          vec2(`+e[0]+", "+e[1]+`));
        int index = 4 * (resTexRC.x * `+e[1]+` + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        `+t.output+` = result;
      }
    `},Sj=function(){function n(e,t,r){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=t,this.dataFormat=r,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = `+this.getHeightCoordString()+`;
      int w = `+this.getWidthCoordString()+`;
      int d = `+this.getDepthCoordString()+`;

      int in_h = h / `+t+`;
      int offset_h = imod(h, `+t+`);
      int in_w = w / `+t+`;
      int offset_w = imod(w, `+t+`);
      int offset_d = (offset_h * `+t+` + offset_w) *
        `+this.getOutputDepthSize()+`;
      int in_d = d + offset_d;

      float result = `+this.getInputSamplingString()+`;
      setOutput(result);
    }
  `}return n.prototype.getHeightCoordString=function(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"},n.prototype.getWidthCoordString=function(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"},n.prototype.getDepthCoordString=function(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"},n.prototype.getOutputDepthSize=function(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]},n.prototype.getInputSamplingString=function(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"},n}(),Ij=function(n){this.variableNames=["X"],this.outputShape=[n,n],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `},Aj=function(n){this.variableNames=["A"],this.outTexUsage=kr.DOWNLOAD;var e=Pn();this.outputShape=n,this.userCode=`
      `+Qk+`

      void main() {
        float x = getAAtOutCoords();
        `+e.output+` = encode_float(x);
      }
    `},Rj=function(n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=kr.DOWNLOAD;var e=Pn();this.outputShape=n,this.userCode=`
      `+Qk+`

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        `+e.output+` = encode_float(x);
      }
    `},jj=function(n,e,t){t===void 0&&(t=!1),this.variableNames=["A"];var r=Pn(),i=e[0],o=e[1];this.outputShape=n;var s="result";t&&(s="floor(result * 255. + 0.5)"),this.userCode=`
      `+fv(n)+`

      void main() {
        ivec3 coords = getOutputCoords();

        int flatIndex = getFlatIndex(coords);
        int offset = imod(flatIndex, 4);

        flatIndex = idiv(flatIndex, 4, 1.);
        
        int r = flatIndex / `+o+`;
        int c = imod(flatIndex, `+o+`);
        vec2 uv = (vec2(c, r) + halfCR) / vec2(`+o+".0, "+i+`.0);
        vec4 values = `+r.texture2D+`(A, uv);

        float result;

        if(offset == 0) {
          result = values[0];
        } else if(offset == 1) {
          result = values[1];
        } else if(offset == 2) {
          result = values[2];
        } else {
          result = values[3];
        }

        `+r.output+" = vec4("+s+`, 0., 0., 0.);
      }
    `},Tj=function(n,e,t){t===void 0&&(t=!1),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var r=Pn(),i=e[0],o=e[1];this.outputShape=n;var s="",a="result";t&&(a="floor(result * 255. + 0.5)");for(var l=0;l<=1;l++)for(var u=0;u<=1;u++){var f=2*l+u;s+=`
          localCoords = coords;
          if(localCoords[2] + `+u+" < "+n[2]+`) {
            localCoords[2] += `+u+`;
            if(localCoords[1] + `+l+" < "+n[1]+`) {
              localCoords[1] += `+l+`;

              flatIndex = getFlatIndex(localCoords);
              offset = imod(flatIndex, 4);

              flatIndex = idiv(flatIndex, 4, 1.);

              r = flatIndex / `+o+`;
              c = imod(flatIndex, `+o+`);
              uv = (vec2(c, r) + halfCR) / vec2(`+o+".0, "+i+`.0);
              values = `+r.texture2D+`(A, uv);

              if(offset == 0) {
                result[`+f+`] = values[0];
              } else if(offset == 1) {
                result[`+f+`] = values[1];
              } else if(offset == 2) {
                result[`+f+`] = values[2];
              } else {
                result[`+f+`] = values[3];
              }
            }
          }
        `}this.userCode=`
      `+fv(n)+`

      void main() {
        ivec3 coords = getOutputCoords();

        vec4 result = vec4(0.);
        int flatIndex, r, c, offset;
        ivec3 localCoords;
        vec2 uv;
        vec4 values;

        `+s+`

        `+r.output+" = "+a+`;
      }
    `},Dj="return real * expR - imag * expI;",Mj="return real * expI + imag * expR;",Xb=function(n,e,t){this.variableNames=["real","imag"];var r=e[1];this.outputShape=e;var i=t?"2.0 * "+Math.PI:"-2.0 * "+Math.PI,o=t?r+".0":"1.0";this.userCode=`
      const float exponentMultiplier = `+i+`;

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        `+n+`
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(`+r+`);
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < `+r+`; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / `+o+`;
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `},Pj=function(){function n(e,t){this.outputShape=[],this.variableNames=["x"],this.outputShape=e,this.userCode=`
      uniform float value;
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}return n.prototype.getCustomSetupFunc=function(e){var t=this;return function(r,i){t.valueLoc==null&&(t.valueLoc=r.getUniformLocationNoThrow(i,"value")),r.gl.uniform1f(t.valueLoc,e)}},n}(),Oj=function(n,e,t){this.variableNames=["A","indices"];var r=n.slice();r[t]=e,this.outputShape=r,this.rank=r.length;var i=kt(this.rank),o=function(s,a){var l=s.length;if(l>4)throw Error("Gather for rank "+l+" is not yet supported");if(l===1)return"int(getIndices(resRC))";for(var u=["resRC.x","resRC.y","resRC.z","resRC.w"],f=[],p=0;p<s.length;p++)p===a?f.push("int(getIndices("+u[p]+"))"):f.push(""+u[p]);return f.join()}(n,t);this.userCode=`
      void main() {
        `+i+` resRC = getOutputCoords();
        setOutput(getA(`+o+`));
      }
    `},Fj=function(n,e,t){this.sliceDim=n,this.strides=e,this.variableNames=["x","indices"],this.outputShape=t;var r=kt(e.length),i=kt(t.length),o=this.sliceDim>1?"strides[j]":"strides";this.userCode=`
        `+r+" strides = "+r+"("+this.strides+`);
         void main() {
          `+i+` coords = getOutputCoords();
          int flattenIndex = 0;
          for (int j = 0; j < `+this.sliceDim+`; j++) {
            int index = round(getIndices(coords[0], j));
            flattenIndex += index * `+o+`;
          }
          setOutput(getX(flattenIndex, coords[1]));
        }
      `};function Lj(n,e){var t=Pn();return DA(n,e,t.version+`
    precision highp float;
    `+t.attribute+` vec3 clipSpacePos;
    `+t.attribute+` vec2 uv;
    `+t.varyingVs+` vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`)}function Bj(n,e){return LA(n,e,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function zj(n,e){return BA(n,e,new Uint16Array([0,1,2,2,1,3]))}function Ju(n,e,t,r,i,o,s){WA(t,r);var a=zA(n,e),l=n.TEXTURE_2D;return Oe(n,e,function(){return n.bindTexture(l,a)}),Oe(n,e,function(){return n.texParameteri(l,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE)}),Oe(n,e,function(){return n.texParameteri(l,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE)}),Oe(n,e,function(){return n.texParameteri(l,n.TEXTURE_MIN_FILTER,n.NEAREST)}),Oe(n,e,function(){return n.texParameteri(l,n.TEXTURE_MAG_FILTER,n.NEAREST)}),Oe(n,e,function(){return n.texImage2D(l,0,i,t,r,0,o,s,null)}),Oe(n,e,function(){return n.bindTexture(n.TEXTURE_2D,null)}),a}function Wj(n,e,t,r,i){var o=Jf(t,r);return Ju(n,e,o[0],o[1],i.internalFormatFloat,i.textureFormatFloat,n.FLOAT)}function Vj(n,e,t,r,i){var o=Jf(t,r);return Ju(n,e,o[0],o[1],i.internalFormatHalfFloat,i.textureFormatFloat,i.textureTypeHalfFloat)}function Uj(n,e,t,r,i){var o=Jf(t,r);return Ju(n,e,o[0],o[1],n.RGBA,n.RGBA,n.UNSIGNED_BYTE)}function Hj(n,e,t,r,i){var o=Yu(t,r);return Ju(n,e,o[0],o[1],i.internalFormatPackedFloat,n.RGBA,n.FLOAT)}function Gj(n,e,t,r,i){var o=Yu(t,r);return Ju(n,e,o[0],o[1],i.internalFormatPackedHalfFloat,n.RGBA,i.textureTypeHalfFloat)}function $j(n,e,t,r){return Oe(n,e,function(){return n.bindBuffer(n.ARRAY_BUFFER,r)}),Ob(n,e,t,"clipSpacePos",r,3,20,0)&&Ob(n,e,t,"uv",r,2,20,12)}function qj(n,e,t,r,i,o,s){var a,l,u;Oe(n,e,function(){return n.bindTexture(n.TEXTURE_2D,t)}),o instanceof Uint8Array?(a=new Uint8Array(r*i*4),l=n.UNSIGNED_BYTE,u=n.RGBA):(a=new Float32Array(r*i*4),l=n.FLOAT,u=s.internalFormatPackedFloat),a.set(o),Oe(n,e,function(){return n.texImage2D(n.TEXTURE_2D,0,u,r,i,0,n.RGBA,l,a)}),Oe(n,e,function(){return n.bindTexture(n.TEXTURE_2D,null)})}function Kj(n,e,t,r){Oe(n,e,function(){return n.bindTexture(n.TEXTURE_2D,t)}),r.data instanceof Uint8Array?Oe(n,e,function(){return n.texImage2D(n.TEXTURE_2D,0,n.RGBA,r.width,r.height,0,n.RGBA,n.UNSIGNED_BYTE,r.data)}):Oe(n,e,function(){return n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,r)}),Oe(n,e,function(){return n.bindTexture(n.TEXTURE_2D,null)})}function Xj(n,e,t,r,i){var o=n.createBuffer();Oe(n,e,function(){return n.bindBuffer(n.PIXEL_PACK_BUFFER,o)});var s=16*t*r;return Oe(n,e,function(){return n.bufferData(n.PIXEL_PACK_BUFFER,s,n.STREAM_READ)}),Oe(n,e,function(){return n.readPixels(0,0,r,t,n.RGBA,n.FLOAT,0)}),Oe(n,e,function(){return n.bindBuffer(n.PIXEL_PACK_BUFFER,null)}),o}function Yj(n,e,t){var r=n,i=new Float32Array(t);return r.bindBuffer(r.PIXEL_PACK_BUFFER,e),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,i),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),i}function Jj(n,e,t,r,i){var o=Jf(t,r),s=o[0],a=o[1],l=new Uint8Array(t*r*4);return Oe(n,e,function(){return n.readPixels(0,0,s,a,i.downloadTextureFormat,n.UNSIGNED_BYTE,l)}),new Float32Array(l.buffer)}function Qj(n,e,t,r,i,o,s,a){var l=n,u=new Float32Array(function(f,p){var m=Yu(f,p);return m[0]*m[1]*4}(o,s));return l.bindBuffer(l.PIXEL_PACK_BUFFER,e),l.getBufferSubData(l.PIXEL_PACK_BUFFER,0,u),l.bindBuffer(l.PIXEL_PACK_BUFFER,null),u}function Zj(n,e,t,r){var i=new Float32Array(t*r*4);return Oe(n,e,function(){return n.readPixels(0,0,r,t,n.RGBA,n.FLOAT,i)}),i}var eT=function(){function n(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];var t=he().getNumber("WEBGL_VERSION");e!=null?(this.gl=e,IA(t,e)):this.gl=zi(t);var r="WEBGL_color_buffer_float";if(he().getNumber("WEBGL_VERSION")===1){if(this.textureFloatExtension=kh(this.gl,this.debug,"OES_texture_float"),Vr(this.gl,"OES_texture_half_float"))this.textureHalfFloatExtension=kh(this.gl,this.debug,"OES_texture_half_float");else if(he().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(r),Vr(this.gl,"EXT_color_buffer_half_float"))this.colorBufferHalfFloatExtension=kh(this.gl,this.debug,"EXT_color_buffer_half_float");else if(he().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(r="EXT_color_buffer_float",Vr(this.gl,r))this.colorBufferFloatExtension=this.gl.getExtension(r);else{if(!Vr(this.gl,"EXT_color_buffer_half_float"))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension("EXT_color_buffer_half_float")}this.vertexBuffer=Bj(this.gl,this.debug),this.indexBuffer=zj(this.gl,this.debug),this.framebuffer=VA(this.gl,this.debug),this.textureConfig=rv(this.gl,this.textureHalfFloatExtension)}return Object.defineProperty(n.prototype,"debug",{get:function(){return he().getBool("DEBUG")},enumerable:!0,configurable:!0}),n.prototype.dispose=function(){var e=this;if(!this.disposed){this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");var t=this.gl;Oe(t,this.debug,function(){return t.finish()}),Oe(t,this.debug,function(){return t.bindFramebuffer(t.FRAMEBUFFER,null)}),Oe(t,this.debug,function(){return t.deleteFramebuffer(e.framebuffer)}),Oe(t,this.debug,function(){return t.bindBuffer(t.ARRAY_BUFFER,null)}),Oe(t,this.debug,function(){return t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null)}),Oe(t,this.debug,function(){return t.deleteBuffer(e.indexBuffer)}),this.disposed=!0}},n.prototype.createFloat32MatrixTexture=function(e,t){return this.throwIfDisposed(),Wj(this.gl,this.debug,e,t,this.textureConfig)},n.prototype.createFloat16MatrixTexture=function(e,t){return this.throwIfDisposed(),Vj(this.gl,this.debug,e,t,this.textureConfig)},n.prototype.createUnsignedBytesMatrixTexture=function(e,t){return this.throwIfDisposed(),Uj(this.gl,this.debug,e,t,this.textureConfig)},n.prototype.uploadPixelDataToTexture=function(e,t){this.throwIfDisposed(),Kj(this.gl,this.debug,e,t)},n.prototype.uploadDenseMatrixToTexture=function(e,t,r,i){this.throwIfDisposed(),qj(this.gl,this.debug,e,t,r,i,this.textureConfig)},n.prototype.createFloat16PackedMatrixTexture=function(e,t){return this.throwIfDisposed(),Gj(this.gl,this.debug,e,t,this.textureConfig)},n.prototype.createPackedMatrixTexture=function(e,t){return this.throwIfDisposed(),Hj(this.gl,this.debug,e,t,this.textureConfig)},n.prototype.deleteMatrixTexture=function(e){var t=this;this.throwIfDisposed(),this.outputTexture===e&&(Fb(this.gl,this.debug,this.framebuffer),this.outputTexture=null),Oe(this.gl,this.debug,function(){return t.gl.deleteTexture(e)})},n.prototype.downloadByteEncodedFloatMatrixFromOutputTexture=function(e,t,r){var i=this;return this.downloadMatrixDriver(e,function(){return Jj(i.gl,i.debug,t,r,i.textureConfig)})},n.prototype.downloadPackedMatrixFromBuffer=function(e,t,r,i,o,s){return Qj(this.gl,e,0,0,0,o,s,this.textureConfig)},n.prototype.downloadFloat32MatrixFromBuffer=function(e,t){return Yj(this.gl,e,t)},n.prototype.createBufferFromTexture=function(e,t,r){this.bindTextureToFrameBuffer(e);var i=Xj(this.gl,this.debug,t,r,this.textureConfig);return this.unbindTextureToFrameBuffer(),i},n.prototype.createAndWaitForFence=function(){var e=this.createFence(this.gl);return this.pollFence(e)},n.prototype.createFence=function(e){var t,r,i=this;if(he().getBool("WEBGL_FENCE_API_ENABLED")){var o=e,s=o.fenceSync(o.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),r=function(){var a=o.clientWaitSync(s,0,0);return a===o.ALREADY_SIGNALED||a===o.CONDITION_SATISFIED},t=s}else he().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(t=this.beginQuery(),this.endQuery(),r=function(){return i.isQueryAvailable(t,he().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}):r=function(){return!0};return{query:t,isFencePassed:r}},n.prototype.downloadMatrixFromPackedTexture=function(e,t,r){var i=this;return this.downloadMatrixDriver(e,function(){return Zj(i.gl,i.debug,t,r)})},n.prototype.createProgram=function(e){this.throwIfDisposed();var t=this.gl,r=MA(t,this.debug,e),i=Lj(t,this.debug),o=OA(t,this.debug);return Oe(t,this.debug,function(){return t.attachShader(o,i)}),Oe(t,this.debug,function(){return t.attachShader(o,r)}),FA(t,this.debug,o),this.debug&&h0(t,this.debug,o),this.vertexAttrsAreBound||(this.setProgram(o),this.vertexAttrsAreBound=$j(t,this.debug,this.program,this.vertexBuffer)),o},n.prototype.deleteProgram=function(e){var t=this;this.throwIfDisposed(),e===this.program&&(this.program=null),e!=null&&Oe(this.gl,this.debug,function(){return t.gl.deleteProgram(e)})},n.prototype.setProgram=function(e){var t=this;this.throwIfDisposed(),this.program=e,this.program!=null&&this.debug&&h0(this.gl,this.debug,this.program),Oe(this.gl,this.debug,function(){return t.gl.useProgram(e)})},n.prototype.getUniformLocation=function(e,t,r){return r===void 0&&(r=!0),this.throwIfDisposed(),r?HA(this.gl,this.debug,e,t):GA(this.gl,e,t)},n.prototype.getAttributeLocation=function(e,t){var r=this;return this.throwIfDisposed(),Oe(this.gl,this.debug,function(){return r.gl.getAttribLocation(e,t)})},n.prototype.getUniformLocationNoThrow=function(e,t){return this.throwIfDisposed(),this.gl.getUniformLocation(e,t)},n.prototype.setInputMatrixTexture=function(e,t,r){this.throwIfDisposed(),this.throwIfNoProgram(),$A(this.gl,this.debug,this.program,e,t,r)},n.prototype.setOutputMatrixTexture=function(e,t,r){this.setOutputMatrixTextureDriver(e,r,t)},n.prototype.setOutputPackedMatrixTexture=function(e,t,r){this.throwIfDisposed();var i=Yu(t,r),o=i[0],s=i[1];this.setOutputMatrixTextureDriver(e,o,s)},n.prototype.setOutputMatrixWriteRegion=function(e,t,r,i){this.setOutputMatrixWriteRegionDriver(r,e,i,t)},n.prototype.setOutputPackedMatrixWriteRegion=function(e,t,r,i){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")},n.prototype.debugValidate=function(){this.program!=null&&h0(this.gl,this.debug,this.program),Ch(this.gl)},n.prototype.executeProgram=function(){this.throwIfDisposed(),this.throwIfNoProgram();var e=this.gl;this.debug&&this.debugValidate(),Oe(e,this.debug,function(){return e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0)})},n.prototype.blockUntilAllProgramsCompleted=function(){var e=this;this.throwIfDisposed(),Oe(this.gl,this.debug,function(){return e.gl.finish()})},n.prototype.getQueryTimerExtension=function(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=kh(this.gl,this.debug,he().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension},n.prototype.getQueryTimerExtensionWebGL2=function(){return this.getQueryTimerExtension()},n.prototype.getQueryTimerExtensionWebGL1=function(){return this.getQueryTimerExtension()},n.prototype.beginQuery=function(){if(he().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){var e=this.gl,t=this.getQueryTimerExtensionWebGL2(),r=e.createQuery();return e.beginQuery(t.TIME_ELAPSED_EXT,r),r}var i=this.getQueryTimerExtensionWebGL1(),o=i.createQueryEXT();return i.beginQueryEXT(i.TIME_ELAPSED_EXT,o),o},n.prototype.endQuery=function(){if(he().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")!==2){var e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}else{var t=this.gl,r=this.getQueryTimerExtensionWebGL2();t.endQuery(r.TIME_ELAPSED_EXT)}},n.prototype.waitForQueryAndGetTime=function(e){return Re(this,void 0,void 0,function(){var t=this;return je(this,function(r){switch(r.label){case 0:return[4,Rb(function(){return t.disposed||t.isQueryAvailable(e,he().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))})];case 1:return r.sent(),[2,this.getQueryTime(e,he().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))]}})})},n.prototype.getQueryTime=function(e,t){if(t===0)return null;if(t===2){var r=this.gl;return r.getQueryParameter(e,r.QUERY_RESULT)/1e6}var i=this.getQueryTimerExtensionWebGL1();return i.getQueryObjectEXT(e,i.QUERY_RESULT_EXT)/1e6},n.prototype.isQueryAvailable=function(e,t){if(t===0)return!0;if(t===2){var r=this.gl,i=this.getQueryTimerExtensionWebGL2(),o=r.getQueryParameter(e,r.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(i.GPU_DISJOINT_EXT)),o&&!this.disjoint}return o=(i=this.getQueryTimerExtensionWebGL1()).getQueryObjectEXT(e,i.QUERY_RESULT_AVAILABLE_EXT),this.disjoint==null&&(this.disjoint=this.gl.getParameter(i.GPU_DISJOINT_EXT)),o&&!this.disjoint},n.prototype.pollFence=function(e){var t=this;return new Promise(function(r){t.addItemToPoll(function(){return e.isFencePassed()},function(){return r()})})},n.prototype.pollItems=function(){for(var e=function(r){for(var i=0;i<r.length&&r[i]();++i);return i-1}(this.itemsToPoll.map(function(r){return r.isDoneFn})),t=0;t<=e;++t)(0,this.itemsToPoll[t].resolveFn)();this.itemsToPoll=this.itemsToPoll.slice(e+1)},n.prototype.addItemToPoll=function(e,t){var r=this;this.itemsToPoll.push({isDoneFn:e,resolveFn:t}),this.itemsToPoll.length>1||Rb(function(){return r.pollItems(),r.itemsToPoll.length===0})},n.prototype.bindTextureToFrameBuffer=function(e){this.throwIfDisposed(),f0(this.gl,this.debug,e,this.framebuffer),this.debug&&Ch(this.gl)},n.prototype.unbindTextureToFrameBuffer=function(){this.outputTexture!=null?(f0(this.gl,this.debug,this.outputTexture,this.framebuffer),this.debug&&Ch(this.gl)):Fb(this.gl,this.debug,this.framebuffer)},n.prototype.downloadMatrixDriver=function(e,t){this.bindTextureToFrameBuffer(e);var r=t();return this.unbindTextureToFrameBuffer(),r},n.prototype.setOutputMatrixTextureDriver=function(e,t,r){this.throwIfDisposed();var i=this.gl;f0(i,this.debug,e,this.framebuffer),this.debug&&Ch(i),this.outputTexture=e,Oe(i,this.debug,function(){return i.viewport(0,0,t,r)}),Oe(i,this.debug,function(){return i.scissor(0,0,t,r)})},n.prototype.setOutputMatrixWriteRegionDriver=function(e,t,r,i){var o=this;this.throwIfDisposed(),Oe(this.gl,this.debug,function(){return o.gl.scissor(e,t,r,i)})},n.prototype.throwIfDisposed=function(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")},n.prototype.throwIfNoProgram=function(){if(this.program==null)throw new Error("No GPU program is currently set.")},n}();function Yb(n,e){if(n.length!==e.length)throw Error("Binary was compiled with "+n.length+" inputs, but was executed with "+e.length+" inputs");n.forEach(function(t,r){var i=t.logicalShape,o=e[r],s=o.shape;if(!pn(i,s))throw Error("Binary was compiled with different shapes than the current args. Shapes "+i+" and "+s+" must match");if(!t.isUniform||!o.isUniform){var a=t.texShape,l=o.isUniform?null:o.texData.texShape;if(!pn(a,l))throw Error("Binary was compiled with different texture shapes than the current args. Shape "+a+" and "+l+" must match")}})}var tT=function(n,e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n;for(var r=t.filterWidth,i=t.inChannels,o=t.strideWidth,s=t.strideHeight,a=t.padInfo,l=t.outWidth,u=t.dilationWidth,f=t.dilationHeight,p=t.dataFormat,m=a.left,v=a.top,y=i*r,w=Pn(),_=p==="channelsLast",k=_?0:1,E=_?1:2,N="",S=0;S<=1;S++)for(var A=0;A<=1;A++)N+=`
          blockIndex = rc.y + `+A+`;
          pos = rc.x + `+S+`;

          if(blockIndex < `+n[1]+" && pos < "+n[0]+`) {
            offsetY = int(blockIndex / (`+l+")) * "+s+" - "+v+`;
            d0 = offsetY + `+f+" * (pos / "+y+`);

            if(d0 < `+e[k]+` && d0 >= 0) {

              offsetX = int(mod(float(blockIndex), `+l+".) * "+o+". - "+m+`.);
              d1 = offsetX + `+u+" * (int(mod(float(pos), "+y+".) / "+i+`.));

              if(d1 < `+e[E]+` && d1 >= 0) {

                ch = int(mod(float(pos), `+i+`.));

                if (`+_+`) {
                  innerDims = vec2(d1, ch);
                  result[`+(2*S+A)+`] = getChannel(
                    getA(d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[`+(2*S+A)+`] = getChannel(
                    getA(ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec2 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        `+N+`

        `+w.output+` = result;
      }
    `},nT=function(n,e,t,r,i){this.variableNames=["x"],this.outputShape=[];var o,s=e,a=n[3]-1;this.outputShape=n;var l="float("+t+") + float("+r+") * sum";o=i===.5?"inversesqrt("+l+")":i===1?"1.0/("+l+")":"exp(log("+l+") * float(-"+i+"));",this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -`+s+"; j <= "+s+`; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  `+a+`) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * `+o+`;
        setOutput(val);
      }
    `},rT=function(n,e,t,r,i){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=n,this.depth=n[3],this.depthRadius=e,this.bias=t,this.alpha=r,this.beta=i,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < `+this.depth+`; ++d) {
          int depthBegin = int(max(0.0, float(d - `+e+`)));
          int depthEnd = int(min(float(`+this.depth+`),
              float(d + `+e+` + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = `+this.depth+`;

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(`+r+") * norm + float("+t+`);

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(`+r+`)
                * float(`+i+`)
                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * `+i+`);
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `},iT=function(n,e,t,r,i){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;var o,s=e,a=n[3]-1;this.outputShape=n;var l="float("+t+") + float("+r+") * sum";o=i===.5?"inversesqrt("+l+")":i===1?"1.0/("+l+")":"exp(log("+l+") * float(-"+i+"));",this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < `+this.outputShape[3]+`;
        bool hasNextRow = c < `+this.outputShape[2]+`;

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - `+s+`;
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - `+s+"; j <= "+s+`; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(`+a+`));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * `+o+`;
        setOutput(result);
      }
    `},oT=function(n){this.variableNames=["dy","maxPos"],this.outputShape=n.inShape;var e=n.strideHeight,t=n.strideWidth,r=n.dilationHeight,i=n.effectiveFilterHeight,o=n.effectiveFilterWidth,s=i-1-n.padInfo.top,a=o-1-n.padInfo.left,l=i*o-1;this.userCode=`
      const ivec2 pads = ivec2(`+s+", "+a+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+i+`;
          wR += `+r+`) {
          float dyR = float(dyRCorner + wR) / `+e+`.0;

          if (dyR < 0.0 || dyR >= `+n.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < `+o+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+t+`.0;

            if (dyC < 0.0 || dyC >= `+n.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = `+l+` - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * `+o+` + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `},sT=function(n){this.variableNames=["dy","maxPos"],this.outputShape=n.inShape;var e=n.strideDepth,t=n.strideHeight,r=n.strideWidth,i=n.dilationDepth,o=n.dilationHeight,s=n.dilationWidth,a=n.effectiveFilterDepth,l=n.effectiveFilterHeight,u=n.effectiveFilterWidth,f=a-1-n.padInfo.front,p=l-1-n.padInfo.top,m=u-1-n.padInfo.left,v=a*l*u-1;this.userCode=`
      const ivec3 pads = ivec3(`+f+", "+p+", "+m+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < `+a+`;
           wD += `+i+`) {
          float dyD = float(dyDCorner + wD) / `+e+`.0;

          if (dyD < 0.0 || dyD >= `+n.outDepth+`.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < `+l+`;
              wR += `+o+`) {
            float dyR = float(dyRCorner + wR) / `+t+`.0;

            if (dyR < 0.0 || dyR >= `+n.outHeight+`.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < `+u+`;
                wC += `+s+`) {
              float dyC = float(dyCCorner + wC) / `+r+`.0;

              if (dyC < 0.0 || dyC >= `+n.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = `+v+` -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * `+l+" * "+u+` +
                  wR * `+u+` + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `},x0=function(n,e,t,r,i,o,s){t===void 0&&(t=!1),r===void 0&&(r=!1),i===void 0&&(i=!1),o===void 0&&(o=null),s===void 0&&(s=!1),this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e;var a=t?n[1]:n[2],l=Math.ceil(a/2),u=t?"i * 2, rc.y":"rc.y, i * 2",f=r?"rc.z, i * 2":"i * 2, rc.z",p=t?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],m=r?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"],v="",y="";o&&(v=s?`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          `+o+`
        }`:`vec4 activation(vec4 x) {
          `+o+`
        }`,y="result = activation(result);");var w=i?"result += getBiasAtOutCoords();":"";i&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+v+`

      const float sharedDimension = `+l+`.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        for (int i = 0; i < `+l+`; i++) {
          vec4 a = getMatrixA(rc.x, `+u+`);
          vec4 b = getMatrixB(rc.x, `+f+`);

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (`+p[0]+" * "+m[0]+`);
          result += (`+p[1]+" * "+m[1]+`);
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        `+w+`

        `+y+`

        setOutput(result);
      }
    `},aT=function(){function n(e,t,r){this.variableNames=["probs"],this.outputShape=[e,r],this.userCode=`
      uniform float seed;

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < `+(t-1)+`; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(`+(t-1)+`));
      }
    `}return n.prototype.getCustomSetupFunc=function(e){var t=this;return function(r,i){t.seedLoc==null&&(t.seedLoc=r.getUniformLocation(i,"seed")),r.gl.uniform1f(t.seedLoc,e)}},n}(),lT=function(n,e,t,r){this.variableNames=["indices"],this.outputShape=[n,e],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(`+r+"), float("+t+`),
                      float(index == coords.y)));
      }
    `},cT=function(n){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=n;var e=n.length;if(e===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{var t=lr("rc",e),r=kt(e),i=function(a,l,u){if(a===1)return"rc > "+l[0];for(var f="",p=a-2;p<a;p++)f+=u[p]+" >= "+l[p],p<a-1&&(f+="||");return f}(e,n,t),o=function(a,l,u,f){if(a===1)return"";var p=f.slice(-2);return`
    int r = `+p[0]+`;
    int c = `+p[1]+`;
    int rp1 = r + 1;
    int cp1 = c + 1;

    bool cEdge = cp1 >= `+l+`;
    bool rEdge = rp1 >= `+u+`;
  `}(e,n[n.length-1],n[n.length-2],t),s=function(a,l){var u=a.length,f=function(p,m){for(var v=[],y=0;y<=1;y++)for(var w=0;w<=1;w++){for(var _=(y===0?"r":"rp1")+", "+(w===0?"c":"cp1"),k=2;k<p;k++)_=m[m.length-1-k]+","+_;v.push(_)}return v}(u,l);return u===1?`getA(rc),
            rc + 1 >= `+a[0]+` ? 0. : getA(rc + 1),
            0, 0`:"getA("+f[0]+`),
          cEdge ? 0. : getA(`+f[1]+`),
          rEdge ? 0. : getA(`+f[2]+`),
          rEdge || cEdge ? 0. : getA(`+f[3]+")"}(n,t);this.userCode=`
        void main() {
          `+r+` rc = getOutputCoords();

          if(`+i+`) {
            setOutput(vec4(0));
          } else {
            `+o+`

            setOutput(vec4(`+s+`));
          }
        }
      `}},uT=function(n,e,t){this.variableNames=["x"],this.outputShape=e.map(function(l,u){return l[0]+n[u]+l[1]});var r=n.length,i=kt(r),o=e.map(function(l){return l[0]}).join(","),s=e.map(function(l,u){return l[0]+n[u]}).join(","),a=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r);this.userCode=r!==1?`
      `+i+" start = "+i+"("+o+`);
      `+i+" end = "+i+"("+s+`);

      void main() {
        `+i+` outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(float(`+t+`));
        } else {
          `+i+` coords = outC - start;
          setOutput(getX(`+a+`));
        }
      }
    `:`
        int start = `+o+`;
        int end = `+s+`;

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(float(`+t+`));
          } else {
            setOutput(getX(outC - start));
          }
        }
      `},dT=function(n,e,t){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e.map(function(_,k){return _[0]+n[k]+_[1]});for(var r=n.length,i=kt(r),o=e.map(function(_){return _[0]}).join(","),s=e.map(function(_,k){return _[0]+n[k]}).join(","),a=lr("rc",r),l=lr("source",r),u=a[r-1]+" < "+this.outputShape[r-1],f=r===1?"source":"vec2("+l.slice(-2).join()+")",p=[i+" rc = outputLoc;",a[r-1]+` += 1;
       if(`+u+`) {
      `,r===1?"":`}
       rc = outputLoc;
       `+a[r-2]+` += 1;
       if(`+a[r-2]+" < "+this.outputShape[r-2]+") {",r===1?"":"  "+a[r-1]+` += 1;
         if(`+u+") {"],m=r===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))",v="",y=0,w=r===1?2:4;y<w;y++)v+=`
        `+p[y]+`
        if (`+m+`) {
          result[`+y+"] = float("+t+`);
        } else {
          `+i+` source = rc - start;
          result[`+y+"] = getChannel(getX("+l.join()+"), "+f+`);
        }
      `;v+=r===1?"} ":"}}",this.userCode=`
      const `+i+" start = "+i+"("+o+`);
      const `+i+" end = "+i+"("+s+`);

      void main() {
        `+i+` outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        `+v+`
        setOutput(result);
      }
    `},y0=function(n,e,t){if(this.variableNames=["x"],e==="avg"&&t)throw new Error("Cannot compute positions for average pool.");var r=n.filterWidth,i=n.strideHeight,o=n.strideWidth,s=n.dilationHeight,a=n.dilationWidth,l=n.effectiveFilterHeight,u=n.effectiveFilterWidth,f=n.padInfo.top,p=n.padInfo.left;this.outputShape=n.outShape;var m=e==="avg",v="0.0";if(m||(v="-1.0 / 1e-20"),t)this.userCode=`
        const ivec2 strides = ivec2(`+i+", "+o+`);
        const ivec2 pads = ivec2(`+f+", "+p+`);

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < `+l+`;
              wR += `+s+`) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= `+n.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+u+`;
                wC += `+a+`) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= `+n.inWidth+`) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value >= currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = wR * `+u+` + wC;
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;else{var y=e+"("+e+"("+e+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";e==="avg"&&(y="avgValue / count");var w=4*Math.floor(r/4),_=r%4,k=`
      if (`+m+`) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = max(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(`+i+", "+o+`);
      const ivec2 pads = ivec2(`+f+", "+p+`);
      const float initializationValue = `+v+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= `+n.inWidth+`) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(`+v+`);
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < `+l+`;
            wR += `+s+`) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= `+n.inHeight+`) {
            continue;
          }

          for (int wC = 0; wC < `+w+`; wC += 4) {
            int xC = xCCorner + wC * `+a+`;

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+a+`, d),
              getValue(batch, xR, xC + 2 * `+a+`, d),
              getValue(batch, xR, xC + 3 * `+a+`, d)
            );

            `+k+`
          }

          int xC = xCCorner + `+w+`;
          if (`+(_===1)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            `+k+`
          } else if (`+(_===2)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+a+`, d),
              initializationValue,
              initializationValue
            );

            `+k+`
          } else if (`+(_===3)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+a+`, d),
              getValue(batch, xR, xC + 2 * `+a+`, d),
              initializationValue
            );

            `+k+`
          }
        }
        setOutput(`+y+`);
      }
    `}},b0=function(n,e,t){if(this.variableNames=["x"],e==="avg"&&t)throw new Error("Cannot compute positions for average pool.");var r=n.filterWidth,i=n.strideDepth,o=n.strideHeight,s=n.strideWidth,a=n.dilationDepth,l=n.dilationHeight,u=n.dilationWidth,f=n.effectiveFilterDepth,p=n.effectiveFilterHeight,m=n.effectiveFilterWidth,v=n.padInfo.front,y=n.padInfo.top,w=n.padInfo.left;this.outputShape=n.outShape;var _=e==="avg",k="0.0";if(_||(k="-1.0 / 1e-20"),t)this.userCode=`
        const ivec3 strides =
            ivec3(`+i+", "+o+", "+s+`);
        const ivec3 pads = ivec3(`+v+", "+y+", "+w+`);

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < `+f+`;
              wD += `+a+`) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= `+n.inDepth+`) {
              continue;
            }

            for (int wR = 0; wR < `+p+`;
                wR += `+l+`) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= `+n.inHeight+`) {
                continue;
              }

              for (int wC = 0; wC < `+m+`;
                  wC += `+u+`) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= `+n.inWidth+`) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value >= currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition =
                      wD * `+p+" * "+m+` +
                      wR * `+m+` + wC;;
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;else{var E=e+"("+e+"("+e+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";e==="avg"&&(E="avgValue / count");var N=4*Math.floor(r/4),S=r%4,A=`
      if (`+_+`) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = max(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(`+i+", "+o+", "+s+`);
      const ivec3 pads = ivec3(`+v+", "+y+", "+w+`);
      const float initializationValue = `+k+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= `+n.inWidth+`) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(`+k+`);
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < `+f+`;
            wD += `+a+`) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= `+n.inDepth+`) {
            continue;
          }

          for (int wR = 0; wR < `+p+`;
            wR += `+l+`) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= `+n.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+N+`; wC += 4) {
              int xC = xCCorner + wC * `+u+`;

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+u+`, ch),
                getValue(batch, xD, xR, xC + 2 * `+u+`, ch),
                getValue(batch, xD, xR, xC + 3 * `+u+`, ch)
              );

              `+A+`
            }

            int xC = xCCorner + `+N+`;
            if (`+(S===1)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              `+A+`
            } else if (`+(S===2)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+u+`, ch),
                initializationValue,
                initializationValue
              );

              `+A+`
            } else if (`+(S===3)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+u+`, ch),
                getValue(batch, xD, xR, xC + 2 * `+u+`, ch),
                initializationValue
              );

              `+A+`
            }
          }
          setOutput(`+E+`);
        }
      }
    `}},hT=function(n,e){this.variableNames=["x"];var t=n.windowSize,r=n.batchSize,i=n.inSize,o=Math.ceil(i/t);this.outputShape=[r,o];var s="0.0",a="";e==="prod"?s="1.0":e==="min"?(s="1.0 / 1e-20",a="min"):e==="max"&&(s="-1.0 / 1e-20",a="max");var l=e+"("+e+"("+e+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";e==="sum"?l="sumValue":e==="prod"?l="prodValue":e==="all"?l="allValue":e==="any"&&(l="anyValue");var u=4*Math.floor(t/4),f=t%4,p=`
      if (`+(e==="sum")+`) {
        sumValue += dot(values, ones);
      } else if (`+(e==="prod")+`) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = `+a+`(values, minMaxValue);
      }
    `,m="vec4";e==="all"?(s="1.0",p=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,m="bvec4"):e==="any"&&(s="0.0",p=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,m="bvec4");var v="";i%t>0&&(v=`
        if (inIdx < 0 || inIdx >= `+i+`) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = `+s+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        `+v+`
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * `+t+`;

        vec4 minMaxValue = vec4(`+s+`);
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < `+u+`; i += 4) {
          int inIdx = inOffset + i;
          `+m+" values = "+m+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          `+p+`
        }

        int inIdx = inOffset + `+u+`;
        if (`+(f===1)+`) {
          `+m+" values = "+m+`(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          `+p+`
        } else if (`+(f===2)+`) {
          `+m+" values = "+m+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          `+p+`
        } else if (`+(f===3)+`) {
          `+m+" values = "+m+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          `+p+`
        }
        setOutput(`+l+`);
      }
    `},fT=function(n,e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n;for(var t="",r=0;r<4;r++){var i="thisRC = rc;";r%2==1&&(i+="thisRC.z += 1;"),r>1&&(i+="thisRC.y += 1;"),t+=`
        `+i+`
        `+(r>0?"if(thisRC.y < rows && thisRC.z < cols){":"")+`
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[`+r+`] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        `+(r>0?"}":"")+`
      `}this.userCode=`
      
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      `+ma(["r","c","d"],e)+`
      return ivec3(r, c, d);
    }
  
      `+fv(n)+`

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = `+n[1]+`;
        int cols = `+n[2]+`;

        `+t+`

        setOutput(result);
      }
    `},pT=function(n,e,t){this.variableNames=["dy"],this.outputShape=[],this.outputShape=e.shape;var r=e.shape,i=r[1],o=r[2],s=n.shape,a=s[1],l=s[2],u=[t&&a>1?i-1:i,t&&l>1?o-1:o],f=[t&&a>1?a-1:a,t&&l>1?l-1:l],p=u[0]/f[0],m=u[1]/f[1],v=1/p,y=1/m,w=2*Math.ceil(v)+2,_=2*Math.ceil(y)+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(`+p+`);
        const float widthScale = float(`+m+`);

        const float invHeightScale = float(`+v+`);
        const float invWidthScale = float(`+y+`);

        const int winHeight = int(`+w+`);
        const int winWidth = int(`+_+`);

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= `+a+`) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= `+l+`) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), `+(i-1)+`.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), `+(o-1)+`.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `},mT=function(n,e,t,r){this.variableNames=["A"],this.outputShape=[];var i=n[0],o=n[1],s=n[2],a=n[3];this.outputShape=[i,e,t,a];var l=[r&&e>1?o-1:o,r&&t>1?s-1:s],u=[r&&e>1?e-1:e,r&&t>1?t-1:t];this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          `+l[0]/u[0]+`,
          `+l[1]/u[1]+`);
      const vec2 inputShapeRC = vec2(`+o+".0, "+s+`.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(sourceFracIndexRC);
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `},gT=function(n,e,t,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];var i=n[0],o=n[1],s=n[2],a=n[3];this.outputShape=[i,e,t,a];var l=[r&&e>1?o-1:o,r&&t>1?s-1:s],u=[r&&e>1?e-1:e,r&&t>1?t-1:t];this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          `+l[0]/u[0]+`,
          `+l[1]/u[1]+`,
          `+l[1]/u[1]+`);
      const vec3 inputShapeRC = vec3(`+o+".0, "+s+`.0,
                                     `+s+`.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = vec3(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(sourceFracIndexRC);
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < `+(a-1)+`;
        bool hasNextRow = coords.z < `+(t-1)+`;

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `},vT=function(n,e,t){this.variableNames=["dy"],this.outputShape=[],this.outputShape=e.shape;var r=e.shape,i=r[1],o=r[2],s=n.shape,a=s[1],l=s[2],u=[t&&a>1?i-1:i,t&&l>1?o-1:o],f=[t&&a>1?a-1:a,t&&l>1?l-1:l],p=u[0]/f[0],m=u[1]/f[1],v=1/p,y=1/m,w=2*Math.ceil(v)+2,_=2*Math.ceil(y)+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(`+p+`);
        const float widthScale = float(`+m+`);

        const float invHeightScale = float(`+v+`);
        const float invWidthScale = float(`+y+`);

        const int winHeight = int(`+w+`);
        const int winWidth = int(`+_+`);

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= `+a+`) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= `+l+`) {
              continue;
            }

            float sourceFracRow =
              float(`+u[0]+`) *
                (float(dyR) / float(`+f[0]+`));

            float sourceFracCol =
                float(`+u[1]+`) *
                  (float(dyC) / float(`+f[1]+`));

            int sourceNearestRow = int(min(
                float(int(`+i+`) - 1),
                `+t+` ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(`+o+`) - 1),
                `+t+` ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `},xT=function(n,e,t,r){this.variableNames=["A"],this.outputShape=[];var i=n[0],o=n[1],s=n[2],a=n[3];this.outputShape=[i,e,t,a];var l=[r&&e>1?o-1:o,r&&t>1?s-1:s],u=[r&&e>1?e-1:e,r&&t>1?t-1:t],f=r?"0.5":"0.0";this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          `+l[0]/u[0]+`,
          `+l[1]/u[1]+`);
      const vec2 inputShapeRC = vec2(`+o+".0, "+s+`.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + `+f+`)));

        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `},yT=function(n,e){this.variableNames=["x"];var t=n.length;if(t>4)throw new Error("WebGL backend: Reverse of rank-"+t+" tensor is not yet supported");if(this.outputShape=n,t!==1){var r=n.map(function(o,s){return function(a){return e.indexOf(a)!==-1&&n[a]!==1?n[a]+" - coords["+a+"] - 1":"coords["+a+"]"}(s)}).join(","),i=kt(t);this.userCode=`
      void main() {
        `+i+` coords = getOutputCoords();
        setOutput(getX(`+r+`));
      }
    `}else this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(`+n[0]+` - coord - 1));
        }
      `},bT=function(n,e){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;var t=n.length;if(t>4)throw new Error("WebGL backend: Reverse of rank-"+t+" tensor is not yet supported");this.outputShape=n;var r=lr("rc",t),i=r[t-1]+" + 1 < "+this.outputShape[t-1],o=r[t-2]+" + 1 < "+this.outputShape[t-2],s=kt(t);function a(l){var u=n.map(function(f,p){return function(m,v){return e.indexOf(m)!==-1&&n[m]!==1?n[m]+" - "+v[m]+" - 1":""+v[m]}(p,l)});return"getChannel(getX("+u.join(",")+"), vec2("+u.slice(-2).join(",")+"))"}this.userCode=t===1?`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(`+n[0]+` - rc - 1),
            `+n[0]+` - rc - 1);
          if(`+i+`){
              result.g = getChannel(getX(`+n[0]+` - (rc  + 1) - 1),
                `+n[0]+` - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:`
        void main() {
          `+s+` rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = `+function(l){return a(l)}(r.slice())+`;
          if(`+i+`){
            result.g = `+function(l){return l[t-1]="("+l[t-1]+" + 1)",a(l)}(r.slice())+`;
          }
          if(`+o+`) {
            result.b = `+function(l){return l[t-2]="("+l[t-2]+" + 1)",a(l)}(r.slice())+`;
            if(`+i+`) {
              result.a = `+function(l){return l[t-1]="("+l[t-1]+" + 1)",l[t-2]="("+l[t-2]+" + 1)",a(l)}(r.slice())+`;
            }
          }
          setOutput(result);
        }
    `},Jb=function(n,e,t,r,i,o,s){this.variableNames=["updates","indices","defaultValue"],this.outputShape=o;var a=kt(i.length),l=kt(o.length),u="";t===1?u="i":t===2&&(u="i, j");var f="getIndices("+u+")",p="";r===1?p="i":r===2&&(p="i, coords[1]");var m="getUpdates("+p+")",v=e>1?"strides[j]":"strides";this.userCode=`
        `+a+" strides = "+a+"("+i+`);

        void main() {
          `+l+` coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < `+n+`; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < `+e+`; j++) {
              int index = round(`+f+`);
              flattenedIndex += index * `+v+`;
            }
            if (flattenedIndex == coords[0]) {
              sum += `+m+`;
              found = true;
            }
          }
          setOutput(mix(getDefaultValue(), sum, float(found)));
        }
      `},wT=function(n,e){this.variableNames=["x","segmentIds"];var t=n.windowSize,r=n.batchSize,i=n.inSize,o=n.numSegments,s=o*Math.ceil(i/t);this.outputShape=[r,s];var a=4*Math.floor(t/4),l=t%4,u=`
        sumValue += dot(values, segFilter);
    `,f="";i%t>0&&(f=`
        if (inIdx < 0 || inIdx >= `+i+`) {
          return initializationValue;
        }
      `);var p="";i%t>0&&(p=`
        if (inIdx < 0 || inIdx >= `+i+`) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = 0.0;

      float getValue(int batch, int inIdx) {
        `+f+`
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        `+p+`
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          `+o+")) * float("+t+`));
        int currentSeg = int(mod(float(outIdx), float(`+o+`)));

        float sumValue = 0.0;

        for (int i = 0; i < `+a+`; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          `+u+`
        }

        int inIdx = inOffset + `+a+`;
        if (`+(l===1)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          `+u+`
        } else if (`+(l===2)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          `+u+`
        } else if (`+(l===3)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          `+u+`
        }
        setOutput(sumValue);
      }
    `},_T=function(n,e,t){var r,i;if(this.variableNames=["c","a","b"],this.outputShape=e,t>4)throw Error("Where for rank "+t+" is not yet supported");if(t===1)i="resRC",r="resRC";else{for(var o=["resRC.x","resRC.y","resRC.z","resRC.w"],s=[],a=[],l=0;l<e.length;l++)a.push(""+o[l]),l<n&&s.push(""+o[l]);r=s.join(),i=a.join()}var u=kt(t);this.userCode=`
      void main() {
        `+u+` resRC = getOutputCoords();
        float cVal = getC(`+r+`);
        if (cVal >= 1.0) {
          setOutput(getA(`+i+`));
        } else {
          setOutput(getB(`+i+`));
        }
      }
    `},kT=function(){function n(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;var t,r=kt(this.rank),i="uniform int start["+this.rank+"];",o=function(s){if(s===1)return"sourceLoc";if(s<=6)return w0.slice(0,s).map(function(a){return"sourceLoc."+a}).join(",");throw Error("Slicing for rank "+s+" is not yet supported")}(this.rank);t=`
        `+r+` sourceLoc;
        `+r+` coords = getOutputCoords();
        `+e.map(function(s,a){return"sourceLoc."+w0[a]+" = start["+a+"] + coords."+w0[a]+";"}).join(`
`)+`
      `,this.userCode=`
      `+i+`
      void main() {
        `+t+`
        setOutput(getSource(`+o+`));
      }
    `}return n.prototype.getCustomSetupFunc=function(e){var t=this;if(e.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+e.length+")");return function(r,i){t.startLoc==null&&(t.startLoc=r.getUniformLocationNoThrow(i,"start"),t.startLoc==null)||r.gl.uniform1iv(t.startLoc,e)}},n}(),w0=["x","y","z","w","u","v"],CT=function(){function n(e){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.rank=e.length;var t=kt(this.rank),r=lr("coords",this.rank),i=lr("sourceLoc",this.rank),o=this.rank===1?"sourceLoc":"vec2("+i.slice(-2).join()+")",s="getChannel(getSource("+i.join()+"), "+o+")",a=`
      result.x = `+s+`;
      if (++`+r[this.rank-1]+" < "+e[this.rank-1]+`) {
        ++`+i[this.rank-1]+`;
        result.y = `+s+`;
        --`+i[this.rank-1]+`;
      }
    `,l=this.rank===1?"":`
      --`+r[this.rank-1]+`;
      if (++`+r[this.rank-2]+" < "+e[this.rank-2]+`) {
        ++`+i[this.rank-2]+`;
        result.z = `+s+`;
        if (++`+r[this.rank-1]+" < "+e[this.rank-1]+`) {
          ++`+i[this.rank-1]+`;
          result.w = `+s+`;
        }
      }
    `,u=this.rank<=4?`sourceLoc = coords +
            `+t+"("+e.map(function(f,p){return"start["+p+"]"}).join()+");":e.map(function(f,p){return i[p]+" = "+r[p]+" + start["+p+"];"}).join(`
`);this.userCode=`
      uniform int start[`+this.rank+`];
      void main() {
        `+t+` coords = getOutputCoords();
        `+t+` sourceLoc;
        `+u+`
        vec4 result = vec4(0.);
        `+a+`
        `+l+`
        setOutput(result);
      }
    `}return n.prototype.getCustomSetupFunc=function(e){var t=this;if(e.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+e.length+")");return function(r,i){t.startLoc==null&&(t.startLoc=r.getUniformLocationNoThrow(i,"start"),t.startLoc==null)||r.gl.uniform1iv(t.startLoc,e)}},n}(),ET=function(n,e,t){this.variableNames=["x"],this.outputShape=t;var r=t.length,i=kt(t.length),o=kt(t.length),s="";if(r===1)s="coords * strides + begin";else{var a=0;s=t.map(function(l,u){return a++,t.length===1?"coords * strides["+u+"] + begin["+u+"]":"coords["+(a-1)+"] * strides["+u+"] + begin["+u+"]"}).join(",")}this.userCode=`
      `+i+" begin = "+i+"("+n+`);
      `+i+" strides = "+i+"("+e+`);

      void main() {
        `+o+` coords = getOutputCoords();
        setOutput(getX(`+s+`));
      }
    `},NT=function(){function n(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}return n.prototype.acquireTexture=function(e,t,r){var i,o=Qb(t,r),s=Zb(e,o,r);if(s in this.freeTextures||(this.freeTextures[s]=[]),s in this.usedTextures||(this.usedTextures[s]=[]),this.freeTextures[s].length>0){this.numFreeTextures--,this.numUsedTextures++,this.log();var a=this.freeTextures[s].shift();return this.usedTextures[s].push(a),a}return this.numUsedTextures++,this.log(),o===_r.PACKED_2X2_FLOAT32?i=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):o===_r.PACKED_2X2_FLOAT16?i=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):o===_r.UNPACKED_FLOAT32?i=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):o===_r.UNPACKED_FLOAT16?i=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):o===_r.PACKED_4X1_UNSIGNED_BYTE&&(i=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[s].push(i),i},n.prototype.releaseTexture=function(e,t,r,i){if(this.freeTextures!=null){var o=Zb(t,Qb(r,i),i);o in this.freeTextures||(this.freeTextures[o]=[]),this.freeTextures[o].push(e),this.numFreeTextures++,this.numUsedTextures--;var s=this.usedTextures[o],a=s.indexOf(e);if(a<0)throw new Error("Cannot release a texture that was never provided by this texture manager");s.splice(a,1),this.log()}},n.prototype.log=function(){if(this.logEnabled){var e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",this.numFreeTextures+" / "+this.numUsedTextures,"("+e+")")}},n.prototype.getNumUsedTextures=function(){return this.numUsedTextures},n.prototype.getNumFreeTextures=function(){return this.numFreeTextures},n.prototype.dispose=function(){var e=this;if(this.freeTextures!=null){for(var t in this.freeTextures)this.freeTextures[t].forEach(function(r){e.gpgpu.deleteMatrixTexture(r)});for(var t in this.usedTextures)this.usedTextures[t].forEach(function(i){e.gpgpu.deleteMatrixTexture(i)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0}},n}();function Qb(n,e){if(n===kr.UPLOAD)return _r.PACKED_2X2_FLOAT32;if(n===kr.RENDER||n==null)return function(t){return he().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?t?_r.PACKED_2X2_FLOAT32:_r.UNPACKED_FLOAT32:t?_r.PACKED_2X2_FLOAT16:_r.UNPACKED_FLOAT16}(e);if(n===kr.DOWNLOAD||n===kr.PIXELS)return _r.PACKED_4X1_UNSIGNED_BYTE;throw new Error("Unknown logical texture type "+n)}function Zb(n,e,t){return n[0]+"_"+n[1]+"_"+e+"_"+t}var ST=function(n,e){this.variableNames=["A"];for(var t=new Array(n.length),r=0;r<t.length;r++)t[r]=n[r]*e[r];this.outputShape=t,this.rank=t.length;var i=kt(this.rank),o=function(s){var a=s.length;if(a>5)throw Error("Tile for rank "+a+" is not yet supported");if(a===1)return"imod(resRC, "+s[0]+")";for(var l=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],u=[],f=0;f<s.length;f++)u.push("imod("+l[f]+", "+s[f]+")");return u.join()}(n);this.userCode=`
      void main() {
        `+i+` resRC = getOutputCoords();
        setOutput(getA(`+o+`));
      }
    `},IT=function(n,e){this.variableNames=["A"];for(var t=new Array(n.length),r=0;r<t.length;r++)t[r]=n[e[r]];this.outputShape=t,this.rank=t.length;var i=kt(this.rank),o=function(s){var a=s.length;if(a>6)throw Error("Transpose for rank "+a+" is not yet supported");for(var l=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],u=new Array(a),f=0;f<s.length;f++)u[s[f]]=l[f];return u.join()}(e);this.userCode=`
    void main() {
      `+i+` resRC = getOutputCoords();
      setOutput(getA(`+o+`));
    }
    `},AT=function(n,e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;for(var t=new Array(n.length),r=0;r<t.length;r++)t[r]=n[e[r]];if(this.outputShape=t,this.rank=t.length,this.rank>6)throw Error("Packed transpose for rank "+this.rank+" is not yet supported.");var i=kt(this.rank),o=Jk("rc",this.rank),s=new Array(this.rank);for(r=0;r<e.length;r++)s[e[r]]=o[r];var a="vec2("+s.slice(-2).join()+")",l="++"+o[this.rank-1]+" < "+t[this.rank-1],u="getChannel(getA("+s.join()+"), "+a+")";this.userCode=`
    void main() {
      `+i+` rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = `+u+`;
      if(`+l+`) {
        result[1] = `+u+`;
      }
      --`+o[this.rank-1]+`;
      if(++`+o[this.rank-2]+" < "+t[this.rank-2]+`) {
        result[2] = `+u+`;
        if(`+l+`) {
          result[3] = `+u+`;
        }
      }
      setOutput(result);
    }
    `},pv=1.7580993408473768,mv=1.0507009873554805,Ke=function(n,e){this.variableNames=["A"],this.outputShape=n,this.userCode=`
      float unaryOperation(float x) {
        `+e+`
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `},fi="if (isnan(x)) return x;",RT="return x;",e2="return abs(x);",n4=fi+`
  return (x < 0.0) ? 0.0 : x;
`,r4=fi+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,i4="return (x >= 0.0) ? x : (exp(x) - 1.0);",jT=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = `+pv+`;
  float scale = `+mv+`;
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,t2="return -x;",n2="return ceil(x);",r2="return floor(x);",i2="return exp(x);",o2="return exp(x) - 1.0;",TT=fi+`
  return sin(x);
`,DT=fi+`
  return cos(x);
`,MT=fi+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,PT=fi+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,OT=fi+`
  return atan(x);
`,FT=fi+"return log(x + sqrt(x * x + 1.0));",LT=fi+`
  if (x < 1.0) return NAN;
  return log(x + sqrt(x * x - 1.0));`,BT=fi+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
  return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,Ih="return x;",zT="return x;",o4=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,s4=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,a4=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,Jc=function(n,e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n,this.userCode=`
      vec4 unaryOperation(vec4 x) {
        `+e+`
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `},WT=function(n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=n;var e=n.length,t=lr("rc",e),r=kt(e),i=function(a,l){if(a===1)return"rc";for(var u="",f=0;f<a;f++)u+=l[f],f<a-1&&(u+=",");return u}(e,t),o=t.slice(-2),s=e<=1?"rc":"vec2("+o.join(",")+")";this.userCode=`
      void main() {
        `+r+` rc = getOutputCoords();
        vec4 packedInput = getA(`+i+`);

        setOutput(getChannel(packedInput, `+s+`));
      }
    `},Ah={};function Rh(n,e){if(e===void 0&&(e=!1),n==="linear")return e?zT:RT;if(n==="relu")return e?o4:n4;if(n==="elu")return e?a4:i4;if(n==="relu6")return e?s4:r4;if(n==="prelu")return e?t4:e4;throw new Error("Activation "+n+" has not been implemented for the WebGL backend.")}var VT=600,UT=function(n){function e(t){var r,i=n.call(this)||this;if(i.pendingRead=new WeakMap,i.pendingDisposal=new WeakSet,i.dataRefCount=new WeakMap,i.numBytesInGPU=0,i.uploadWaitMs=0,i.downloadWaitMs=0,i.warnedAboutMemory=!1,i.pendingDeletes=0,i.disposed=!1,!he().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");if(t==null){var o=zi(he().getNumber("WEBGL_VERSION"));i.binaryCache=((r=he().getNumber("WEBGL_VERSION"))in Ah||(Ah[r]={}),Ah[r]),i.gpgpu=new eT(o),i.canvas=o.canvas,i.gpgpuCreatedLocally=!0}else i.gpgpu=t,i.binaryCache={},i.gpgpuCreatedLocally=!1,i.canvas=t.gl.canvas;return i.textureManager=new NT(i.gpgpu),i.numMBBeforeWarning=he().global.screen==null?1024:he().global.screen.height*he().global.screen.width*window.devicePixelRatio*VT/1024/1024,i.texData=new Vk(i,Z),i}return hi(e,n),e.prototype.numDataIds=function(){return this.texData.numDataIds()+(this.cpuBackend?this.cpuBackend.numDataIds():0)-this.pendingDeletes},e.prototype.write=function(t,r,i){if(he().getBool("DEBUG")&&this.checkNumericalProblems(t),i==="complex64"&&t!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");var o={};return this.texData.set(o,{shape:r,dtype:i,values:t,usage:kr.UPLOAD}),o},e.prototype.move=function(t,r,i,o){if(he().getBool("DEBUG")&&this.checkNumericalProblems(r),o==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(t,{shape:i,dtype:o,values:r,usage:kr.UPLOAD})},e.prototype.readSync=function(t){var r=this.texData.get(t),i=r.values,o=r.dtype,s=r.complexTensors,a=r.slice,l=r.shape,u=r.isPacked;if(a!=null){var f=void 0;f=u?new Jc(l,Ih):new Ke(l,Ih);var p=this.runWebGLProgram(f,[{dataId:t,shape:l,dtype:o}],o),m=this.readSync(p.dataId);return this.disposeData(p.dataId),m}if(i!=null)return this.convertAndCacheOnCPU(t);if(o==="string")return i;var v,y,w=this.activeTimers!=null;return w&&(v=Ai()),o==="complex64"?y=yg(s.real.dataSync(),s.imag.dataSync()):y=this.getValuesFromTexture(t),w&&(this.downloadWaitMs+=Ai()-v),this.convertAndCacheOnCPU(t,y)},e.prototype.read=function(t){return Re(this,void 0,void 0,function(){var r,i,o,s,a,l,u,f,p,m,v,y,w,_,k,E,N,S,A,P,D,j;return je(this,function(T){switch(T.label){case 0:if(this.pendingRead.has(t))return r=this.pendingRead.get(t),[2,new Promise(function(M){return r.push(M)})];if(i=this.texData.get(t),o=i.values,s=i.shape,a=i.slice,l=i.dtype,u=i.complexTensors,f=i.isPacked,a!=null)return p=void 0,p=f?new Jc(s,Ih):new Ke(s,Ih),m=this.runWebGLProgram(p,[{dataId:t,shape:s,dtype:l}],l),v=this.read(m.dataId),this.disposeData(m.dataId),[2,v];if(o!=null)return[2,this.convertAndCacheOnCPU(t)];if(!he().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&he().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");return y=null,l!=="complex64"&&he().get("WEBGL_BUFFER_SUPPORTED")&&(w=this.decode(t),_=this.texData.get(w.dataId),y=(j=this.gpgpu).createBufferFromTexture.apply(j,[_.texture].concat(gu(s)))),this.pendingRead.set(t,[]),l==="complex64"?[3,2]:[4,this.gpgpu.createAndWaitForFence()];case 1:T.sent(),T.label=2;case 2:return l!=="complex64"?[3,4]:[4,Promise.all([u.real.data(),u.imag.data()])];case 3:return E=T.sent(),N=E[0],S=E[1],k=yg(N,S),[3,5];case 4:y==null?k=this.getValuesFromTexture(t):(A=Me(s),k=this.gpgpu.downloadFloat32MatrixFromBuffer(y,A)),T.label=5;case 5:return w!=null&&this.disposeData(w.dataId),P=this.convertAndCacheOnCPU(t,k),D=this.pendingRead.get(t),this.pendingRead.delete(t),D.forEach(function(M){return M(P)}),this.pendingDisposal.has(t)&&(this.pendingDisposal.delete(t),this.disposeData(t),this.pendingDeletes--),[2,P]}})})},e.prototype.checkNumericalProblems=function(t){if(t!=null)for(var r=0;r<t.length;r++){var i=t[r];if(!jA(i))throw he().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error("The value "+i+" cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'"):Error("The value "+i+" cannot be represented on this device.")}},e.prototype.getValuesFromTexture=function(t){var r,i=this.texData.get(t),o=i.shape,s=i.dtype,a=i.isPacked,l=Me(o);if(he().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){var u=this.decode(t),f=this.texData.get(u.dataId),p=(r=this.gpgpu).downloadMatrixFromPackedTexture.apply(r,[f.texture].concat(gu(o))).subarray(0,l);return this.disposeData(u.dataId),p}var m=he().getBool("WEBGL_PACK")&&a===!0,v=m?p0(o):o,y=m?new Rj(v):new Aj(v),w=this.runWebGLProgram(y,[{shape:v,dtype:s,dataId:t}],"float32"),_=this.texData.get(w.dataId),k=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(_.texture,_.texShape[0],_.texShape[1]).subarray(0,l);return this.disposeData(w.dataId),k},e.prototype.time=function(t){return Re(this,void 0,void 0,function(){var r,i,o,s,a,l,u;return je(this,function(f){switch(f.label){case 0:return r=this.activeTimers,i=[],o=!1,this.programTimersStack==null?(this.programTimersStack=i,o=!0):this.activeTimers.push(i),this.activeTimers=i,t(),s=ql(this.activeTimers.map(function(p){return p.query})).filter(function(p){return p!=null}),a=ql(this.activeTimers.map(function(p){return p.name})).filter(function(p){return p!=null}),this.activeTimers=r,o&&(this.programTimersStack=null),l={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null},he().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?[4,Promise.all(s)]:[3,2];case 1:return u=f.sent(),l.kernelMs=dA(u),l.getExtraProfileInfo=function(){return u.map(function(p,m){return{name:a[m],ms:p}}).map(function(p){return p.name+": "+p.ms}).join(", ")},[3,3];case 2:l.kernelMs={error:"WebGL query timers are not supported in this environment."},f.label=3;case 3:return this.uploadWaitMs=0,this.downloadWaitMs=0,[2,l]}})})},e.prototype.memory=function(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU}},e.prototype.startTimer=function(){return he().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:Ai(),endMs:null}},e.prototype.endTimer=function(t){return he().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),t):(t.endMs=Ai(),t)},e.prototype.getQueryTime=function(t){return Re(this,void 0,void 0,function(){var r;return je(this,function(i){return he().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?[2,this.gpgpu.waitForQueryAndGetTime(t)]:[2,(r=t).endMs-r.startMs]})})},e.prototype.disposeData=function(t){if(!this.pendingDisposal.has(t)){if(this.pendingRead.has(t))return this.pendingDisposal.add(t),void this.pendingDeletes++;if(this.texData.has(t)){this.releaseGPUData(t);var r=this.texData.get(t).complexTensors;r!=null&&(r.real.dispose(),r.imag.dispose()),this.texData.delete(t)}}},e.prototype.releaseGPUData=function(t){var r=this.texData.get(t),i=r.texture,o=r.dtype,s=r.texShape,a=r.usage,l=r.isPacked,u=r.slice,f=u&&u.origDataId||t,p=this.dataRefCount.get(f);p>1?this.dataRefCount.set(f,p-1):(this.dataRefCount.delete(f),i!=null&&(this.numBytesInGPU-=this.computeBytes(s,o),this.textureManager.releaseTexture(i,s,a,l)));var m=this.texData.get(t);m.texture=null,m.texShape=null,m.isPacked=!1,m.slice=null},e.prototype.getTexture=function(t){return this.uploadToGPU(t),this.texData.get(t).texture},e.prototype.getDataInfo=function(t){return this.texData.get(t)},e.prototype.getCPUBackend=function(){return he().getBool("WEBGL_CPU_FORWARD")?(this.cpuBackend==null&&(this.cpuBackend=Z.findBackend("cpu")),this.cpuBackend):null},e.prototype.shouldExecuteOnCPU=function(t,r){var i=this;return r===void 0&&(r=128),this.getCPUBackend()!=null&&t.every(function(o){return i.texData.get(o.dataId).texture==null&&o.size<r})},e.prototype.getGPGPUContext=function(){return this.gpgpu},e.prototype.complex=function(t,r){var i=this.makeOutput(t.shape,"complex64");return this.texData.get(i.dataId).complexTensors={real:Z.keep(t.clone()),imag:Z.keep(r.clone())},i},e.prototype.real=function(t){return this.texData.get(t.dataId).complexTensors.real.clone()},e.prototype.imag=function(t){return this.texData.get(t.dataId).complexTensors.imag.clone()},e.prototype.slice=function(t,r,i){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.slice(t,r,i);if(Me(i)===0)return kn([],i,t.dtype);var o=this.texData.get(t.dataId).isPacked,s=zk(t.shape,r,i);if(o||!s){var a=he().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new CT(i):new kT(i),l=a.getCustomSetupFunc(r);return this.compileAndRun(a,[t],null,l)}return this.uploadToGPU(t.dataId),this.shallowSlice(t,r,i)},e.prototype.shallowSlice=function(t,r,i){var o=this.texData.get(t.dataId),s=this.makeOutput(i,t.dtype),a=this.texData.get(s.dataId);Object.assign(a,o),a.shape=i,a.dtype=t.dtype;var l=Wk(r,t.strides);o.slice&&(l+=o.slice.flatOffset),a.slice={flatOffset:l,origDataId:o.slice&&o.slice.origDataId||t.dataId};var u=this.dataRefCount.get(a.slice.origDataId)||1;return this.dataRefCount.set(a.slice.origDataId,u+1),s},e.prototype.stridedSlice=function(t,r,i,o){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.stridedSlice(t,r,i,o);var s=lv(r,i,o);if(s.some(function(l){return l===0}))return kn([],s);var a=new ET(r,o,s);return this.compileAndRun(a,[t])},e.prototype.reverse=function(t,r){var i=he().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new bT(t.shape,r):new yT(t.shape,r);return this.compileAndRun(i,[t])},e.prototype.concat=function(t,r){if(t[0].dtype==="complex64"){var i=t.map(function(v){return Wr(v)}),o=t.map(function(v){return ji(v)});return wn(this.concat(i,r),this.concat(o,r))}if(this.shouldExecuteOnCPU(t))return this.cpuBackend.concat(t,r);if(t.length===1)return t[0];if(t.length>he().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){var s=Math.floor(t.length/2),a=this.concat(t.slice(0,s),r),l=this.concat(t.slice(s),r);return this.concat([a,l],r)}if(he().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&t[0].rank>1){var u=new mj(t.map(function(v){return v.shape}),r);return this.compileAndRun(u,t)}var f=Xl(t.map(function(v){return v.shape}),r),p=t.map(function(v){return v.as2D(-1,Me(v.shape.slice(r)))}),m=new pj(p.map(function(v){return v.shape}));return this.compileAndRun(m,p).reshape(f)},e.prototype.neg=function(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.neg(t);if(he().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,t2,t.dtype);var r=new Ke(t.shape,t2);return this.compileAndRun(r,[t])},e.prototype.batchMatMul=function(t,r,i,o){var s=i?t.shape[2]:t.shape[1],a=o?r.shape[1]:r.shape[2],l=i?t.shape[1]:t.shape[2],u=t.shape[0];if((s===1||a===1)&&l>1e3){i&&(t=t.transpose([0,2,1])),o&&(r=r.transpose([0,2,1]));var f=a===1?t:t.as3D(u,l,1),p=a===1?2:1,m=a===1?r.as3D(u,1,l):r;return this.multiply(f,m).sum(p,!0)}var v=_n(t.dtype,r.dtype),y=new x0(t.shape,[u,s,a],i,o);return this.compileAndRun(y,[t,r],v)},e.prototype.fusedBatchMatMul=function(t){var r=t.a,i=t.b,o=t.transposeA,s=t.transposeB,a=t.bias,l=t.activation,u=t.preluActivationWeights,f=o?r.shape[2]:r.shape[1],p=s?i.shape[1]:i.shape[2],m=r.shape[0],v=_n(r.dtype,i.dtype),y=a!=null,w=u!=null,_=l?Rh(l,!0):null,k=new x0(r.shape,[m,f,p],o,s,y,_,w),E=[r,i];return a&&E.push(a),u&&E.push(u),this.compileAndRun(k,E,v)},e.prototype.multiply=function(t,r){if(t.dtype==="complex64"){var i=this.texData.get(t.dataId),o=this.texData.get(r.dataId),s=new Ub(cj,t.shape,r.shape),a=new Ub(uj,t.shape,r.shape),l=[this.makeComplexComponentTensorInfo(t,i.complexTensors.real),this.makeComplexComponentTensorInfo(t,i.complexTensors.imag),this.makeComplexComponentTensorInfo(r,o.complexTensors.real),this.makeComplexComponentTensorInfo(r,o.complexTensors.imag)],u=this.compileAndRun(s,l),f=this.compileAndRun(a,l),p=this.complex(u,f);return u.dispose(),f.dispose(),p}if(this.shouldExecuteOnCPU([t,r]))return this.cpuBackend.multiply(t,r);if(he().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,r,Hb,t.dtype);var m=new Bt(Hb,t.shape,r.shape);return this.compileAndRun(m,[t,r],t.dtype)},e.prototype.batchNormalization=function(t,r,i,o,s,a){var l=[t,r,i],u=null;a!=null&&(u=a.shape,l.push(a));var f=null;if(s!=null&&(f=s.shape,l.push(s)),he().getBool("WEBGL_PACK_NORMALIZATION")){var p=new lj(t.shape,r.shape,i.shape,u,f,o);return this.compileAndRun(p,l)}var m=new aj(t.shape,r.shape,i.shape,u,f,o);return this.compileAndRun(m,l)},e.prototype.localResponseNormalization4D=function(t,r,i,o,s){var a=he().getBool("WEBGL_PACK_NORMALIZATION")?new iT(t.shape,r,i,o,s):new nT(t.shape,r,i,o,s);return this.compileAndRun(a,[t])},e.prototype.LRNGrad=function(t,r,i,o,s,a,l){var u=new rT(r.shape,o,s,a,l);return this.compileAndRun(u,[r,i,t])},e.prototype.tile=function(t,r){if(t.dtype==="string"){var i=this.readSync(t.dataId).map(function(s){return yf(s)});return Xk($e(t.shape,t.dtype,i),r)}var o=new ST(t.shape,r);return this.compileAndRun(o,[t])},e.prototype.pad=function(t,r,i){var o=he().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new dT(t.shape,r,i):new uT(t.shape,r,i);return this.compileAndRun(o,[t])},e.prototype.transpose=function(t,r){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.transpose(t,r);var i=he().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new AT(t.shape,r):new IT(t.shape,r);return this.compileAndRun(i,[t])},e.prototype.gather=function(t,r,i){if(this.shouldExecuteOnCPU([t,r]))return this.cpuBackend.gather(t,r,i);var o=new Oj(t.shape,r.size,i);return this.compileAndRun(o,[t,r])},e.prototype.batchToSpaceND=function(t,r,i){U(t.rank<=4,function(){return"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet"});var o=r.reduce(function(p,m){return p*m}),s=Ef(t.shape,r,o),a=Nf(s.length,r.length),l=Sf(t.shape,r,o),u=Ok(i,r.length),f=Fk(l,i,r.length);return t.reshape(s).transpose(a).reshape(l).slice(u,f)},e.prototype.spaceToBatchND=function(t,r,i){U(t.rank<=4,function(){return"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet"});var o=r.reduce(function(m,v){return m*v}),s=[[0,0]];s.push.apply(s,i);for(var a=1+r.length;a<t.shape.length;++a)s.push([0,0]);var l=t.pad(s),u=Ef(l.shape,r,o,!1),f=Nf(u.length,r.length,!1),p=Sf(l.shape,r,o,!1);return l.reshape(u).transpose(f).reshape(p)},e.prototype.reduce=function(t,r,i){var o=t.shape[0],s=t.shape[1],a=m0(s),l=new hT({windowSize:a,inSize:s,batchSize:o},r),u=this.compileAndRun(l,[t],i);return u.shape[1]===1?u:this.reduce(u,r,i)},e.prototype.argReduce=function(t,r,i){i===void 0&&(i=null);var o=t.shape[0],s=t.shape[1];i!=null&&(o=i.shape[0],s=i.shape[1]);var a=m0(s),l=new QR({windowSize:a,inSize:s,batchSize:o},r,i==null),u=[t];i!=null&&u.push(i);var f=this.compileAndRun(l,u,"int32");return f.shape[1]===1?f:this.argReduce(t,r,f)},e.prototype.argReducePacked=function(t,r,i){i===void 0&&(i=null);var o=i!=null?i.shape:t.shape,s=m0(o[o.length-1]),a=new ij(o,s,r,i==null),l=i==null?[t]:[t,i],u=this.compileAndRun(a,l,"int32");return u.rank===t.rank?this.argReducePacked(t,r,u):u},e.prototype.sum=function(t,r){wr("sum",r,t.rank);var i=Tn(t.shape,r),o=i[0],s=Me(i[1]),a=t.as2D(-1,s),l=a0(t.dtype);return this.reduce(a,"sum",l).reshape(o)},e.prototype.prod=function(t,r){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.prod(t,r);var i=Tn(t.shape,r),o=i[0],s=Me(i[1]),a=t.as2D(-1,s),l=a0(t.dtype);return this.reduce(a,"prod",l).reshape(o)},e.prototype.unsortedSegmentSum=function(t,r,i){var o=0,s=Wi([o],t.rank),a=t;s!=null&&(a=t.transpose(s),o=Vi(1,t.rank)[0]);var l=function(v,y,w){for(var _=[],k=v.length,E=0;E<k;E++)E!==y?_.push(v[E]):_.push(w);return _}(a.shape,o,i),u=Me([a.shape[o]]),f=a.as2D(-1,u),p=a0(t.dtype),m=this.segOpCompute(f,"unsortedSegmentSum",r,p,i).reshape(l);return s!=null&&(m=m.transpose(iv(s))),m},e.prototype.segOpCompute=function(t,r,i,o,s){var a=t.shape[0],l=t.shape[1],u=function(m,v){var y,w=!1;for(m<=Bk?(y=m,w=!0):y=ug(m,Math.floor(Math.sqrt(m)));!w;)y>v||y===m?w=!0:y=ug(m,y+1);return y}(l,s),f=new wT({windowSize:u,inSize:l,batchSize:a,numSegments:s}),p=this.compileAndRun(f,[t,i],o);return p.shape[1]===s?p:(i=Cf(0,s).tile([l/u]),this.segOpCompute(p,r,i,o,s))},e.prototype.argMinMaxReduce=function(t,r,i){var o=[r];if(wr("arg"+i.charAt(0).toUpperCase()+i.slice(1),o,t.rank),!he().getBool("WEBGL_PACK_REDUCE")||t.rank<=2){var s=Tn(t.shape,o),a=s[0],l=Me(s[1]),u=t.as2D(-1,l);return this.argReduce(u,i).reshape(a)}return this.argReducePacked(t,i)},e.prototype.argMin=function(t,r){return this.argMinMaxReduce(t,r,"min")},e.prototype.argMax=function(t,r){return this.argMinMaxReduce(t,r,"max")},e.prototype.cumsum=function(t,r,i,o){if(r!==t.rank-1)throw new Error("WebGL cumsum shader expects an inner-most axis="+(t.rank-1)+" but got axis="+r);var s=new Cj(t.shape,i,o);return this.compileAndRun(s,[t])},e.prototype.equal=function(t,r){if(he().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,r,`
  return vec4(equal(a, b));
`,"bool");var i=new Bt("return float(a == b);",t.shape,r.shape);return this.compileAndRun(i,[t,r],"bool")},e.prototype.notEqual=function(t,r){if(he().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,r,`
  return vec4(notEqual(a, b));
`,"bool");var i=new Bt("return float(a != b);",t.shape,r.shape);return this.compileAndRun(i,[t,r],"bool")},e.prototype.less=function(t,r){if(this.shouldExecuteOnCPU([t,r]))return this.cpuBackend.less(t,r);if(he().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,r,`
  return vec4(lessThan(a, b));
`,"bool");var i=new Bt("return float(a < b);",t.shape,r.shape);return this.compileAndRun(i,[t,r],"bool")},e.prototype.lessEqual=function(t,r){if(he().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,r,`
  return vec4(lessThanEqual(a, b));
`,"bool");var i=new Bt("return float(a <= b);",t.shape,r.shape);return this.compileAndRun(i,[t,r],"bool")},e.prototype.greater=function(t,r){if(this.shouldExecuteOnCPU([t,r]))return this.cpuBackend.greater(t,r);if(he().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,r,`
  return vec4(greaterThan(a, b));
`,"bool");var i=new Bt("return float(a > b);",t.shape,r.shape);return this.compileAndRun(i,[t,r],"bool")},e.prototype.greaterEqual=function(t,r){if(he().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,r,`
  return vec4(greaterThanEqual(a, b));
`,"bool");var i=new Bt("return float(a >= b);",t.shape,r.shape);return this.compileAndRun(i,[t,r],"bool")},e.prototype.logicalNot=function(t){var r=new Ke(t.shape,"return float(!(x >= 1.0));");return this.compileAndRun(r,[t])},e.prototype.logicalAnd=function(t,r){if(he().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,r,`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,"bool");var i=new Bt("return float(a >= 1.0 && b >= 1.0);",t.shape,r.shape);return this.compileAndRun(i,[t,r],"bool")},e.prototype.logicalOr=function(t,r){if(he().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,r,`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,"bool");var i=new Bt("return float(a >= 1.0 || b >= 1.0);",t.shape,r.shape);return this.compileAndRun(i,[t,r],"bool")},e.prototype.select=function(t,r,i){var o=new _T(t.rank,r.shape,r.rank);return this.compileAndRun(o,[t,r,i],_n(r.dtype,i.dtype))},e.prototype.where=function(t){_f("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");var r=t.dataSync();return hv(t.shape,r)},e.prototype.topk=function(t,r,i){return Yk(t.dataSync(),t.shape,t.dtype,r)},e.prototype.min=function(t,r){wr("min",r,t.rank);var i=Tn(t.shape,r),o=i[0],s=Me(i[1]),a=t.as2D(-1,s);return this.reduce(a,"min",a.dtype).reshape(o)},e.prototype.minimum=function(t,r){if(this.shouldExecuteOnCPU([t,r]))return this.cpuBackend.minimum(t,r);var i=he().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new po(`
  vec4 result = vec4(min(a, b));
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,t.shape,r.shape):new Bt(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return min(a, b);
`,t.shape,r.shape);return this.compileAndRun(i,[t,r])},e.prototype.mod=function(t,r){var i=he().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new po(`
  vec4 result = mod(a, b);
  vec4 isNaN = vec4(equal(b, vec4(0.0)));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,t.shape,r.shape):new Bt(`if (b == 0.0) return NAN;
  return mod(a, b);`,t.shape,r.shape);return this.compileAndRun(i,[t,r])},e.prototype.max=function(t,r){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.max(t,r);wr("max",r,t.rank);var i=Tn(t.shape,r),o=i[0],s=Me(i[1]),a=t.as2D(-1,s);return this.reduce(a,"max",a.dtype).reshape(o)},e.prototype.maximum=function(t,r){if(this.shouldExecuteOnCPU([t,r]))return this.cpuBackend.maximum(t,r);var i=he().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new po(`
  vec4 result = vec4(max(a, b));
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,t.shape,r.shape):new Bt(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return max(a, b);
`,t.shape,r.shape);return this.compileAndRun(i,[t,r])},e.prototype.all=function(t,r){wr("all",r,t.rank);var i=Tn(t.shape,r),o=i[0],s=Me(i[1]),a=t.as2D(-1,s);return this.reduce(a,"all",a.dtype).reshape(o)},e.prototype.any=function(t,r){wr("any",r,t.rank);var i=Tn(t.shape,r),o=i[0],s=Me(i[1]),a=t.as2D(-1,s);return this.reduce(a,"any",a.dtype).reshape(o)},e.prototype.realDivide=function(t,r){if(he().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,r,`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,"float32",!0);var i=new Bt(`
if (a == b) {
  return 1.0;
};
return a / b;`,t.shape,r.shape);return this.compileAndRun(i,[t,r],"float32")},e.prototype.floorDiv=function(t,r){if(he().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,r,`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,"int32");var i=new Bt(`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,t.shape,r.shape);return this.compileAndRun(i,[t,r],"int32")},e.prototype.add=function(t,r){if(t.dtype==="complex64"&&r.dtype==="complex64")return this.complexSeparableBinaryOp(t,r,g0);if(this.shouldExecuteOnCPU([t,r]))return this.cpuBackend.add(t,r);var i=_n(t.dtype,r.dtype);if(he().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,r,g0,i);var o=new Bt(g0,t.shape,r.shape);return this.compileAndRun(o,[t,r],i)},e.prototype.packedUnaryOp=function(t,r,i){var o=new Jc(t.shape,r);return this.compileAndRun(o,[t],i)},e.prototype.packedBinaryOp=function(t,r,i,o,s){s===void 0&&(s=!1);var a=new po(i,t.shape,r.shape,s);return this.compileAndRun(a,[t,r],o)},e.prototype.complexSeparableBinaryOp=function(t,r,i){var o=this,s=this.texData.get(t.dataId),a=this.texData.get(r.dataId),l=[[s.complexTensors.real,a.complexTensors.real],[s.complexTensors.imag,a.complexTensors.imag]].map(function(m){var v=m[0],y=m[1],w=o.makeComplexComponentTensorInfo(t,v),_=o.makeComplexComponentTensorInfo(r,y),k=new Bt(i,t.shape,r.shape);return o.compileAndRun(k,[w,_],_n(v.dtype,y.dtype))}),u=l[0],f=l[1],p=this.complex(u,f);return u.dispose(),f.dispose(),p},e.prototype.makeComplexComponentTensorInfo=function(t,r){return{dataId:r.dataId,dtype:r.dtype,shape:t.shape}},e.prototype.addN=function(t){if(t.length===1)return t[0];if(t.length>he().get("WEBGL_MAX_TEXTURES_IN_SHADER")){var r=Math.floor(t.length/2),i=this.addN(t.slice(0,r)),o=this.addN(t.slice(r));return this.addN([i,o])}var s=t.map(function(u){return u.dtype}).reduce(function(u,f){return _n(u,f)}),a=t.map(function(u){return u.shape}),l=he().getBool("WEBGL_PACK")?new JR(t[0].shape,a):new YR(t[0].shape,a);return this.compileAndRun(l,t,s)},e.prototype.subtract=function(t,r){if(t.dtype==="complex64"&&r.dtype==="complex64")return this.complexSeparableBinaryOp(t,r,v0);if(this.shouldExecuteOnCPU([t,r]))return this.cpuBackend.subtract(t,r);var i=_n(t.dtype,r.dtype);if(he().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,r,v0,t.dtype);var o=new Bt(v0,t.shape,r.shape);return this.compileAndRun(o,[t,r],i)},e.prototype.pow=function(t,r){var i=he().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new po(`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  vec4 isNaN = vec4(lessThan(a, vec4(0.0))) * vec4(lessThan(floor(b), b));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,t.shape,r.shape):new Bt(`
if(a < 0.0 && floor(b) < b){
  return NAN;
}
if (b == 0.0) {
  return 1.0;
}
return (round(mod(b, 2.0)) != 1) ?
    pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,t.shape,r.shape),o=_n(t.dtype,r.dtype);return this.compileAndRun(i,[t,r],o)},e.prototype.ceil=function(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.ceil(t);if(he().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,n2,t.dtype);var r=new Ke(t.shape,n2);return this.compileAndRun(r,[t])},e.prototype.floor=function(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.floor(t);if(he().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,r2,t.dtype);var r=new Ke(t.shape,r2);return this.compileAndRun(r,[t])},e.prototype.sign=function(t){var r=new Ke(t.shape,`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`);return this.compileAndRun(r,[t])},e.prototype.isNaN=function(t){var r=new Ke(t.shape,"return float(isnan(x));");return this.compileAndRun(r,[t],"bool")},e.prototype.isInf=function(t){var r=new Ke(t.shape,"return float(isinf(x));");return this.compileAndRun(r,[t],"bool")},e.prototype.isFinite=function(t){var r=new Ke(t.shape,"return float(!isnan(x) && !isinf(x));");return this.compileAndRun(r,[t],"bool")},e.prototype.round=function(t){var r=new Ke(t.shape,`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`);return this.compileAndRun(r,[t])},e.prototype.exp=function(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.exp(t);if(he().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,i2,t.dtype);var r=new Ke(t.shape,i2);return this.compileAndRun(r,[t])},e.prototype.expm1=function(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.expm1(t);if(he().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,o2,t.dtype);var r=new Ke(t.shape,o2);return this.compileAndRun(r,[t])},e.prototype.softmax=function(t,r){var i=sn([r],t.shape),o=this.max(t,i),s=dr(o.shape,i),a=this.subtract(t,o.reshape(s)),l=this.exp(a),u=this.sum(l,i).reshape(s);return this.realDivide(l,u)},e.prototype.log=function(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.log(t);if(he().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,`
  vec4 result = log(x);
  vec4 isNaN = vec4(lessThan(x, vec4(0.0)));
  result.r = isNaN.r == 1.0 ? NAN : result.r;
  result.g = isNaN.g == 1.0 ? NAN : result.g;
  result.b = isNaN.b == 1.0 ? NAN : result.b;
  result.a = isNaN.a == 1.0 ? NAN : result.a;

  return result;
`,t.dtype);var r=new Ke(t.shape,`if (x < 0.0) return NAN;
  return log(x);`);return this.compileAndRun(r,[t])},e.prototype.log1p=function(t){var r=new Ke(t.shape,"return log(1.0 + x);");return this.compileAndRun(r,[t])},e.prototype.sqrt=function(t){var r=new Ke(t.shape,"return sqrt(x);");return this.compileAndRun(r,[t])},e.prototype.rsqrt=function(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.rsqrt(t);var r=new Ke(t.shape,"return inversesqrt(x);");return this.compileAndRun(r,[t])},e.prototype.reciprocal=function(t){var r=new Ke(t.shape,"return 1.0 / x;");return this.compileAndRun(r,[t])},e.prototype.relu=function(t){var r;return r=he().getBool("WEBGL_PACK")?new Jc(t.shape,o4):new Ke(t.shape,n4),this.compileAndRun(r,[t])},e.prototype.relu6=function(t){var r;return r=he().getBool("WEBGL_PACK")?new Jc(t.shape,s4):new Ke(t.shape,r4),this.compileAndRun(r,[t])},e.prototype.prelu=function(t,r){var i=he().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new po(t4,t.shape,r.shape):new Bt(e4,t.shape,r.shape);return this.compileAndRun(i,[t,r])},e.prototype.elu=function(t){if(he().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,a4,t.dtype);var r=new Ke(t.shape,i4);return this.compileAndRun(r,[t])},e.prototype.eluDer=function(t,r){var i=he().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new po(`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,t.shape,r.shape):new Bt("return (b >= 1.0) ? a : a * (b + 1.0);",t.shape,r.shape);return this.compileAndRun(i,[t,r])},e.prototype.selu=function(t){var r=new Ke(t.shape,jT);return this.compileAndRun(r,[t])},e.prototype.int=function(t){var r=new Ke(t.shape,"return float(int(x));");return this.compileAndRun(r,[t],"int32")},e.prototype.clip=function(t,r,i){var o,s=(o=he().getBool("WEBGL_PACK_CLIP")?new hj(t.shape):new dj(t.shape)).getCustomSetupFunc(r,i);return this.compileAndRun(o,[t],null,s)},e.prototype.abs=function(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.abs(t);if(he().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,e2,t.dtype);var r=new Ke(t.shape,e2);return this.compileAndRun(r,[t])},e.prototype.complexAbs=function(t){var r=this.texData.get(t.dataId),i=new fj(t.shape),o=[this.makeComplexComponentTensorInfo(t,r.complexTensors.real),this.makeComplexComponentTensorInfo(t,r.complexTensors.imag)];return this.compileAndRun(i,o)},e.prototype.sigmoid=function(t){var r=new Ke(t.shape,"return 1.0 / (1.0 + exp(-1.0 * x));");return this.compileAndRun(r,[t])},e.prototype.softplus=function(t){var r=new Ke(t.shape,`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`);return this.compileAndRun(r,[t])},e.prototype.sin=function(t){var r=new Ke(t.shape,TT);return this.compileAndRun(r,[t])},e.prototype.cos=function(t){var r=new Ke(t.shape,DT);return this.compileAndRun(r,[t])},e.prototype.tan=function(t){var r=new Ke(t.shape,"return tan(x);");return this.compileAndRun(r,[t])},e.prototype.asin=function(t){var r=new Ke(t.shape,MT);return this.compileAndRun(r,[t])},e.prototype.acos=function(t){var r=new Ke(t.shape,PT);return this.compileAndRun(r,[t])},e.prototype.atan=function(t){var r=new Ke(t.shape,OT);return this.compileAndRun(r,[t])},e.prototype.atan2=function(t,r){var i=he().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new po(`
  vec4 result = atan(a, b);
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,t.shape,r.shape):new Bt(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return atan(a, b);
`,t.shape,r.shape);return this.compileAndRun(i,[t,r])},e.prototype.sinh=function(t){var r=new Ke(t.shape,`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`);return this.compileAndRun(r,[t])},e.prototype.cosh=function(t){var r=new Ke(t.shape,`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`);return this.compileAndRun(r,[t])},e.prototype.tanh=function(t){var r=new Ke(t.shape,`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`);return this.compileAndRun(r,[t])},e.prototype.asinh=function(t){var r=new Ke(t.shape,FT);return this.compileAndRun(r,[t])},e.prototype.acosh=function(t){var r=new Ke(t.shape,LT);return this.compileAndRun(r,[t])},e.prototype.atanh=function(t){var r=new Ke(t.shape,BT);return this.compileAndRun(r,[t])},e.prototype.erf=function(t){var r=new Ke(t.shape,`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = 0.3275911;
  float a1 = 0.254829592;
  float a2 = -0.284496736;
  float a3 = 1.421413741;
  float a4 = -1.453152027;
  float a5 = 1.061405429;

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`);return this.compileAndRun(r,[t])},e.prototype.step=function(t,r){var i=new Ke(t.shape,function(o){return o===void 0&&(o=0),fi+`
    return x > 0.0 ? 1.0 : float(`+o+`);
  `}(r));return this.compileAndRun(i,[t])},e.prototype.conv2dByMatMul=function(t,r,i,o,s,a){var l=t.shape,u=this.texData.get(t.dataId),f=i.inChannels,p=l[0]*l[1]*l[2],m=i.outChannels,v=i.dataFormat==="channelsLast",y=(p===1||m===1)&&f>1e3,w=l[2]%2!=0&&!!u.isPacked;if(y||!he().getBool("WEBGL_LAZILY_UNPACK")||!he().getBool("WEBGL_PACK_BINARY_OPERATIONS")||!w){var _=v?l[0]*l[1]*l[2]:l[0]*l[2]*l[3],k=this.reshape(t,[1,_,i.inChannels]),E=this.reshape(r,[1,i.inChannels,i.outChannels]);return this.reshape(this.fusedBatchMatMul({a:k,b:E,transposeA:!1,transposeB:!1,bias:o,activation:s,preluActivationWeights:a}),i.outShape)}var N=v?l[0]*l[1]*(l[2]+1):l[0]*l[2]*(l[3]+1),S={dataId:t.dataId,shape:[1,N,i.inChannels],dtype:t.dtype},A=u.shape;u.shape=u.shape.slice(),u.shape[u.shape.length-2]++,U(Nh(u.shape,S.shape),function(){return"packed reshape "+u.shape+" to "+S.shape+" isn't free"});var P=this.reshape(r,[1,i.inChannels,i.outChannels]),D=this.fusedBatchMatMul({a:S,b:P,transposeA:!1,transposeB:!1,bias:o,activation:s,preluActivationWeights:a}),j=this.texData.get(D.dataId);return U(j.isPacked,function(){return"batchMatMul result is expected to be packed"}),u.shape=A,j.shape=i.outShape,Z.makeTensorFromDataId(D.dataId,i.outShape,D.dtype)},e.prototype.conv2dWithIm2Row=function(t,r,i,o,s,a){var l=i.filterWidth,u=i.filterHeight,f=i.inChannels,p=i.outWidth,m=i.outHeight,v=i.dataFormat==="channelsLast",y=l*u*f,w=m*p,_=[y,w],k=t.squeeze([0]),E=r.reshape([1,y,-1]),N=new tT(_,k.shape,i),S=this.compileAndRun(N,[k]).reshape([1,_[0],_[1]]),A=o!=null,P=a!=null,D=s?Rh(s,!0):null,j=new x0(S.shape,[1,w,i.outChannels],!0,!1,A,D,P),T=[S,E];o&&T.push(o),P&&T.push(a);var M=this.compileAndRun(j,T);return v?M.reshape([1,m,p,i.outChannels]):M.reshape([1,i.outChannels,m,p])},e.prototype.fusedConv2d=function(t){var r=t.input,i=t.filter,o=t.convInfo,s=t.bias,a=t.activation,l=t.preluActivationWeights;if(o.filterHeight===1&&o.filterWidth===1&&o.dilationHeight===1&&o.dilationWidth===1&&o.strideHeight===1&&o.strideWidth===1&&(o.padInfo.type==="SAME"||o.padInfo.type==="VALID"))return this.conv2dByMatMul(r,i,o,s,a,l);if(he().getBool("WEBGL_CONV_IM2COL")&&r.shape[0]===1)return this.conv2dWithIm2Row(r,i,o,s,a,l);var u=s!=null,f=l!=null,p=a?Rh(a,!1):null,m=new Gb(o,u,p,f),v=[r,i];return s&&v.push(s),l&&v.push(l),this.compileAndRun(m,v)},e.prototype.conv2d=function(t,r,i){if(i.filterHeight===1&&i.filterWidth===1&&i.dilationHeight===1&&i.dilationWidth===1&&i.strideHeight===1&&i.strideWidth===1&&(i.padInfo.type==="SAME"||i.padInfo.type==="VALID"))return this.conv2dByMatMul(t,r,i);if(he().getBool("WEBGL_CONV_IM2COL")&&t.shape[0]===1)return this.conv2dWithIm2Row(t,r,i);var o=new Gb(i);return this.compileAndRun(o,[t,r])},e.prototype.conv2dDerInput=function(t,r,i){var o=new vj(i);return this.compileAndRun(o,[t,r])},e.prototype.conv2dDerFilter=function(t,r,i){var o=new gj(i);return this.compileAndRun(o,[t,r])},e.prototype.fusedDepthwiseConv2D=function(t){var r,i=t.input,o=t.filter,s=t.convInfo,a=t.bias,l=t.activation,u=t.preluActivationWeights,f=he().getBool("WEBGL_PACK_DEPTHWISECONV")&&s.strideWidth<=2&&s.outChannels/s.inChannels==1,p=l?Rh(l,f):null,m=[i,o],v=a!=null,y=u!=null;return v&&m.push(a),y&&m.push(u),f?(r=new qb(s,v,p,y),this.compileAndRun(r,m)):(r=new $b(s,v,p,y),this.compileAndRun(r,m))},e.prototype.depthwiseConv2D=function(t,r,i){var o;return he().getBool("WEBGL_PACK_DEPTHWISECONV")&&i.strideWidth<=2&&i.outChannels/i.inChannels==1?(o=new qb(i),this.compileAndRun(o,[t,r])):(o=new $b(i),this.compileAndRun(o,[t,r]))},e.prototype.depthwiseConv2DDerInput=function(t,r,i){var o=new wj(i);return this.compileAndRun(o,[t,r])},e.prototype.depthwiseConv2DDerFilter=function(t,r,i){var o=new bj(i);return this.compileAndRun(o,[t,r])},e.prototype.conv3d=function(t,r,i){var o=new _j(i);return this.compileAndRun(o,[t,r])},e.prototype.conv3dDerInput=function(t,r,i){var o=new yj(i);return this.compileAndRun(o,[t,r])},e.prototype.conv3dDerFilter=function(t,r,i){var o=new xj(i);return this.compileAndRun(o,[t,r])},e.prototype.maxPool=function(t,r){var i=new y0(r,"max",!1);return this.compileAndRun(i,[t])},e.prototype.avgPool=function(t,r){var i=new y0(r,"avg",!1);return this.compileAndRun(i,[t],"float32")},e.prototype.maxPoolBackprop=function(t,r,i,o){var s=new y0(o,"max",!0),a=this.compileAndRun(s,[r]),l=new oT(o),u=this.compileAndRun(l,[t,a],r.dtype);return a.dispose(),u},e.prototype.avgPoolBackprop=function(t,r,i){var o=new oj(i);return this.compileAndRun(o,[t],r.dtype)},e.prototype.cast=function(t,r){return Gk(t,r,this)},e.prototype.unstack=function(t,r){for(var i=t.shape[r],o=new Array(t.rank-1),s=0,a=0;a<t.rank;a++)a!==r&&(o[s++]=t.shape[a]);var l=new Array(t.rank).fill(0),u=t.shape.slice();u[r]=1;var f=new Array(i);for(a=0;a<f.length;a++)l[r]=a,f[a]=this.slice(t,l,u).reshape(o);return f},e.prototype.avgPool3d=function(t,r){var i=new b0(r,"avg",!1);return this.compileAndRun(i,[t],"float32")},e.prototype.avgPool3dBackprop=function(t,r,i){var o=new sj(i);return this.compileAndRun(o,[t],r.dtype)},e.prototype.maxPool3d=function(t,r){var i=new b0(r,"max",!1);return this.compileAndRun(i,[t],"float32")},e.prototype.maxPool3dBackprop=function(t,r,i,o){var s=new b0(o,"max",!0),a=this.compileAndRun(s,[r]),l=new sT(o),u=this.compileAndRun(l,[t,a],r.dtype);return a.dispose(),u},e.prototype.reshape=function(t,r){var i=this.texData.get(t.dataId);if(i.isPacked&&!Nh(t.shape,r)&&(i.texture===null||!Nh(i.shape,r))){var o=this.packedReshape(t,r);return Z.makeTensorFromDataId(o.dataId,o.shape,o.dtype)}return xg(t,r)},e.prototype.resizeBilinear=function(t,r,i,o){var s=he().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new gT(t.shape,r,i,o):new mT(t.shape,r,i,o);return this.compileAndRun(s,[t],"float32")},e.prototype.resizeBilinearBackprop=function(t,r,i){var o=new pT(t,r,i);return this.compileAndRun(o,[t])},e.prototype.resizeNearestNeighbor=function(t,r,i,o){var s=new xT(t.shape,r,i,o);return this.compileAndRun(s,[t])},e.prototype.resizeNearestNeighborBackprop=function(t,r,i){var o=new vT(t,r,i);return this.compileAndRun(o,[t])},e.prototype.multinomial=function(t,r,i,o){var s=r?t:Ao(t),a=s.shape[0],l=s.shape[1],u=new aT(a,l,i),f=u.getCustomSetupFunc(o);return this.compileAndRun(u,[s],"int32",f)},e.prototype.oneHot=function(t,r,i,o){var s=new lT(t.size,r,i,o);return this.compileAndRun(s,[t])},e.prototype.diag=function(t){var r=new Ij(t.size);return this.compileAndRun(r,[t])},e.prototype.nonMaxSuppression=function(t,r,i,o,s){return _f("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead"),uv(t.dataSync(),r.dataSync(),i,o,s)},e.prototype.cropAndResize=function(t,r,i,o,s,a){var l=new kj(t.shape,r.shape,o,s,a);return this.compileAndRun(l,[t,r,i],"float32")},e.prototype.depthToSpace=function(t,r,i){U(r>1,function(){return"blockSize should be > 1 for depthToSpace, but was: "+r});var o=t.shape[0],s=i==="NHWC"?t.shape[1]:t.shape[2],a=i==="NHWC"?t.shape[2]:t.shape[3],l=i==="NHWC"?t.shape[3]:t.shape[1],u=s*r,f=a*r,p=l/(r*r),m=new Sj(i==="NHWC"?[o,u,f,p]:[o,p,u,f],r,i);return this.compileAndRun(m,[t])},e.prototype.split=function(t,r,i){return Kk(t,r,i)},e.prototype.scatterND=function(t,r,i){var o=If(0,t,i),s=o.sliceRank,a=o.numUpdates,l=o.sliceSize,u=o.strides,f=o.outputSize,p=[f/l,l],m=t.reshape([a,s]),v=r.reshape([a,l]);if(f===0)return xg(kn([]),i);var y=ke(0),w=new Jb(a,s,m.rank,v.rank,u,p);return this.compileAndRun(w,[v,m,y]).reshape(i)},e.prototype.sparseToDense=function(t,r,i,o){var s=If(0,t,i),a=s.sliceRank,l=s.numUpdates,u=s.strides,f=s.outputSize,p=new Jb(l,a,t.rank,r.rank,u,[f,1]);return this.compileAndRun(p,[r,t,o]).reshape(i)},e.prototype.fft=function(t){return this.fftImpl(t,!1)},e.prototype.ifft=function(t){return this.fftImpl(t,!0)},e.prototype.fftImpl=function(t,r){var i=this.texData.get(t.dataId),o=new Xb(Dj,t.shape,r),s=new Xb(Mj,t.shape,r),a=[this.makeComplexComponentTensorInfo(t,i.complexTensors.real),this.makeComplexComponentTensorInfo(t,i.complexTensors.imag)],l=this.compileAndRun(o,a),u=this.compileAndRun(s,a),f=this.complex(l,u).as2D(t.shape[0],t.shape[1]);return l.dispose(),u.dispose(),f},e.prototype.gatherND=function(t,r){var i=r.shape,o=i[i.length-1],s=Lk(t,r),a=s[0],l=s[1],u=s[2],f=s[3],p=r.reshape([l,o]),m=t.reshape([t.size/u,u]),v=new Fj(o,f,[l,u]);return this.compileAndRun(v,[m,p]).reshape(a)},e.prototype.fill=function(t,r,i){if((i=i||Ku(r))==="string"){var o=xf(i,Me(t));return o.fill(r),Z.makeTensor(o,t,i,this)}var s=new Pj(t,r),a=s.getCustomSetupFunc(r);return this.compileAndRun(s,[],i,a)},e.prototype.onesLike=function(t){if(t.dtype==="string")throw new Error("onesLike is not supported under string dtype");return this.fill(t.shape,1,t.dtype)},e.prototype.zerosLike=function(t){return this.fill(t.shape,t.dtype==="string"?"":0,t.dtype)},e.prototype.linspace=function(t,r,i){return $k(t,r,i)},e.prototype.makeTensorInfo=function(t,r){var i=this.write(null,t,r);return this.texData.get(i).usage=null,{dataId:i,shape:t,dtype:r}},e.prototype.makeOutput=function(t,r){var i=this.makeTensorInfo(t,r).dataId;return Z.makeTensorFromDataId(i,t,r,this)},e.prototype.unpackTensor=function(t){var r=new WT(t.shape);return this.runWebGLProgram(r,[t],t.dtype)},e.prototype.packTensor=function(t){var r=new cT(t.shape);return this.runWebGLProgram(r,[t],t.dtype,null,!0)},e.prototype.packedReshape=function(t,r){var i=[bf(t.shape)].concat(wf(t.shape)),o={dtype:t.dtype,shape:i,dataId:t.dataId},s=[bf(r)].concat(wf(r)),a=new fT(s,i),l=this.runWebGLProgram(a,[o],t.dtype,null,!0);return{dataId:l.dataId,shape:r,dtype:l.dtype}},e.prototype.decode=function(t){var r,i=this.texData.get(t),o=i.isPacked,s=i.shape,a=i.dtype,l=p0(s);return r=o?new Nj(l):new Ej(l),{dtype:a,shape:s,dataId:this.runWebGLProgram(r,[{shape:l,dtype:a,dataId:t}],a,null,!0).dataId}},e.prototype.runWebGLProgram=function(t,r,i,o,s){var a=this;s===void 0&&(s=!1);var l=this.makeTensorInfo(t.outputShape,i),u=this.texData.get(l.dataId);if(t.packedOutput&&(u.isPacked=!0),t.outPackingScheme===Iu.DENSE){var f=gu(t.outputShape);u.texShape=f.map(function(N){return 2*N})}if(t.outTexUsage!=null&&(u.usage=t.outTexUsage),Me(l.shape)===0)return u.values=Nu(l.dtype,0),l;var p=[],m=r.map(function(N){if(N.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");var S=a.texData.get(N.dataId);if(S.texture==null){if(!t.packedInputs&&Me(N.shape)<=he().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:N.shape,texData:null,isUniform:!0,uniformValues:S.values};t.packedInputs&&(S.isPacked=!0,S.shape=N.shape)}else if(!!S.isPacked!=!!t.packedInputs)N=S.isPacked?a.unpackTensor(N):a.packTensor(N),p.push(N),S=a.texData.get(N.dataId);else if(S.isPacked&&!Nh(S.shape,N.shape)){var A=N,P=N.shape;N.shape=S.shape,N=a.packedReshape(N,P),p.push(N),S=a.texData.get(N.dataId),A.shape=P}return a.uploadToGPU(N.dataId),{shape:N.shape,texData:S,isUniform:!1}});this.uploadToGPU(l.dataId);var v,y={shape:l.shape,texData:u,isUniform:!1},w=function(N,S,A){var P="";S.concat(A).forEach(function(T){var M=T.texData!=null&&T.texData.slice!=null&&T.texData.slice.flatOffset>0,L=T.isUniform?"uniform":T.texData.texShape;P+=T.shape+"_"+L+"_"+M});var D=N.userCode,j=N.constructor.name;return j+="_"+P+"_"+D}(t,m,y),_=this.getAndSaveBinary(w,function(){return function(N,S,A,P){var D=S.userCode,j=A.map(function($,Y){var Q={logicalShape:$.shape,texShape:$.isUniform?null:$.texData.texShape,isUniform:$.isUniform,isPacked:!$.isUniform&&$.texData.isPacked,flatOffset:null};return $.texData!=null&&$.texData.slice!=null&&$.texData.slice.flatOffset>0&&(Q.flatOffset=$.texData.slice.flatOffset),{name:S.variableNames[Y],shapeInfo:Q}}),T=j.map(function($){return $.shapeInfo}),M={logicalShape:P.shape,texShape:P.texData.texShape,isUniform:!1,isPacked:P.texData.isPacked,flatOffset:null},L=ZR(j,M,D,S.packedInputs),B=N.createProgram(L),F=null,K=N.getUniformLocation(B,"NAN",!1);he().getNumber("WEBGL_VERSION")===1&&(F=N.getUniformLocation(B,"INFINITY",!1));for(var te={},se=0;se<S.variableNames.length;se++){var q=S.variableNames[se];te[q]=N.getUniformLocation(B,q,!1),te["offset"+q]=N.getUniformLocation(B,"offset"+q,!1)}return{program:S,source:L,webGLProgram:B,uniformLocations:te,inShapeInfos:T,outShapeInfo:M,infLoc:F,nanLoc:K}}(a.gpgpu,t,m,y)}),k=this.activeTimers!=null;if(k&&(v=this.startTimer()),function(N,S,A,P,D){Yb(S.inShapeInfos,A),Yb([S.outShapeInfo],[P]);var j=P.texData.texture,T=P.texData.texShape;P.texData.isPacked?N.setOutputPackedMatrixTexture(j,T[0],T[1]):N.setOutputMatrixTexture(j,T[0],T[1]),N.setProgram(S.webGLProgram),he().getNumber("WEBGL_VERSION")===1&&S.infLoc!==null&&N.gl.uniform1f(S.infLoc,1/0),S.nanLoc!==null&&N.gl.uniform1f(S.nanLoc,NaN),A.forEach(function(M,L){var B=S.program.variableNames[L],F=S.uniformLocations[B],K=S.uniformLocations["offset"+B];if(F!=null)if(M.isUniform)if(Me(M.shape)<2)N.gl.uniform1f(F,M.uniformValues[0]);else{var te=M.uniformValues;te instanceof Float32Array||(te=new Float32Array(te)),N.gl.uniform1fv(F,te)}else M.texData.slice!=null&&K!=null&&N.gl.uniform1i(K,M.texData.slice.flatOffset),N.setInputMatrixTexture(M.texData.texture,F,L)}),D?.(N,S.webGLProgram),N.executeProgram()}(this.gpgpu,_,m,y,o),p.forEach(function(N){return a.disposeData(N.dataId)}),k&&(v=this.endTimer(v),this.activeTimers.push({name:t.constructor.name,query:this.getQueryTime(v)})),!he().getBool("WEBGL_LAZILY_UNPACK")&&u.isPacked&&s===!1){var E=this.unpackTensor(l);return this.disposeData(l.dataId),E}return l},e.prototype.compileAndRun=function(t,r,i,o,s){s===void 0&&(s=!1),i=i||r[0].dtype;var a=this.runWebGLProgram(t,r,i,o,s);return Z.makeTensorFromDataId(a.dataId,a.shape,a.dtype)},e.prototype.getAndSaveBinary=function(t,r){return t in this.binaryCache||(this.binaryCache[t]=r()),this.binaryCache[t]},e.prototype.getTextureManager=function(){return this.textureManager},e.prototype.dispose=function(){var t=this;this.disposed||(he().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(function(r){t.gpgpu.deleteProgram(t.binaryCache[r].webGLProgram),delete t.binaryCache[r]}),this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)},e.prototype.floatPrecision=function(){var t=this;return this.floatPrecisionValue==null&&(this.floatPrecisionValue=Ee(function(){if(!he().get("WEBGL_RENDER_FLOAT32_ENABLED")){var r=he().getBool("DEBUG");he().set("DEBUG",!1);var i=t.abs(ke(1e-8)).dataSync()[0];if(he().set("DEBUG",r),i>0)return 32}return 16})),this.floatPrecisionValue},e.prototype.epsilon=function(){return this.floatPrecision()===32?1e-7:1e-4},e.prototype.uploadToGPU=function(t){var r,i=this.texData.get(t),o=i.shape,s=i.dtype,a=i.values,l=i.texture,u=i.usage,f=i.isPacked;if(l==null){var p,m=this.activeTimers!=null;m&&(p=Ai());var v=i.texShape;if(v==null&&(v=XA(o,f),i.texShape=v),a!=null){var y=p0(o),w=void 0,_=v[1],k=v[0],E=a instanceof Uint8Array;f?(_=(r=Yu(v[0],v[1]))[0],k=r[1],w=new Tj(y,[k,_],E)):w=new jj(y,[k,_],E);var N=this.makeTensorInfo([k,_],s);this.texData.get(N.dataId).usage=E?kr.PIXELS:kr.UPLOAD,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(N.dataId),_,k,a);var S=this.runWebGLProgram(w,[N],s,null,!0),A=this.texData.get(S.dataId);i.texture=A.texture,i.texShape=A.texShape,i.isPacked=A.isPacked,i.usage=A.usage,this.disposeData(N.dataId),this.texData.delete(S.dataId),i.values=null,m&&(this.uploadWaitMs+=Ai()-p)}else{var P=this.acquireTexture(v,u,s,f);i.texture=P}}},e.prototype.convertAndCacheOnCPU=function(t,r){var i=this.texData.get(t),o=i.dtype;return this.releaseGPUData(t),r!=null&&(i.values=function(s,a){if(a==="float32"||a==="complex64")return s;if(a==="int32"||a==="bool"){for(var l=a==="int32"?new Int32Array(s.length):new Uint8Array(s.length),u=0;u<l.length;++u)l[u]=Math.round(s[u]);return l}throw new Error("Unknown dtype "+a)}(r,o)),i.values},e.prototype.acquireTexture=function(t,r,i,o){if(this.numBytesInGPU+=this.computeBytes(t,i),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){var s=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn("High memory usage in GPU: "+s+" MB, most likely due to a memory leak")}return this.textureManager.acquireTexture(t,r,o)},e.prototype.computeBytes=function(t,r){return t[0]*t[1]*bk(r)},e}(Uk);Sk()&&Z.registerBackend("webgl",function(){return new UT},2);var HT=X({square_:function(n){var e=V(n,"x","square"),t=[e];return Z.runKernelFunc(function(r,i){return i([e]),r.square(e)},{x:e},null,"Square",{},t,[])}}),Ru="SquaredDifference",l4=X({squaredDifference_:function(n,e){var t,r=V(n,"a","squaredDifference"),i=V(e,"b","squaredDifference");t=Ft(r,i),r=t[0],i=t[1],et(r.shape,i.shape);var o={a:r,b:i},s=[r,i];return Z.runKernelFunc(function(a,l){var u=a.squaredDifference(r,i);return l([r,i]),u},o,function(a,l){var u=l[0],f=l[1],p=ke(2);return{a:function(){return a.mul(u.sub(f).mul(p))},b:function(){return a.mul(f.sub(u).mul(p))}}},Ru,{},s,[])}}),GT=X({abs_:function(n){var e=V(n,"x","abs");return e.dtype==="complex64"?Z.runKernelFunc(function(t){return t.complexAbs(e)},{$x:e}):Z.runKernelFunc(function(t,r){var i=t.abs(e);return r([e]),i},{x:e},function(t,r){var i=r[0];return{x:function(){return t.mul(i.toFloat().step(-1))}}},"Abs")}}),$T=X({acos_:function(n){var e=V(n,"x","acos");return Z.runKernelFunc(function(t,r){var i=t.acos(e);return r([e]),i},{$x:e},function(t,r){var i=r[0];return{$x:function(){return t.divStrict(ke(1).sub(i.toFloat().square()).sqrt()).neg()}}})}}),qT=X({acosh_:function(n){var e=V(n,"x","acosh");return Z.runKernelFunc(function(t,r){var i=t.acosh(e);return r([e]),i},{$x:e},function(t,r){var i=r[0];return{$x:function(){return t.divStrict(i.toFloat().square().sub(1).sqrt())}}})}}),KT=X({asin_:function(n){var e=V(n,"x","asin");return Z.runKernelFunc(function(t,r){var i=t.asin(e);return r([e]),i},{$x:e},function(t,r){var i=r[0];return{$x:function(){return t.divStrict(ke(1).sub(i.toFloat().square()).sqrt())}}})}}),XT=X({asinh_:function(n){var e=V(n,"x","asinh");return Z.runKernelFunc(function(t,r){var i=t.asinh(e);return r([e]),i},{$x:e},function(t,r){var i=r[0];return{$x:function(){return t.divStrict(ke(1).add(i.toFloat().square()).sqrt())}}})}}),YT=X({atan_:function(n){var e=V(n,"x","atan");return Z.runKernelFunc(function(t,r){var i=t.atan(e);return r([e]),i},{$x:e},function(t,r){var i=r[0];return{$x:function(){return t.div(i.toFloat().square().add(1))}}})}}),JT=X({atanh_:function(n){var e=V(n,"x","atanh");return Z.runKernelFunc(function(t,r){var i=t.atanh(e);return r([e]),i},{$x:e},function(t,r){var i=r[0];return{$x:function(){return t.div(ke(1).sub(i.toFloat().square()))}}})}}),QT=X({ceil_:function(n){var e=V(n,"x","ceil");return Z.runKernelFunc(function(t){return t.ceil(e)},{$x:e},function(t){return{$x:function(){return st(t)}}})}}),gv=X({clipByValue_:function(n,e,t){var r=V(n,"x","clipByValue");U(e<=t,function(){return"Error in clip: min ("+e+") must be less than or equal to max ("+t+")."});var i=[r],o={min:e,max:t};return Z.runKernelFunc(function(s,a){var l=s.clip(r,e,t);return a([r]),l},{x:r},function(s,a){var l=a[0];return{x:function(){return s.where(l.greaterEqual(e).logicalAnd(l.lessEqual(t)),st(s))}}},"ClipByValue",o,i)}}),ZT=X({cos_:function(n){var e=V(n,"x","cos"),t=[e];return Z.runKernelFunc(function(r,i){var o=r.cos(e);return i([e]),o},{x:e},function(r,i){var o=i[0];return{x:function(){return o.toFloat().sin().neg().mul(r)}}},"Cos",{},t)}}),e6=X({cosh_:function(n){var e=V(n,"x","cosh");return Z.runKernelFunc(function(t,r){var i=t.cosh(e);return r([e]),i},{$x:e},function(t,r){var i=r[0];return{$x:function(){return i.toFloat().sinh().mulStrict(t)}}})}}),t6=X({erf_:function(n){var e=V(n,"x","erf");return U(e.dtype==="int32"||e.dtype==="float32",function(){return"Input dtype must be `int32` or `float32`."}),e.dtype==="int32"&&(e=e.toFloat()),Z.runKernelFunc(function(t,r){var i=t.erf(e);return r([e]),i},{$x:e},function(t,r){var i=r[0];return{$x:function(){return t.mul(i.square().neg().exp().mul(2/Math.sqrt(Math.PI)))}}})}}),bg=X({exp_:function(n){var e=V(n,"x","exp");return Z.runKernelFunc(function(t,r){var i=t.exp(e);return r([i]),i},{x:e},function(t,r){return{x:function(){return t.mulStrict(r[0])}}},"Exp",{},[],[!0])}}),n6=X({expm1_:function(n){var e=V(n,"x","expm1");return Z.runKernelFunc(function(t,r){var i=t.expm1(e);return r([e]),i},{$x:e},function(t,r){var i=r[0];return{$x:function(){return t.mul(i.exp())}}})}}),r6=X({floor_:function(n){var e=V(n,"x","floor");return Z.runKernelFunc(function(t){return t.floor(e)},{$x:e},function(t){return{$x:function(){return st(t)}}})}}),i6=X({log_:function(n){var e=V(n,"x","log"),t=[e];return Z.runKernelFunc(function(r,i){var o=r.log(e);return i([e]),o},{x:e},function(r,i){var o=i[0];return{x:function(){return r.div(o.toFloat())}}},"Log",{},t)}}),o6=X({log1p_:function(n){var e=V(n,"x","log1p");return Z.runKernelFunc(function(t,r){var i=t.log1p(e);return r([e]),i},{$x:e},function(t,r){var i=r[0];return{$x:function(){return t.div(i.add(1))}}})}}),s6=X({logSigmoid_:function(n){var e=V(n,"x","logSigmoid");return Z.runKernelFunc(function(t,r){var i=t.softplus(e.neg()).neg();return r([e]),i},{$x:e},function(t,r){var i=r[0];return{$x:function(){return t.mul(i.neg().sigmoid())}}})}}),Tf=X({neg_:function(n){var e=V(n,"x","neg"),t=[e];return Z.runKernelFunc(function(r){return r.neg(e)},{x:e},function(r){return{x:function(){return r.neg()}}},"Neg",{},t)}}),a6=X({reciprocal_:function(n){var e=V(n,"x","reciprocal");return Z.runKernelFunc(function(t,r){var i=t.reciprocal(e);return r([e]),i},{$x:e},function(t,r){var i=r[0];return{$x:function(){return t.div(i.square().neg())}}})}}),l6=X({round_:function(n){var e=V(n,"x","round");return Z.runKernelFunc(function(t){return t.round(e)},{$x:e},function(t){return{$x:function(){return st(t)}}})}}),c4=X({rsqrt_:function(n){var e=V(n,"x","rsqrt"),t=[e];return Z.runKernelFunc(function(r,i){var o=r.rsqrt(e);return i([e]),o},{x:e},function(r,i){var o=i[0];return{x:function(){return r.div(o.pow(1.5).mul(2)).neg()}}},"Rsqrt",{},t)}}),u4=X({sigmoid_:function(n){var e=V(n,"x","sigmoid");return Z.runKernelFunc(function(t,r){var i=t.sigmoid(e);return r([i]),i},{x:e},function(t,r){var i=r[0];return{x:function(){return t.mul(i.mul(ke(1).sub(i)))}}},"Sigmoid")}}),c6=X({sign_:function(n){var e=V(n,"x","sign");return Z.runKernelFunc(function(t){return t.sign(e)},{$x:e},function(t){return{$x:function(){return st(t)}}})}}),u6=X({isNaN_:function(n){var e=V(n,"x","isNaN");return Z.runKernelFunc(function(t){return t.isNaN(e)},{$x:e},function(t){return{$x:function(){return st(t)}}})}}),d6=X({isInf_:function(n){var e=V(n,"x","isInf");return Z.runKernelFunc(function(t){return t.isInf(e)},{$x:e},function(t){return{$x:function(){return st(t)}}})}}),h6=X({isFinite_:function(n){var e=V(n,"x","isFinite");return Z.runKernelFunc(function(t){return t.isFinite(e)},{$x:e},function(t){return{$x:function(){return st(t)}}})}}),f6=X({sin_:function(n){var e=V(n,"x","sin"),t=[e];return Z.runKernelFunc(function(r,i){var o=r.sin(e);return i([e]),o},{x:e},function(r,i){var o=i[0];return{x:function(){return o.toFloat().cos().mul(r)}}},"Sin",{},t)}}),p6=X({sinh_:function(n){var e=V(n,"x","sinh");return Z.runKernelFunc(function(t,r){var i=t.sinh(e);return r([e]),i},{$x:e},function(t,r){var i=r[0];return{$x:function(){return i.toFloat().cosh().mulStrict(t)}}})}}),m6=X({softplus_:function(n){var e=V(n,"x","softplus");return Z.runKernelFunc(function(t,r){var i=t.softplus(e);return r([e]),i},{$x:e},function(t,r){var i=r[0];return{$x:function(){return t.mul(i.sigmoid())}}})}}),g6=X({sqrt_:function(n){var e=V(n,"x","sqrt");return Z.runKernelFunc(function(t,r){var i=t.sqrt(e);return r([e]),i},{$x:e},function(t,r){var i=r[0];return{$x:function(){return t.div(i.toFloat().sqrt().mul(2))}}})}}),v6=X({step_:function(n,e){e===void 0&&(e=0);var t=V(n,"x","step");return Z.runKernelFunc(function(r){return r.step(t,e)},{$x:t},function(r){return{$x:function(){return st(r)}}})}}),x6=X({tan_:function(n){var e=V(n,"x","tan");return Z.runKernelFunc(function(t,r){var i=t.tan(e);return r([e]),i},{$x:e},function(t,r){var i=r[0];return{$x:function(){return t.div(i.cos().square())}}})}}),y6=X({tanh_:function(n){var e=V(n,"x","tanh");return Z.runKernelFunc(function(t,r){var i=t.tanh(e);return r([i]),i},{x:e},function(t,r){var i=r[0];return{x:function(){return ke(1).sub(i.square()).mulStrict(t)}}},"Tanh",{},null,[!0])}});function d4(n,e,t,r,i,o){var s,a,l=V(n,"x","batchNorm"),u=V(e,"mean","batchNorm"),f=V(t,"variance","batchNorm");return i!=null&&(s=V(i,"scale","batchNorm")),r!=null&&(a=V(r,"offset","batchNorm")),U(l.rank===2,function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+l.rank+"."}),U(u.rank===2||u.rank===1,function(){return"Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank "+u.rank+"."}),U(f.rank===2||f.rank===1,function(){return"Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank "+f.rank+"."}),s!=null&&U(s.rank===2||s.rank===1,function(){return"Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank "+s.rank+"."}),a!=null&&U(a.rank===2||a.rank===1,function(){return"Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank "+a.rank+"."}),Qu(l,u,f,a,s,o)}function h4(n,e,t,r,i,o){var s,a,l=V(n,"x","batchNorm"),u=V(e,"mean","batchNorm"),f=V(t,"variance","batchNorm");return i!=null&&(s=V(i,"scale","batchNorm")),r!=null&&(a=V(r,"offset","batchNorm")),U(l.rank===3,function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+l.rank+"."}),U(u.rank===3||u.rank===1,function(){return"Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank "+u.rank+"."}),U(f.rank===3||f.rank===1,function(){return"Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank "+f.rank+"."}),s!=null&&U(s.rank===3||s.rank===1,function(){return"Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank "+s.rank+"."}),a!=null&&U(a.rank===3||a.rank===1,function(){return"Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank "+a.rank+"."}),Qu(l,u,f,a,s,o)}function f4(n,e,t,r,i,o){var s,a,l=V(n,"x","batchNorm"),u=V(e,"mean","batchNorm"),f=V(t,"variance","batchNorm");return i!=null&&(s=V(i,"scale","batchNorm")),r!=null&&(a=V(r,"offset","batchNorm")),U(l.rank===4,function(){return"Error in batchNorm4D: x must be rank 4 but got rank "+l.rank+"."}),U(u.rank===4||u.rank===1,function(){return"Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank "+u.rank+"."}),U(f.rank===4||f.rank===1,function(){return"Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank "+f.rank+"."}),s!=null&&U(s.rank===4||s.rank===1,function(){return"Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank "+s.rank+"."}),a!=null&&U(a.rank===4||a.rank===1,function(){return"Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank "+a.rank+"."}),Qu(l,u,f,a,s,o)}function Qu(n,e,t,r,i,o){o==null&&(o=.001);var s,a,l,u=V(n,"x","batchNorm"),f=V(e,"mean","batchNorm"),p=V(t,"variance","batchNorm");i!=null&&(s=V(i,"scale","batchNorm")),r!=null&&(a=V(r,"offset","batchNorm")),U(f.rank===p.rank,function(){return"Batch normalization gradient requires mean and variance to have equal ranks."}),U(a==null||f.rank===a.rank,function(){return"Batch normalization gradient requires mean and offset to have equal ranks."}),U(s==null||f.rank===s.rank,function(){return"Batch normalization gradient requires mean and scale to have equal ranks."}),l=u.rank===0||u.rank===1?u.as4D(1,1,1,u.size):u.rank===2?u.as4D(1,1,u.shape[0],u.shape[1]):u.rank===3?u.as4D(1,u.shape[0],u.shape[1],u.shape[2]):u;var m=[u,f,p,s];return Z.runKernelFunc(function(v,y){var w=v.batchNormalization(l,jh(f),jh(p),o,jh(s),jh(a));return y([u,f,p,s]),w},{x:u,mean:f,variance:p,scale:s,offset:a},function(v,y){var w=y,_=w[0],k=w[1],E=w[2],N=w[3],S=N??ke(1),A=rn(k.shape,l.shape),P=[];if(k.rank===1){for(var D=0;D<l.shape.length-1;++D)P.push(l.shape[D]);P.push(1)}var j=_.sub(k),T=v.mul(S),M=c4(E.add(ke(o))),L=M.mul(M).mul(M).mul(ke(-.5));return{x:function(){return k.rank===1?v.mul(Fl(M.as4D(1,1,1,k.shape[0]),P)).mul(S).reshape(_.shape):v.mul(M).mul(S).reshape(_.shape)},mean:function(){var B=M.mul(ke(-1)).mul(T);return k.rank===1&&(B=B.sum(A)),B.reshape(k.shape)},variance:function(){var B=L.mul(j).mul(T);return k.rank===1&&(B=B.sum(A)),B.reshape(k.shape)},scale:function(){var B=j.mul(M),F=v.mul(B);return k.rank===1&&(F=F.sum(A)),F.reshape(k.shape)},offset:function(){var B=v;return k.rank===1&&(B=B.sum(A)),B.reshape(k.shape)}}},"BatchNormalization",{varianceEpsilon:o},m).reshape(u.shape)}function jh(n){return n==null?null:n.rank===0?n.as1D():n.rank===1?n:n.rank===2?n.as4D(1,1,n.shape[0],n.shape[1]):n.rank===3?n.as4D(1,n.shape[0],n.shape[1],n.shape[2]):n}function ep(){Ik("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon")}var b6=X({batchNormalization2d_:function(n,e,t,r,i,o){return r===void 0&&(r=.001),ep(),d4(n,e,t,o,i,r)}}),w6=X({batchNormalization3d_:function(n,e,t,r,i,o){return r===void 0&&(r=.001),ep(),h4(n,e,t,o,i,r)}}),_6=X({batchNormalization4d_:function(n,e,t,r,i,o){return r===void 0&&(r=.001),ep(),f4(n,e,t,o,i,r)}}),k6=X({batchNormalization_:function(n,e,t,r,i,o){return r===void 0&&(r=.001),ep(),Qu(n,e,t,o,i,r)}}),p4=X({batchNorm_:Qu}),C6=X({batchNorm2d_:d4}),E6=X({batchNorm3d_:h4}),N6=X({batchNorm4d_:f4}),tp=X({logicalAnd_:function(n,e){var t=V(n,"a","logicalAnd","bool"),r=V(e,"b","logicalAnd","bool");return et(t.shape,r.shape),Z.runKernelFunc(function(i){return i.logicalAnd(t,r)},{a:t,b:r},null,"LogicalAnd")}}),S6=X({logicalNot_:function(n){var e=V(n,"x","logicalNot","bool");return Z.runKernelFunc(function(t){return t.logicalNot(e)},{$x:e})}}),m4=X({logicalOr_:function(n,e){var t=V(n,"a","logicalOr","bool"),r=V(e,"b","logicalOr","bool");return et(t.shape,r.shape),Z.runKernelFunc(function(i){return i.logicalOr(t,r)},{$a:t,$b:r})}}),I6=X({logicalXor_:function(n,e){var t=V(n,"a","logicalXor","bool"),r=V(e,"b","logicalXor","bool");return et(t.shape,r.shape),m4(n,e).logicalAnd(tp(n,e).logicalNot())}}),Ca=X({where_:function(n,e,t){var r=V(e,"a","where"),i=V(t,"b","where"),o=V(n,"condition","where","bool");return pt(r.shape,i.shape,"Error in where: "),o.rank===1?U(o.shape[0]===r.shape[0],function(){return"The first dimension of `a` must match the size of `condition`."}):pt(o.shape,i.shape,"Error in where: "),Z.runKernelFunc(function(s,a){var l=s.select(o,r,i);return a([o]),l},{$condition:o,$a:r,$b:i},function(s,a){var l=a[0];return{$condition:function(){return st(l).toFloat()},$a:function(){return s.mul(l.cast(s.dtype))},$b:function(){return s.mul(l.logicalNot().cast(s.dtype))}}})}}),g4=function(n){return Re(this,void 0,void 0,function(){var e,t,r;return je(this,function(i){switch(i.label){case 0:return[4,(e=V(n,"condition","whereAsync","bool")).data()];case 1:return t=i.sent(),r=hv(e.shape,t),n!==e&&e.dispose(),[2,r]}})})},Qe=X({add_:function(n,e){var t,r=V(n,"a","add"),i=V(e,"b","add");t=Ft(r,i),r=t[0],i=t[1];var o=et(r.shape,i.shape);return Z.runKernelFunc(function(s){return s.add(r,i)},{a:r,b:i},function(s){return{a:function(){var a=s,l=rn(r.shape,o);return l.length>0&&(a=a.sum(l)),a.reshape(r.shape)},b:function(){var a=s,l=rn(i.shape,o);return l.length>0&&(a=a.sum(l)),a.reshape(i.shape)}}},"Add")}}),A6=X({addN_:function(n){U(Array.isArray(n),function(){return"The argument passed to tf.addN() must be a list of tensors"}),U(n.length>=1,function(){return"Must pass at least one tensor to tf.addN(), but got "+n.length});var e=n.map(function(i,o){return V(i,"tensors"+o,"addN")}),t=e[0];e.forEach(function(i){if(i.dtype!==t.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),e.forEach(function(i){if(!pn(i.shape,t.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")});var r=e;return Z.runKernelFunc(function(i){return i.addN(e)},r,function(i){var o={};return e.forEach(function(s,a){o[a]=function(){return i.clone()}}),o},"AddN")}}),R6=X({addStrict_:function(n,e){var t=V(n,"a","addStrict"),r=V(e,"b","addStrict");return pt(t.shape,r.shape,"Error in addStrict: "),t.add(r)}}),j6=X({atan2_:function(n,e){var t,r=V(n,"a","atan2"),i=V(e,"b","atan2");t=Ft(r,i),r=t[0],i=t[1];var o=et(r.shape,i.shape);return Z.runKernelFunc(function(s,a){var l=s.atan2(r,i);return a([r,i]),l},{$a:r,$b:i},function(s,a){var l=a[0],u=a[1];return{$a:function(){var f=Qe(l.square(),u.square()),p=s.mul(u.div(f)),m=rn(l.shape,o);return m.length>0&&(p=p.sum(m)),p.reshape(l.shape)},$b:function(){var f=Qe(l.square(),u.square()),p=Tf(s.mul(l.div(f))),m=rn(u.shape,o);return m.length>0&&(p=p.sum(m)),p.reshape(u.shape)}}})}}),oi=X({div_:function(n,e){var t,r=V(n,"a","div"),i=V(e,"b","div");if(t=Ft(r,i),r=t[0],i=t[1],r.dtype==="int32"&&i.dtype==="int32")return v4(r,i);var o=et(r.shape,i.shape);return Z.runKernelFunc(function(s,a){var l=s.realDivide(r,i);return a([r,i]),l},{a:r,b:i},function(s,a){var l=a[0],u=a[1];return{a:function(){var f=s.div(u.toFloat()),p=rn(l.shape,o);return p.length>0?f.sum(p).reshape(l.shape):f},b:function(){var f=s.mul(l.toFloat()),p=rn(u.shape,o);p.length>0&&(f=f.sum(p).reshape(u.shape));var m=u.square();return f.div(m.toFloat()).neg()}}},"Div")}}),T6=X({divNoNan_:function(n,e){var t,r=V(n,"a","div"),i=V(e,"b","div");r=(t=Ft(r,i))[0],i=t[1];var o=oi(r,i),s=st(o),a=i.equal(s);return Ca(a,s,o)}}),D6=X({divStrict_:function(n,e){var t=V(n,"a","div"),r=V(e,"b","div");return pt(t.shape,r.shape,"Error in divideStrict: "),t.div(r)}}),v4=X({floorDiv_:function(n,e){var t,r=V(n,"a","floorDiv"),i=V(e,"b","floorDiv");t=Ft(r,i),r=t[0],i=t[1];var o=et(r.shape,i.shape);return Z.runKernelFunc(function(s,a){var l=s.floorDiv(r,i);return a([r,i]),l},{a:r,b:i},function(s,a){var l=a[0],u=a[1];return{a:function(){var f=s.div(u.toFloat()),p=rn(l.shape,o);return p.length>0?f.sum(p).reshape(l.shape):f},b:function(){var f=s.mul(l.toFloat()),p=rn(u.shape,o);p.length>0&&(f=f.sum(p).reshape(u.shape));var m=u.square();return f.div(m.toFloat()).neg()}}},"FloorDiv")}}),vv=X({maximum_:function(n,e){var t,r=V(n,"a","maximum"),i=V(e,"b","maximum");return t=Ft(r,i),r=t[0],i=t[1],r.dtype==="bool"&&(r=r.toInt(),i=i.toInt()),et(r.shape,i.shape),Z.runKernelFunc(function(o,s){var a=o.maximum(r,i);return s([r,i]),a},{a:r,b:i},function(o,s){var a=s[0],l=s[1];return{a:function(){return o.mul(a.greaterEqual(l).toFloat())},b:function(){return o.mul(a.less(l).toFloat())}}},"Maximum")}}),M6=X({maximumStrict_:function(n,e){var t=V(n,"a","maximumStrict"),r=V(e,"b","maximumStrict");return pt(t.shape,r.shape,"Error in maximumStrict: "),t.maximum(r)}}),x4=X({minimum_:function(n,e){var t,r=V(n,"a","minimum"),i=V(e,"b","minimum");return t=Ft(r,i),r=t[0],i=t[1],r.dtype==="bool"&&(r=r.toInt(),i=i.toInt()),et(r.shape,i.shape),Z.runKernelFunc(function(o,s){var a=o.minimum(r,i);return s([r,i]),a},{a:r,b:i},function(o,s){var a=s[0],l=s[1];return{a:function(){return o.mul(a.lessEqual(l).toFloat())},b:function(){return o.mul(a.greater(l).toFloat())}}},"Minimum")}}),P6=X({minimumStrict_:function(n,e){var t=V(n,"a","minimumStrict"),r=V(e,"b","minimumStrict");return pt(t.shape,r.shape,"Error in minimumStrict: "),t.minimum(r)}}),O6=X({mod_:function(n,e){var t,r=V(n,"a","mod"),i=V(e,"b","mod");t=Ft(r,i),r=t[0],i=t[1];var o=et(r.shape,i.shape);return Z.runKernelFunc(function(s,a){var l=s.mod(r,i);return a([r,i]),l},{$a:r,$b:i},function(s,a){var l=a[0],u=a[1];return{$a:function(){var f=rn(l.shape,o);return f.length>0?s.sum(f).reshape(l.shape):s},$b:function(){var f=s.mul(l.div(u).floor().neg()),p=rn(u.shape,o);return p.length>0?f.sum(p).reshape(u.shape):f}}})}}),F6=X({modStrict_:function(n,e){var t=V(n,"a","modStrict"),r=V(e,"b","modStrict");return pt(t.shape,r.shape,"Error in modStrict: "),t.mod(r)}}),Fn=X({mul_:function(n,e){var t,r=V(n,"a","mul"),i=V(e,"b","mul");t=Ft(r,i),r=t[0],i=t[1];var o=et(r.shape,i.shape);return Z.runKernelFunc(function(s,a){var l=s.multiply(r,i);return a([r,i]),l},{a:r,b:i},function(s,a){var l=a[0],u=a[1];return{a:function(){var f=s.mul(u.toFloat()),p=rn(l.shape,o);return p.length>0?f.sum(p).reshape(l.shape):f},b:function(){var f=s.mul(l.toFloat()),p=rn(u.shape,o);return p.length>0?f.sum(p).reshape(u.shape):f}}},"Mul")}}),L6=X({mulStrict_:function(n,e){var t=V(n,"a","mul"),r=V(e,"b","mul");return pt(t.shape,r.shape,"Error in multiplyStrict: "),t.mul(r)}}),Df=X({pow_:function(n,e){var t,r=V(n,"base","pow"),i=V(e,"exp","pow");t=Ft(r,i),r=t[0],i=t[1];var o=et(r.shape,i.shape),s=[r,i];return Z.runKernelFunc(function(a,l){var u=a.pow(r,i);return l([r,i,u]),u},{a:r,b:i},function(a,l){var u=l[0],f=l[1],p=l[2];return{a:function(){var m=f.toFloat(),v=a.mul(m.mul(u.pow(m.sub(ke(1))))),y=rn(u.shape,o);return y.length>0&&(v=v.sum(y)),v.reshape(u.shape)},b:function(){var m=u.greater(0),v=u.log().where(m,st(u)),y=a.mul(p.mul(v)),w=rn(f.shape,o);return w.length>0&&(y=y.sum(w)),y.reshape(f.shape)}}},"Pow",{},s,[!0])}}),B6=X({powStrict_:function(n,e){return pt(n.shape,e.shape,"Error in powStrict: "),n.pow(e)}}),z6=X({squaredDifferenceStrict_:function(n,e){var t=V(n,"a","squaredDifferenceStrict"),r=V(e,"b","squaredDifferenceStrict");return pt(t.shape,r.shape,"Error in squaredDifferenceStrict: "),t.squaredDifference(r)}}),on=X({sub_:function(n,e){var t,r=V(n,"a","sub"),i=V(e,"b","sub");t=Ft(r,i),r=t[0],i=t[1];var o=et(r.shape,i.shape);return Z.runKernelFunc(function(s){return s.subtract(r,i)},{a:r,b:i},function(s){return{a:function(){var a=s,l=rn(r.shape,o);return l.length>0&&(a=a.sum(l)),a.reshape(r.shape)},b:function(){var a=s,l=rn(i.shape,o);return l.length>0&&(a=a.sum(l)),a.neg().reshape(i.shape)}}},"Sub")}}),W6=X({subStrict_:function(n,e){var t=V(n,"a","subStrict"),r=V(e,"b","subStrict");return pt(t.shape,r.shape,"Error in subStrict: "),t.sub(r)}}),y4=X({equal_:function(n,e){var t,r=V(n,"a","equal"),i=V(e,"b","equal");return t=Ft(r,i),r=t[0],i=t[1],et(r.shape,i.shape),Z.runKernelFunc(function(o){return o.equal(r,i)},{$a:r,$b:i})}}),V6=X({equalStrict_:function(n,e){var t=V(n,"a","equalStrict"),r=V(e,"b","equalStrict");return pt(t.shape,r.shape,"Error in equalStrict: "),t.equal(r)}}),U6=X({greater_:function(n,e){var t,r=V(n,"a","greater"),i=V(e,"b","greater");return t=Ft(r,i),r=t[0],i=t[1],et(r.shape,i.shape),Z.runKernelFunc(function(o){return o.greater(r,i)},{a:r,b:i},null,"Greater")}}),b4=X({greaterEqual_:function(n,e){var t,r=V(n,"a","greaterEqual"),i=V(e,"b","greaterEqual");return t=Ft(r,i),r=t[0],i=t[1],et(r.shape,i.shape),Z.runKernelFunc(function(o,s){var a=o.greaterEqual(r,i);return s([r,i]),a},{a:r,b:i},function(o,s){var a=s[0],l=s[1];return{a:function(){return st(a)},b:function(){return st(l)}}},"GreaterEqual")}}),H6=X({greaterEqualStrict_:function(n,e){var t=V(n,"a","greaterEqualStrict"),r=V(e,"b","greaterEqualStrict");return pt(t.shape,r.shape,"Error in greaterEqualStrict: "),t.greaterEqual(r)}}),G6=X({greaterStrict_:function(n,e){var t=V(n,"a","greaterStrict"),r=V(e,"b","greaterStrict");return pt(t.shape,r.shape,"Error in greaterStrict: "),t.greater(r)}}),$6=X({less_:function(n,e){var t,r=V(n,"a","less"),i=V(e,"b","less");return t=Ft(r,i),r=t[0],i=t[1],et(r.shape,i.shape),Z.runKernelFunc(function(o){return o.less(r,i)},{a:r,b:i},null,"Less")}}),q6=X({lessEqual_:function(n,e){var t,r=V(n,"a","lessEqual"),i=V(e,"b","lessEqual");return t=Ft(r,i),r=t[0],i=t[1],et(r.shape,i.shape),Z.runKernelFunc(function(o,s){var a=o.lessEqual(r,i);return s([r,i]),a},{a:r,b:i},null,"LessEqual")}}),K6=X({lessEqualStrict_:function(n,e){var t=V(n,"a","lessEqualStrict"),r=V(e,"b","lessEqualStrict");return pt(t.shape,r.shape,"Error in lessEqualStrict: "),t.lessEqual(r)}}),X6=X({lessStrict_:function(n,e){var t=V(n,"a","lessStrict"),r=V(e,"b","lessStrict");return pt(t.shape,r.shape,"Error in lessStrict: "),t.less(r)}}),Y6=X({notEqual_:function(n,e){var t,r=V(n,"a","notEqual"),i=V(e,"b","notEqual");return t=Ft(r,i),r=t[0],i=t[1],et(r.shape,i.shape),Z.runKernelFunc(function(o){return o.notEqual(r,i)},{a:r,b:i},null,"NotEqual")}}),J6=X({notEqualStrict_:function(n,e){var t=V(n,"a","notEqualStrict"),r=V(e,"b","notEqualStrict");return pt(t.shape,r.shape,"Error in notEqualStrict: "),t.notEqual(r)}});function s2(n,e){for(var t=[],r=n;r<e;++r)t.push(r);return t}function a2(n){for(var e=[],t=0;t<n.length;++t)for(var r=0;r<n[t].length;++r)e.push(n[t][r]);return e}var xv=X({gather_:function(n,e,t){t===void 0&&(t=0);var r=V(n,"x","gather"),i=V(e,"indices","gather","int32");t=sn(t,r.shape)[0];var o=function(s,a,l){for(var u=s.shape[l],f=[],p=1,m=1,v=0;v<l;v++)f.push(s.shape[v]),p*=s.shape[v];for(v=0;v<a.rank;v++)f.push(a.shape[v]);for(v=l+1;v<s.rank;v++)f.push(s.shape[v]),m*=s.shape[v];return{batchSize:p,sliceSize:m,dimSize:u,outputShape:f}}(r,i,t);return Z.runKernelFunc(function(s,a){var l=s.gather(r,i.flatten(),t);return a([i]),l},{x:r,indices:i},function(s,a){var l=a[0];return{x:function(){var u=r.shape,f=l.size,p=u.slice(0,t),m=p.length,v=u.slice(t,u.length).slice(1),y=v.length,w=s2(0,m),_=s2(m+1,m+1+y),k=a2([p,[f],v]),E=s.reshape(k),N=l.reshape([f]),S=a2([[m],w,_]),A=E.transpose(S),P=w4(A,N,r.shape[t]),D=iv(S);return P=P.transpose(D)},indices:function(){return l}}},"Gather",{axis:t}).reshape(o.outputShape)}}),w4=X({unsortedSegmentSum_:function(n,e,t){var r=V(n,"x","unsortedSegmentSum"),i=V(e,"segmentIds","unsortedSegmentSum","int32");return U(Ht(t),function(){return"numSegments must be of dtype int"}),Z.runKernelFunc(function(o,s){var a=o.unsortedSegmentSum(r,i,t);return s([i]),a},{$x:r},function(o,s){var a=s[0];return{$x:function(){return function(l,u){for(var f=vv(u,st(u)),p=xv(l,f),m=b4(u,ke(0,"int32")),v=p.rank-m.rank,y=0;y<v;++y)m=Br(m,y+1);m=tp(m,rc(p.shape,"bool"));var w=st(p);return Ca(m,p,w)}(o,a)}}})}}),Q6=function(n,e,t){return Re(this,void 0,void 0,function(){var r,i,o,s,a,l,u,f,p,m,v,y,w;return je(this,function(_){switch(_.label){case 0:for(r=V(n,"tensor","boolMask"),i=V(e,"mask","boolMask","bool"),o=t??0,s=i.rank,a=r.shape,U(s>0,function(){return"mask cannot be scalar"}),pt(a.slice(o,o+s),i.shape,"mask's shape must match the first K dimensions of tensor's shape,"),l=1,u=o;u<o+s;u++)l*=a[u];return f=a.slice(0,o).concat([l],a.slice(o+s)),p=r.reshape(f),m=i.reshape([-1]),[4,g4(m)];case 1:return v=_.sent(),y=v.squeeze([1]),w=xv(p,y,o),n!==r&&r.dispose(),e!==i&&i.dispose(),y.dispose(),p.dispose(),m.dispose(),v.dispose(),[2,w]}})})};function _4(n,e,t,r,i,o,s){o===void 0&&(o="NHWC"),U(n.length===e.rank,function(){return"Length of inShape ("+n.length+") and rank of dy ("+e.rank+") must match"});var a=n,l=e,u=!1;e.rank===3&&(u=!0,l=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]),a=[1,n[0],n[1],n[2]]),U(a.length===4,function(){return"Error in conv2dDerInput: inShape must be length 4, but got length "+a.length+"."}),U(l.rank===4,function(){return"Error in conv2dDerInput: dy must be rank 4, but got rank "+l.rank}),U(t.rank===4,function(){return"Error in conv2dDerInput: filter must be rank 4, but got rank "+t.rank});var f=o==="NHWC"?a[3]:a[1],p=o==="NHWC"?l.shape[3]:l.shape[1];U(f===t.shape[2],function(){return"Error in conv2dDerInput: depth of input ("+f+") must match input depth for filter "+t.shape[2]+"."}),U(p===t.shape[3],function(){return"Error in conv2dDerInput: depth of output ("+p+") must match output depth for filter "+t.shape[3]+"."}),s!=null&&U(Ht(i),function(){return"Error in conv2dDerInput: pad must be an integer when using, dimRoundingMode "+s+" but got pad "+i+"."});var m=cv(o),v=Ta(a,t.shape,r,1,i,s,!1,m),y=Z.runKernelFunc(function(w,_){var k=w.conv2dDerInput(l,t,v);return _([t,l]),k},{dy4D:l,filter:t},function(w,_){var k=_[0],E=_[1];return{dy4D:function(){return Ur(w,k,r,i,o,1,s)},filter:function(){return yv(w,E,k.shape,r,i,o,s)}}});return u?y.as3D(y.shape[1],y.shape[2],y.shape[3]):y}function _0(n){var e=function(o){return typeof o=="number"?[o,o,o]:o.length===2?[o[0],o[1],1]:o}(n),t=e[0],r=e[1],i=e[2];return t===1&&r===1&&i===1}function k4(n,e,t,r,i){U(n.length===e.rank,function(){return"Length of inShape ("+n.length+") and rank of dy ("+e.rank+") must match"});var o=n,s=e,a=!1;e.rank===4&&(a=!0,s=e.as5D(1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]),o=[1,n[0],n[1],n[2],n[3]]);var l=o[4],u=s.shape[4];U(o.length===5,function(){return"Error in conv3dDerInput: inShape must be length 5, but got length "+o.length+"."}),U(s.rank===5,function(){return"Error in conv3dDerInput: dy must be rank 5, but got rank "+s.rank}),U(t.rank===5,function(){return"Error in conv3dDerInput: filter must be rank 5, but got rank "+t.rank}),U(l===t.shape[3],function(){return"Error in conv3dDerInput: depth of input ("+l+") must match input depth for filter "+t.shape[3]+"."}),U(u===t.shape[4],function(){return"Error in conv3dDerInput: depth of output ("+u+") must match output depth for filter "+t.shape[4]+"."});var f=Rf(o,t.shape,r,1,i),p=Z.runKernelFunc(function(m){return m.conv3dDerInput(s,t,f)},{dy5D:s});return a?p.as4D(p.shape[1],p.shape[2],p.shape[3],p.shape[4]):p}var Z6=X({conv1d_:function(n,e,t,r,i,o,s){i===void 0&&(i="NWC"),o===void 0&&(o=1);var a=V(n,"x","conv1d"),l=V(e,"filter","conv1d"),u=a,f=!1;a.rank===2&&(f=!0,u=a.as3D(1,a.shape[0],a.shape[1])),U(u.rank===3,function(){return"Error in conv1d: input must be rank 3, but got rank "+u.rank+"."}),U(l.rank===3,function(){return"Error in conv1d: filter must be rank 3, but got rank "+l.rank+"."}),s!=null&&U(Ht(r),function(){return"Error in conv1d: pad must be an integer when using, dimRoundingMode "+s+" but got pad "+r+"."}),U(u.shape[2]===l.shape[1],function(){return"Error in conv1d: depth of input ("+u.shape[2]+") must match input depth for filter "+l.shape[1]+"."}),U(hr(t,o),function(){return"Error in conv1D: Either stride or dilation must be 1. Got stride "+t+" and dilation '"+o+"'"}),U(i==="NWC",function(){return"Error in conv1d: got dataFormat of "+i+" but only NWC is currently supported."});var p=l.as4D(1,l.shape[0],l.shape[1],l.shape[2]),m=u.as4D(u.shape[0],1,u.shape[1],u.shape[2]),v=Ur(m,p,[1,t],r,"NHWC",[1,o],s);return f?v.as2D(v.shape[2],v.shape[3]):v.as3D(v.shape[0],v.shape[2],v.shape[3])}}),Ur=X({conv2d_:function(n,e,t,r,i,o,s){i===void 0&&(i="NHWC"),o===void 0&&(o=[1,1]);var a=V(n,"x","conv2d"),l=V(e,"filter","conv2d"),u=a,f=!1;a.rank===3&&(f=!0,u=a.as4D(1,a.shape[0],a.shape[1],a.shape[2])),U(u.rank===4,function(){return"Error in conv2d: input must be rank 4, but got rank "+u.rank+"."}),U(l.rank===4,function(){return"Error in conv2d: filter must be rank 4, but got rank "+l.rank+"."}),s!=null&&U(Ht(r),function(){return"Error in conv2d: pad must be an integer when using, dimRoundingMode "+s+" but got pad "+r+"."});var p=i==="NHWC"?u.shape[3]:u.shape[1];U(p===l.shape[2],function(){return"Error in conv2d: depth of input ("+p+") must match input depth for filter "+l.shape[2]+"."}),U(hr(t,o),function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+t+" and dilations '"+o+"'"});var m=cv(i),v=Ta(u.shape,l.shape,t,o,r,s,!1,m),y=[l,u],w=Z.runKernelFunc(function(_,k){var E=_.conv2d(u,l,v);return k([l,u]),E},{x:u,filter:l},function(_,k){var E=k,N=E[0],S=E[1];return U(Yl(o),function(){return"Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+o+"'"}),{x:function(){return C4(S.shape,_,N,t,r,i)},filter:function(){return yv(S,_,N.shape,t,r,i)}}},"Conv2D",v,y);return f?w.as3D(w.shape[1],w.shape[2],w.shape[3]):w}}),eD=X({conv3d_:function(n,e,t,r,i,o){i===void 0&&(i="NDHWC"),o===void 0&&(o=[1,1,1]);var s=V(n,"x","conv3d"),a=V(e,"filter","conv3d"),l=s,u=!1;s.rank===4&&(u=!0,l=s.as5D(1,s.shape[0],s.shape[1],s.shape[2],s.shape[3])),U(l.rank===5,function(){return"Error in conv3d: input must be rank 5, but got rank "+l.rank+"."}),U(a.rank===5,function(){return"Error in conv3d: filter must be rank 5, but got rank "+a.rank+"."}),U(l.shape[4]===a.shape[3],function(){return"Error in conv3d: depth of input ("+l.shape[4]+") must match input depth for filter "+a.shape[3]+"."}),U(function(m,v){return _0(m)||_0(v)}(t,o),function(){return"Error in conv3D: Either strides or dilations must be 1. Got strides "+t+" and dilations '"+o+"'"}),U(i==="NDHWC",function(){return"Error in conv3d: got dataFormat of "+i+" but only NDHWC is currently supported."});var f=Rf(l.shape,a.shape,t,o,r),p=Z.runKernelFunc(function(m,v){var y=m.conv3d(l,a,f);return v([l,a]),y},{x:l,$filter:a},function(m,v){U(_0(o),function(){return"Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+o+"'"});var y=v[0],w=v[1];return{x:function(){return k4(y.shape,m,w,t,r)},$filter:function(){return function(_,k,E,N,S){var A=_;_.rank===4&&(A=_.as5D(1,_.shape[0],_.shape[1],_.shape[2],_.shape[3]));var P=k;P.rank===4&&(P=k.as5D(1,k.shape[0],k.shape[1],k.shape[2],k.shape[3])),U(A.rank===5,function(){return"Error in conv3dDerFilter: input must be rank 5, but got shape "+A.shape+"."}),U(P.rank===5,function(){return"Error in conv3dDerFilter: dy must be rank 5, but got shape "+P.shape+"."}),U(E.length===5,function(){return"Error in conv3dDerFilter: filterShape must be length 5, but got "+E+"."}),U(A.shape[4]===E[3],function(){return"Error in conv3dDerFilter: depth of input "+A.shape[4]+") must match input depth in filter ("+E[3]+"."}),U(P.shape[4]===E[4],function(){return"Error in conv3dDerFilter: depth of dy ("+P.shape[4]+") must match output depth for filter ("+E[4]+")."});var D=Rf(A.shape,E,N,1,S);return Z.runKernelFunc(function(j){return j.conv3dDerFilter(A,P,D)},{x5D:A,dy5D:P})}(y,m,w.shape,t,r)}}});return u?p.as4D(p.shape[1],p.shape[2],p.shape[3],p.shape[4]):p}}),yv=X({conv2dDerFilter_:function(n,e,t,r,i,o,s){o===void 0&&(o="NHWC");var a=n;n.rank===3&&(a=n.as4D(1,n.shape[0],n.shape[1],n.shape[2]));var l=e;l.rank===3&&(l=e.as4D(1,e.shape[0],e.shape[1],e.shape[2])),U(a.rank===4,function(){return"Error in conv2dDerFilter: input must be rank 4, but got shape "+a.shape+"."}),U(l.rank===4,function(){return"Error in conv2dDerFilter: dy must be rank 4, but got shape "+l.shape+"."}),U(t.length===4,function(){return"Error in conv2dDerFilter: filterShape must be length 4, but got "+t+"."});var u=o==="NHWC"?a.shape[3]:a.shape[1],f=o==="NHWC"?l.shape[3]:l.shape[1];U(u===t[2],function(){return"Error in conv2dDerFilter: depth of input "+u+") must match input depth in filter ("+t[2]+"."}),U(f===t[3],function(){return"Error in conv2dDerFilter: depth of dy ("+f+") must match output depth for filter ("+t[3]+")."}),s!=null&&U(Ht(i),function(){return"Error in conv2dDerFilter: pad must be an integer when using, dimRoundingMode "+s+" but got pad "+i+"."});var p=cv(o),m=Ta(a.shape,t,r,1,i,s,!1,p);return Z.runKernelFunc(function(v){return v.conv2dDerFilter(a,l,m)},{x4D:a,dy4D:l})}}),C4=X({conv2dDerInput_:_4}),np=X({depthwiseConv2d_:function(n,e,t,r,i,o,s){o===void 0&&(o=[1,1]);var a=V(n,"x","depthwiseConv2d"),l=V(e,"filter","depthwiseConv2d"),u=a,f=!1;a.rank===3&&(f=!0,u=a.as4D(1,a.shape[0],a.shape[1],a.shape[2])),U(u.rank===4,function(){return"Error in depthwiseConv2d: input must be rank 4, but got rank "+u.rank+"."}),U(l.rank===4,function(){return"Error in depthwiseConv2d: filter must be rank 4, but got rank "+l.rank+"."}),U(u.shape[3]===l.shape[2],function(){return"Error in depthwiseConv2d: number of input channels ("+u.shape[3]+") must match the inChannels dimension in filter "+l.shape[2]+"."}),o==null&&(o=[1,1]),U(hr(t,o),function(){return"Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides "+t+" and dilations '"+o+"'"}),s!=null&&U(Ht(r),function(){return"Error in depthwiseConv2d: pad must be an integer when using, dimRoundingMode "+s+" but got pad "+r+"."});var p=Ta(u.shape,l.shape,t,o,r,s,!0),m=[u,l],v=Z.runKernelFunc(function(y,w){var _=y.depthwiseConv2D(u,l,p);return w([u,l]),_},{x:u,filter:l},function(y,w){U(Yl(o),function(){return"Error in gradient of depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+o+"'"});var _=w[0],k=w[1];return{x:function(){return E4(_.shape,y,k,p)},filter:function(){return N4(_,y,k.shape,p)}}},"DepthwiseConv2dNative",p,m);return f?v.as3D(v.shape[1],v.shape[2],v.shape[3]):v}}),E4=X({depthwiseConv2dDerInput_:function(n,e,t,r){var i=e,o=!1;e.rank===3&&(o=!0,i=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]));var s=Z.runKernelFunc(function(a){return a.depthwiseConv2DDerInput(i,t,r)},{dy4D:i});return o?s.as3D(s.shape[1],s.shape[2],s.shape[3]):s}}),N4=X({depthwiseConv2dDerFilter_:function(n,e,t,r){var i=n;n.rank===3&&(i=n.as4D(1,n.shape[0],n.shape[1],n.shape[2]));var o=e;return o.rank===3&&(o=e.as4D(1,e.shape[0],e.shape[1],e.shape[2])),Z.runKernelFunc(function(s){return s.depthwiseConv2DDerFilter(i,o,r)},{x4D:i,dy4D:o})}}),bv=X({separableConv2d_:function(n,e,t,r,i,o,s){o===void 0&&(o=[1,1]),s===void 0&&(s="NHWC");var a=V(n,"x","separableConv2d"),l=V(e,"depthwiseFilter","separableConv2d"),u=V(t,"pointwiseFilter","separableConv2d"),f=a,p=!1;if(a.rank===3&&(p=!0,f=a.as4D(1,a.shape[0],a.shape[1],a.shape[2])),s==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");U(f.rank===4,function(){return"Error in separableConv2d: input must be rank 4, but got rank "+f.rank+"."}),U(l.rank===4,function(){return"Error in separableConv2d: depthwise filter must be rank 4, but got rank "+l.rank+"."}),U(u.rank===4,function(){return"Error in separableConv2d: pointwise filter must be rank 4, but got rank "+l.rank+"."}),U(u.shape[0]===1,function(){return"Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got "+u.shape[0]+"."}),U(u.shape[1]===1,function(){return"Error in separableConv2d: the second dimension of pointwise filter must be 1, but got "+u.shape[1]+"."});var m=l.shape[2],v=l.shape[3];U(u.shape[2]===m*v,function(){return"Error in separableConv2d: the third dimension of pointwise filter must be "+m*v+", but got "+u.shape[2]+"."});var y=np(f,l,r,i,s,o),w=Ur(y,u,1,"valid",s);return p?w.as3D(w.shape[1],w.shape[2],w.shape[3]):w}}),tD=X({conv2dTranspose_:function(n,e,t,r,i,o){return _4(t,V(n,"x","conv2dTranspose"),V(e,"filter","conv2dTranspose"),r,i,"NHWC",o)}}),nD=X({conv3dTranspose_:function(n,e,t,r,i){return k4(t,V(n,"x","conv3dTranspose"),V(e,"filter","conv3dTranspose"),r,i)}}),rp=X({matMul_:function(n,e,t,r){var i;t===void 0&&(t=!1),r===void 0&&(r=!1);var o=V(n,"a","matMul"),s=V(e,"b","matMul");i=Ft(o,s),o=i[0],s=i[1];var a=t?o.shape[o.rank-2]:o.shape[o.rank-1],l=r?s.shape[s.rank-1]:s.shape[s.rank-2],u=t?o.shape[o.rank-1]:o.shape[o.rank-2],f=r?s.shape[s.rank-2]:s.shape[s.rank-1],p=o.shape.slice(0,-2),m=s.shape.slice(0,-2),v=Me(p),y=Me(m);U(o.rank>=2&&s.rank>=2&&o.rank===s.rank,function(){return"Error in matMul: inputs must have the same rank of at least 2, got ranks "+o.rank+" and "+s.rank+"."}),U(pn(p,m),function(){return"Error in matMul: outer dimensions ("+p+") and ("+m+") of Tensors with shapes "+o.shape+" and "+s.shape+" must match."}),U(a===l,function(){return"Error in matMul: inner shapes ("+a+") and ("+l+") of Tensors with shapes "+o.shape+" and "+s.shape+" and transposeA="+t+" and transposeB="+r+" must match."});var w=o.shape.slice(0,-2).concat([u,f]),_=t?o.as3D(v,a,u):o.as3D(v,u,a),k=r?s.as3D(y,f,l):s.as3D(y,l,f),E={transposeA:t,transposeB:r};return Z.runKernelFunc(function(N,S){var A=N.batchMatMul(_,k,t,r);return S([_,k]),A},{a:_,b:k},function(N,S){var A=S,P=A[0],D=A[1];return t||r?!t&&r?{a:function(){return N.matMul(D,!1,!1)},b:function(){return N.matMul(P,!0,!1)}}:t&&!r?{a:function(){return D.matMul(N,!1,!0)},b:function(){return P.matMul(N,!1,!1)}}:{a:function(){return D.matMul(N,!0,!0)},b:function(){return N.matMul(P,!0,!0)}}:{a:function(){return N.matMul(D,!1,!0)},b:function(){return P.matMul(N,!0,!1)}}},"BatchMatMul",E).reshape(w)}}),rD=X({dot_:function(n,e){var t=V(n,"t1","dot"),r=V(e,"t2","dot");U(!(t.rank!==1&&t.rank!==2||r.rank!==1&&r.rank!==2),function(){return"Error in dot: inputs must all be rank 1 or 2, but got ranks "+t.rank+" and "+r.rank+"."});var i=t.rank===1?t.size:t.shape[1],o=r.rank===1?r.size:r.shape[0];return U(i===o,function(){return"Error in dot: inner dimensions of inputs must match, but got "+i+" and "+o+"."}),t.rank===1&&r.rank===1?t.as2D(1,-1).matMul(r.as2D(-1,1)).asScalar():t.rank===1&&r.rank===2?t.as2D(1,-1).matMul(r.as2D(r.shape[0],r.shape[1])).as1D():t.rank===2&&r.rank===1?t.matMul(r.as2D(-1,1)).as1D():t.matMul(r.as2D(r.shape[0],r.shape[1]))}}),iD=X({outerProduct_:function(n,e){var t=V(n,"v1","outerProduct"),r=V(e,"v2","outerProduct");return U(t.rank===1&&r.rank===1,function(){return"Error in outerProduct: inputs must be rank 1, but got ranks "+t.rank+" and "+r.rank+"."}),t.as2D(-1,1).matMul(r.as2D(1,-1))}}),Zu=X({reverse_:function(n,e){var t=V(n,"x","reverse");if(t.rank===0)return t.clone();var r=sn(e,t.shape);return Z.runKernelFunc(function(i){return i.reverse(t,r)},{$x:t},function(i){return{$x:function(){return i.reverse(r)}}}).reshapeAs(t)}}),oD=X({reverse1d_:function(n){var e=V(n,"x","reverse");return U(e.rank===1,function(){return"Error in reverse1D: x must be rank 1 but got rank "+e.rank+"."}),Zu(e,0)}}),sD=X({reverse2d_:function(n,e){var t=V(n,"x","reverse");return U(t.rank===2,function(){return"Error in reverse2D: x must be rank 2 but got rank "+t.rank+"."}),Zu(t,e)}}),aD=X({reverse3d_:function(n,e){var t=V(n,"x","reverse");return U(t.rank===3,function(){return"Error in reverse3D: x must be rank 3 but got rank "+t.rank+"."}),Zu(t,e)}}),lD=X({reverse4d_:function(n,e){var t=V(n,"x","reverse");return U(t.rank===4,function(){return"Error in reverse4D: x must be rank 4 but got rank "+t.rank+"."}),Zu(t,e)}});function S4(n,e,t,r,i,o){var s=V(n,"x","maxPool"),a=s,l=!1;s.rank===3&&(l=!0,a=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),U(a.rank===4,function(){return"Error in maxPool: input must be rank 4 but got rank "+a.rank+"."}),U(hr(t,r),function(){return"Error in maxPool: Either strides or dilations must be 1. Got strides "+t+" and dilations '"+r+"'"}),o!=null&&U(Ht(i),function(){return"Error in maxPool: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+i+"."});var u=Au(a.shape,e,t,r,i,o);if(u.filterWidth===1&&u.filterHeight===1&&pn(u.inShape,u.outShape))return s.clone();var f=[a],p=Z.runKernelFunc(function(m,v){var y=m.maxPool(a,u);return v([a,y]),y},{x:a},function(m,v){var y=v[0],w=v[1];return{x:function(){return function(_,k,E,N,S,A,P,D){var j=V(_,"dy","maxPoolBackprop"),T=V(k,"input","maxPoolBackprop"),M=V(E,"output","maxPoolBackprop");U(T.rank===j.rank,function(){return"Rank of input ("+T.rank+") does not match rank of dy ("+j.rank+")"}),U(hr(S,A),function(){return"Error in maxPoolBackProp: Either strides or dilations must be 1. Got strides "+S+" and dilations '"+A+"'"}),U(j.rank===4,function(){return"Error in maxPoolBackprop: dy must be rank 4 but got rank "+j.rank+"."}),U(T.rank===4,function(){return"Error in maxPoolBackprop: input must be rank 4 but got rank "+T.rank+"."});var L=Au(T.shape,N,S,A,P,D);return Z.runKernelFunc(function(B){return B.maxPoolBackprop(j,T,M,L)},{$dy:j,$input:T})}(m,y,w,e,t,r,i)}}},"MaxPool",u,f);return l?p.as3D(p.shape[1],p.shape[2],p.shape[3]):p}function I4(n,e,t,r,i,o){var s=V(n,"x","avgPool","float32");U(hr(t,r),function(){return"Error in avgPool: Either strides or dilations must be 1. Got strides "+t+" and dilations '"+r+"'"});var a=s,l=!1;s.rank===3&&(l=!0,a=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),U(a.rank===4,function(){return"Error in avgPool: x must be rank 4 but got rank "+a.rank+"."}),o!=null&&U(Ht(i),function(){return"Error in avgPool: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+i+"."});var u=Au(a.shape,e,t,r,i,o);if(u.filterWidth===1&&u.filterHeight===1&&pn(u.inShape,u.outShape))return s.clone();var f=Z.runKernelFunc(function(p){return p.avgPool(a,u)},{x:a},function(p){return{x:function(){return function(m,v,y,w,_,k){var E=V(m,"dy","avgPoolBackprop"),N=V(v,"input","avgPoolBackprop");U(N.rank===E.rank,function(){return"Rank of input ("+N.rank+") does not match rank of dy ("+E.rank+")"}),U(hr(w,_),function(){return"Error in avgPoolBackprop: Either strides or dilations must be 1. Got strides "+w+" and dilations '"+_+"'"});var S=N,A=E,P=!1;N.rank===3&&(P=!0,S=N.as4D(1,N.shape[0],N.shape[1],N.shape[2]),A=E.as4D(1,E.shape[0],E.shape[1],E.shape[2])),U(A.rank===4,function(){return"Error in avgPoolBackprop: dy must be rank 4 but got rank "+A.rank+"."}),U(S.rank===4,function(){return"Error in avgPoolBackprop: input must be rank 4 but got rank "+S.rank+"."});var D=Au(S.shape,y,w,_,k),j=Z.runKernelFunc(function(T){return T.avgPoolBackprop(A,S,D)},{dy4D:A,input4D:S});return P?j.as3D(j.shape[1],j.shape[2],j.shape[3]):j}(p,a,e,t,r,i)}}},"AvgPool",u);return f=f.cast(s.dtype),l?f.as3D(f.shape[1],f.shape[2],f.shape[3]):f}var hn=X({maxPool_:function(n,e,t,r,i){return S4(n,e,t,1,r,i)}}),ed=X({avgPool_:function(n,e,t,r,i){return I4(n,e,t,1,r,i)}}),cD=X({pool_:function(n,e,t,r,i,o){i==null&&(i=[1,1]),o==null&&(o=1),r===0&&(r="valid");var s=V(n,"x","maxPool"),a=s,l=!1;s.rank===3&&(l=!0,a=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),U(hr(o,i),function(){return"Error in pool: Either strides or dilations must be 1. Got strides "+o+" and dilations '"+i+"'"});var u,f=Au(a.shape,e,o,i,r),p=[f.dilationHeight,f.dilationWidth];u=r==="same"?function(S,A){var P=S.map(function(T,M){return T+(T-1)*(A[M]-1)}).map(function(T){return T-1}),D=P.map(function(T){return Math.floor(T/2)}),j=P.map(function(T,M){return T-D[M]});return P.map(function(T,M){return[D[M],j[M]]})}([f.filterHeight,f.filterWidth],p):[[0,0],[0,0]];var m=p[0]===1&&p[1]===1,v=function(S,A,P){var D=P.map(function(K){return K[0]}),j=P.map(function(K){return K[1]}),T=S.concat(D,j),M=A.map(function(K,te){return(K-T[te]%K)%K}),L=j.map(function(K,te){return K+M[te]}),B=A.map(function(K,te){return[D[te],L[te]]}),F=A.map(function(K,te){return[0,M[te]]});return[B,F]}([f.inHeight,f.inWidth],p,u),y=v[0],w=v[1],_=m?r:"valid",k=m?a:Mk(a,p,y),E=(t==="avg"?function(){return I4(k,e,o,1,_)}:function(){return S4(k,e,o,1,_)})(),N=m?E:jk(E,p,w);return l?N.as3D(N.shape[1],N.shape[2],N.shape[3]):N}}),uD=X({maxPool3d_:function(n,e,t,r,i,o,s){o===void 0&&(o="NDHWC");var a=V(n,"x","maxPool3d"),l=a,u=!1;a.rank===4&&(u=!0,l=a.as5D(1,a.shape[0],a.shape[1],a.shape[2],a.shape[3])),s==null&&(s=[1,1,1]),U(l.rank===5,function(){return"Error in maxPool3d: x must be rank 5 but got rank "+l.rank+"."}),U(o==="NDHWC",function(){return"Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of "+o}),U(hr(t,s),function(){return"Error in maxPool3d: Either strides or dilations must be 1. Got strides "+t+" and dilations '"+s+"'"}),i!=null&&U(Ht(r),function(){return"Error in maxPool3d: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+r+"."});var f=Af(l.shape,e,t,s,r,i,o),p=Z.runKernelFunc(function(m,v){var y=m.maxPool3d(l,f);return v([l,y]),y},{x:l},function(m,v){var y=v[0],w=v[1];return{x:function(){return function(_,k,E,N,S,A,P,D){var j=V(_,"dy","maxPool3dBackprop"),T=V(k,"input","maxPool3dBackprop"),M=V(E,"output","maxPool3dBackprop"),L=j,B=T,F=M,K=!1;T.rank===4&&(K=!0,L=j.as5D(1,j.shape[0],j.shape[1],j.shape[2],j.shape[3]),B=T.as5D(1,T.shape[0],T.shape[1],T.shape[2],T.shape[3]),F=M.as5D(1,M.shape[0],M.shape[1],M.shape[2],M.shape[3])),U(L.rank===5,function(){return"Error in maxPool3dBackprop: dy must be rank 5 but got rank "+L.rank+"."}),U(B.rank===5,function(){return"Error in maxPool3dBackprop: input must be rank 5 but got rank "+B.rank+"."}),U(F.rank===5,function(){return"Error in maxPool3dBackprop: output must be rank 5 but got rank "+F.rank+"."}),A==null&&(A=[1,1,1]),U(hr(S,A),function(){return"Error in maxPool3dBackprop: Either strides or dilations must be 1. Got strides "+S+" and dilations '"+A+"'"}),D!=null&&U(Ht(P),function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+D+" but got pad "+P+"."});var te=Af(B.shape,N,S,A,P,D),se=Z.runKernelFunc(function(q){return q.maxPool3dBackprop(L,B,F,te)},{dy5D:L,input5D:B});return K?se.as4D(se.shape[1],se.shape[2],se.shape[3],se.shape[4]):se}(m,y,w,e,t,s,r,i)}}});return u?p.as4D(p.shape[1],p.shape[2],p.shape[3],p.shape[4]):p}}),dD=X({avgPool3d_:function(n,e,t,r,i,o,s){o===void 0&&(o="NDHWC");var a=V(n,"x","avgPool3d","float32"),l=a,u=!1;a.rank===4&&(u=!0,l=a.as5D(1,a.shape[0],a.shape[1],a.shape[2],a.shape[3])),s==null&&(s=[1,1,1]),U(l.rank===5,function(){return"Error in avgPool3d: x must be rank 5 but got rank "+l.rank+"."}),U(o==="NDHWC",function(){return"Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of "+o}),U(hr(t,s),function(){return"Error in avgPool3d: Either strides or dilations must be 1. Got strides "+t+" and dilations '"+s+"'"}),i!=null&&U(Ht(r),function(){return"Error in avgPool3d: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+r+"."});var f=Af(l.shape,e,t,s,r,i,o),p=Z.runKernelFunc(function(m){return m.avgPool3d(l,f)},{x:l},function(m){return{x:function(){return function(v,y,w,_,k,E,N){var S=V(v,"dy","avgPool3dBackprop"),A=V(y,"input","avgPool3dBackprop"),P=S,D=A,j=!1;A.rank===4&&(j=!0,P=S.as5D(1,S.shape[0],S.shape[1],S.shape[2],S.shape[3]),D=A.as5D(1,A.shape[0],A.shape[1],A.shape[2],A.shape[3])),U(P.rank===5,function(){return"Error in avgPool3dBackprop: dy must be rank 5 but got rank "+P.rank+"."}),U(D.rank===5,function(){return"Error in avgPool3dBackprop: input must be rank 5 but got rank "+D.rank+"."}),k==null&&(k=[1,1,1]),U(hr(_,k),function(){return"Error in avgPool3dBackprop: Either strides or dilations must be 1. Got strides "+_+" and dilations '"+k+"'"}),N!=null&&U(Ht(E),function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+N+" but got pad "+E+"."});var T=Af(D.shape,w,_,k,E,N),M=Z.runKernelFunc(function(L){return L.avgPool3dBackprop(P,D,T)},{dy5D:P,input5D:D});return j?M.as4D(M.shape[1],M.shape[2],M.shape[3],M.shape[4]):M}(m,l,e,t,s,r,i)}}});return p=p.cast(l.dtype),u?p.as4D(p.shape[1],p.shape[2],p.shape[3],p.shape[4]):p}}),Bi=X({slice_:function(n,e,t){var r,i,o=V(n,"x","slice");if(o.rank===0)throw new Error("Slicing scalar is not possible");(r=typeof e=="number"?[e].concat(new Array(o.rank-1).fill(0)):e.length<o.rank?e.concat(new Array(o.rank-e.length).fill(0)):e.slice()).forEach(function(l){U(l!==-1,function(){return"slice() does not support negative begin indexing."})}),i=(i=t==null?new Array(o.rank).fill(-1):typeof t=="number"?[t].concat(new Array(o.rank-1).fill(-1)):t.length<o.rank?t.concat(new Array(o.rank-t.length).fill(-1)):t).map(function(l,u){return l>=0?l:(U(l===-1,function(){return"Negative size values should be exactly -1 but got "+l+" for the slice() size at index "+u+"."}),o.shape[u]-r[u])}),BR(o,r,i);var s=o.shape,a={begin:r,size:i};return Z.runKernelFunc(function(l){return l.slice(o,r,i)},{x:o},function(l){for(var u=[],f=0;f<l.rank;f++)u.push([r[f],s[f]-r[f]-i[f]]);return{x:function(){return l.pad(u)}}},"Slice",a)}}),hD=X({slice1d_:function(n,e,t){var r=V(n,"x","slice1d");return U(r.rank===1,function(){return"slice1d expects a rank-1 tensor, but got a rank-"+r.rank+" tensor"}),Bi(r,[e],[t])}}),fD=X({slice2d_:function(n,e,t){var r=V(n,"x","slice2d");return U(r.rank===2,function(){return"slice2d expects a rank-2 tensor, but got a rank-"+r.rank+" tensor"}),Bi(r,e,t)}}),A4=X({slice3d_:function(n,e,t){var r=V(n,"x","slice3d");return U(r.rank===3,function(){return"slice3d expects a rank-3 tensor, but got a rank-"+r.rank+" tensor"}),Bi(r,e,t)}}),pD=X({slice4d_:function(n,e,t){var r=V(n,"x","slice4d");return U(r.rank===4,function(){return"slice4d expects a rank-4 tensor, but got a rank-"+r.rank+" tensor"}),Bi(r,e,t)}});function R4(n,e,t,r,i){return e.rank<t.rank&&(e=e.reshape(dr(e.shape,r))),n.rank<t.rank&&(n=n.reshape(dr(n.shape,r))),{x:function(){var o=n.mul(t.equal(e).cast(n.dtype));return i==null?o:o.transpose(i)}}}var mD=X({all_:function(n,e,t){e===void 0&&(e=null),t===void 0&&(t=!1);var r=V(n,"x","all","bool"),i=sn(e,r.shape),o=i,s=Wi(o,r.rank);s!=null&&(r=r.transpose(s),o=Vi(o.length,r.rank));var a=Z.runKernelFunc(function(u){return u.all(r,o)},{$x:r});if(t){var l=dr(a.shape,i);return a.reshape(l)}return a}}),gD=X({any_:function(n,e,t){e===void 0&&(e=null),t===void 0&&(t=!1);var r=V(n,"x","any","bool"),i=sn(e,r.shape),o=i,s=Wi(o,r.rank);s!=null&&(r=r.transpose(s),o=Vi(o.length,r.rank));var a=Z.runKernelFunc(function(u){return u.any(r,o)},{$x:r});if(t){var l=dr(a.shape,i);return a.reshape(l)}return a}}),vD=X({argMax_:function(n,e){e===void 0&&(e=0);var t=V(n,"x","argMax");e==null&&(e=0);var r=sn(e,t.shape),i=Wi(r,t.rank);i!=null&&(t=t.transpose(i),r=Vi(r.length,t.rank));var o={axis:r[0]},s=[t];return Z.runKernelFunc(function(a,l){var u=a.argMax(t,r[0]);return l([t]),u},{x:t},function(a,l){var u=l[0];return{x:function(){return st(u)}}},"ArgMax",o,s)}}),xD=X({argMin_:function(n,e){e===void 0&&(e=0);var t=V(n,"x","argMin");e==null&&(e=0);var r=sn(e,t.shape),i=Wi(r,t.rank);return i!=null&&(t=t.transpose(i),r=Vi(r.length,t.rank)),Z.runKernelFunc(function(o,s){var a=o.argMin(t,r[0]);return s([t]),a},{$x:t},function(o,s){var a=s[0];return{$x:function(){return st(a)}}})}}),yD=X({logSumExp_:function(n,e,t){e===void 0&&(e=null),t===void 0&&(t=!1);var r=V(n,"x","logSumExp"),i=sn(e,r.shape),o=r.max(i,!0),s=r.sub(o).exp().sum(i).log(),a=o.reshape(s.shape).add(s);if(t){var l=dr(a.shape,i);return a.reshape(l)}return a}}),ip=X({max_:function(n,e,t){e===void 0&&(e=null),t===void 0&&(t=!1);var r=V(n,"x","max"),i=r,o=sn(e,r.shape),s=o,a=Wi(s,r.rank);a!=null&&(r=r.transpose(a),s=Vi(s.length,r.rank));var l=[r],u=Z.runKernelFunc(function(p,m){var v=p.max(r,s);return m([i,v]),v},{x:r},function(p,m){return R4(p,m[1],m[0],o,a)},"Max",{axes:s},l,[!0]);if(t){var f=dr(u.shape,o);u=u.reshape(f)}return u}}),bD=X({mean_:function(n,e,t){e===void 0&&(e=null),t===void 0&&(t=!1);var r=V(n,"x","mean"),i=sn(e,r.shape),o=Me(Tn(r.shape,i)[1]);return Zf(function(s){var a=ke(o);return{value:(a.dtype===s.dtype?s:s.cast(a.dtype)).div(a).sum(e,t),gradFunc:function(l){var u=s.shape.slice();return i.forEach(function(f){u[f]=1}),l.reshape(u).mul(rc(s.shape,"float32")).div(o)}}})(r)}}),wD=X({min_:function(n,e,t){e===void 0&&(e=null),t===void 0&&(t=!1);var r=V(n,"x","min"),i=r,o=sn(e,r.shape),s=o,a=Wi(s,r.rank);a!=null&&(r=r.transpose(a),s=Vi(s.length,r.rank));var l=[r],u=Z.runKernelFunc(function(p,m){var v=p.min(r,s);return m([i,v]),v},{x:r},function(p,m){return R4(p,m[1],m[0],o,a)},"Min",{axes:s},l,[!0]);if(t){var f=dr(u.shape,o);u=u.reshape(f)}return u}}),_D=X({moments_:function(n,e,t){e===void 0&&(e=null),t===void 0&&(t=!1);var r=sn(e,(n=V(n,"x","moments")).shape),i=n.mean(r,t),o=i.shape;t||(o=dr(i.shape,r));var s=n.toFloat().sub(i.reshape(o)).square();return{mean:i,variance:s.mean(r,t)}}}),j4=X({sum_:function(n,e,t){e===void 0&&(e=null),t===void 0&&(t=!1);var r=V(n,"x","sum");r.dtype==="bool"&&(r=r.toInt());var i=sn(e,r.shape);return Zf(function(o){var s=Wi(i,o.rank),a=i,l=o;s!=null&&(l=o.transpose(s),a=Vi(a.length,o.rank));var u=function(v){var y=o.shape.slice();return i.forEach(function(w){y[w]=1}),v.reshape(y).mul(rc(o.shape,"float32"))},f={axes:a},p=Z.runKernelFunc(function(v){return v.sum(l,a)},{x:l},function(v){return{x:function(){return u(v)}}},"Sum",f);if(t){var m=dr(p.shape,i);p=p.reshape(m)}return{value:p,gradFunc:u}})(r)}}),kD=X({prod_:function(n,e,t){e===void 0&&(e=null),t===void 0&&(t=!1);var r=V(n,"x","prod");r.dtype==="bool"&&(r=r.toInt());var i=sn(e,r.shape),o=Wi(i,r.rank),s=i,a=r;o!=null&&(a=r.transpose(o),s=Vi(s.length,r.rank));var l=Z.runKernelFunc(function(f){return f.prod(a,s)},{permutedX:a});if(t){var u=dr(l.shape,i);l=l.reshape(u)}return l}}),T4=X({elu_:function(n){var e=V(n,"x","elu");return Z.runKernelFunc(function(t,r){var i=t.elu(e);return r([i]),i},{$x:e},function(t,r){var i=r[0];return{$x:function(){return Z.runKernelFunc(function(o){return o.eluDer(t,i)},{dy:t,y:i})}}})}}),CD=X({leakyRelu_:function(n,e){e===void 0&&(e=.2);var t=V(n,"x","leakyRelu");return vv(ke(e).mul(t),t)}}),D4=X({prelu_:function(n,e){var t=V(n,"x","prelu"),r=V(e,"alpha","prelu");return Z.runKernelFunc(function(i,o){var s=i.prelu(t,r);return o([t,r]),s},{x:t,alpha:r},function(i,o){var s=o[0],a=o[1],l=s.greater(0);return{x:function(){return Ca(l,i,i.mul(a))},alpha:function(){var u=Ca(l,st(i),i.mul(s)),f=rn(a.shape,i.shape);return f.length>0&&(u=u.sum(f)),u.reshape(a.shape)}}},"Prelu")}}),Ot=X({relu_:function(n){var e=V(n,"x","relu");return e.dtype==="bool"?e.toInt():Z.runKernelFunc(function(t,r){var i=t.relu(e);return r([e]),i},{x:e},function(t,r){var i=r[0];return{x:function(){return t.mulStrict(i.step().toFloat())}}},"Relu")}}),M4=X({relu6_:function(n){var e=V(n,"x","relu6");return e.dtype==="bool"?e.toInt():Z.runKernelFunc(function(t,r){var i=t.relu6(e);return r([e]),i},{x:e},function(t,r){var i=r[0],o=i.lessEqual(6).mul(i.step());return{x:function(){return t.mulStrict(o.toFloat())}}},"Relu6")}}),ED=X({selu_:function(n){var e=V(n,"x","selu");return Z.runKernelFunc(function(t,r){var i=t.selu(e);return r([e]),i},{$x:e},function(t,r){var i=r[0];return{$x:function(){var o=i.greater(ke(0)),s=ke(pv),a=ke(mv),l=t.mul(a),u=t.mul(s).mul(i.toFloat().exp());return Ca(o,l,u)}}})}}),Cs=X({transpose_:function(n,e){var t=V(n,"x","transpose");if(e==null&&(e=t.shape.map(function(i,o){return o}).reverse()),U(t.rank===e.length,function(){return"Error in transpose: rank of input "+t.rank+" must match length of perm "+e+"."}),e.forEach(function(i){U(i>=0&&i<t.rank,function(){return"All entries in 'perm' must be between 0 and "+(t.rank-1)+" but got "+e})}),t.rank<=1)return t.clone();var r={perm:e};return Z.runKernelFunc(function(i){return i.transpose(t,e)},{x:t},function(i){var o=iv(e);return{x:function(){return i.transpose(o)}}},"Transpose",r)}}),ND=X({localResponseNormalization_:function(n,e,t,r,i){e===void 0&&(e=5),t===void 0&&(t=1),r===void 0&&(r=1),i===void 0&&(i=.5);var o=V(n,"x","localResponseNormalization");U(o.rank===4||o.rank===3,function(){return`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank `+o.rank+"."}),U(Ht(e),function(){return"Error in localResponseNormalization: depthRadius must be an integer but got depthRadius "+e+"."});var s=o,a=!1;o.rank===3&&(a=!0,s=o.as4D(1,o.shape[0],o.shape[1],o.shape[2]));var l=Z.runKernelFunc(function(u,f){var p=u.localResponseNormalization4D(s,e,t,r,i);return f([s,p]),p},{x4D:s},function(u,f){var p=f[0],m=f[1];return{x4D:function(){return Z.runKernelFunc(function(v){return v.LRNGrad(u,p,m,e,t,r,i)},{})}}});return a?l.as3D(l.shape[1],l.shape[2],l.shape[3]):l}}),P4=X({norm_:function(n,e,t,r){e===void 0&&(e="euclidean"),t===void 0&&(t=null),r===void 0&&(r=!1);var i=function a(l,u,f){if(f===void 0&&(f=null),l.rank===0)return l.abs();if(l.rank!==1&&f===null)return a(l.reshape([-1]),u,f);if(l.rank===1||typeof f=="number"||Array.isArray(f)&&f.length===1){if(u===1)return l.abs().sum(f);if(u===1/0)return l.abs().max(f);if(u===-1/0)return l.abs().min(f);if(u==="euclidean"||u===2)return l.abs().pow(ke(2,"int32")).sum(f).sqrt();throw new Error("Error in norm: invalid ord value: "+u)}if(Array.isArray(f)&&f.length===2){if(u===1)return l.abs().sum(f[0]).max(f[1]-1);if(u===1/0)return l.abs().sum(f[1]).max(f[0]);if(u===-1/0)return l.abs().sum(f[1]).min(f[0]);if(u==="fro"||u==="euclidean")return l.square().sum(f).sqrt();throw new Error("Error in norm: invalid ord value: "+u)}throw new Error("Error in norm: invalid axis: "+f)}(n=V(n,"x","norm"),e,t),o=i.shape;if(r){var s=sn(t,n.shape);o=dr(i.shape,s)}return i.reshape(o)}}),SD=X({basicLSTMCell_:function(n,e,t,r,i,o){var s=V(n,"forgetBias","basicLSTMCell"),a=V(e,"lstmKernel","basicLSTMCell"),l=V(t,"lstmBias","basicLSTMCell"),u=V(r,"data","basicLSTMCell"),f=V(i,"c","basicLSTMCell"),p=V(o,"h","basicLSTMCell"),m=u.concat(p,1).matMul(a).add(l),v=m.shape[0],y=m.shape[1]/4,w=[v,y],_=m.slice([0,0],w),k=m.slice([0,y],w),E=m.slice([0,2*y],w),N=m.slice([0,3*y],w),S=_.sigmoid().mulStrict(k.tanh()).addStrict(f.mulStrict(s.add(E).sigmoid())),A=S.tanh().mulStrict(N.sigmoid());return[S,A]}}),ID=X({multiRNNCell_:function(n,e,t,r){for(var i=V(e,"data","multiRNNCell"),o=kf(t,"c","multiRNNCell"),s=kf(r,"h","multiRNNCell"),a=i,l=[],u=0;u<n.length;u++){var f=n[u](a,o[u],s[u]);l.push(f[0]),l.push(f[1]),a=f[1]}var p=[],m=[];for(u=0;u<l.length;u+=2)p.push(l[u]),m.push(l[u+1]);return[p,m]}}),AD=X({movingAverage_:function(n,e,t,r,i){i===void 0&&(i=!0);var o=V(n,"v","movingAverage"),s=V(e,"x","movingAverage"),a=V(t,"decay","movingAverage");NA(o,s),U(pn(o.shape,s.shape),function(){return"Shape mismatch in v and x"});var l=ke(1),u=l.sub(a),f=s.sub(o).mul(u);if(i){U(r!=null,function(){return"When using zeroDebias: true, step is required."});var p=V(r,"step","movingAverage");f=f.div(l.sub(Df(a,p)))}return o.add(f)}}),RD=X({stridedSlice_:function(n,e,t,r,i,o,s,a,l){if(i===void 0&&(i=0),o===void 0&&(o=0),s===void 0&&(s=0),a===void 0&&(a=0),l===void 0&&(l=0),r==null&&(r=new Array(e.length)),s!==0)throw new Error("ellipsis mask is not yet supported");var u=V(n,"x","stridedSlice"),f=zb(a),p=u.shape.slice();f.forEach(function(_){e[_]=0,t[_]=1,p.splice(_,0,1)}),u=u.reshape(p);for(var m=0;m<u.rank;m++)e[m]=zR(i,e,r,u.shape,m),t[m]=WR(o,t,r,u.shape,m),r[m]=r[m]||1;var v=zb(l);v.forEach(function(_){t[_]=e[_]+1,r[_]=1});var y=lv(e,t,r),w=y.filter(function(_,k){return v.indexOf(k)===-1});return r.every(function(_){return _===1})?Bi(u,e,y).reshape(w):Z.runKernelFunc(function(_){return _.stridedSlice(u,e,t,r)},{$x:u}).reshape(w)}}),jD=X({topk_:function(n,e,t){e===void 0&&(e=1),t===void 0&&(t=!0);var r=V(n,"x","topk");if(r.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");var i=r.shape[r.shape.length-1];if(e>i)throw new Error("'k' passed to topk() must be <= the last dimension ("+i+") but got "+e);var o=Z.runKernelFunc(function(s){return s.topk(r,e,t)},{$x:r});return{values:o[0],indices:o[1]}}}),TD=X({scatterND_:function(n,e,t){var r=V(n,"indices","scatterND","int32"),i=V(e,"updates","scatterND");return LR(i,r,t),Z.runKernelFunc(function(o){return o.scatterND(r,i,t)},{indices:r,updates:i},null,"ScatterNd",{shape:t})}}),wv=X({fft_:function(n){U(n.dtype==="complex64",function(){return"The dtype for tf.spectral.fft() must be complex64 but got "+n.dtype+"."});var e=n.shape[n.shape.length-1],t=n.size/e,r=n.as2D(t,e);return Z.runKernelFunc(function(i){return i.fft(r)},{input:n}).reshape(n.shape)}}),Mf=X({ifft_:function(n){U(n.dtype==="complex64",function(){return"The dtype for tf.spectral.ifft() must be complex64 but got "+n.dtype+"."});var e=n.shape[n.shape.length-1],t=n.size/e,r=n.as2D(t,e);return Z.runKernelFunc(function(i){return i.ifft(r)},{input:n}).reshape(n.shape)}}),_v=X({rfft_:function(n,e){U(n.dtype==="float32",function(){return"The dtype for rfft() must be real value but got "+n.dtype});var t,r=n.shape[n.shape.length-1],i=n.size/r;if(e!=null&&e<r){var o=n.shape.map(function(k){return 0}),s=n.shape.map(function(k){return k});s[n.shape.length-1]=e,t=n.slice(o,s),r=e}else if(e!=null&&e>r){var a=n.shape.map(function(k){return k});a[n.shape.length-1]=e-r,t=n.concat(Nt(a),n.shape.length-1),r=e}else t=n;var l=t.zerosLike(),u=wn(t,l).as2D(i,r),f=wv(u),p=Math.floor(r/2)+1,m=Wr(f),v=ji(f),y=m.split([p,r-p],m.shape.length-1),w=v.split([p,r-p],v.shape.length-1),_=t.shape.slice();return _[t.shape.length-1]=p,wn(y[0],w[0]).reshape(_)}}),O4=X({irfft_:function(n){var e=n.shape[n.shape.length-1],t=n.size/e;if(e<=2){var r=n.as2D(t,e),i=Mf(r);return Wr(i)}var o=[t,2*(e-1)],s=Wr(n).as2D(t,e),a=ji(n).as2D(t,e),l=s.slice([0,1],[t,e-2]).reverse(1),u=a.slice([0,1],[t,e-2]).reverse(1).mul(ke(-1)),f=s.concat(l,1),p=a.concat(u,1);return r=wn(f,p).as2D(o[0],o[1]),i=Mf(r),Wr(i)}}),DD=Object.freeze({fft:wv,ifft:Mf,rfft:_v,irfft:O4}),MD=X({sparseToDense_:function(n,e,t,r){r===void 0&&(r=0);var i=V(n,"sparseIndices","sparseToDense","int32"),o=V(e,"sparseValues","sparseToDense"),s=V(r,"defaultValue","sparseToDense",o.dtype);return function(a,l,u,f){if(a.dtype!=="int32")throw new Error("tf.sparseToDense() expects the indices to be int32 type, but the dtype was "+a.dtype+".");if(a.rank>2)throw new Error("sparseIndices should be a scalar, vector, or matrix, but got shape "+a.shape+".");var p=a.rank>0?a.shape[0]:1,m=a.rank>1?a.shape[1]:1;if(u.length!==m)throw new Error("outputShape has incorrect number of elements:, "+u.length+", should be: "+m+".");var v=l.size;if(l.rank!==0&&(l.rank!==1||v!==p))throw new Error("sparseValues has incorrect shape "+l.shape+", should be [] or ["+p+"]");if(l.dtype!==f.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}(i,o,t,s),Z.runKernelFunc(function(a){return a.sparseToDense(i,o,t,s)},{$sparseIndices:i,$sparseValues:o,$defaultValue:s})}}),PD=X({gatherND_:function(n,e){var t=V(e,"indices","gatherND","int32"),r=V(n,"x","gatherND");return Z.runKernelFunc(function(i){return i.gatherND(r,t)},{x:r,indices:t},null,"GatherNd")}}),OD=X({diag_:function(n){var e=V(n,"x","diag").flatten(),t=n.shape.concat(n.shape);return Z.runKernelFunc(function(r){return r.diag(e)},{$x:e}).reshape(t)}}),FD=X({dropout_:function(n,e,t,r){var i=V(n,"x","dropout");if(U(i.dtype==="float32",function(){return"x has to be a floating point tensor since it's going to be scaled, but got a "+i.dtype+" tensor instead."}),U(e>=0&&e<1,function(){return"rate must be a float in the range [0, 1), but got "+e+"."}),e===0)return n instanceof Pt?i.clone():i;var o=function(l,u){if(u==null)return l.shape.slice();if(pn(l.shape,u))return u;if(l.shape.length===u.length){for(var f=[],p=0;p<l.shape.length;p++)u[p]==null&&l.shape[p]!=null?f.push(l.shape[p]):f.push(u[p]);return f}return u}(i,t),s=1-e,a=Dk(o,0,1,"float32",r).add(s).floor().div(s);return i.mul(a)}});function F4(n,e,t){for(var r=1-n%2,i=new Float32Array(n),o=0;o<n;++o){var s=2*Math.PI*o/(n+r-1);i[o]=e-t*Math.cos(s)}return Kt(i,"float32")}var kv=X({hannWindow_:function(n){return F4(n,.5,.5)}}),L4=X({hammingWindow_:function(n){return F4(n,.54,.46)}}),Cv=X({frame_:function(n,e,t,r,i){r===void 0&&(r=!1),i===void 0&&(i=0);for(var o=0,s=[];o+e<=n.size;)s.push(Bi(n,o,e)),o+=t;if(r)for(;o<n.size;){var a=o+e-n.size,l=tn([Bi(n,o,e-a),Fi([a],i)]);s.push(l),o+=t}return s.length===0?bs([],[0,e]):tn(s).as2D(s.length,e)}}),B4=X({stft_:function(n,e,t,r,i){var o;i===void 0&&(i=kv),r==null&&(o=e,r=Math.floor(Math.pow(2,Math.ceil(Math.log(o)/Math.log(2)))));for(var s=Cv(n,e,t),a=Fn(s,i(e)),l=[],u=0;u<s.shape[0];u++)l.push(_v(a.slice([u,0],[1,e]),r));return tn(l)}}),LD=Object.freeze({hannWindow:kv,hammingWindow:L4,frame:Cv,stft:B4}),On,BD=function(n,e,t){return t===void 0&&(t=1),Re(this,void 0,void 0,function(){var r,i,o,s,a,l,u,f,p,m,v,y,w,_;return je(this,function(k){switch(k.label){case 0:return r=V(n,"predictions","inTopK"),i=V(e,"targets","inTopK"),U(r.rank>1,function(){return"inTopK() expects the predictions to be of rank 2 or higher, but got "+r.rank}),U(r.rank-1===i.rank,function(){return"predictions rank should be 1 larger than targets rank, but got predictions rank "+r.rank+" and targets rank "+i.rank}),pt(r.shape.slice(0,r.shape.length-1),i.shape,"predictions's shape should be align with the targets' shape, except the last dimension."),o=r.shape[r.shape.length-1],U(t>0&&t<=o,function(){return"'k' passed to inTopK() must be > 0 && <= the predictions last dimension ("+o+"), but got "+t}),[4,r.data()];case 1:return s=k.sent(),[4,i.data()];case 2:for(a=k.sent(),l=[s.length/o,o],f=l[1],p=Nu("bool",u=l[0]),m=0;m<u;m++){for(v=m*f,y=s.subarray(v,v+f),w=[],_=0;_<y.length;_++)w.push({value:y[_],index:_});for(w.sort(function(E,N){return N.value-E.value}),p[m]=0,_=0;_<t;_++)if(w[_].index===a[m]){p[m]=1;break}}return n!==r&&r.dispose(),e!==i&&i.dispose(),[2,kn(p,i.shape,"bool")]}})})};(function(n){n[n.NONE=0]="NONE",n[n.MEAN=1]="MEAN",n[n.SUM=2]="SUM",n[n.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"})(On||(On={}));var zD=X({absoluteDifference_:function(n,e,t,r){r===void 0&&(r=On.SUM_BY_NONZERO_WEIGHTS);var i=V(n,"labels","absoluteDifference"),o=V(e,"predictions","absoluteDifference"),s=null;t!=null&&(s=V(t,"weights","absoluteDifference")),pt(i.shape,o.shape,"Error in absoluteDifference: ");var a=i.sub(o).abs();return Ro(a,s,r)}}),Ro=X({computeWeightedLoss_:function(n,e,t){t===void 0&&(t=On.SUM_BY_NONZERO_WEIGHTS);var r=V(n,"losses","computeWeightedLoss"),i=null;e!=null&&(i=V(e,"weights","computeWeightedLoss"));var o=i==null?r:r.mul(i);if(t===On.NONE)return o;if(t===On.SUM)return o.sum();if(t===On.MEAN){if(i==null)return o.mean();var s=r.size/i.size,a=o.sum().div(i.sum());return s>1?a.div(ke(s)):a}if(t===On.SUM_BY_NONZERO_WEIGHTS){if(i==null)return o.sum().div(ke(r.size));var l=i.mul(rc(r.shape)).notEqual(ke(0)).sum().toFloat();return o.sum().div(l)}throw Error("Unknown reduction: "+t)}}),WD=X({cosineDistance_:function(n,e,t,r,i){i===void 0&&(i=On.SUM_BY_NONZERO_WEIGHTS);var o=V(n,"labels","cosineDistance"),s=V(e,"predictions","cosineDistance"),a=null;r!=null&&(a=V(r,"weights","cosineDistance")),pt(o.shape,s.shape,"Error in cosineDistance: ");var l=ke(1).sub(o.mul(s).sum(t,!0));return Ro(l,a,i)}}),VD=X({hingeLoss_:function(n,e,t,r){r===void 0&&(r=On.SUM_BY_NONZERO_WEIGHTS);var i=V(n,"labels","hingeLoss"),o=V(e,"predictions","hingeLoss"),s=null;t!=null&&(s=V(t,"weights","hingeLoss")),pt(i.shape,o.shape,"Error in hingeLoss: ");var a=ke(1);i=ke(2).mul(i).sub(a);var l=a.sub(i.mul(o)).relu();return Ro(l,s,r)}}),UD=X({huberLoss_:function(n,e,t,r,i){r===void 0&&(r=1),i===void 0&&(i=On.SUM_BY_NONZERO_WEIGHTS);var o=V(n,"labels","huberLoss"),s=V(e,"predictions","huberLoss"),a=null;t!=null&&(a=V(t,"weights","huberLoss")),pt(o.shape,s.shape,"Error in huberLoss: ");var l=ke(r),u=s.sub(o).abs(),f=x4(u,l),p=u.sub(f),m=ke(.5).mul(f.square()).add(l.mul(p));return Ro(m,a,i)}}),HD=X({logLoss_:function(n,e,t,r,i){r===void 0&&(r=1e-7),i===void 0&&(i=On.SUM_BY_NONZERO_WEIGHTS);var o=V(n,"labels","logLoss"),s=V(e,"predictions","logLoss"),a=null;t!=null&&(a=V(t,"weights","logLoss")),pt(o.shape,s.shape,"Error in logLoss: ");var l=ke(1),u=ke(r),f=o.mul(s.add(u).log()).neg().sub(l.sub(o).mul(l.sub(s).add(u).log()));return Ro(f,a,i)}}),GD=X({meanSquaredError_:function(n,e,t,r){r===void 0&&(r=On.SUM_BY_NONZERO_WEIGHTS);var i=V(n,"labels","meanSquaredError"),o=V(e,"predictions","meanSquaredError"),s=null;t!=null&&(s=V(t,"weights","meanSquaredError")),pt(i.shape,o.shape,"Error in meanSquaredError: ");var a=i.squaredDifference(o);return Ro(a,s,r)}}),$D=X({sigmoidCrossEntropy_:function(n,e,t,r,i){r===void 0&&(r=0),i===void 0&&(i=On.SUM_BY_NONZERO_WEIGHTS);var o=V(n,"multiClassLabels","sigmoidCrossEntropy"),s=V(e,"logits","sigmoidCrossEntropy"),a=null;if(t!=null&&(a=V(t,"weights","sigmoidCrossEntropy")),pt(o.shape,s.shape,"Error in sigmoidCrossEntropy: "),r>0){var l=ke(r),u=ke(1),f=ke(.5);o=o.mul(u.sub(l)).add(f.mul(l))}var p=function(m,v){var y=V(m,"labels","sigmoidCrossEntropyWithLogits"),w=V(v,"logits","sigmoidCrossEntropyWithLogits");pt(y.shape,w.shape,"Error in sigmoidCrossEntropyWithLogits: ");var _=w.relu(),k=w.mul(y),E=w.abs().neg().exp().log1p();return _.sub(k).add(E)}(o,s);return Ro(p,a,i)}}),qD=X({softmaxCrossEntropy_:function(n,e,t,r,i){r===void 0&&(r=0),i===void 0&&(i=On.SUM_BY_NONZERO_WEIGHTS);var o=V(n,"onehotLabels","softmaxCrossEntropy"),s=V(e,"logits","softmaxCrossEntropy"),a=null;if(t!=null&&(a=V(t,"weights","softmaxCrossEntropy")),pt(o.shape,s.shape,"Error in softmaxCrossEntropy: "),r>0){var l=ke(r),u=ke(1),f=ke(o.shape[1]);o=o.mul(u.sub(l)).add(l.div(f))}var p=function(m,v,y){if(y===void 0&&(y=-1),y===-1&&(y=v.rank-1),y!==v.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank "+v.rank+" and dim was "+y);return Zf(function(w,_,k){var E=_.logSumExp([y],!0),N=_.toFloat().sub(E);return k([w,N]),{value:N.mul(w).neg().sum([y]),gradFunc:function(S,A){var P=A[0],D=A[1],j=dr(S.shape,[y]);return[S.reshape(j).mul(P.toFloat().sub(D.exp())),S.reshape(j).mul(D.exp().sub(P.toFloat()))]}}})(m,v)}(o,s);return Ro(p,a,i)}}),KD=Object.freeze({get Reduction(){return On},absoluteDifference:zD,computeWeightedLoss:Ro,cosineDistance:WD,hingeLoss:VD,huberLoss:UD,logLoss:HD,meanSquaredError:GD,sigmoidCrossEntropy:$D,softmaxCrossEntropy:qD});function l2(n,e){return e===void 0&&(e=!1),Z.tidy(function(){if(n.shape.length!==2)throw new Error("qr2d() requires a 2D Tensor, but got a "+n.shape.length+"D Tensor.");for(var t=n.shape[0],r=n.shape[1],i=Tk(t),o=n.clone(),s=bs([[1]],[1,1]),a=s.clone(),l=t>=r?r:t,u=function(p){var m,v=o,y=a,w=i;m=Z.tidy(function(){var _=o.slice([p,p],[t-p,1]),k=_.norm(),E=o.slice([p,p],[1,1]),N=bs([[-1]]).where(E.greater(0),bs([[1]])),S=E.sub(N.mul(k)),A=_.div(S);a=A.shape[0]===1?s.clone():s.concat(A.slice([1,0],[A.shape[0]-1,A.shape[1]]),0);var P=N.matMul(S).div(k).neg(),D=o.slice([p,0],[t-p,r]),j=P.mul(a);if(p===0)o=D.sub(j.matMul(a.transpose().matMul(D)));else{var T=D.sub(j.matMul(a.transpose().matMul(D)));o=o.slice([0,0],[p,r]).concat(T,0)}var M=i.slice([0,p],[t,i.shape[1]-p]);if(p===0)i=M.sub(M.matMul(a).matMul(j.transpose()));else{var L=M.sub(M.matMul(a).matMul(j.transpose()));i=i.slice([0,0],[t,p]).concat(L,1)}return[a,o,i]}),a=m[0],o=m[1],i=m[2],ur([v,y,w])},f=0;f<l;++f)u(f);return!e&&t>r&&(i=i.slice([0,0],[t,r]),o=o.slice([0,0],[r,r])),[i,o]})}var XD=X({bandPart_:function(n,e,t){if(e%1!=0)throw new Error("bandPart(): numLower must be an integer, got "+e+".");if(t%1!=0)throw new Error("bandPart(): numUpper must be an integer, got "+t+".");var r=V(n,"a","bandPart");if(r.rank<2)throw new Error("bandPart(): Rank must be at least 2, got "+r.rank+".");var i=r.shape,o=r.shape.slice(-2),s=o[0],a=o[1];if(!(e<=s))throw new Error("bandPart(): numLower ("+e+") must not be greater than the number of rows ("+s+").");if(!(t<=a))throw new Error("bandPart(): numUpper ("+t+") must not be greater than the number of columns ("+a+").");e<0&&(e=s),t<0&&(t=a);var l=Cf(0,s,1,"int32").reshape([-1,1]),u=Cf(0,a,1,"int32"),f=on(l,u),p=tp(f.lessEqual(ke(+e,"int32")),f.greaterEqual(ke(-t,"int32"))),m=Nt([s,a],r.dtype);return Sr(nn(r.reshape([-1,s,a])).map(function(v){return Ca(p,v,m)})).reshape(i)}}),YD=X({gramSchmidt_:function(n){var e;if(Array.isArray(n)){e=!1,U(n!=null&&n.length>0,function(){return"Gram-Schmidt process: input must not be null, undefined, or empty"});for(var t=n[0].shape[0],r=function(l){U(n[l].shape[0]===t,function(){return"Gram-Schmidt: Non-unique lengths found in the input vectors: ("+n[l].shape[0]+" vs. "+t+")"})},i=1;i<n.length;++i)r(i)}else e=!0,n=sv(n,n.shape[0],0).map(function(l){return Pk(l,[0])});U(n.length<=n[0].shape[0],function(){return"Gram-Schmidt: Number of vectors ("+n.length+") exceeds number of dimensions ("+n[0].shape[0]+")."});var o=[],s=n,a=function(l){o.push(Z.tidy(function(){var u=s[l];if(l>0)for(var f=0;f<l;++f){var p=j4(o[f].mulStrict(u)).mul(o[f]);u=u.sub(p)}return u.div(P4(u,"euclidean"))}))};for(i=0;i<n.length;++i)a(i);return e?Sr(o,0):o}}),JD=X({qr_:function(n,e){if(e===void 0&&(e=!1),n.rank<2)throw new Error("qr() requires input tensor to have a rank >= 2, but got rank "+n.rank);if(n.rank===2)return l2(n,e);var t=n.shape.slice(0,n.shape.length-2).reduce(function(s,a){return s*a}),r=nn(n.reshape([t,n.shape[n.shape.length-2],n.shape[n.shape.length-1]]),0),i=[],o=[];return r.forEach(function(s){var a=l2(s,e),l=a[0],u=a[1];i.push(l),o.push(u)}),[Sr(i,0).reshape(n.shape),Sr(o,0).reshape(n.shape)]}}),QD=Object.freeze({bandPart:XD,gramSchmidt:YD,qr:JD});function op(n,e,t,r,i,o){r==null&&(r=.5),i==null&&(i=Number.NEGATIVE_INFINITY),o==null&&(o=0);var s=n.shape[0];return t=Math.min(t,s),U(0<=r&&r<=1,function(){return"iouThreshold must be in [0, 1], but was '"+r+"'"}),U(n.rank===2,function(){return"boxes must be a 2D tensor, but was of rank '"+n.rank+"'"}),U(n.shape[1]===4,function(){return"boxes must have 4 columns, but 2nd dimension was "+n.shape[1]}),U(e.rank===1,function(){return"scores must be a 1D tensor"}),U(e.shape[0]===s,function(){return"scores has incompatible shape with boxes. Expected "+s+", but was "+e.shape[0]}),U(0<=o&&o<=1,function(){return"softNmsSigma must be in [0, 1], but was '"+o+"'"}),{maxOutputSize:t,iouThreshold:r,scoreThreshold:i,softNmsSigma:o}}var ZD=X({resizeBilinear_:function(n,e,t){t===void 0&&(t=!1);var r=V(n,"images","resizeBilinear");U(r.rank===3||r.rank===4,function(){return"Error in resizeBilinear: x must be rank 3 or 4, but got rank "+r.rank+"."}),U(e.length===2,function(){return"Error in resizeBilinear: new shape must 2D, but got shape "+e+"."});var i=r,o=!1;r.rank===3&&(o=!0,i=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var s=e[0],a=e[1],l=Z.runKernelFunc(function(u,f){return f([i]),u.resizeBilinear(i,s,a,t)},{x:i},function(u,f){return{x:function(){return Z.runKernelFunc(function(p){return p.resizeBilinearBackprop(u,f[0],t)},{})}}},"ResizeBilinear",{alignCorners:t,newHeight:s,newWidth:a});return o?l.as3D(l.shape[1],l.shape[2],l.shape[3]):l}}),eM=X({resizeNearestNeighbor_:function(n,e,t){t===void 0&&(t=!1);var r=V(n,"images","resizeNearestNeighbor");U(r.rank===3||r.rank===4,function(){return"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank "+r.rank+"."}),U(e.length===2,function(){return"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+e+"."}),U(r.dtype==="float32"||r.dtype==="int32",function(){return"`images` must have `int32` or `float32` as dtype"});var i=r,o=!1;r.rank===3&&(o=!0,i=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var s=e[0],a=e[1],l=Z.runKernelFunc(function(u,f){return f([i]),u.resizeNearestNeighbor(i,s,a,t)},{batchImages:i},function(u,f){return{batchImages:function(){return Z.runKernelFunc(function(p){return p.resizeNearestNeighborBackprop(u,f[0],t)},{})}}});return o?l.as3D(l.shape[1],l.shape[2],l.shape[3]):l}}),tM=X({nonMaxSuppression_:function(n,e,t,r,i){r===void 0&&(r=.5),i===void 0&&(i=Number.NEGATIVE_INFINITY);var o=V(n,"boxes","nonMaxSuppression"),s=V(e,"scores","nonMaxSuppression"),a=op(o,s,t,r,i);t=a.maxOutputSize,r=a.iouThreshold,i=a.scoreThreshold;var l={maxOutputSize:t,iouThreshold:r,scoreThreshold:i};return Z.runKernelFunc(function(u){return u.nonMaxSuppression(o,s,t,r,i)},{boxes:o,scores:s},null,"NonMaxSuppressionV3",l)}}),nM=function(n,e,t,r,i){return r===void 0&&(r=.5),i===void 0&&(i=Number.NEGATIVE_INFINITY),Re(this,void 0,void 0,function(){var o,s,a,l,u,f,p;return je(this,function(m){switch(m.label){case 0:return o=V(n,"boxes","nonMaxSuppressionAsync"),s=V(e,"scores","nonMaxSuppressionAsync"),a=op(o,s,t,r,i),t=a.maxOutputSize,r=a.iouThreshold,i=a.scoreThreshold,[4,Promise.all([o.data(),s.data()])];case 1:return l=m.sent(),u=l[0],f=l[1],p=uv(u,f,t,r,i),o!==n&&o.dispose(),s!==e&&s.dispose(),[2,p]}})})},rM=X({nonMaxSuppressionWithScore_:function(n,e,t,r,i,o){r===void 0&&(r=.5),i===void 0&&(i=Number.NEGATIVE_INFINITY),o===void 0&&(o=0);var s=V(n,"boxes","nonMaxSuppression"),a=V(e,"scores","nonMaxSuppression"),l=op(s,a,t,r,i,o),u={maxOutputSize:t=l.maxOutputSize,iouThreshold:r=l.iouThreshold,scoreThreshold:i=l.scoreThreshold,softNmsSigma:o=l.softNmsSigma},f=Z.runKernel("NonMaxSuppressionV5",{boxes:s,scores:a},u);return{selectedIndices:f[0],selectedScores:f[1]}}}),iM=function(n,e,t,r,i,o){return r===void 0&&(r=.5),i===void 0&&(i=Number.NEGATIVE_INFINITY),o===void 0&&(o=0),Re(this,void 0,void 0,function(){var s,a,l,u,f,p,m;return je(this,function(v){switch(v.label){case 0:return s=V(n,"boxes","nonMaxSuppressionAsync"),a=V(e,"scores","nonMaxSuppressionAsync"),l=op(s,a,t,r,i,o),t=l.maxOutputSize,r=l.iouThreshold,i=l.scoreThreshold,o=l.softNmsSigma,[4,Promise.all([s.data(),a.data()])];case 1:return u=v.sent(),f=u[0],p=u[1],m=dv(f,p,t,r,i,o),s!==n&&s.dispose(),a!==e&&a.dispose(),[2,m]}})})},oM=X({cropAndResize_:function(n,e,t,r,i,o){var s=V(n,"image","cropAndResize"),a=V(e,"boxes","cropAndResize","float32"),l=V(t,"boxInd","cropAndResize","int32");i=i||"bilinear",o=o||0;var u=a.shape[0];return U(s.rank===4,function(){return"Error in cropAndResize: image must be rank 4,but got rank "+s.rank+"."}),U(a.rank===2&&a.shape[1]===4,function(){return"Error in cropAndResize: boxes must be have size ["+u+",4] but had shape "+a.shape+"."}),U(l.rank===1&&l.shape[0]===u,function(){return"Error in cropAndResize: boxInd must be have size ["+u+"] but had shape "+a.shape+"."}),U(r.length===2,function(){return"Error in cropAndResize: cropSize must be of length 2, but got length "+r.length+"."}),U(r[0]>=1&&r[1]>=1,function(){return"cropSize must be atleast [1,1], but was "+r}),U(i==="bilinear"||i==="nearest",function(){return"method must be bilinear or nearest, but was "+i}),Z.runKernelFunc(function(f,p){return f.cropAndResize(s,a,l,r,i,o)},{images:s,boxes:a,boxInd:l},null,"CropAndResize",{method:i,extrapolationValue:o,cropSize:r})}}),Ev=Object.freeze({resizeBilinear:ZD,resizeNearestNeighbor:eM,nonMaxSuppression:tM,nonMaxSuppressionAsync:nM,nonMaxSuppressionWithScore:rM,nonMaxSuppressionWithScoreAsync:iM,cropAndResize:oM}),Nv=function(n,e){return!(n>0)||e==="linear"},Sv=function(n,e,t){if(t==null||t==="linear")return n;if(t==="relu")return n.mul(e.step());throw new Error("Gradient for activation "+t+" has not been implemented yet.")},Iv=function(n,e){var t=e,r=rn(n.shape,e.shape);return r.length>0&&(t=t.sum(r)),t.reshape(n.shape)},Av=function(n,e,t){if(e==="linear")return n;if(e==="relu")return Ot(n);if(e==="elu")return T4(n);if(e==="relu6")return M4(n);if(e==="prelu")return D4(n,t);throw new Error("Unknown fused activation "+e+".")},sM=X({fusedMatMul_:function(n){var e,t=n.a,r=n.b,i=n.transposeA,o=i!==void 0&&i,s=n.transposeB,a=s!==void 0&&s,l=n.bias,u=n.activation,f=u===void 0?"linear":u,p=n.preluActivationWeights;if(Nv(Z.state.gradientDepth,f)===!1){var m=rp(t,r,o,a);return l!=null&&(m=Qe(m,l)),Av(m,f,p)}var v=V(t,"a","fused matMul"),y=V(r,"b","fused matMul");e=Ft(v,y),v=e[0],y=e[1];var w=o?v.shape[v.rank-2]:v.shape[v.rank-1],_=a?y.shape[y.rank-1]:y.shape[y.rank-2],k=o?v.shape[v.rank-1]:v.shape[v.rank-2],E=a?y.shape[y.rank-2]:y.shape[y.rank-1],N=v.shape.slice(0,-2),S=y.shape.slice(0,-2),A=Me(N),P=Me(S);U(v.rank>=2&&y.rank>=2&&v.rank===y.rank,function(){return"Error in fused matMul: inputs must have the same rank of at least 2, got ranks "+v.rank+" and "+y.rank+"."}),U(pn(N,S),function(){return"Error in fused matMul: outer dimensions ("+N+") and ("+S+") of Tensors with shapes "+v.shape+" and "+y.shape+" must match."}),U(w===_,function(){return"Error in fused matMul: inner shapes ("+w+") and ("+_+") of Tensors with shapes "+v.shape+" and "+y.shape+" and transposeA="+o+" and transposeB="+a+" must match."});var D,j,T=v.shape.slice(0,-2).concat([k,E]),M=o?v.as3D(A,w,k):v.as3D(A,k,w),L=a?y.as3D(P,E,_):y.as3D(P,_,E);l!=null&&et(T,(D=Ft(D=V(l,"bias","fused matMul"),v)[0]).shape),p!=null&&(j=V(p,"prelu weights","fused matMul"));var B={a:M,b:L};l!=null&&(B.bias=D),p!=null&&(B.preluActivationWeights=j);var F=[M,L];return Z.runKernelFunc(function(K,te){var se=K.fusedBatchMatMul({a:M,b:L,transposeA:o,transposeB:a,bias:D,activation:f,preluActivationWeights:j});return te([M,L,se]),se},B,function(K,te){var se=te[0],q=te[1],$=te[2],Y=Sv(K,$,f),Q={};return l!=null&&(Q={bias:function(){return Iv(D,Y)}}),Object.assign(o||a?!o&&a?{a:function(){return Y.matMul(q,!1,!1)},b:function(){return Y.matMul(se,!0,!1)}}:o&&!a?{a:function(){return q.matMul(Y,!1,!0)},b:function(){return se.matMul(Y,!1,!1)}}:{a:function(){return q.matMul(Y,!0,!0)},b:function(){return Y.matMul(se,!0,!0)}}:{a:function(){return Y.matMul(q,!1,!0)},b:function(){return se.matMul(Y,!0,!1)}},Q)},"_FusedMatMul",{transposeA:o,transposeB:a,activation:f},F,[!0]).reshape(T)}}),aM=X({fusedConv2d_:function(n){var e=n.x,t=n.filter,r=n.strides,i=n.pad,o=n.dataFormat,s=o===void 0?"NHWC":o,a=n.dilations,l=a===void 0?[1,1]:a,u=n.dimRoundingMode,f=n.bias,p=n.activation,m=p===void 0?"linear":p,v=n.preluActivationWeights;if(m=m||"linear",Nv(Z.state.gradientDepth,m)===!1){var y=Ur(e,t,r,i,s,l,u);return f!=null&&(y=Qe(y,f)),Av(y,m,v)}var w=V(e,"x","conv2d"),_=V(t,"filter","conv2d"),k=w,E=!1;w.rank===3&&(E=!0,k=w.as4D(1,w.shape[0],w.shape[1],w.shape[2])),U(k.rank===4,function(){return"Error in fused conv2d: input must be rank 4, but got rank "+k.rank+"."}),U(_.rank===4,function(){return"Error in fused conv2d: filter must be rank 4, but got rank "+_.rank+"."}),u!=null&&U(Ht(i),function(){return"Error in fused conv2d: pad must be an integer when using, dimRoundingMode "+u+" but got pad "+i+"."}),U(k.shape[3]===_.shape[2],function(){return"Error in conv2d: depth of input ("+k.shape[3]+") must match input depth for filter "+_.shape[2]+"."}),U(hr(r,l),function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+l+"'"}),U(s==="NHWC",function(){return"Error in conv2d: got dataFormat of "+s+" but only NHWC is currently supported."});var N,S,A=Ta(k.shape,_.shape,r,l,i,u);f!=null&&(N=Ft(N=V(f,"bias","fused conv2d"),w)[0],et(A.outShape,N.shape)),v!=null&&(S=V(v,"prelu weights","fused conv2d"));var P={x:k,filter:_};f!=null&&(P.bias=N),v!=null&&(P.preluActivationWeights=S);var D=[_,k],j=Z.runKernelFunc(function(T,M){var L=T.fusedConv2d({input:k,filter:_,convInfo:A,bias:N,activation:m,preluActivationWeights:S});return M([_,k,L]),L},P,function(T,M){var L=M,B=L[0],F=L[1],K=L[2],te=Sv(T,K,m);U(Yl(l),function(){return"Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+l+"'"});var se={};return f!=null&&(se={bias:function(){return Iv(N,te)}}),Object.assign({x:function(){return C4(F.shape,te,B,r,i)},filter:function(){return yv(F,te,B.shape,r,i)}},se)},"FusedConv2D",{convInfo:A,activation:m},D,[!0]);return E?j.as3D(j.shape[1],j.shape[2],j.shape[3]):j}}),lM=X({fusedDepthwiseConv2d_:function(n){var e=n.x,t=n.filter,r=n.strides,i=n.pad,o=n.dataFormat,s=o===void 0?"NHWC":o,a=n.dilations,l=a===void 0?[1,1]:a,u=n.dimRoundingMode,f=n.bias,p=n.activation,m=p===void 0?"linear":p,v=n.preluActivationWeights;if(Nv(Z.state.gradientDepth,m)===!1){var y=np(e,t,r,i,s,l,u);return f!=null&&(y=Qe(y,f)),Av(y,m,v)}var w=V(e,"x","depthwiseConv2d"),_=V(t,"filter","depthwiseConv2d"),k=w,E=!1;w.rank===3&&(E=!0,k=w.as4D(1,w.shape[0],w.shape[1],w.shape[2])),U(k.rank===4,function(){return"Error in fused depthwiseConv2d: input must be rank 4, but got rank "+k.rank+"."}),U(_.rank===4,function(){return"Error in fused depthwiseConv2d: filter must be rank 4, but got rank "+_.rank+"."}),U(k.shape[3]===_.shape[2],function(){return"Error in fused depthwiseConv2d: number of input channels ("+k.shape[3]+") must match the inChannels dimension in filter "+_.shape[2]+"."}),l==null&&(l=[1,1]),U(hr(r,l),function(){return"Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+l+"'"}),u!=null&&U(Ht(i),function(){return"Error in fused depthwiseConv2d: pad must be an integer when using dimRoundingMode "+u+" but got pad "+i+"."});var N,S,A=Ta(k.shape,_.shape,r,l,i,u,!0);f!=null&&(N=Ft(N=V(f,"bias","fused conv2d"),w)[0],et(A.outShape,N.shape)),v!=null&&(S=V(v,"prelu weights","fused depthwiseConv2d"));var P={x:k,filter:_};f!=null&&(P.bias=N),v!=null&&(P.preluActivationWeights=S);var D=[_,k],j=Z.runKernelFunc(function(T,M){var L=T.fusedDepthwiseConv2D({input:k,filter:_,convInfo:A,bias:N,activation:m,preluActivationWeights:S});return M([_,k,L]),L},P,function(T,M){U(Yl(l),function(){return"Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+l+"'"});var L=M[0],B=M[1],F=M[2],K=Sv(T,F,m),te={};return f!=null&&(te={bias:function(){return Iv(N,K)}}),Object.assign({x:function(){return E4(B.shape,K,L,A)},filter:function(){return N4(B,K,L.shape,A)}},te)},"FusedDepthwiseConv2D",{convInfo:A,activation:m},D,[!0]);return E?j.as3D(j.shape[1],j.shape[2],j.shape[3]):j}}),cM=Object.freeze({matMul:sM,conv2d:aM,depthwiseConv2d:lM}),uM=Object.freeze({image:Ev,linalg:QD,losses:KD,spectral:DD,fused:cM,signal:LD,square:HT,squaredDifference:l4,conv1d:Z6,conv2d:Ur,conv3d:eD,depthwiseConv2d:np,separableConv2d:bv,conv2dTranspose:tD,conv3dTranspose:nD,op:X,batchNormalization2d:b6,batchNormalization3d:w6,batchNormalization4d:_6,batchNormalization:k6,batchNorm:p4,batchNorm2d:C6,batchNorm3d:E6,batchNorm4d:N6,booleanMaskAsync:Q6,complex:wn,real:Wr,imag:ji,concat:tn,concat1d:cR,concat2d:uR,concat3d:dR,concat4d:hR,split:sv,matMul:rp,dot:rD,outerProduct:iD,reverse:Zu,reverse1d:oD,reverse2d:sD,reverse3d:aD,reverse4d:lD,maxPool:hn,avgPool:ed,pool:cD,maxPool3d:uD,avgPool3d:dD,slice:Bi,slice1d:hD,slice2d:fD,slice3d:A4,slice4d:pD,abs:GT,acos:$T,acosh:qT,asin:KT,asinh:XT,atan:YT,atanh:JT,ceil:QT,clipByValue:gv,cos:ZT,cosh:e6,erf:t6,exp:bg,expm1:n6,floor:r6,log:i6,log1p:o6,logSigmoid:s6,neg:Tf,reciprocal:a6,round:l6,rsqrt:c4,sigmoid:u4,sign:c6,isNaN:u6,isInf:d6,isFinite:h6,sin:f6,sinh:p6,softplus:m6,sqrt:g6,step:v6,tan:x6,tanh:y6,all:mD,any:gD,argMax:vD,argMin:xD,logSumExp:yD,max:ip,mean:bD,min:wD,moments:_D,sum:j4,prod:kD,equal:y4,equalStrict:V6,greater:U6,greaterEqual:b4,greaterEqualStrict:H6,greaterStrict:G6,less:$6,lessEqual:q6,lessEqualStrict:K6,lessStrict:X6,notEqual:Y6,notEqualStrict:J6,add:Qe,addN:A6,addStrict:R6,atan2:j6,div:oi,divNoNan:T6,divStrict:D6,floorDiv:v4,maximum:vv,maximumStrict:M6,minimum:x4,minimumStrict:P6,mod:O6,modStrict:F6,mul:Fn,mulStrict:L6,pow:Df,powStrict:B6,squaredDifferenceStrict:z6,sub:on,subStrict:W6,elu:T4,leakyRelu:CD,prelu:D4,relu:Ot,relu6:M4,selu:ED,logicalAnd:tp,logicalNot:S6,logicalOr:m4,logicalXor:I6,where:Ca,whereAsync:g4,buffer:$e,print:wR,batchToSpaceND:jk,broadcastTo:_R,cast:kR,clone:CR,cumsum:ER,depthToSpace:NR,expandDims:Br,eye:Tk,multinomial:SR,oneHot:gg,pad:ja,pad1d:IR,pad2d:AR,pad3d:RR,pad4d:jR,rand:TR,randomNormal:DR,randomGamma:MR,randomUniform:Dk,reshape:li,spaceToBatchND:Mk,squeeze:Pk,stack:Sr,tile:Fl,truncatedNormal:PR,unstack:nn,setdiff1dAsync:OR,fill:Fi,linspace:lR,ones:rc,range:Cf,scalar:ke,tensor:kn,tensor1d:Kt,tensor2d:bs,tensor3d:ov,tensor4d:or,tensor5d:oR,tensor6d:sR,variable:aR,zeros:Nt,onesLike:Rk,zerosLike:st,transpose:Cs,softmax:Ao,logSoftmax:UR,localResponseNormalization:ND,norm:P4,gather:xv,unsortedSegmentSum:w4,basicLSTMCell:SD,multiRNNCell:ID,movingAverage:AD,stridedSlice:RD,topk:jD,scatterND:TD,fft:wv,ifft:Mf,rfft:_v,irfft:O4,sparseToDense:MD,gatherND:PD,diag:OD,dropout:FD,hannWindow:kv,hammingWindow:L4,frame:Cv,stft:B4,inTopKAsync:BD});function pe(n,e){Array.isArray(n)||(n=[n]),n.forEach(function(t){t!=null&&U(t.dtype!=="complex64",function(){return e+" does not support complex64 tensors."})})}function k0(n,e,t,r){if(t==="linear")return n.linear(e);if(t==="relu")return n.relu(e);if(t==="elu")return n.elu(e);if(t==="relu6")return n.relu6(e);if(t==="prelu")return n.prelu(e,r);throw new Error("Activation "+t+" has not been implemented for the CPU backend.")}var dM=function(n){function e(){var t=n.call(this)||this;return t.blockSize=48,t.firstUse=!0,t.data=new Vk(t,Z),t}return hi(e,n),e.prototype.write=function(t,r,i){this.firstUse&&(this.firstUse=!1,he().get("IS_NODE")&&_f(`
============================
Hi there . Looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, which binds to TensorFlow C++, by running npm i @tensorflow/tfjs-node, or npm i @tensorflow/tfjs-node-gpu if you have CUDA. Then call require('@tensorflow/tfjs-node'); (-gpu suffix for CUDA) at the start of your program. Visit https://github.com/tensorflow/tfjs-node for more details.
============================`));var o={};return this.data.set(o,{values:t,dtype:i}),o},e.prototype.move=function(t,r,i,o){this.data.set(t,{values:r,dtype:o})},e.prototype.numDataIds=function(){return this.data.numDataIds()},e.prototype.read=function(t){return Re(this,void 0,void 0,function(){return je(this,function(r){return[2,this.readSync(t)]})})},e.prototype.readSync=function(t){var r=this.data.get(t),i=r.dtype,o=r.complexTensors;return i==="complex64"?yg(this.readSync(o.real.dataId),this.readSync(o.imag.dataId)):this.data.get(t).values},e.prototype.bufferSync=function(t){var r=this.readSync(t.dataId),i=r;if(t.dtype==="string")try{i=r.map(function(o){return yf(o)})}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return $e(t.shape,t.dtype,i)},e.prototype.makeOutput=function(t,r,i){var o=this.write(t,r,i);return Z.makeTensorFromDataId(o,r,i,this)},e.prototype.disposeData=function(t){if(this.data.has(t)){var r=this.data.get(t).complexTensors;r!=null&&(r.real.dispose(),r.imag.dispose()),this.data.delete(t)}},e.prototype.time=function(t){return Re(this,void 0,void 0,function(){var r;return je(this,function(i){return r=Ai(),t(),[2,{kernelMs:Ai()-r}]})})},e.prototype.memory=function(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}},e.prototype.complex=function(t,r){var i=this.makeOutput(null,t.shape,"complex64");return this.data.get(i.dataId).complexTensors={real:Z.keep(t.clone()),imag:Z.keep(r.clone())},i},e.prototype.real=function(t){return this.data.get(t.dataId).complexTensors.real.clone()},e.prototype.imag=function(t){return this.data.get(t.dataId).complexTensors.imag.clone()},e.prototype.slice=function(t,r,i){if(pe(t,"slice"),zk(t.shape,r,i)){var o=Wk(r,t.strides),s=Me(i);return kn(this.readSync(t.dataId).subarray(o,o+s),i,t.dtype)}for(var a=$e(i,t.dtype),l=this.bufferSync(t),u=0;u<a.size;++u){var f=a.indexToLoc(u).map(function(p,m){return p+r[m]});a.values[u]=l.get.apply(l,f)}return a.toTensor()},e.prototype.stridedSlice=function(t,r,i,o){pe(t,"stridedSlice");var s=lv(r,i,o);if(s.some(function(v){return v===0}))return kn([],s);for(var a=$e(s,t.dtype),l=this.bufferSync(t),u=0;u<a.size;u++){for(var f=a.indexToLoc(u),p=new Array(f.length),m=0;m<p.length;m++)p[m]=f[m]*o[m]+r[m];a.set.apply(a,[l.get.apply(l,p)].concat(f))}return a.toTensor()},e.prototype.diag=function(t){for(var r=this.readSync(t.dataId),i=$e([t.size,t.size],t.dtype),o=i.values,s=0;s<r.length;s++)o[s*t.size+s]=r[s];return i.toTensor()},e.prototype.unstack=function(t,r){for(var i=t.shape[r],o=new Array(t.rank-1),s=0,a=0;a<t.rank;a++)a!==r&&(o[s++]=t.shape[a]);var l=new Array(t.rank).fill(0),u=t.shape.slice();u[r]=1;var f=new Array(i);for(a=0;a<f.length;a++)l[r]=a,f[a]=this.slice(t,l,u).reshape(o);return f},e.prototype.reverse=function(t,r){pe(t,"reverse");for(var i=$e(t.shape,t.dtype),o=this.bufferSync(t),s=function(l){var u=i.indexToLoc(l),f=u.slice();r.forEach(function(p){return f[p]=t.shape[p]-1-f[p]}),i.set.apply(i,[o.get.apply(o,f)].concat(u))},a=0;a<i.size;a++)s(a);return i.toTensor()},e.prototype.concat=function(t,r){var i=this;if(t[0].dtype==="complex64"){var o=t.map(function(v){return Wr(v)}),s=t.map(function(v){return ji(v)});return wn(this.concat(o,r),this.concat(s,r))}var a=t.map(function(v){var y=Me(v.shape.slice(r));return v.as2D(-1,y)}),l=Xl(a.map(function(v){return v.shape}),1),u=$e(l,t[0].dtype).values;if(a[0].shape[0]===1){var f=0;a.forEach(function(v){u.set(i.readSync(v.dataId),f),f+=v.size})}else{var p=0;a.forEach(function(v){for(var y=i.readSync(v.dataId),w=0,_=0;_<v.shape[0];++_)for(var k=_*l[1]+p,E=0;E<v.shape[1];++E)u[k+E]=y[w++];p+=v.shape[1]})}var m=Xl(t.map(function(v){return v.shape}),r);return kn(u,m,t[0].dtype)},e.prototype.neg=function(t){return pe(t,"neg"),this.multiply(ke(-1),t)},e.prototype.add=function(t,r){return t.dtype==="complex64"||r.dtype==="complex64"?this.broadcastedBinaryComplexOp(t.cast("complex64"),r.cast("complex64"),function(i,o,s,a){return{real:i+s,imag:o+a}}):this.broadcastedBinaryOp(t,r,_n(t.dtype,r.dtype),function(i,o){return i+o})},e.prototype.addN=function(t){var r=this;pe(t,"addN");for(var i=t.map(function(f){return r.readSync(f.dataId)}),o=$e(t[0].shape,t[0].dtype),s=o.values,a=0;a<t.length;a++)for(var l=i[a],u=0;u<s.length;u++)s[u]+=l[u];return o.toTensor()},e.prototype.softmax=function(t,r){var i=sn([r],t.shape),o=this.max(t,i),s=dr(o.shape,i),a=this.subtract(t,o.reshape(s)),l=this.exp(a),u=this.sum(l,i).reshape(s);return this.realDivide(l,u)},e.prototype.subtract=function(t,r){return t.dtype==="complex64"||r.dtype==="complex64"?this.broadcastedBinaryComplexOp(t.cast("complex64"),r.cast("complex64"),function(i,o,s,a){return{real:i-s,imag:o-a}}):this.broadcastedBinaryOp(t,r,_n(t.dtype,r.dtype),function(i,o){return i-o})},e.prototype.pow=function(t,r){return pe([t,r],"pow"),this.broadcastedBinaryOp(t,r,t.dtype,function(i,o){return Math.pow(i,o)})},e.prototype.batchMatMul=function(t,r,i,o){pe([t,r],"matMul");for(var s=i?t.shape[1]:t.shape[2],a=i?t.shape[2]:t.shape[1],l=o?r.shape[1]:r.shape[2],u=t.shape[0],f=this.readSync(t.dataId),p=this.readSync(r.dataId),m=i?[t.strides[0],1,t.strides[1]]:[t.strides[0],t.strides[1],1],v=m[0],y=m[1],w=m[2],_=o?[1,r.strides[1],r.strides[0]]:[r.strides[1],1,r.strides[0]],k=_[0],E=_[1],N=_[2],S=a*l,A=$e([u,a,l],t.dtype),P=A.values,D=this.blockSize,j=0;j<u;j++)for(var T=0;T<a;T+=D)for(var M=0;M<l;M+=D)for(var L=0;L<s;L+=D)for(var B=Math.min(T+D,a),F=Math.min(M+D,l),K=Math.min(L+D,s),te=T;te<B;te++)for(var se=M;se<F;se++){for(var q=0,$=L;$<K;$++)q+=f[j*v+te*y+$*w]*p[$*k+se*E+j*N];P[j*S+(te*l+se)]+=q}return A.toTensor()},e.prototype.fusedBatchMatMul=function(t){var r=t.a,i=t.b,o=t.transposeA,s=t.transposeB,a=t.bias,l=t.activation,u=t.preluActivationWeights,f=this.batchMatMul(r,i,o,s);return a&&(f=this.add(f,a)),l&&(f=k0(this,f,l,u)),f},e.prototype.multiply=function(t,r){return t.dtype==="complex64"||r.dtype==="complex64"?this.broadcastedBinaryComplexOp(t.cast("complex64"),r.cast("complex64"),function(i,o,s,a){return{real:i*s-o*a,imag:i*a+o*s}}):this.broadcastedBinaryOp(t,r,_n(t.dtype,r.dtype),function(i,o){return i*o})},e.prototype.realDivide=function(t,r){return pe([t,r],"realDivide"),this.broadcastedBinaryOp(t,r,"float32",function(i,o){return i/o})},e.prototype.floorDiv=function(t,r){return pe([t,r],"floorDiv"),this.broadcastedBinaryOp(t,r,"int32",function(i,o){return Math.floor(i/o)})},e.prototype.sum=function(t,r){pe(t,"sum"),wr("sum",r,t.rank);for(var i=Tn(t.shape,r),o=i[0],s=i[1],a=Nt(o,_n(t.dtype,"int32")),l=Me(s),u=this.readSync(a.dataId),f=this.readSync(t.dataId),p=0;p<u.length;++p){for(var m=p*l,v=0,y=0;y<l;++y)v+=f[m+y];u[p]=v}return a},e.prototype.prod=function(t,r){pe(t,"sum");for(var i=Tn(t.shape,r),o=i[0],s=i[1],a=Nt(o,_n(t.dtype,"int32")),l=Me(s),u=this.readSync(a.dataId),f=this.readSync(t.dataId),p=0;p<u.length;++p){for(var m=p*l,v=1,y=0;y<l;++y)v*=f[m+y];u[p]=v}return a},e.prototype.unsortedSegmentSum=function(t,r,i){pe(t,"unsortedSegmentSum");for(var o=[],s=t.rank-r.rank,a=0;a<s;++a)r=r.expandDims(a+1);for(a=0;a<i;++a){var l=ke(a,"int32"),u=y4(l,r).asType("float32").mul(t).sum(0);o.push(u)}return Sr(o)},e.prototype.argMin=function(t,r){pe(t,"argMin");var i=[r];wr("argMin",i,t.rank);for(var o=Tn(t.shape,i),s=o[0],a=o[1],l=Nt(s,"int32"),u=Me(a),f=this.readSync(l.dataId),p=this.readSync(t.dataId),m=0;m<f.length;++m){for(var v=m*u,y=p[v],w=0,_=0;_<u;++_){var k=p[v+_];k<y&&(y=k,w=_)}f[m]=w}return l},e.prototype.argMax=function(t,r){pe(t,"argMax");var i=[r];wr("argMax",i,t.rank);for(var o=Tn(t.shape,i),s=o[0],a=o[1],l=Nt(s,"int32"),u=Me(a),f=this.readSync(l.dataId),p=this.readSync(t.dataId),m=0;m<f.length;++m){for(var v=m*u,y=p[v],w=0,_=0;_<u;++_){var k=p[v+_];k>y&&(y=k,w=_)}f[m]=w}return l},e.prototype.cumsum=function(t,r,i,o){if(pe(t,"cumsum"),r!==t.rank-1)throw new Error("backend.cumsum in CPU expects an inner-most axis="+(t.rank-1)+" but got axis="+r);for(var s=_n(t.dtype,"int32"),a=Nt(t.shape,s),l=this.readSync(a.dataId),u=this.readSync(t.dataId),f=t.shape[t.rank-1],p=o?function(_,k){return _+f-k-1}:function(_,k){return _+k},m=0;m<u.length;m+=f)for(var v=0;v<f;v++){var y=p(m,v);if(v===0)l[y]=i?0:u[y];else{var w=p(m,v-1);l[y]=i?u[w]+l[w]:u[y]+l[w]}}return a},e.prototype.equal=function(t,r){return pe([t,r],"equal"),this.broadcastedBinaryOp(t,r,"bool",function(i,o){return i===o?1:0})},e.prototype.notEqual=function(t,r){return pe([t,r],"notEqual"),this.broadcastedBinaryOp(t,r,"bool",function(i,o){return i!==o?1:0})},e.prototype.less=function(t,r){return pe([t,r],"less"),this.broadcastedBinaryOp(t,r,"bool",function(i,o){return i<o?1:0})},e.prototype.lessEqual=function(t,r){return pe([t,r],"lessEqual"),this.broadcastedBinaryOp(t,r,"bool",function(i,o){return i<=o?1:0})},e.prototype.greater=function(t,r){return pe([t,r],"greater"),this.broadcastedBinaryOp(t,r,"bool",function(i,o){return i>o?1:0})},e.prototype.greaterEqual=function(t,r){return pe([t,r],"greaterEqual"),this.broadcastedBinaryOp(t,r,"bool",function(i,o){return i>=o?1:0})},e.prototype.logicalNot=function(t){pe(t,"logicalNot");for(var r=this.readSync(t.dataId),i=new Uint8Array(r.length),o=0;o<r.length;++o)i[o]=r[o]?0:1;return this.makeOutput(i,t.shape,"bool")},e.prototype.logicalAnd=function(t,r){return pe([t,r],"logicalAnd"),this.broadcastedBinaryOp(t,r,"bool",function(i,o){return i&&o})},e.prototype.logicalOr=function(t,r){return pe([t,r],"logicalOr"),this.broadcastedBinaryOp(t,r,"bool",function(i,o){return i||o})},e.prototype.select=function(t,r,i){pe([t,r,i],"select");for(var o=this.readSync(t.dataId),s=this.readSync(r.dataId),a=this.readSync(i.dataId),l=Nt(r.shape,_n(r.dtype,i.dtype)),u=this.readSync(l.dataId),f=0,p=t.rank===0||t.rank>1||r.rank===1?1:Me(r.shape.slice(1)),m=0;m<o.length;m++)for(var v=0;v<p;v++)o[m]===1?u[f++]=s[m]:u[f++]=a[m];return l},e.prototype.where=function(t){pe([t],"where");var r=this.readSync(t.dataId);return hv(t.shape,r)},e.prototype.topk=function(t,r,i){return pe(t,"topk"),Yk(this.readSync(t.dataId),t.shape,t.dtype,r)},e.prototype.min=function(t,r){pe(t,"min"),wr("min",r,t.rank);for(var i=Tn(t.shape,r),o=i[0],s=i[1],a=Nt(o,t.dtype),l=Me(s),u=this.readSync(a.dataId),f=this.readSync(t.dataId),p=0;p<u.length;++p){for(var m=p*l,v=f[m],y=0;y<l;++y){var w=f[m+y];w<v&&(v=w)}u[p]=v}return a},e.prototype.minimum=function(t,r){return pe([t,r],"minimum"),this.broadcastedBinaryOp(t,r,t.dtype,function(i,o){return Math.min(i,o)})},e.prototype.mod=function(t,r){return pe([t,r],"mod"),this.broadcastedBinaryOp(t,r,t.dtype,function(i,o){var s=i%o;return i<0&&o<0||i>=0&&o>=0?s:(s+o)%o})},e.prototype.max=function(t,r){pe(t,"max"),wr("max",r,t.rank);for(var i=Tn(t.shape,r),o=i[0],s=i[1],a=Nt(o,t.dtype),l=Me(s),u=this.readSync(a.dataId),f=this.readSync(t.dataId),p=0;p<u.length;++p){for(var m=p*l,v=f[m],y=0;y<l;++y){var w=f[m+y];w>v&&(v=w)}u[p]=v}return a},e.prototype.maximum=function(t,r){return pe([t,r],"maximum"),this.broadcastedBinaryOp(t,r,t.dtype,function(i,o){return Math.max(i,o)})},e.prototype.all=function(t,r){pe(t,"all"),wr("all",r,t.rank);for(var i=Tn(t.shape,r),o=i[0],s=i[1],a=Nt(o,t.dtype),l=Me(s),u=this.readSync(a.dataId),f=this.readSync(t.dataId),p=0;p<u.length;++p){for(var m=p*l,v=f[m],y=0;y<l;++y){var w=f[m+y];v=v&&w}u[p]=v}return a},e.prototype.any=function(t,r){pe(t,"any"),wr("any",r,t.rank);for(var i=Tn(t.shape,r),o=i[0],s=i[1],a=Nt(o,t.dtype),l=Me(s),u=this.readSync(a.dataId),f=this.readSync(t.dataId),p=0;p<u.length;++p){for(var m=p*l,v=f[m],y=0;y<l;++y){var w=f[m+y];v=v||w}u[p]=v}return a},e.prototype.squaredDifference=function(t,r){return pe([t,r],"squaredDifference"),this.broadcastedBinaryOp(t,r,t.dtype,function(i,o){var s=i-o;return s*s})},e.prototype.ceil=function(t){pe(t,"ceil");for(var r=this.readSync(t.dataId),i=new Float32Array(r.length),o=0;o<r.length;++o)i[o]=Math.ceil(r[o]);return this.makeOutput(i,t.shape,"float32")},e.prototype.floor=function(t){pe(t,"floor");for(var r=this.readSync(t.dataId),i=new Float32Array(r.length),o=0;o<r.length;++o)i[o]=Math.floor(r[o]);return this.makeOutput(i,t.shape,"float32")},e.prototype.sign=function(t){pe(t,"x");for(var r=this.readSync(t.dataId),i=new Float32Array(r.length),o=0;o<r.length;++o)r[o]<0?i[o]=-1:r[o]>0?i[o]=1:i[o]=0;return this.makeOutput(i,t.shape,"float32")},e.prototype.isNaN=function(t){pe(t,"x");for(var r=this.readSync(t.dataId),i=new Uint8Array(r.length),o=0;o<r.length;++o)Number.isNaN(r[o])&&(i[o]=1);return this.makeOutput(i,t.shape,"bool")},e.prototype.isInf=function(t){pe(t,"x");for(var r=this.readSync(t.dataId),i=new Uint8Array(r.length),o=0;o<r.length;++o)Math.abs(r[o])===1/0&&(i[o]=1);return this.makeOutput(i,t.shape,"bool")},e.prototype.isFinite=function(t){pe(t,"x");for(var r=this.readSync(t.dataId),i=new Uint8Array(r.length),o=0;o<r.length;++o)Number.isFinite(r[o])&&(i[o]=1);return this.makeOutput(i,t.shape,"bool")},e.prototype.round=function(t){pe(t,"round");for(var r=this.readSync(t.dataId),i=new Float32Array(r.length),o=0;o<r.length;++o){var s=Math.floor(r[o]);r[o]-s<.5?i[o]=Math.floor(r[o]):r[o]-s>.5?i[o]=Math.ceil(r[o]):i[o]=s%2==0?s:s+1}return this.makeOutput(i,t.shape,"float32")},e.prototype.exp=function(t){pe(t,"exp");for(var r=this.readSync(t.dataId),i=new Float32Array(r.length),o=0;o<r.length;++o)i[o]=Math.exp(r[o]);return this.makeOutput(i,t.shape,"float32")},e.prototype.expm1=function(t){pe(t,"expm1");for(var r=this.readSync(t.dataId),i=new Float32Array(r.length),o=0;o<r.length;++o)i[o]=Math.expm1(r[o]);return this.makeOutput(i,t.shape,"float32")},e.prototype.log=function(t){pe(t,"log");for(var r=this.readSync(t.dataId),i=new Float32Array(r.length),o=0;o<r.length;++o){var s=r[o];i[o]=Math.log(s)}return this.makeOutput(i,t.shape,"float32")},e.prototype.log1p=function(t){pe(t,"log1p");for(var r=this.readSync(t.dataId),i=new Float32Array(r.length),o=0;o<r.length;++o){var s=r[o];i[o]=Math.log1p(s)}return this.makeOutput(i,t.shape,"float32")},e.prototype.sqrt=function(t){pe(t,"sqrt");for(var r=this.readSync(t.dataId),i=new Float32Array(r.length),o=0;o<r.length;++o){var s=r[o];i[o]=Math.sqrt(s)}return this.makeOutput(i,t.shape,"float32")},e.prototype.rsqrt=function(t){pe(t,"rsqrt");for(var r=this.readSync(t.dataId),i=new Float32Array(r.length),o=0;o<r.length;++o){var s=r[o];i[o]=1/Math.sqrt(s)}return this.makeOutput(i,t.shape,"float32")},e.prototype.reciprocal=function(t){pe(t,"reciprocal");for(var r=this.readSync(t.dataId),i=new Float32Array(r.length),o=0;o<r.length;++o)i[o]=1/r[o];return this.makeOutput(i,t.shape,"float32")},e.prototype.linear=function(t){return t},e.prototype.relu=function(t){pe(t,"relu");for(var r=Nt(t.shape,t.dtype),i=this.readSync(r.dataId),o=this.readSync(t.dataId),s=0;s<o.length;++s)i[s]=Math.max(0,o[s]);return r},e.prototype.relu6=function(t){pe(t,"relu");for(var r=Nt(t.shape,t.dtype),i=this.readSync(r.dataId),o=this.readSync(t.dataId),s=0;s<o.length;++s)i[s]=Math.min(Math.max(0,o[s]),6);return r},e.prototype.prelu=function(t,r){return pe([t,r],"prelu"),this.broadcastedBinaryOp(t,r,t.dtype,function(i,o){return i<0?o*i:i})},e.prototype.elu=function(t){pe(t,"elu");for(var r=new Float32Array(t.size),i=this.readSync(t.dataId),o=0;o<i.length;++o){var s=i[o];r[o]=s>=0?s:Math.exp(s)-1}return this.makeOutput(r,t.shape,"float32")},e.prototype.eluDer=function(t,r){pe([t,r],"eluDer");for(var i=new Float32Array(r.size),o=this.readSync(r.dataId),s=this.readSync(t.dataId),a=0;a<o.length;++a){var l=o[a];i[a]=l>=1?s[a]:s[a]*(l+1)}return this.makeOutput(i,r.shape,"float32")},e.prototype.selu=function(t){pe(t,"selu");for(var r=pv,i=mv,o=new Float32Array(t.size),s=this.readSync(t.dataId),a=0;a<s.length;++a){var l=s[a];o[a]=l>=0?i*l:r*(Math.exp(l)-1)}return this.makeOutput(o,t.shape,"float32")},e.prototype.clip=function(t,r,i){pe(t,"clip");for(var o=new Float32Array(t.size),s=this.readSync(t.dataId),a=0;a<s.length;++a){var l=s[a];o[a]=l>i?i:l<r?r:l}return this.makeOutput(o,t.shape,"float32")},e.prototype.abs=function(t){for(var r=new Float32Array(t.size),i=this.readSync(t.dataId),o=0;o<i.length;++o)r[o]=Math.abs(i[o]);return this.makeOutput(r,t.shape,"float32")},e.prototype.complexAbs=function(t){for(var r=new Float32Array(t.size),i=this.readSync(t.dataId),o=0;o<t.size;++o){var s=i[2*o],a=i[2*o+1];r[o]=Math.hypot(s,a)}return this.makeOutput(r,t.shape,"float32")},e.prototype.int=function(t){pe(t,"int");for(var r=new Int32Array(t.size),i=this.readSync(t.dataId),o=0;o<i.length;++o)r[o]=i[o];return this.makeOutput(r,t.shape,"int32")},e.prototype.sigmoid=function(t){pe(t,"sigmoid");for(var r=new Float32Array(t.size),i=this.readSync(t.dataId),o=0;o<i.length;++o)r[o]=1/(1+Math.exp(-i[o]));return this.makeOutput(r,t.shape,"float32")},e.prototype.softplus=function(t){pe(t,"softplus");for(var r=Math.log(11920928955078125e-23)+2,i=new Float32Array(t.size),o=this.readSync(t.dataId),s=0;s<o.length;++s){var a=o[s]>-r,l=o[s]<r,u=Math.exp(o[s]),f=void 0;f=l?u:a?o[s]:Math.log(1+u),i[s]=f}return this.makeOutput(i,t.shape,"float32")},e.prototype.sin=function(t){pe(t,"sin");for(var r=new Float32Array(t.size),i=this.readSync(t.dataId),o=0;o<i.length;++o)r[o]=Math.sin(i[o]);return this.makeOutput(r,t.shape,"float32")},e.prototype.cos=function(t){pe(t,"cos");for(var r=new Float32Array(t.size),i=this.readSync(t.dataId),o=0;o<i.length;++o)r[o]=Math.cos(i[o]);return this.makeOutput(r,t.shape,"float32")},e.prototype.tan=function(t){pe(t,"tan");for(var r=new Float32Array(t.size),i=this.readSync(t.dataId),o=0;o<i.length;++o)r[o]=Math.tan(i[o]);return this.makeOutput(r,t.shape,"float32")},e.prototype.asin=function(t){pe(t,"asin");for(var r=new Float32Array(t.size),i=this.readSync(t.dataId),o=0;o<i.length;++o)r[o]=Math.asin(i[o]);return this.makeOutput(r,t.shape,"float32")},e.prototype.acos=function(t){pe(t,"acos");for(var r=new Float32Array(t.size),i=this.readSync(t.dataId),o=0;o<i.length;++o)r[o]=Math.acos(i[o]);return this.makeOutput(r,t.shape,"float32")},e.prototype.atan=function(t){pe(t,"atan");for(var r=new Float32Array(t.size),i=this.readSync(t.dataId),o=0;o<i.length;++o)r[o]=Math.atan(i[o]);return this.makeOutput(r,t.shape,"float32")},e.prototype.atan2=function(t,r){return pe([t,r],"atan2"),this.broadcastedBinaryOp(t,r,t.dtype,function(i,o){return Math.atan2(i,o)})},e.prototype.sinh=function(t){pe(t,"sinh");for(var r=new Float32Array(t.size),i=this.readSync(t.dataId),o=0;o<i.length;++o)r[o]=Math.sinh(i[o]);return this.makeOutput(r,t.shape,"float32")},e.prototype.cosh=function(t){pe(t,"cosh");for(var r=new Float32Array(t.size),i=this.readSync(t.dataId),o=0;o<i.length;++o)r[o]=Math.cosh(i[o]);return this.makeOutput(r,t.shape,"float32")},e.prototype.tanh=function(t){pe(t,"tanh");for(var r=new Float32Array(t.size),i=this.readSync(t.dataId),o=0;o<i.length;++o)r[o]=hA(i[o]);return this.makeOutput(r,t.shape,"float32")},e.prototype.asinh=function(t){pe(t,"asinh");for(var r=new Float32Array(t.size),i=this.readSync(t.dataId),o=0;o<i.length;++o)r[o]=Math.asinh(i[o]);return this.makeOutput(r,t.shape,"float32")},e.prototype.acosh=function(t){pe(t,"acosh");for(var r=new Float32Array(t.size),i=this.readSync(t.dataId),o=0;o<i.length;++o)r[o]=Math.acosh(i[o]);return this.makeOutput(r,t.shape,"float32")},e.prototype.atanh=function(t){pe(t,"atanh");for(var r=new Float32Array(t.size),i=this.readSync(t.dataId),o=0;o<i.length;++o)r[o]=Math.atanh(i[o]);return this.makeOutput(r,t.shape,"float32")},e.prototype.erf=function(t){pe(t,"erf");for(var r=new Float32Array(t.size),i=this.readSync(t.dataId),o=0;o<i.length;++o){var s=Math.sign(i[o]),a=Math.abs(i[o]),l=1/(1+.3275911*a);r[o]=s*(1-((((1.061405429*l-1.453152027)*l+1.421413741)*l-.284496736)*l+.254829592)*l*Math.exp(-a*a))}return this.makeOutput(r,t.shape,"float32")},e.prototype.step=function(t,r){r===void 0&&(r=0),pe(t,"step");for(var i=new Float32Array(t.size),o=this.readSync(t.dataId),s=0;s<o.length;++s){var a=o[s];isNaN(a)?i[s]=NaN:i[s]=a>0?1:r}return this.makeOutput(i,t.shape,"float32")},e.prototype.fusedConv2d=function(t){var r=t.input,i=t.filter,o=t.convInfo,s=t.bias,a=t.activation,l=t.preluActivationWeights,u=this.conv2d(r,i,o);return s&&(u=this.add(u,s)),a&&(u=k0(this,u,a,l)),u},e.prototype.conv2d=function(t,r,i){pe([t,r],"conv2d");for(var o=i.filterHeight,s=i.filterWidth,a=i.dilationHeight,l=i.dilationWidth,u=i.padInfo.left,f=i.padInfo.top,p=i.dataFormat==="channelsLast",m=$e(i.outShape,t.dtype),v=t.strides[0],y=p?t.strides[1]:t.strides[2],w=p?t.strides[2]:1,_=p?1:t.strides[1],k=m.strides[0],E=p?m.strides[1]:m.strides[2],N=p?m.strides[2]:1,S=p?1:m.strides[1],A=this.readSync(t.dataId),P=this.readSync(r.dataId),D=m.values,j=0;j<i.batchSize;++j)for(var T=j*v,M=j*k,L=0;L<i.outHeight;++L)for(var B=M+L*E,F=L*i.strideHeight-f,K=0;K<o;K++){var te=F+K*a;if(!(te<0||te>=i.inHeight))for(var se=K*r.strides[0],q=T+te*y,$=0;$<i.outWidth;++$)for(var Y=B+$*N,Q=$*i.strideWidth-u,H=0;H<s;H++){var ne=Q+H*l;if(!(ne<0||ne>=i.inWidth))for(var fe=q+ne*w,ye=se+H*r.strides[1],be=0;be<i.inChannels;++be){for(var _e=A[fe+be*_],Se=0;Se<i.outChannels;++Se)D[Y+Se*S]+=_e*P[ye+Se];ye+=i.outChannels}}}return m.toTensor()},e.prototype.conv3d=function(t,r,i){for(var o=i.filterDepth,s=i.filterHeight,a=i.filterWidth,l=i.dilationDepth,u=i.dilationHeight,f=i.dilationWidth,p=i.padInfo.front,m=i.padInfo.left,v=i.padInfo.top,y=$e(i.outShape,t.dtype),w=this.readSync(t.dataId),_=this.readSync(r.dataId),k=y.values,E=0;E<i.batchSize;++E)for(var N=E*t.strides[0],S=E*y.strides[0],A=0;A<i.outDepth;++A)for(var P=S+A*y.strides[1],D=A*i.strideDepth-p,j=0;j<o;j++){var T=D+j*l;if(!(T<0||T>=i.inDepth))for(var M=j*r.strides[0],L=N+T*t.strides[1],B=0;B<i.outHeight;++B)for(var F=P+B*y.strides[2],K=B*i.strideHeight-v,te=0;te<s;te++){var se=K+te*u;if(!(se<0||se>=i.inHeight))for(var q=M+te*r.strides[1],$=L+se*t.strides[2],Y=0;Y<i.outWidth;++Y)for(var Q=F+Y*i.outChannels,H=Y*i.strideWidth-m,ne=0;ne<a;ne++){var fe=H+ne*f;if(!(fe<0||fe>=i.inWidth))for(var ye=q+ne*r.strides[2],be=$+fe*i.inChannels,_e=ye,Se=0;Se<i.inChannels;++Se){for(var Ne=w[be+Se],De=0;De<i.outChannels;++De)k[Q+De]+=Ne*_[_e+De];_e+=i.outChannels}}}}return y.toTensor()},e.prototype.conv2dDerInput=function(t,r,i){pe([t,r],"conv2dDerInput");for(var o=$e(i.inShape,"float32"),s=o.values,a=this.readSync(t.dataId),l=this.readSync(r.dataId),u=r.strides,f=u[0],p=u[1],m=u[2],v=i.batchSize,y=i.filterHeight,w=i.filterWidth,_=i.inChannels,k=i.inHeight,E=i.inWidth,N=i.outChannels,S=i.outHeight,A=i.outWidth,P=i.strideHeight,D=i.strideWidth,j=i.dataFormat,T=y-1-i.padInfo.top,M=w-1-i.padInfo.left,L=j==="channelsLast",B=o.strides[0],F=L?o.strides[1]:o.strides[2],K=L?o.strides[2]:1,te=L?1:o.strides[1],se=t.strides[0],q=L?t.strides[1]:t.strides[2],$=L?t.strides[2]:1,Y=L?1:t.strides[1],Q=0;Q<v;++Q)for(var H=0;H<_;++H)for(var ne=0;ne<k;++ne)for(var fe=ne-T,ye=Math.max(0,Math.ceil(fe/P)),be=Math.min(S,(y+fe)/P),_e=0;_e<E;++_e){for(var Se=_e-M,Ne=Math.max(0,Math.ceil(Se/D)),De=Math.min(A,(w+Se)/D),Xe=0,He=ye;He<be;++He)for(var nt=He*P-fe,Ye=Ne;Ye<De;++Ye)for(var dt=se*Q+q*He+$*Ye,ht=f*(y-1-nt)+p*(w-1-(Ye*D-Se))+m*H,mt=0;mt<N;++mt)Xe+=a[dt+Y*mt]*l[ht+mt];s[B*Q+F*ne+K*_e+te*H]=Xe}return o.toTensor()},e.prototype.conv3dDerInput=function(t,r,i){for(var o=$e(i.inShape,"float32"),s=o.values,a=o.strides,l=a[0],u=a[1],f=a[2],p=a[3],m=this.readSync(t.dataId),v=t.strides,y=v[0],w=v[1],_=v[2],k=v[3],E=this.readSync(r.dataId),N=r.strides,S=N[0],A=N[1],P=N[2],D=N[3],j=i.batchSize,T=i.filterDepth,M=i.filterHeight,L=i.filterWidth,B=i.inChannels,F=i.inDepth,K=i.inHeight,te=i.inWidth,se=i.outChannels,q=i.outDepth,$=i.outHeight,Y=i.outWidth,Q=i.strideDepth,H=i.strideHeight,ne=i.strideWidth,fe=T-1-i.padInfo.front,ye=M-1-i.padInfo.top,be=L-1-i.padInfo.left,_e=0;_e<j;++_e)for(var Se=0;Se<B;++Se)for(var Ne=0;Ne<F;++Ne)for(var De=Ne-fe,Xe=Math.max(0,Math.ceil(De/Q)),He=Math.min(q,(T+De)/Q),nt=0;nt<K;++nt)for(var Ye=nt-ye,dt=Math.max(0,Math.ceil(Ye/H)),ht=Math.min($,(M+Ye)/H),mt=0;mt<te;++mt){for(var Cn=mt-be,Wn=Math.max(0,Math.ceil(Cn/ne)),Gt=Math.min(Y,(L+Cn)/ne),En=0,Xt=Xe;Xt<He;++Xt)for(var Kn=Xt*Q-De,Nn=dt;Nn<ht;++Nn)for(var fr=Nn*H-Ye,Vn=Wn;Vn<Gt;++Vn)for(var jt=y*_e+w*Xt+_*Nn+k*Vn,yt=S*(T-1-Kn)+A*(M-1-fr)+P*(L-1-(Vn*ne-Cn))+D*Se,$t=0;$t<se;++$t)En+=m[jt+$t]*E[yt+$t];s[l*_e+u*Ne+f*nt+p*mt+Se]=En}return o.toTensor()},e.prototype.conv2dDerFilter=function(t,r,i){pe([t,r],"conv2dDerFilter");for(var o=i.strideHeight,s=i.strideWidth,a=i.filterHeight,l=i.filterWidth,u=i.dataFormat==="channelsLast",f=$e(i.filterShape,"float32"),p=i.padInfo.left,m=i.padInfo.top,v=this.bufferSync(t),y=this.bufferSync(r),w=0;w<a;++w)for(var _=Math.max(0,Math.ceil((m-w)/o)),k=Math.min(i.outHeight,(i.inHeight+m-w)/o),E=0;E<l;++E)for(var N=Math.max(0,Math.ceil((p-E)/s)),S=Math.min(i.outWidth,(i.inWidth+p-E)/s),A=0;A<i.inChannels;++A)for(var P=0;P<i.outChannels;++P){for(var D=0,j=0;j<i.batchSize;++j)for(var T=_;T<k;++T)for(var M=w+T*o-m,L=N;L<S;++L){var B=E+L*s-p;D+=u?v.get(j,M,B,A)*y.get(j,T,L,P):v.get(j,A,M,B)*y.get(j,P,T,L)}f.set(D,w,E,A,P)}return f.toTensor()},e.prototype.conv3dDerFilter=function(t,r,i){for(var o=i.strideDepth,s=i.strideHeight,a=i.strideWidth,l=i.filterDepth,u=i.filterHeight,f=i.filterWidth,p=$e(i.filterShape,"float32"),m=p.values,v=p.strides,y=v[0],w=v[1],_=v[2],k=v[3],E=this.readSync(r.dataId),N=r.strides,S=N[0],A=N[1],P=N[2],D=N[3],j=this.readSync(t.dataId),T=t.strides,M=T[0],L=T[1],B=T[2],F=T[3],K=i.padInfo.front,te=i.padInfo.left,se=i.padInfo.top,q=0;q<l;++q)for(var $=Math.max(0,Math.ceil((K-q)/o)),Y=Math.min(i.outDepth,(i.inDepth+K-q)/o),Q=q*y,H=0;H<u;++H)for(var ne=Math.max(0,Math.ceil((se-H)/s)),fe=Math.min(i.outHeight,(i.inHeight+se-H)/s),ye=H*w+Q,be=0;be<f;++be)for(var _e=Math.max(0,Math.ceil((te-be)/a)),Se=Math.min(i.outWidth,(i.inWidth+te-be)/a),Ne=be*_+ye,De=0;De<i.inChannels;++De)for(var Xe=De*k+Ne,He=0;He<i.outChannels;++He){for(var nt=0,Ye=0;Ye<i.batchSize;++Ye)for(var dt=Ye*M,ht=Ye*S,mt=$;mt<Y;++mt)for(var Cn=(q+mt*o-K)*L+dt,Wn=mt*A+ht,Gt=ne;Gt<fe;++Gt)for(var En=(H+Gt*s-se)*B+Cn,Xt=Gt*P+Wn,Kn=_e;Kn<Se;++Kn){var Nn=Kn*D+Xt;nt+=j[(be+Kn*a-te)*F+En+De]*E[Nn+He]}m[Xe+He]=nt}return p.toTensor()},e.prototype.fusedDepthwiseConv2D=function(t){var r=t.input,i=t.filter,o=t.convInfo,s=t.bias,a=t.activation,l=t.preluActivationWeights,u=this.depthwiseConv2D(r,i,o);return s&&(u=this.add(u,s)),a&&(u=k0(this,u,a,l)),u},e.prototype.depthwiseConv2D=function(t,r,i){pe([t,r],"depthwiseConv2D");for(var o=i.filterHeight,s=i.filterWidth,a=i.dilationHeight,l=i.dilationWidth,u=i.padInfo.left,f=i.padInfo.top,p=i.outChannels/i.inChannels,m=$e(i.outShape,t.dtype),v=this.readSync(t.dataId),y=this.readSync(r.dataId),w=m.values,_=0;_<i.batchSize;++_)for(var k=_*t.strides[0],E=_*m.strides[0],N=0;N<i.outHeight;++N)for(var S=E+N*m.strides[1],A=N*i.strideHeight-u,P=0;P<o;++P){var D=A+P*a;if(!(D<0||D>=i.inHeight))for(var j=P*r.strides[0],T=k+D*t.strides[1],M=0;M<i.outWidth;++M)for(var L=S+M*m.strides[2],B=M*i.strideWidth-f,F=0;F<s;++F){var K=B+F*l;if(!(K<0||K>=i.inWidth))for(var te=j+F*r.strides[1],se=T+K*i.inChannels,q=L,$=te,Y=0;Y<i.inChannels;++Y){for(var Q=v[se+Y],H=0;H<p;++H)w[q+H]+=Q*y[$+H];q+=p,$+=p}}}return m.toTensor()},e.prototype.depthwiseConv2DDerInput=function(t,r,i){pe([t,r],"depthwiseConv2DDerInput");for(var o=$e(i.inShape,"float32"),s=o.values,a=o.strides,l=a[0],u=a[1],f=a[2],p=this.readSync(t.dataId),m=t.strides,v=m[0],y=m[1],w=m[2],_=this.readSync(r.dataId),k=r.strides,E=k[0],N=k[1],S=k[2],A=i.batchSize,P=i.filterHeight,D=i.filterWidth,j=i.inChannels,T=i.inHeight,M=i.inWidth,L=i.outChannels,B=i.outHeight,F=i.outWidth,K=i.strideHeight,te=i.strideWidth,se=P-1-i.padInfo.top,q=D-1-i.padInfo.left,$=L/j,Y=0;Y<A;++Y)for(var Q=0;Q<j;++Q)for(var H=0;H<T;++H)for(var ne=H-se,fe=Math.max(0,Math.ceil(ne/K)),ye=Math.min(B,(P+ne)/K),be=0;be<M;++be){for(var _e=be-q,Se=Math.max(0,Math.ceil(_e/te)),Ne=Math.min(F,(D+_e)/te),De=0,Xe=fe;Xe<ye;++Xe)for(var He=Xe*K-ne,nt=Se;nt<Ne;++nt)for(var Ye=v*Y+y*Xe+w*nt,dt=E*(P-1-He)+N*(D-1-(nt*te-_e))+S*Q,ht=0;ht<$;++ht)De+=p[Ye+(Q*$+ht)]*_[dt+ht];s[l*Y+u*H+f*be+Q]=De}return o.toTensor()},e.prototype.depthwiseConv2DDerFilter=function(t,r,i){pe([t,r],"depthwiseConv2DDerFilter");for(var o=i.strideHeight,s=i.strideWidth,a=i.filterHeight,l=i.filterWidth,u=$e(i.filterShape,"float32"),f=i.padInfo.left,p=i.padInfo.top,m=i.outChannels/i.inChannels,v=this.bufferSync(t),y=this.bufferSync(r),w=0;w<a;++w)for(var _=Math.max(0,Math.ceil((p-w)/o)),k=Math.min(i.outHeight,(i.inHeight+p-w)/o),E=0;E<l;++E)for(var N=Math.max(0,Math.ceil((f-E)/s)),S=Math.min(i.outWidth,(i.inWidth+f-E)/s),A=0;A<i.outChannels;++A){for(var P=Math.trunc(A/m),D=A%m,j=0,T=0;T<i.batchSize;++T)for(var M=_;M<k;++M)for(var L=w+M*o-p,B=N;B<S;++B){var F=E+B*s-f;j+=v.get(T,L,F,P)*y.get(T,M,B,A)}u.set(j,w,E,P,D)}return u.toTensor()},e.prototype.tile=function(t,r){return pe(t,"tile"),Xk(this.bufferSync(t),r)},e.prototype.pad=function(t,r,i){pe(t,"pad");var o=r.map(function(m,v){return m[0]+t.shape[v]+m[1]}),s=r.map(function(m){return m[0]}),a=this.bufferSync(t),l=$e(o,t.dtype);i!==0&&l.values.fill(i);for(var u=0;u<t.size;u++){var f=a.indexToLoc(u),p=f.map(function(m,v){return m+s[v]});l.set.apply(l,[a.get.apply(a,f)].concat(p))}return l.toTensor()},e.prototype.transpose=function(t,r){pe(t,"transpose");for(var i=new Array(t.rank),o=0;o<i.length;o++)i[o]=t.shape[r[o]];var s=this.readSync(t.dataId),a=$e(i,t.dtype),l=this.bufferSync(t);for(o=0;o<t.size;++o){for(var u=l.indexToLoc(o),f=new Array(u.length),p=0;p<f.length;p++)f[p]=u[r[p]];var m=a.locToIndex(f);a.values[m]=s[o]}return a.toTensor()},e.prototype.gather=function(t,r,i){pe([t,r],"gather");var o=t.shape.slice(),s=this.readSync(r.dataId);o[i]=s.length;for(var a=$e(o,t.dtype),l=this.bufferSync(t),u=0;u<a.size;++u){var f=a.indexToLoc(u),p=f.slice();p[i]=s[f[i]];var m=l.locToIndex(p);a.values[u]=l.values[m]}return a.toTensor()},e.prototype.batchToSpaceND=function(t,r,i){pe([t],"batchToSpaceND");var o=r.reduce(function(p,m){return p*m}),s=Ef(t.shape,r,o),a=Nf(s.length,r.length),l=Sf(t.shape,r,o),u=Ok(i,r.length),f=Fk(l,i,r.length);return t.reshape(s).transpose(a).reshape(l).slice(u,f)},e.prototype.spaceToBatchND=function(t,r,i){pe([t],"spaceToBatchND");var o=r.reduce(function(m,v){return m*v}),s=[[0,0]];s.push.apply(s,i);for(var a=1+r.length;a<t.shape.length;++a)s.push([0,0]);var l=t.pad(s),u=Ef(l.shape,r,o,!1),f=Nf(u.length,r.length,!1),p=Sf(l.shape,r,o,!1);return l.reshape(u).transpose(f).reshape(p)},e.prototype.pool=function(t,r,i){pe(t,"pool");for(var o=r.strideHeight,s=r.strideWidth,a=r.dilationHeight,l=r.dilationWidth,u=r.effectiveFilterHeight,f=r.effectiveFilterWidth,p=r.padInfo.top,m=r.padInfo.left,v=i==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,y=this.readSync(t.dataId),w=$e(r.outShape,t.dtype),_=w.values,k=r.outShape[1]*r.outShape[2]*r.outShape[3],E=r.outShape[2]*r.outShape[3],N=r.outShape[3],S=0;S<r.batchSize;++S)for(var A=S*k,P=S*t.strides[0],D=0;D<r.inChannels;++D)for(var j=0;j<r.outHeight;++j)for(var T=j*o-p,M=Math.max(0,T),L=Math.min(r.inHeight,u+T),B=A+j*E,F=0;F<r.outWidth;++F){for(var K=F*s-m,te=Math.max(0,K),se=Math.min(r.inWidth,f+K),q=v,$=0,Y=0,Q=M;Q<L;Q+=a){for(var H=P+Q*t.strides[1],ne=te;ne<se;ne+=l){var fe=y[H+ne*t.strides[2]+D];i==="max"&&fe>q?q=fe:i==="avg"&&($+=fe,Y++)}if(isNaN(q))break}_[B+F*N+D]=i==="avg"?$/Y:q}return w.toTensor()},e.prototype.maxPool=function(t,r){return this.pool(t,r,"max")},e.prototype.maxPoolPositions=function(t,r){for(var i=$e(r.outShape,"int32"),o=r.strideHeight,s=r.strideWidth,a=r.dilationHeight,l=r.dilationWidth,u=r.effectiveFilterHeight,f=r.effectiveFilterWidth,p=r.padInfo.top,m=r.padInfo.left,v=this.bufferSync(t),y=0;y<r.batchSize;++y)for(var w=0;w<r.inChannels;++w)for(var _=0;_<r.outHeight;++_){for(var k=_*o-p,E=k;E<0;)E+=a;for(var N=Math.min(r.inHeight,u+k),S=0;S<r.outWidth;++S){for(var A=S*s-m,P=A;P<0;)P+=l;for(var D=Math.min(r.inWidth,f+A),j=Number.NEGATIVE_INFINITY,T=-1,M=E;M<N;M+=a)for(var L=M-k,B=P;B<D;B+=l){var F=B-A,K=v.get(y,M,B,w);K>j&&(j=K,T=L*f+F)}i.set(T,y,_,S,w)}}return i.toTensor()},e.prototype.maxPoolBackprop=function(t,r,i,o){pe([r,i],"maxPoolBackprop");for(var s=this.maxPoolPositions(r,o),a=o.strideHeight,l=o.strideWidth,u=o.dilationHeight,f=o.dilationWidth,p=o.effectiveFilterHeight,m=o.effectiveFilterWidth,v=m-1-o.padInfo.left,y=p-1-o.padInfo.top,w=$e(r.shape,"float32"),_=this.bufferSync(s),k=this.bufferSync(t),E=0;E<o.batchSize;++E)for(var N=0;N<o.inChannels;++N)for(var S=0;S<o.inHeight;++S)for(var A=0;A<o.inWidth;++A){for(var P=S-y,D=A-v,j=0,T=0;T<p;T+=u){var M=(P+T)/a;if(!(M<0||M>=o.outHeight||Math.floor(M)!==M))for(var L=0;L<m;L+=f){var B=(D+L)/l;if(!(B<0||B>=o.outWidth||Math.floor(B)!==B)){var F=p*m-1-_.get(E,M,B,N)===T*m+L?1:0;F!==0&&(j+=k.get(E,M,B,N)*F)}}}w.set(j,E,S,A,N)}return w.toTensor()},e.prototype.avgPoolBackprop=function(t,r,i){pe([t,r],"avgPoolBackprop");for(var o=i.strideHeight,s=i.strideWidth,a=i.filterHeight,l=i.filterWidth,u=i.dilationHeight,f=i.dilationWidth,p=i.effectiveFilterHeight,m=i.effectiveFilterWidth,v=m-1-i.padInfo.left,y=p-1-i.padInfo.top,w=$e(r.shape,"float32"),_=1/(a*l),k=this.bufferSync(t),E=0;E<i.batchSize;++E)for(var N=0;N<i.inChannels;++N)for(var S=0;S<i.inHeight;++S)for(var A=0;A<i.inWidth;++A){for(var P=S-y,D=A-v,j=0,T=0;T<p;T+=u){var M=(P+T)/o;if(!(M<0||M>=i.outHeight||Math.floor(M)!==M))for(var L=0;L<m;L+=f){var B=(D+L)/s;B<0||B>=i.outWidth||Math.floor(B)!==B||(j+=k.get(E,M,B,N))}}w.set(j*_,E,S,A,N)}return w.toTensor()},e.prototype.pool3d=function(t,r,i){pe(t,"pool3d");for(var o=r.strideDepth,s=r.strideHeight,a=r.strideWidth,l=r.dilationDepth,u=r.dilationHeight,f=r.dilationWidth,p=r.effectiveFilterDepth,m=r.effectiveFilterHeight,v=r.effectiveFilterWidth,y=r.padInfo.front,w=r.padInfo.top,_=r.padInfo.left,k=i==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,E=this.readSync(t.dataId),N=$e(r.outShape,t.dtype),S=N.values,A=r.outShape[1]*r.outShape[2]*r.outShape[3]*r.outShape[4],P=r.outShape[2]*r.outShape[3]*r.outShape[4],D=r.outShape[3]*r.outShape[4],j=r.outShape[4],T=0;T<r.batchSize;++T)for(var M=T*A,L=T*t.strides[0],B=0;B<r.inChannels;++B)for(var F=0;F<r.outDepth;++F){for(var K=F*o-y,te=K;te<0;)te+=l;for(var se=Math.min(r.inDepth,p+K),q=M+F*P,$=0;$<r.outHeight;++$){for(var Y=$*s-w,Q=Y;Q<0;)Q+=u;for(var H=Math.min(r.inHeight,m+Y),ne=q+$*D,fe=0;fe<r.outWidth;++fe){for(var ye=fe*a-_,be=ye;be<0;)be+=f;for(var _e=Math.min(r.inWidth,v+ye),Se=ne+fe*j,Ne=k,De=0,Xe=0,He=te;He<se;He+=l){for(var nt=L+He*t.strides[1],Ye=Q;Ye<H;Ye+=u){for(var dt=nt+Ye*t.strides[2],ht=be;ht<_e;ht+=f){var mt=E[dt+ht*t.strides[3]+B];if(i==="max"&&mt>Ne?Ne=mt:i==="avg"&&(De+=mt,Xe++),isNaN(Ne))break}if(isNaN(Ne))break}if(isNaN(Ne))break}S[Se+B]=i==="avg"?De/Xe:Ne}}}return N.toTensor()},e.prototype.avgPool3d=function(t,r){return pe(t,"avgPool3d"),this.pool3d(t,r,"avg").toFloat()},e.prototype.avgPool3dBackprop=function(t,r,i){pe([t,r],"avgPool3dBackprop");for(var o=i.strideDepth,s=i.strideHeight,a=i.strideWidth,l=i.filterDepth,u=i.filterHeight,f=i.filterWidth,p=i.dilationDepth,m=i.dilationHeight,v=i.dilationWidth,y=i.effectiveFilterDepth,w=i.effectiveFilterHeight,_=i.effectiveFilterWidth,k=y-1-i.padInfo.front,E=_-1-i.padInfo.left,N=w-1-i.padInfo.top,S=$e(r.shape,"float32"),A=1/(l*u*f),P=this.bufferSync(t),D=0;D<i.batchSize;++D)for(var j=0;j<i.inChannels;++j)for(var T=0;T<i.inDepth;++T)for(var M=0;M<i.inHeight;++M)for(var L=0;L<i.inWidth;++L){for(var B=T-k,F=M-N,K=L-E,te=0,se=0;se<y;se+=p){var q=(B+se)/o;if(!(q<0||q>=i.outDepth||Math.floor(q)!==q))for(var $=0;$<w;$+=m){var Y=(F+$)/s;if(!(Y<0||Y>=i.outHeight||Math.floor(Y)!==Y))for(var Q=0;Q<_;Q+=v){var H=(K+Q)/a;H<0||H>=i.outWidth||Math.floor(H)!==H||(te+=P.get(D,q,Y,H,j))}}}S.set(te*A,D,T,M,L,j)}return S.toTensor()},e.prototype.maxPool3d=function(t,r){return pe(t,"maxPool3d"),this.pool3d(t,r,"max").toFloat()},e.prototype.maxPool3dPositions=function(t,r){for(var i=$e(r.outShape,"int32"),o=r.strideDepth,s=r.strideHeight,a=r.strideWidth,l=r.dilationDepth,u=r.dilationHeight,f=r.dilationWidth,p=r.effectiveFilterDepth,m=r.effectiveFilterHeight,v=r.effectiveFilterWidth,y=r.padInfo.front,w=r.padInfo.top,_=r.padInfo.left,k=this.bufferSync(t),E=0;E<r.batchSize;++E)for(var N=0;N<r.inChannels;++N)for(var S=0;S<r.outDepth;++S){for(var A=S*o-y,P=A;P<0;)P+=l;for(var D=Math.min(r.inDepth,p+A),j=0;j<r.outHeight;++j){for(var T=j*s-w,M=T;M<0;)M+=u;for(var L=Math.min(r.inHeight,m+T),B=0;B<r.outWidth;++B){for(var F=B*a-_,K=F;K<0;)K+=f;for(var te=Math.min(r.inWidth,v+F),se=Number.NEGATIVE_INFINITY,q=-1,$=P;$<D;$+=l)for(var Y=$-A,Q=M;Q<L;Q+=u)for(var H=Q-T,ne=K;ne<te;ne+=f){var fe=ne-F,ye=k.get(E,$,Q,ne,N);ye>=se&&(se=ye,q=Y*m*v+H*m+fe)}i.set(q,E,S,j,B,N)}}}return i.toTensor()},e.prototype.maxPool3dBackprop=function(t,r,i,o){pe([r,i],"maxPool3dBackprop");for(var s=this.maxPool3dPositions(r,o),a=o.strideDepth,l=o.strideHeight,u=o.strideWidth,f=o.dilationDepth,p=o.dilationHeight,m=o.dilationWidth,v=o.effectiveFilterDepth,y=o.effectiveFilterHeight,w=o.effectiveFilterWidth,_=v-1-o.padInfo.front,k=w-1-o.padInfo.left,E=y-1-o.padInfo.top,N=$e(r.shape,"float32"),S=this.bufferSync(s),A=this.bufferSync(t),P=0;P<o.batchSize;++P)for(var D=0;D<o.inChannels;++D)for(var j=0;j<o.inDepth;++j)for(var T=0;T<o.inHeight;++T)for(var M=0;M<o.inWidth;++M){for(var L=j-_,B=T-E,F=M-k,K=0,te=0;te<v;te+=f){var se=(L+te)/a;if(!(se<0||se>=o.outDepth||Math.floor(se)!==se))for(var q=0;q<y;q+=p){var $=(B+q)/l;if(!($<0||$>=o.outHeight||Math.floor($)!==$))for(var Y=0;Y<w;Y+=m){var Q=(F+Y)/u;if(!(Q<0||Q>=o.outWidth||Math.floor(Q)!==Q)){var H=v*y*w-1-S.get(P,se,$,Q,D)===te*y*w+q*w+Y?1:0;H!==0&&(K+=A.get(P,se,$,Q,D)*H)}}}}N.set(K,P,j,T,M,D)}return N.toTensor()},e.prototype.cast=function(t,r){return Gk(t,r,this)},e.prototype.reshape=function(t,r){return xg(t,r)},e.prototype.avgPool=function(t,r){return pe(t,"avgPool"),this.pool(t,r,"avg").toFloat()},e.prototype.resizeBilinear=function(t,r,i,o){pe(t,"resizeBilinear");for(var s=t.shape,a=s[0],l=s[1],u=s[2],f=s[3],p=this.readSync(t.dataId),m=new Float32Array(Me([a,r,i,f])),v=[o&&r>1?l-1:l,o&&i>1?u-1:u],y=[o&&r>1?r-1:r,o&&i>1?i-1:i],w=0,_=v[0]/y[0],k=v[1]/y[1],E=0;E<a;E++)for(var N=0;N<r;N++)for(var S=_*N,A=Math.floor(S),P=S-A,D=Math.min(l-1,Math.ceil(S)),j=E*t.strides[0]+A*t.strides[1],T=E*t.strides[0]+D*t.strides[1],M=0;M<i;M++)for(var L=k*M,B=Math.floor(L),F=L-B,K=Math.min(u-1,Math.ceil(L)),te=j+B*t.strides[2],se=T+B*t.strides[2],q=j+K*t.strides[2],$=T+K*t.strides[2],Y=0;Y<f;Y++){var Q=p[te+Y],H=p[se+Y],ne=Q+(p[q+Y]-Q)*F,fe=ne+(H+(p[$+Y]-H)*F-ne)*P;m[w++]=fe}return kn(m,[a,r,i,f])},e.prototype.resizeBilinearBackprop=function(t,r,i){pe([t,r],"resizeBilinearBackprop");for(var o=r.shape,s=o[0],a=o[1],l=o[2],u=o[3],f=t.shape,p=f[1],m=f[2],v=new Float32Array(s*a*l*u),y=[i&&p>1?a-1:a,i&&m>1?l-1:l],w=[i&&p>1?p-1:p,i&&m>1?m-1:m],_=y[0]/w[0],k=y[1]/w[1],E=this.readSync(t.dataId),N=0,S=0;S<s;S++)for(var A=S*r.strides[0],P=0;P<p;P++)for(var D=P*_,j=Math.floor(D),T=Math.min(Math.ceil(D),a-1),M=A+j*r.strides[1],L=A+T*r.strides[1],B=D-j,F=1-B,K=0;K<m;K++)for(var te=K*k,se=Math.floor(te),q=Math.min(Math.ceil(te),l-1),$=te-se,Y=1-$,Q=M+se*r.strides[2],H=M+q*r.strides[2],ne=L+se*r.strides[2],fe=L+q*r.strides[2],ye=F*Y,be=F*$,_e=B*Y,Se=B*$,Ne=0;Ne<u;Ne++){var De=E[N++];v[Q+Ne]+=De*ye,v[H+Ne]+=De*be,v[ne+Ne]+=De*_e,v[fe+Ne]+=De*Se}return or(v,[s,l,a,u],r.dtype)},e.prototype.resizeNearestNeighbor=function(t,r,i,o){pe(t,"resizeNearestNeighbor");for(var s=t.shape,a=s[0],l=s[1],u=s[2],f=s[3],p=this.readSync(t.dataId),m=new Float32Array(a*r*i*f),v=[o&&r>1?l-1:l,o&&i>1?u-1:u],y=[o&&r>1?r-1:r,o&&i>1?i-1:i],w=v[0]/y[0],_=v[1]/y[1],k=0,E=0;E<a;E++)for(var N=E*t.strides[0],S=0;S<r;S++)for(var A=w*S,P=N+Math.min(l-1,o?Math.round(A):Math.floor(A))*t.strides[1],D=0;D<i;D++)for(var j=_*D,T=P+Math.min(u-1,o?Math.round(j):Math.floor(j))*t.strides[2],M=0;M<f;M++){var L=p[T+M];m[k++]=L}return kn(m,[a,r,i,f],t.dtype)},e.prototype.resizeNearestNeighborBackprop=function(t,r,i){pe([t,r],"resizeNearestNeighborBackprop");for(var o=r.shape,s=o[0],a=o[1],l=o[2],u=o[3],f=t.shape,p=f[1],m=f[2],v=new Float32Array(s*a*l*u),y=this.readSync(t.dataId),w=[i&&p>1?a-1:a,i&&m>1?l-1:l],_=[i&&p>1?p-1:p,i&&m>1?m-1:m],k=w[0]/_[0],E=w[1]/_[1],N=1/k,S=1/E,A=2*Math.ceil(N)+2,P=2*Math.ceil(S)+2,D=0;D<s;D++)for(var j=D*r.strides[0],T=0;T<a;T++)for(var M=j+T*r.strides[1],L=Math.floor(T*N),B=Math.floor(L-A/2),F=0;F<l;F++)for(var K=M+F*r.strides[2],te=Math.floor(F*S),se=Math.floor(te-P/2),q=0;q<u;q++){for(var $=0,Y=0;Y<A;Y++){var Q=Y+B;if(!(Q<0||Q>=p)){var H=j+Q*t.strides[1],ne=Q*k;if(T===Math.min(a-1,i?Math.round(ne):Math.floor(ne)))for(var fe=0;fe<P;fe++){var ye=fe+se;if(!(ye<0||ye>=m)){var be=H+ye*t.strides[2],_e=ye*E;F===Math.min(l-1,i?Math.round(_e):Math.floor(_e))&&($+=y[be+q])}}}}v[K+q]=$}return or(v,r.shape,r.dtype)},e.prototype.batchNormalization=function(t,r,i,o,s,a){pe([t,r,i,s,a],"batchNorm");for(var l=this.readSync(t.dataId),u=this.readSync(r.dataId),f=this.readSync(i.dataId),p=s?this.readSync(s.dataId):new Float32Array([1]),m=a?this.readSync(a.dataId):new Float32Array([0]),v=new Float32Array(l.length),y=m.length,w=p.length,_=f.length,k=u.length,E=0,N=0,S=0,A=0,P=0;P<l.length;++P)v[P]=m[E++]+(l[P]-u[N++])*p[S++]/Math.sqrt(f[A++]+o),E>=y&&(E=0),N>=k&&(N=0),S>=w&&(S=0),A>=_&&(A=0);return or(v,t.shape)},e.prototype.localResponseNormalization4D=function(t,r,i,o,s){pe(t,"localResponseNormalization4D");var a=t.shape[3],l=a-1,u=this.readSync(t.dataId),f=t.size,p=new Float32Array(f);function m(_){for(var k=_%a,E=_-k+Math.max(0,k-r),N=_-k+Math.min(k+r,l),S=0;E<=N;E++){var A=u[E];S+=A*A}return S}for(var v=0;v<f;v++){var y=m(v),w=u[v]*Math.pow(i+o*y,-s);p[v]=w}return or(p,t.shape)},e.prototype.LRNGrad=function(t,r,i,o,s,a,l){pe(t,"LRNGrad");for(var u=t.shape[3],f=this.readSync(t.dataId),p=this.readSync(r.dataId),m=this.readSync(i.dataId),v=new Float32Array(t.size),y=t.size,w=0;w<y;w++){for(var _=w%u,k=w-_+Math.max(0,_-o),E=w-_+Math.min(u,_+o+1),N=0,S=k;S<E;S++)N+=Math.pow(p[S],2);for(N=a*N+s,S=k;S<E;S++){var A=-2*a*l*p[S]*m[w]/N;w===S&&(A+=Math.pow(N,-l)),A*=f[w],v[S]+=A}}return or(v,t.shape)},e.prototype.multinomial=function(t,r,i,o){pe(t,"multinomial");for(var s=r?t:Ao(t),a=s.shape[0],l=s.shape[1],u=Nt([a,i],"int32"),f=this.readSync(u.dataId),p=this.readSync(s.dataId),m=0;m<a;++m){var v=m*l,y=new Float32Array(l-1);y[0]=p[v];for(var w=1;w<y.length;++w)y[w]=y[w-1]+p[v+w];for(var _=Qf(o.toString()),k=m*i,E=0;E<i;++E){var N=_();f[k+E]=y.length;for(var S=0;S<y.length;S++)if(N<y[S]){f[k+E]=S;break}}}return u},e.prototype.oneHot=function(t,r,i,o){pe(t,"oneHot");var s=new Float32Array(t.size*r);s.fill(o);for(var a=this.readSync(t.dataId),l=0;l<t.size;++l)a[l]>=0&&a[l]<r&&(s[l*r+a[l]]=i);return bs(s,[t.size,r],"int32")},e.prototype.nonMaxSuppression=function(t,r,i,o,s){return pe(t,"nonMaxSuppression"),uv(this.readSync(t.dataId),this.readSync(r.dataId),i,o,s)},e.prototype.fft=function(t){return this.fftBatch(t,!1)},e.prototype.ifft=function(t){return this.fftBatch(t,!0)},e.prototype.fftBatch=function(t,r){for(var i=t.shape[0],o=t.shape[1],s=$e(t.shape,"float32"),a=$e(t.shape,"float32"),l=Wr(t).as2D(i,o),u=ji(t).as2D(i,o),f=0;f<i;f++)for(var p=l.slice([f,0],[1,o]),m=u.slice([f,0],[1,o]),v=wn(p,m),y=this.readSync(this.fftImpl(v,r).dataId),w=0;w<o;w++){var _=Wb(y,w);s.values[f*o+w]=_.real,a.values[f*o+w]=_.imag}return wn(s.toTensor(),a.toTensor()).as2D(i,o)},e.prototype.fftImpl=function(t,r){var i=t.as1D(),o=i.size;if(this.isExponentOf2(o)){var s=this.fftRadix2(i,o,r).as2D(t.shape[0],t.shape[1]);return r&&(s=wn(Wr(s).div(ke(o)),ji(s).div(ke(o)))),s}var a=this.readSync(t.dataId),l=function(u){for(var f=new Float32Array(u.length/2),p=new Float32Array(u.length/2),m=0;m<u.length;m+=2)f[m/2]=u[m],p[m/2]=u[m+1];return{real:f,imag:p}}(this.fourierTransformByMatmul(a,o,r));return wn(l.real,l.imag).as2D(t.shape[0],t.shape[1])},e.prototype.isExponentOf2=function(t){return(t&t-1)==0},e.prototype.fftRadix2=function(t,r,i){if(r===1)return t;var o=this.readSync(t.dataId),s=r/2,a=function(k){for(var E=Math.ceil(k.length/4),N=new Float32Array(E),S=new Float32Array(E),A=0;A<k.length;A+=4)N[Math.floor(A/4)]=k[A],S[Math.floor(A/4)]=k[A+1];return{real:N,imag:S}}(o),l=wn(a.real,a.imag).as1D(),u=function(k){for(var E=Math.floor(k.length/4),N=new Float32Array(E),S=new Float32Array(E),A=2;A<k.length;A+=4)N[Math.floor(A/4)]=k[A],S[Math.floor(A/4)]=k[A+1];return{real:N,imag:S}}(o),f=wn(u.real,u.imag).as1D();l=this.fftRadix2(l,s,i),f=this.fftRadix2(f,s,i);var p=function(k,E){for(var N=new Float32Array(k/2),S=new Float32Array(k/2),A=0;A<Math.ceil(k/2);A++){var P=(E?2:-2)*Math.PI*(A/k);N[A]=Math.cos(P),S[A]=Math.sin(P)}return{real:N,imag:S}}(r,i),m=wn(p.real,p.imag).mul(f),v=l.add(m),y=l.sub(m),w=Wr(v).concat(Wr(y)),_=ji(v).concat(ji(y));return wn(w,_).as1D()},e.prototype.fourierTransformByMatmul=function(t,r,i){for(var o=new Float32Array(2*r),s=0;s<r;s++){for(var a=0,l=0,u=0;u<r;u++){var f=GR(s*u,r,i),p=Wb(t,u);a+=p.real*f.real-p.imag*f.imag,l+=p.real*f.imag+p.imag*f.real}i&&(a/=r,l/=r),HR(o,a,l,s)}return o},e.prototype.depthToSpace=function(t,r,i){U(i==="NHWC",function(){return"Only NHWC dataFormat supported on CPU for depthToSpace. Got "+i}),U(r>1,function(){return"blockSize should be > 1 for depthToSpace, but was: "+r});for(var o=t.shape[0],s=t.shape[1],a=t.shape[2],l=t.shape[3],u=s*r,f=a*r,p=l/(r*r),m=this.readSync(t.dataId),v=new Float32Array(o*u*f*p),y=0,w=0;w<o;++w)for(var _=0;_<u;++_)for(var k=Math.floor(_/r),E=_%r,N=0;N<f;++N)for(var S=Math.floor(N/r),A=(E*r+N%r)*p,P=0;P<p;++P){var D=P+A+l*(S+a*(k+s*w));v[y++]=m[D]}return or(v,[o,u,f,p])},e.prototype.broadcastedBinaryOp=function(t,r,i,o){var s=et(t.shape,r.shape),a=$e(s,i),l=this.readSync(t.dataId),u=this.readSync(r.dataId),f=hs(t.shape,s),p=hs(r.shape,s),m=a.values;if(f.length+p.length===0)for(var v=0;v<m.length;++v)m[v]=o(l[v%l.length],u[v%u.length]);else{var y=this.bufferSync(t),w=this.bufferSync(r),_=function(k){var E=a.indexToLoc(k),N=E.slice(-t.rank);f.forEach(function(D){return N[D]=0});var S=y.locToIndex(N),A=E.slice(-r.rank);p.forEach(function(D){return A[D]=0});var P=w.locToIndex(A);m[k]=o(l[S],u[P])};for(v=0;v<m.length;++v)_(v)}return a.toTensor()},e.prototype.broadcastedBinaryComplexOp=function(t,r,i){var o=et(t.shape,r.shape),s=$e(o,"float32"),a=$e(o,"float32"),l=this.readSync(t.dataId),u=this.readSync(r.dataId),f=hs(t.shape,o),p=hs(r.shape,o),m=s.values,v=a.values;if(f.length+p.length===0)for(var y=0;y<m.length;y++){var w=y%l.length,_=y%u.length,k=i(l[2*w],l[2*w+1],u[2*_],u[2*_+1]);m[y]=k.real,v[y]=k.imag}else{var E=this.bufferSync(this.data.get(t.dataId).complexTensors.real),N=this.bufferSync(this.data.get(r.dataId).complexTensors.real),S=function(A){var P=s.indexToLoc(A),D=P.slice(-t.rank);f.forEach(function(B){return D[B]=0});var j=E.locToIndex(D),T=P.slice(-r.rank);p.forEach(function(B){return T[B]=0});var M=N.locToIndex(T),L=i(l[2*j],l[2*j+1],u[2*M],u[2*M+1]);m[A]=L.real,v[A]=L.imag};for(y=0;y<m.length;y++)S(y)}return this.complex(s.toTensor(),a.toTensor())},e.prototype.split=function(t,r,i){return Kk(t,r,i)},e.prototype.dispose=function(){},e.prototype.floatPrecision=function(){return 32},e.prototype.epsilon=function(){return 1e-7},e.prototype.cropAndResize=function(t,r,i,o,s,a){for(var l=t.shape,u=l[0],f=l[1],p=l[2],m=l[3],v=r.shape[0],y=o[0],w=o[1],_=$e([v,y,w,m],"float32"),k=this.readSync(r.dataId),E=this.readSync(i.dataId),N=this.readSync(t.dataId),S=t.strides,A=_.strides,P=0;P<v;P++){var D=4*P,j=k[D],T=k[D+1],M=k[D+2],L=k[D+3],B=E[P];if(!(B>=u))for(var F=y>1?(M-j)*(f-1)/(y-1):0,K=w>1?(L-T)*(p-1)/(w-1):0,te=0;te<y;te++){var se=y>1?j*(f-1)+te*F:.5*(j+M)*(f-1);if(se<0||se>f-1)for(var q=0;q<w;q++)for(var $=0;$<m;$++){var Y=$+q*A[2]+te*A[1]+P*A[0];_.values[Y]=a}else if(s==="bilinear"){var Q=Math.floor(se),H=Math.ceil(se),ne=se-Q;for(q=0;q<w;q++)if((He=w>1?T*(p-1)+q*K:.5*(T+L)*(p-1))<0||He>p-1)for($=0;$<m;$++)Y=$+q*A[2]+te*A[1]+P*A[0],_.values[Y]=a;else{var fe=Math.floor(He),ye=Math.ceil(He),be=He-fe;for($=0;$<m;$++){var _e=N[Y=$+fe*S[2]+Q*S[1]+B*S[0]],Se=N[Y=$+ye*S[2]+Q*S[1]+B*S[0]],Ne=N[Y=$+fe*S[2]+H*S[1]+B*S[0]],De=_e+(Se-_e)*be,Xe=Ne+(N[Y=$+ye*S[2]+H*S[1]+B*S[0]]-Ne)*be;Y=$+q*A[2]+te*A[1]+P*A[0],_.values[Y]=De+(Xe-De)*ne}}}else for(q=0;q<w;++q){var He;if((He=w>1?T*(p-1)+q*K:.5*(T+L)*(p-1))<0||He>p-1)for($=0;$<m;$++)Y=$+q*A[2]+te*A[1]+P*A[0],_.values[Y]=a;else{var nt=Math.round(He),Ye=Math.round(se);for($=0;$<m;$++){var dt=$+nt*S[2]+Ye*S[1]+B*S[0],ht=$+q*A[2]+te*A[1]+P*A[0];_.values[ht]=N[dt]}}}}}return _.toTensor()},e.prototype.sparseToDense=function(t,r,i,o){var s=If(0,t,i),a=s.sliceRank,l=s.numUpdates,u=s.sliceSize,f=s.strides,p=s.outputSize;return this.scatter(t,r,i,p,u,l,a,f,o,!1)},e.prototype.gatherND=function(t,r){var i=r.shape,o=i[i.length-1],s=Lk(t,r),a=s[0],l=s[1],u=s[2],f=s[3];if(l===0)return kn([],a,t.dtype);for(var p=new Su([l,u],t.dtype),m=this.readSync(r.dataId),v=this.readSync(t.dataId),y=0;y<l;y++){for(var w=[],_=0,k=0;k<o;k++){var E=m[y*o+k];_+=E*f[k],w.push(E)}if(_<0||_>=t.size/u)throw new Error("Invalid indices: "+w+" does not index into "+t.shape);for(var N=0;N<u;N++)p.values[y*u+N]=v[_*u+N]}return p.toTensor().reshape(a)},e.prototype.scatterND=function(t,r,i){var o=If(0,t,i),s=o.sliceRank,a=o.numUpdates,l=o.sliceSize,u=o.strides,f=o.outputSize,p=ke(0);return this.scatter(t,r,i,f,l,a,s,u,p,!0)},e.prototype.fill=function(t,r,i){var o=xf(i=i||Ku(r),Me(t));return o.fill(r),Z.makeTensor(o,t,i,this)},e.prototype.onesLike=function(t){if(t.dtype==="string")throw new Error("onesLike is not supported for string tensors");return this.fill(t.shape,1,t.dtype)},e.prototype.zerosLike=function(t){var r=xf(t.dtype,Me(t.shape));return this.makeOutput(r,t.shape,t.dtype)},e.prototype.linspace=function(t,r,i){return $k(t,r,i)},e.prototype.scatter=function(t,r,i,o,s,a,l,u,f,p){var m=[o/s,s],v=this.readSync(t.dataId),y=this.readSync(r.dataId);if(o===0)return kn([],i,r.dtype);var w=new Su(m,r.dtype);w.values.fill(this.readSync(f.dataId)[0]);for(var _=0;_<a;_++){for(var k=[],E=0,N=0;N<l;N++){var S=v[_*l+N];k.push(S),E+=S*u[N]}if(E<0||E>=o/s)throw new Error("Invalid indices: "+k+" does not index into "+i);for(var A=0;A<s;A++)p?w.values[E*s+A]+=y[_*s+A]:w.values[E*s+A]=r.rank===0?y[0]:y[_*s+A]}return w.toTensor().reshape(i)},e}(Uk);Z.registerBackend("cpu",function(){return new dM},1);for(var C0=0,c2=[{kernelName:"NonMaxSuppressionV5",backendName:"cpu",kernelFunc:function(n){var e=n.inputs,t=n.backend,r=n.attrs,i=e,o=i.boxes,s=i.scores,a=r,l=a.maxOutputSize,u=a.iouThreshold,f=a.scoreThreshold,p=a.softNmsSigma,m=t;pe(o,"NonMaxSuppressionWithScore");var v=dv(m.data.get(o.dataId).values,m.data.get(s.dataId).values,l,u,f,p);return[v.selectedIndices,v.selectedScores]}},{kernelName:"Square",backendName:"cpu",kernelFunc:function(n){var e=n.inputs,t=n.backend,r=e.x,i=t;pe(r,"square");for(var o=i.data.get(r.dataId).values,s=new Float32Array(o.length),a=0;a<o.length;++a){var l=o[a];s[a]=l*l}return{dataId:i.write(s,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},{kernelName:Ru,backendName:"cpu",kernelFunc:function(n){var e=n.inputs,t=n.backend,r=e,i=r.a,o=r.b,s=t;pe([i,o],Ru);var a=s.data.get(i.dataId).values,l=s.data.get(o.dataId).values,u=function(m,v,y,w,_,k){var E=et(m,v),N=E.length,S=Oi(E),A=Nu(_,Me(E)),P=m.length,D=v.length,j=Oi(m),T=Oi(v),M=hs(m,E),L=hs(v,E);if(M.length+L.length===0)for(var B=0;B<A.length;++B)A[B]=k(y[B%y.length],w[B%w.length]);else{var F=function(K){var te=wA(K,N,S),se=te.slice(-P);M.forEach(function(Q){return se[Q]=0});var q=Tb(se,P,j),$=te.slice(-D);L.forEach(function(Q){return $[Q]=0});var Y=Tb($,D,T);A[K]=k(y[q],w[Y])};for(B=0;B<A.length;++B)F(B)}return[A,E]}(i.shape,o.shape,a,l,i.dtype,function(m,v){var y=m-v;return y*y}),f=u[0],p=u[1];return{dataId:s.write(f,p,i.dtype),shape:p,dtype:i.dtype}}}];C0<c2.length;C0++)vk(c2[C0]);var kl,hM=function(n){this.variableNames=["A"];var e=Pn(),t=n[0],r=n[1];this.outputShape=n,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+r+".0, "+t+`.0);

        vec4 values = `+e.texture2D+`(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `},fM=function(n){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var e=Pn(),t=n[0],r=n[1];this.outputShape=n,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(`+r+".0, "+t+`.0);
            vec4 values = `+e.texture2D+`(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        `+e.output+` = result;
      }
    `};for(var E0=0,u2=[{kernelName:"FromPixels",backendName:"webgl",kernelFunc:function(n){var e=n.inputs,t=n.backend,r=n.attrs,i=e.pixels,o=r.numChannels,s=typeof HTMLVideoElement<"u"&&i instanceof HTMLVideoElement,a=typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement,l=s?[i.videoWidth,i.videoHeight]:[i.width,i.height],u=l[0],f=l[1],p=[f,u],m=[f,u,o];(a||s)&&(kl==null&&(kl=document.createElement("canvas").getContext("2d")),kl.canvas.width=u,kl.canvas.height=f,kl.drawImage(i,0,0,u,f),i=kl.canvas);var v=t.makeTensorInfo(p,"int32");t.texData.get(v.dataId).usage=kr.PIXELS,t.gpgpu.uploadPixelDataToTexture(t.getTexture(v.dataId),i);var y=he().getBool("WEBGL_PACK")?new fM(m):new hM(m),w=t.runWebGLProgram(y,[v],"int32");return t.disposeData(v.dataId),w}},{kernelName:"NonMaxSuppressionV5",backendName:"webgl",kernelFunc:function(n){var e=n.inputs,t=n.backend,r=n.attrs;_f("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var i=e,o=i.boxes,s=i.scores,a=r,l=a.maxOutputSize,u=a.iouThreshold,f=a.scoreThreshold,p=a.softNmsSigma,m=t,v=dv(m.readSync(o.dataId),m.readSync(s.dataId),l,u,f,p);return[v.selectedIndices,v.selectedScores]}},{kernelName:"Square",backendName:"webgl",kernelFunc:function(n){var e=n.inputs,t=n.backend,r=e.x,i=t,o=new Ke(r.shape,"return x * x;");return i.runWebGLProgram(o,[r],r.dtype)}},{kernelName:Ru,backendName:"webgl",kernelFunc:function(n){var e=n.inputs,t=n.backend,r=e,i=r.a,o=r.b,s=t,a=he().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new po("return (a - b) * (a - b);",i.shape,o.shape):new Bt("return (a - b) * (a - b);",i.shape,o.shape);return s.compileAndRun(a,[i,o])}}];E0<u2.length;E0++)vk(u2[E0]);for(var N0=0,d2=[{kernelName:"Square",gradFunc:function(n,e){var t=e[0];return{x:function(){return n.mul(t.toFloat().mul(2))}}}},{kernelName:Ru,gradFunc:function(n,e){var t=e[0],r=e[1],i=ke(2);return{a:function(){return Fn(n,Fn(i,on(t,r)))},b:function(){return Fn(n,Fn(i,on(r,t)))}}}}];N0<d2.length;N0++)uA(d2[N0]);var pM=function(){function n(){}return n.prototype.fetch=function(e,t){return fetch(e,t)},n.prototype.now=function(){return performance.now()},n.prototype.encode=function(e,t){if(t!=="utf-8"&&t!=="utf8")throw new Error("Browser's encoder only supports utf-8, but got "+t);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)},n.prototype.decode=function(e,t){return new TextDecoder(t).decode(e)},n}();he().get("IS_BROWSER")&&he().setPlatform("browser",new pM);var S0,mM=function(){return require("node-fetch")},gM=function(){function n(){this.util=require("util"),this.textEncoder=new this.util.TextEncoder}return n.prototype.fetch=function(e,t){return he().global.fetch!=null?he().global.fetch(e,t):(S0==null&&(S0=mM()),S0(e,t))},n.prototype.now=function(){var e=process.hrtime();return 1e3*e[0]+e[1]/1e6},n.prototype.encode=function(e,t){if(t!=="utf-8"&&t!=="utf8")throw new Error("Node built-in encoder only supports utf-8, but got "+t);return this.textEncoder.encode(e)},n.prototype.decode=function(e,t){return e.length===0?"":new this.util.TextDecoder(t).decode(e)},n}();he().get("IS_NODE")&&he().setPlatform("node",new gM);var wg={float32:4,int32:4,uint16:2,uint8:1,bool:1},Pf=4;function z4(n,e){for(var t={},r=0,i=function(a){var l=a.name,u=a.dtype,f=a.shape,p=Me(f),m=void 0;if("quantization"in a){var v=a.quantization;if(v.dtype!=="uint8"&&v.dtype!=="uint16")throw new Error("Weight "+a.name+" has unknown quantization dtype "+v.dtype+". Supported quantization dtypes are: 'uint8' and 'uint16'.");var y=wg[v.dtype],w=n.slice(r,r+p*y),_=v.dtype==="uint8"?new Uint8Array(w):new Uint16Array(w);if(u==="float32")m=Float32Array.from(_,function(P){return P*v.scale+v.min});else{if(u!=="int32")throw new Error("Unsupported dtype in weight '"+l+"': "+u);m=Int32Array.from(_,function(P){return Math.round(P*v.scale+v.min)})}r+=p*y}else if(u==="string"){var k=Me(a.shape);m=[];for(var E=0;E<k;E++){var N=new Uint32Array(n.slice(r,r+Pf))[0];r+=Pf;var S=new Uint8Array(n.slice(r,r+N));m.push(S),r+=N}}else{var A=wg[u];if(w=n.slice(r,r+p*A),u==="float32")m=new Float32Array(w);else if(u==="int32")m=new Int32Array(w);else{if(u!=="bool")throw new Error("Unsupported dtype in weight '"+l+"': "+u);m=new Uint8Array(w)}r+=p*A}t[l]=kn(m,f,u)},o=0,s=e;o<s.length;o++)i(s[o]);return t}function vM(n){if(n===null)throw new Error("Invalid input value: "+JSON.stringify(n));var e=0,t=[];n.forEach(function(o){if(e+=o.byteLength,t.push(o.byteLength===o.buffer.byteLength?o:new o.constructor(o)),!(o instanceof Float32Array||o instanceof Int32Array||o instanceof Uint8Array))throw new Error("Unsupported TypedArray subtype: "+o.constructor.name)});var r=new Uint8Array(e),i=0;return t.forEach(function(o){r.set(new Uint8Array(o.buffer),i),i+=o.byteLength}),r.buffer}var _g=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function h2(n){return _g?Buffer.byteLength(n):new Blob([n]).size}function Rv(n){var e=0;n.forEach(function(i){e+=i.byteLength});var t=new Uint8Array(e),r=0;return n.forEach(function(i){t.set(new Uint8Array(i),r),r+=i.byteLength}),t.buffer}function f2(n){for(n=n.trim();n.endsWith("/");)n=n.slice(0,n.length-1);var e=n.split("/");return e[e.length-1]}function td(n){if(n.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:n.modelTopology==null?0:h2(JSON.stringify(n.modelTopology)),weightSpecsBytes:n.weightSpecs==null?0:h2(JSON.stringify(n.weightSpecs)),weightDataBytes:n.weightData==null?0:n.weightData.byteLength}}var Cr=function(){function n(){this.saveRouters=[],this.loadRouters=[]}return n.getInstance=function(){return n.instance==null&&(n.instance=new n),n.instance},n.registerSaveRouter=function(e){n.getInstance().saveRouters.push(e)},n.registerLoadRouter=function(e){n.getInstance().loadRouters.push(e)},n.getSaveHandlers=function(e){return n.getHandlers(e,"save")},n.getLoadHandlers=function(e,t){return n.getHandlers(e,"load",t)},n.getHandlers=function(e,t,r){var i=[];return(t==="load"?n.getInstance().loadRouters:n.getInstance().saveRouters).forEach(function(o){var s=o(e,r);s!==null&&i.push(s)}),i},n}(),Bl="://",ws=function(){function n(){this.managers={}}return n.getInstance=function(){return n.instance==null&&(n.instance=new n),n.instance},n.registerManager=function(e,t){U(e!=null,function(){return"scheme must not be undefined or null."}),e.endsWith(Bl)&&(e=e.slice(0,e.indexOf(Bl))),U(e.length>0,function(){return"scheme must not be an empty string."});var r=n.getInstance();U(r.managers[e]==null,function(){return"A model store manager is already registered for scheme '"+e+"'."}),r.managers[e]=t},n.getManager=function(e){var t=this.getInstance().managers[e];if(t==null)throw new Error("Cannot find model manager for scheme '"+e+"'");return t},n.getSchemes=function(){return Object.keys(this.getInstance().managers)},n}();function of(n){if(n.indexOf(Bl)===-1)throw new Error("The url string provided does not contain a scheme. Supported schemes are: "+ws.getSchemes().join(","));return{scheme:n.split(Bl)[0],path:n.split(Bl)[1]}}function p2(n,e,t){return t===void 0&&(t=!1),Re(this,void 0,void 0,function(){var r,i,o,s,a,l,u,f,p;return je(this,function(m){switch(m.label){case 0:return U(n!==e,function(){return"Old path and new path are the same: '"+n+"'"}),U((r=Cr.getLoadHandlers(n)).length>0,function(){return"Copying failed because no load handler is found for source URL "+n+"."}),U(r.length<2,function(){return"Copying failed because more than one ("+r.length+") load handlers for source URL "+n+"."}),i=r[0],U((o=Cr.getSaveHandlers(e)).length>0,function(){return"Copying failed because no save handler is found for destination URL "+e+"."}),U(o.length<2,function(){return"Copying failed because more than one ("+r.length+") save handlers for destination URL "+e+"."}),s=o[0],a=of(n).scheme,l=of(n).path,u=a===of(n).scheme,[4,i.load()];case 1:return f=m.sent(),t&&u?[4,ws.getManager(a).removeModel(l)]:[3,3];case 2:m.sent(),m.label=3;case 3:return[4,s.save(f)];case 4:return p=m.sent(),!t||u?[3,6]:[4,ws.getManager(a).removeModel(l)];case 5:m.sent(),m.label=6;case 6:return[2,p.modelArtifactsInfo]}})})}var ga="models_store",fs="model_info_store";function W4(){if(!he().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");var n=window||self,e=n.indexedDB||n.mozIndexedDB||n.webkitIndexedDB||n.msIndexedDB||n.shimIndexedDB;if(e==null)throw new Error("The current browser does not appear to support IndexedDB.");return e}function kg(n){var e=n.result;e.createObjectStore(ga,{keyPath:"modelPath"}),e.createObjectStore(fs,{keyPath:"modelPath"})}var zl=function(){function n(e){if(this.indexedDB=W4(),e==null||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}return n.prototype.save=function(e){return Re(this,void 0,void 0,function(){return je(this,function(t){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return[2,this.databaseAction(this.modelPath,e)]})})},n.prototype.load=function(){return Re(this,void 0,void 0,function(){return je(this,function(e){return[2,this.databaseAction(this.modelPath)]})})},n.prototype.databaseAction=function(e,t){var r=this;return new Promise(function(i,o){var s=r.indexedDB.open("tensorflowjs",1);s.onupgradeneeded=function(){return kg(s)},s.onsuccess=function(){var a=s.result;if(t==null){var l=a.transaction(ga,"readonly"),u=l.objectStore(ga).get(r.modelPath);u.onsuccess=function(){if(u.result==null)return a.close(),o(new Error("Cannot find model with path '"+r.modelPath+"' in IndexedDB."));i(u.result.modelArtifacts)},u.onerror=function(w){return a.close(),o(u.error)},l.oncomplete=function(){return a.close()}}else{var f,p=td(t),m=a.transaction(fs,"readwrite"),v=m.objectStore(fs),y=v.put({modelPath:r.modelPath,modelArtifactsInfo:p});y.onsuccess=function(){var w=(f=a.transaction(ga,"readwrite")).objectStore(ga).put({modelPath:r.modelPath,modelArtifacts:t,modelArtifactsInfo:p});w.onsuccess=function(){return i({modelArtifactsInfo:p})},w.onerror=function(_){var k=(v=m.objectStore(fs)).delete(r.modelPath);k.onsuccess=function(){return a.close(),o(w.error)},k.onerror=function(E){return a.close(),o(w.error)}}},y.onerror=function(w){return a.close(),o(y.error)},m.oncomplete=function(){f==null?a.close():f.oncomplete=function(){return a.close()}}}},s.onerror=function(a){return o(s.error)}})},n.URL_SCHEME="indexeddb://",n}(),m2=function(n){return he().getBool("IS_BROWSER")&&!Array.isArray(n)&&n.startsWith(zl.URL_SCHEME)?(e=n.slice(zl.URL_SCHEME.length),new zl(e)):null;var e};Cr.registerSaveRouter(m2),Cr.registerLoadRouter(m2);var xM=function(){function n(){this.indexedDB=W4()}return n.prototype.listModels=function(){return Re(this,void 0,void 0,function(){var e=this;return je(this,function(t){return[2,new Promise(function(r,i){var o=e.indexedDB.open("tensorflowjs",1);o.onupgradeneeded=function(){return kg(o)},o.onsuccess=function(){var s=o.result,a=s.transaction(fs,"readonly"),l=a.objectStore(fs).getAll();l.onsuccess=function(){for(var u={},f=0,p=l.result;f<p.length;f++){var m=p[f];u[m.modelPath]=m.modelArtifactsInfo}r(u)},l.onerror=function(u){return s.close(),i(l.error)},a.oncomplete=function(){return s.close()}},o.onerror=function(s){return i(o.error)}})]})})},n.prototype.removeModel=function(e){return Re(this,void 0,void 0,function(){var t=this;return je(this,function(r){var i;return e=(i=e).startsWith(zl.URL_SCHEME)?i.slice(zl.URL_SCHEME.length):i,[2,new Promise(function(o,s){var a=t.indexedDB.open("tensorflowjs",1);a.onupgradeneeded=function(){return kg(a)},a.onsuccess=function(){var l,u=a.result,f=u.transaction(fs,"readwrite"),p=f.objectStore(fs),m=p.get(e);m.onsuccess=function(){if(m.result==null)return u.close(),s(new Error("Cannot find model with path '"+e+"' in IndexedDB."));var v=p.delete(e),y=function(){var w=(l=u.transaction(ga,"readwrite")).objectStore(ga).delete(e);w.onsuccess=function(){return o(m.result.modelArtifactsInfo)},w.onerror=function(_){return s(m.error)}};v.onsuccess=y,v.onerror=function(w){return y(),u.close(),s(m.error)}},m.onerror=function(v){return u.close(),s(m.error)},f.oncomplete=function(){l==null?u.close():l.oncomplete=function(){return u.close()}}},a.onerror=function(l){return s(a.error)}})]})})},n}();if(he().getBool("IS_BROWSER"))try{ws.registerManager(zl.URL_SCHEME,new xM)}catch{}var xo="/",jl="tensorflowjs_models",V4="info",yM="model_topology",bM="weight_specs",wM="weight_data",_M="model_metadata";function U4(n){return{info:[jl,n,V4].join(xo),topology:[jl,n,yM].join(xo),weightSpecs:[jl,n,bM].join(xo),weightData:[jl,n,wM].join(xo),modelMetadata:[jl,n,_M].join(xo)}}function kM(n){var e=n.split(xo);if(e.length<3)throw new Error("Invalid key format: "+n);return e.slice(1,e.length-1).join(xo)}var Wl=function(){function n(e){if(!he().getBool("IS_BROWSER")||typeof window>"u"||window.localStorage===void 0)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,e==null||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=U4(this.modelPath)}return n.prototype.save=function(e){return Re(this,void 0,void 0,function(){var t,r,i;return je(this,function(o){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");t=JSON.stringify(e.modelTopology),r=JSON.stringify(e.weightSpecs),i=td(e);try{return this.LS.setItem(this.keys.info,JSON.stringify(i)),this.LS.setItem(this.keys.topology,t),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,function(s){if(_g)return Buffer.from(s).toString("base64");for(var a=new Uint8Array(s),l="",u=0,f=a.length;u<f;u++)l+=String.fromCharCode(a[u]);return btoa(l)}(e.weightData)),this.LS.setItem(this.keys.modelMetadata,JSON.stringify({format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,userDefinedMetadata:e.userDefinedMetadata})),[2,{modelArtifactsInfo:i}]}catch{throw this.LS.removeItem(this.keys.info),this.LS.removeItem(this.keys.topology),this.LS.removeItem(this.keys.weightSpecs),this.LS.removeItem(this.keys.weightData),this.LS.removeItem(this.keys.modelMetadata),new Error("Failed to save model '"+this.modelPath+"' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes="+i.modelTopologyBytes+", weightSpecsBytes="+i.weightSpecsBytes+", weightDataBytes="+i.weightDataBytes+".")}return[2]})})},n.prototype.load=function(){return Re(this,void 0,void 0,function(){var e,t,r,i,o,s,a;return je(this,function(l){if((e=JSON.parse(this.LS.getItem(this.keys.info)))==null)throw new Error("In local storage, there is no model with name '"+this.modelPath+"'");if(e.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");if(t={},(r=JSON.parse(this.LS.getItem(this.keys.topology)))==null)throw new Error("In local storage, the topology of model '"+this.modelPath+"' is missing.");if(t.modelTopology=r,(i=JSON.parse(this.LS.getItem(this.keys.weightSpecs)))==null)throw new Error("In local storage, the weight specs of model '"+this.modelPath+"' are missing.");if(t.weightSpecs=i,(o=this.LS.getItem(this.keys.modelMetadata))!=null&&(s=JSON.parse(o),t.format=s.format,t.generatedBy=s.generatedBy,t.convertedBy=s.convertedBy,t.userDefinedMetadata=s.userDefinedMetadata),(a=this.LS.getItem(this.keys.weightData))==null)throw new Error("In local storage, the binary weight values of model '"+this.modelPath+"' are missing.");return t.weightData=function(u){if(_g){var f=Buffer.from(u,"base64");return f.buffer.slice(f.byteOffset,f.byteOffset+f.byteLength)}for(var p=atob(u),m=new Uint8Array(p.length),v=0;v<p.length;++v)m.set([p.charCodeAt(v)],v);return m.buffer}(a),[2,t]})})},n.URL_SCHEME="localstorage://",n}(),g2=function(n){return he().getBool("IS_BROWSER")&&!Array.isArray(n)&&n.startsWith(Wl.URL_SCHEME)?(e=n.slice(Wl.URL_SCHEME.length),new Wl(e)):null;var e};Cr.registerSaveRouter(g2),Cr.registerLoadRouter(g2);var CM=function(){function n(){U(he().getBool("IS_BROWSER"),function(){return"Current environment is not a web browser"}),U(typeof window>"u"||window.localStorage!==void 0,function(){return"Current browser does not appear to support localStorage"}),this.LS=window.localStorage}return n.prototype.listModels=function(){return Re(this,void 0,void 0,function(){var e,t,r,i,o,s;return je(this,function(a){for(e={},t=jl+xo,r=xo+V4,i=0;i<this.LS.length;++i)(o=this.LS.key(i)).startsWith(t)&&o.endsWith(r)&&(s=kM(o),e[s]=JSON.parse(this.LS.getItem(o)));return[2,e]})})},n.prototype.removeModel=function(e){return Re(this,void 0,void 0,function(){var t,r;return je(this,function(i){var o;if(e=(o=e).startsWith(Wl.URL_SCHEME)?o.slice(Wl.URL_SCHEME.length):o,t=U4(e),this.LS.getItem(t.info)==null)throw new Error("Cannot find model at path '"+e+"'");return r=JSON.parse(this.LS.getItem(t.info)),this.LS.removeItem(t.info),this.LS.removeItem(t.topology),this.LS.removeItem(t.weightSpecs),this.LS.removeItem(t.weightData),[2,r]})})},n}();if(he().getBool("IS_BROWSER"))try{ws.registerManager(Wl.URL_SCHEME,new CM)}catch{}var EM="model",NM=".json",SM=".weights.bin";function v2(n){return new Promise(function(e){return setTimeout(e)}).then(n)}var I0=function(){function n(e){if(!he().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");e.startsWith(n.URL_SCHEME)&&(e=e.slice(n.URL_SCHEME.length)),e!=null&&e.length!==0||(e=EM),this.modelTopologyFileName=e+NM,this.weightDataFileName=e+SM}return n.prototype.save=function(e){return Re(this,void 0,void 0,function(){var t,r,i,o,s,a;return je(this,function(l){switch(l.label){case 0:if(typeof document>"u")throw new Error("Browser downloads are not supported in this environment since `document` is not present");if(t=window.URL.createObjectURL(new Blob([e.weightData],{type:"application/octet-stream"})),!(e.modelTopology instanceof ArrayBuffer))return[3,1];throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");case 1:return r=[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}],i={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:r},o=window.URL.createObjectURL(new Blob([JSON.stringify(i)],{type:"application/json"})),(s=this.jsonAnchor==null?document.createElement("a"):this.jsonAnchor).download=this.modelTopologyFileName,s.href=o,[4,v2(function(){return s.dispatchEvent(new MouseEvent("click"))})];case 2:return l.sent(),e.weightData==null?[3,4]:((a=this.weightDataAnchor==null?document.createElement("a"):this.weightDataAnchor).download=this.weightDataFileName,a.href=t,[4,v2(function(){return a.dispatchEvent(new MouseEvent("click"))})]);case 3:l.sent(),l.label=4;case 4:return[2,{modelArtifactsInfo:td(e)}]}})})},n.URL_SCHEME="downloads://",n}(),IM=function(){function n(e){if(e==null||e.length<1)throw new Error("When calling browserFiles, at least 1 file is required, but received "+e);this.files=e}return n.prototype.load=function(){return Re(this,void 0,void 0,function(){var e,t,r=this;return je(this,function(i){return e=this.files[0],t=this.files.slice(1),[2,new Promise(function(o,s){var a=new FileReader;a.onload=function(l){var u=JSON.parse(l.target.result),f=u.modelTopology;if(f!=null){t.length===0&&o({modelTopology:f});var p=u.weightsManifest;if(p!=null){var m;try{m=r.checkManifestAndWeightFiles(p,t)}catch(_){return void s(_)}var v=[],y=[],w=[];p.forEach(function(_){_.paths.forEach(function(k){y.push(k),w.push(null)}),v.push.apply(v,_.weights)}),p.forEach(function(_){_.paths.forEach(function(k){var E=new FileReader;E.onload=function(N){var S=N.target.result,A=y.indexOf(k);w[A]=S,w.indexOf(null)===-1&&o({modelTopology:f,weightSpecs:v,weightData:Rv(w),format:u.format,generatedBy:u.generatedBy,convertedBy:u.convertedBy,userDefinedMetadata:u.userDefinedMetadata})},E.onerror=function(N){return s("Failed to weights data from file of path '"+k+"'.")},E.readAsArrayBuffer(m[k])})})}else s(new Error("weightManifest field is missing from file "+e.name))}else s(new Error("modelTopology field is missing from file "+e.name))},a.onerror=function(l){return s("Failed to read model topology and weights manifest JSON from file '"+e.name+"'. BrowserFiles supports loading Keras-style tf.Model artifacts only.")},a.readAsText(e)})]})})},n.prototype.checkManifestAndWeightFiles=function(e,t){for(var r=[],i=t.map(function(l){return f2(l.name)}),o={},s=0,a=e;s<a.length;s++)a[s].paths.forEach(function(l){var u=f2(l);if(r.indexOf(u)!==-1)throw new Error("Duplicate file basename found in weights manifest: '"+u+"'");if(r.push(u),i.indexOf(u)===-1)throw new Error("Weight file with basename '"+u+"' is not provided.");o[l]=t[i.indexOf(u)]});if(r.length!==t.length)throw new Error("Mismatch in the number of files in weights manifest ("+r.length+") and the number of weight files provided ("+t.length+").");return o},n}();function x2(n,e,t,r){(function(o){U(o!=null&&Array.isArray(o)&&o.length>0,function(){return"promises must be a none empty array"})})(n),function(o,s){U(o>=0&&o<=1,function(){return"Progress fraction must be in range [0, 1], but got startFraction "+o}),U(s>=0&&s<=1,function(){return"Progress fraction must be in range [0, 1], but got endFraction "+s}),U(s>=o,function(){return"startFraction must be no more than endFraction, but got startFraction "+o+" and endFraction "+s})}(t=t??0,r=r??1);var i=0;return Promise.all(n.map(function(o){return o.then(function(s){var a=t+ ++i/n.length*(r-t);return e(a),s}),o}))}function H4(n,e){return Re(this,void 0,void 0,function(){var t,r,i,o,s,a,l,u,f;return je(this,function(p){switch(p.label){case 0:return e==null&&(e={}),t=e.fetchFunc==null?he().platform.fetch:e.fetchFunc,r=n.map(function(m){return t(m,e.requestInit,{isBinary:!0})}),i=0,o=.5,e.onProgress!=null?[3,2]:[4,Promise.all(r)];case 1:return s=p.sent(),[3,4];case 2:return[4,x2(r,e.onProgress,i,o)];case 3:s=p.sent(),p.label=4;case 4:return a=s.map(function(m){return m.arrayBuffer()}),l=.5,u=1,e.onProgress!=null?[3,6]:[4,Promise.all(a)];case 5:return f=p.sent(),[3,8];case 6:return[4,x2(a,e.onProgress,l,u)];case 7:f=p.sent(),p.label=8;case 8:return[2,f]}})})}function y2(n){var e=this;return function(t,r,i){return r===void 0&&(r=""),Re(e,void 0,void 0,function(){var o,s,a,l,u,f,p,m,v,y;return je(this,function(w){switch(w.label){case 0:if(o=t.map(function(){return!1}),s={},a=i!=null?i.map(function(){return!1}):[],l=[],t.forEach(function(_,k){var E=0;_.weights.forEach(function(N){var S="quantization"in N?N.quantization.dtype:N.dtype,A=wg[S]*Me(N.shape),P=function(){o[k]=!0,s[k]==null&&(s[k]=[]),s[k].push({manifestEntry:N,groupOffset:E,sizeBytes:A})};i!=null?i.forEach(function(D,j){D===N.name&&(P(),a[j]=!0)}):P(),l.push(N.name),E+=A})}),!a.every(function(_){return _}))throw u=i.filter(function(_,k){return!a[k]}),new Error("Could not find weights in manifest with names: "+u.join(", ")+`. 
Manifest JSON has weights with names: `+l.join(", ")+".");return f=o.reduce(function(_,k,E){return k&&_.push(E),_},[]),p=[],f.forEach(function(_){t[_].paths.forEach(function(k){var E=r+(r.endsWith("/")?"":"/")+k;p.push(E)})}),[4,n(p)];case 1:return m=w.sent(),v={},y=0,f.forEach(function(_){for(var k=t[_].paths.length,E=0,N=0;N<k;N++)E+=m[y+N].byteLength;for(var S=new ArrayBuffer(E),A=new Uint8Array(S),P=0,D=0;D<k;D++){var j=new Uint8Array(m[y+D]);A.set(j,P),P+=j.byteLength}s[_].forEach(function(T){var M=z4(S.slice(T.groupOffset,T.groupOffset+T.sizeBytes),[T.manifestEntry]);for(var L in M)v[L]=M[L]}),y+=k}),[2,v]}})})}}Cr.registerSaveRouter(function(n){return he().getBool("IS_BROWSER")&&!Array.isArray(n)&&n.startsWith(I0.URL_SCHEME)?function(e){return e===void 0&&(e="model"),new I0(e)}(n.slice(I0.URL_SCHEME.length)):null});var G4=function(){function n(e,t){if(this.DEFAULT_METHOD="POST",t==null&&(t={}),this.weightPathPrefix=t.weightPathPrefix,this.onProgress=t.onProgress,t.fetchFunc!=null?(U(typeof t.fetchFunc=="function",function(){return"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"}),this.fetch=t.fetchFunc):this.fetch=he().platform.fetch,U(e!=null&&e.length>0,function(){return"URL path for http must not be null, undefined or empty."}),Array.isArray(e)&&U(e.length===2,function(){return"URL paths for http must have a length of 2, (actual length is "+e.length+")."}),this.path=e,t.requestInit!=null&&t.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=t.requestInit||{}}return n.prototype.save=function(e){return Re(this,void 0,void 0,function(){var t,r,i,o;return je(this,function(s){switch(s.label){case 0:if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");return(t=Object.assign({method:this.DEFAULT_METHOD},this.requestInit)).body=new FormData,r=[{paths:["./model.weights.bin"],weights:e.weightSpecs}],i={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,userDefinedMetadata:e.userDefinedMetadata,weightsManifest:r},t.body.append("model.json",new Blob([JSON.stringify(i)],{type:"application/json"}),"model.json"),e.weightData!=null&&t.body.append("model.weights.bin",new Blob([e.weightData],{type:"application/octet-stream"}),"model.weights.bin"),[4,this.fetch(this.path,t)];case 1:if((o=s.sent()).ok)return[2,{modelArtifactsInfo:td(e),responses:[o]}];throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+o.status+".")}})})},n.prototype.load=function(){return Re(this,void 0,void 0,function(){var e,t,r,i,o,s,a,l,u,f,p,m;return je(this,function(v){switch(v.label){case 0:return[4,this.fetch(this.path,this.requestInit)];case 1:if(!(e=v.sent()).ok)throw new Error("Request to "+this.path+" failed with status code "+e.status+". Please verify this URL points to the model JSON of the model to load.");v.label=2;case 2:return v.trys.push([2,4,,5]),[4,e.json()];case 3:return t=v.sent(),[3,5];case 4:throw v.sent(),r="Failed to parse model JSON of response from "+this.path+".",this.path.endsWith(".pb")?r+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":r+=" Please make sure the server is serving valid JSON for this request.",new Error(r);case 5:if(i=t.modelTopology,o=t.weightsManifest,s=t.generatedBy,a=t.convertedBy,l=t.format,u=t.userDefinedMetadata,i==null&&o==null)throw new Error("The JSON from HTTP path "+this.path+" contains neither model topology or manifest for weights.");return o==null?[3,7]:[4,this.loadWeights(o)];case 6:m=v.sent(),f=m[0],p=m[1],v.label=7;case 7:return[2,{modelTopology:i,weightSpecs:f,weightData:p,userDefinedMetadata:u,generatedBy:s,convertedBy:a,format:l}]}})})},n.prototype.loadWeights=function(e){return Re(this,void 0,void 0,function(){var t,r,i,o,s,a,l,u,f,p,m;return je(this,function(v){switch(v.label){case 0:for(t=Array.isArray(this.path)?this.path[1]:this.path,r=function(y){var w=y.lastIndexOf("/"),_=y.lastIndexOf("?"),k=y.substring(0,w),E=_>w?y.substring(_):"";return[k+"/",E]}(t),i=r[0],o=r[1],s=this.weightPathPrefix||i,a=[],l=0,u=e;l<u.length;l++)f=u[l],a.push.apply(a,f.weights);return p=[],e.forEach(function(y){y.paths.forEach(function(w){p.push(s+w+o)})}),[4,H4(p,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress})];case 1:return m=v.sent(),[2,[a,Rv(m)]]}})})},n.URL_SCHEME_REGEX=/^https?:\/\//,n}();function Cg(n){return n.match(G4.URL_SCHEME_REGEX)!=null}var b2=function(n,e){return typeof fetch>"u"?null:(Array.isArray(n)?n.every(function(t){return Cg(t)}):Cg(n))?Eg(n,{onProgress:e}):null};function Eg(n,e){return new G4(n,e)}Cr.registerSaveRouter(b2),Cr.registerLoadRouter(b2);var A0=function(){function n(e){this.modelArtifacts=e}return n.prototype.load=function(){return Re(this,void 0,void 0,function(){return je(this,function(e){return[2,this.modelArtifacts]})})},n}(),AM=function(){function n(e){this.saveHandler=e}return n.prototype.save=function(e){return Re(this,void 0,void 0,function(){return je(this,function(t){return[2,this.saveHandler(e)]})})},n}(),$4=Object.freeze({browserFiles:function(n){return new IM(n)},browserHTTPRequest:function(n,e){return Eg(n,e)},concatenateArrayBuffers:Rv,decodeWeights:z4,encodeWeights:function(n,e){return Re(this,void 0,void 0,function(){var t,r,i,o,s,a=this;return je(this,function(l){switch(l.label){case 0:for(t=[],r=[],i=Array.isArray(n)?n.map(function(u){return u.name}):Object.keys(n),o=function(u){var f=i[u],p=Array.isArray(n)?n[u].tensor:n[f];if(p.dtype!=="float32"&&p.dtype!=="int32"&&p.dtype!=="bool"&&p.dtype!=="string")throw new Error("Unsupported dtype in weight '"+f+"': "+p.dtype);var m={name:f,shape:p.shape,dtype:p.dtype};if(p.dtype==="string"){var v=new Promise(function(y){return Re(a,void 0,void 0,function(){var w,_,k,E,N,S,A;return je(this,function(P){switch(P.label){case 0:return[4,p.bytes()];case 1:for(w=P.sent(),_=w.reduce(function(D,j){return D+j.length},0)+Pf*w.length,k=new Uint8Array(_),E=0,N=0;N<w.length;N++)S=w[N],A=new Uint8Array(new Uint32Array([S.length]).buffer),k.set(A,E),E+=Pf,k.set(S,E),E+=S.length;return y(k),[2]}})})});r.push(v)}else r.push(p.data());e!=null&&(m.group=e),t.push(m)},s=0;s<i.length;++s)o(s);return[4,Promise.all(r)];case 1:return[2,{data:vM(l.sent()),specs:t}]}})})},fromMemory:function(n,e,t,r){return arguments.length===1?n.modelTopology!=null||n.weightSpecs!=null?new A0(n):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new A0({modelTopology:n})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new A0({modelTopology:n,weightSpecs:e,weightData:t,trainingConfig:r}))},getLoadHandlers:function(n,e){return Cr.getLoadHandlers(n,e)},getModelArtifactsInfoForJSON:td,getSaveHandlers:function(n){return Cr.getSaveHandlers(n)},http:Eg,isHTTPScheme:Cg,loadWeights:function(n,e,t,r){return e===void 0&&(e=""),Re(this,void 0,void 0,function(){return je(this,function(i){return[2,y2(function(o){return H4(o,{requestInit:r})})(n,e,t)]})})},registerLoadRouter:function(n){return Cr.registerLoadRouter(n)},registerSaveRouter:function(n){return Cr.registerSaveRouter(n)},weightsLoaderFactory:y2,withSaveHandler:function(n){return new AM(n)},copyModel:function(n,e){return Re(this,void 0,void 0,function(){return je(this,function(t){return[2,p2(n,e,!1)]})})},listModels:function(){return Re(this,void 0,void 0,function(){var n,e,t,r,i,o,s;return je(this,function(a){switch(a.label){case 0:n=ws.getSchemes(),e={},t=0,r=n,a.label=1;case 1:return t<r.length?(i=r[t],[4,ws.getManager(i).listModels()]):[3,4];case 2:for(s in o=a.sent())e[i+Bl+s]=o[s];a.label=3;case 3:return t++,[3,1];case 4:return[2,e]}})})},moveModel:function(n,e){return Re(this,void 0,void 0,function(){return je(this,function(t){return[2,p2(n,e,!0)]})})},removeModel:function(n){return Re(this,void 0,void 0,function(){var e;return je(this,function(t){return e=of(n),[2,ws.getManager(e.scheme).removeModel(e.path)]})})}}),Cl;X({confusionMatrix_:function(n,e,t){var r=V(n,"labels","confusionMatrix"),i=V(e,"predictions","confusionMatrix");U(t==null||t>0&&Number.isInteger(t),function(){return"If provided, numClasses must be a positive integer, but got "+t}),U(r.rank===1,function(){return"Expected the rank of labels to be 1, but got "+r.rank}),U(i.rank===1,function(){return"Expected the rank of predictions to be 1, but got "+i.rank}),U(r.shape[0]===i.shape[0],function(){return"Mismatch in the number of examples: "+r.shape[0]+" vs. "+i.shape[0]+". Labels and predictions should have the same number of elements."}),U(t>0&&Number.isInteger(t),function(){return"numClasses is required to be a positive integer, but got "+t});var o=gg(r.asType("int32"),t),s=gg(i.asType("int32"),t);return o.transpose().matMul(s).asType("int32")}});var RM=X({fromPixels_:function(n,e){if(e===void 0&&(e=3),e>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(n==null)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");var t=!1,r=!1,i=!1,o=!1,s=!1;if(n.data instanceof Uint8Array)t=!0;else if(typeof ImageData<"u"&&n instanceof ImageData)r=!0;else if(typeof HTMLVideoElement<"u"&&n instanceof HTMLVideoElement)i=!0;else if(typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement)o=!0;else{if(n.getContext==null)throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was "+n.constructor.name);s=!0}if(i&&i&&n.readyState<2)throw new Error("The video element has not loaded data yet. Please wait for `loadeddata` event on the <video> element.");if(gk("FromPixels",Z.backendName)!=null)return Z.runKernel("FromPixels",{pixels:n},{numChannels:e});var a,l,u=i?[n.videoWidth,n.videoHeight]:[n.width,n.height],f=u[0],p=u[1];if(s?a=n.getContext("2d").getImageData(0,0,f,p).data:r||t?a=n.data:(o||i)&&(Cl==null&&(Cl=document.createElement("canvas").getContext("2d")),Cl.canvas.width=f,Cl.canvas.height=p,Cl.drawImage(n,0,0,f,p),a=Cl.getImageData(0,0,f,p).data),e===4)l=new Int32Array(a);else{var m=f*p;l=new Int32Array(m*e);for(var v=0;v<m;v++)for(var y=0;y<e;++y)l[v*e+y]=a[4*v+y]}return ov(l,[p,f,e],"int32")}}),jv=Object.freeze({toPixels:function(n,e){return Re(this,void 0,void 0,function(){var t,r,i,o,s,a,l,u,f,p,m,v,y,w,_,k,E,N,S,A,P,D,j;return je(this,function(T){switch(T.label){case 0:if(t=V(n,"img","toPixels"),n instanceof Pt||(t=t.toInt()),t.rank!==2&&t.rank!==3)throw new Error("toPixels only supports rank 2 or 3 tensors, got rank "+t.rank+".");if(r=t.shape.slice(0,2),i=r[0],o=r[1],(s=t.rank===2?1:t.shape[2])>4||s===2)throw new Error("toPixels only supports depth of size 1, 3 or 4 but got "+s);return[4,t.data()];case 1:return a=T.sent(),l=t.min(),u=t.max(),[4,Promise.all([l.data(),u.data()])];case 2:if(f=T.sent(),p=f[0],m=f[1],v=p[0],y=m[0],l.dispose(),u.dispose(),t.dtype==="float32"){if(v<0||y>1)throw new Error("Tensor values for a float32 Tensor must be in the range [0 - 1] but got range ["+v+" - "+y+"].")}else{if(t.dtype!=="int32")throw new Error("Unsupported type for toPixels: "+t.dtype+". Please use float32 or int32 tensors.");if(v<0||y>255)throw new Error("Tensor values for a int32 Tensor must be in the range [0 - 255] but got range ["+v+" - "+y+"].")}for(w=t.dtype==="float32"?255:1,_=new Uint8ClampedArray(o*i*4),k=0;k<i*o;++k)E=void 0,N=void 0,S=void 0,A=void 0,s===1?(E=a[k]*w,N=a[k]*w,S=a[k]*w,A=255):s===3?(E=a[3*k]*w,N=a[3*k+1]*w,S=a[3*k+2]*w,A=255):s===4&&(E=a[4*k]*w,N=a[4*k+1]*w,S=a[4*k+2]*w,A=a[4*k+3]*w),_[(P=4*k)+0]=Math.round(E),_[P+1]=Math.round(N),_[P+2]=Math.round(S),_[P+3]=Math.round(A);return e!=null&&(e.width=o,e.height=i,D=e.getContext("2d"),j=new ImageData(_,o,i),D.putImageData(j,0,0)),t!==n&&t.dispose(),[2,_]}})})},fromPixels:RM}),jM=function(){function n(){}return n.prototype.getClassName=function(){return this.constructor.className},n.fromConfig=function(e,t){return new e(t)},n}(),TM=function(){function n(){this.classNameMap={}}return n.getMap=function(){return n.instance==null&&(n.instance=new n),n.instance},n.register=function(e){n.getMap().classNameMap[e.className]=[e,e.fromConfig]},n}();function Da(n){U(n.className!=null,function(){return"Class being registered does not have the static className property defined."}),U(typeof n.className=="string",function(){return"className is required to be a string, but got type "+typeof n.className}),U(n.className.length>0,function(){return"Class being registered has an empty-string as its className, which is disallowed."}),TM.register(n)}var Ma=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return hi(e,n),e.prototype.minimize=function(t,r,i){r===void 0&&(r=!1);var o=this.computeGradients(t,i),s=o.value,a=o.grads;if(i!=null){var l=i.map(function(u){return{name:u.name,tensor:a[u.name]}});this.applyGradients(l)}else this.applyGradients(a);return ur(a),r?s:(s.dispose(),null)},Object.defineProperty(e.prototype,"iterations",{get:function(){return this.iterations_==null&&(this.iterations_=0),this.iterations_},enumerable:!0,configurable:!0}),e.prototype.incrementIterations=function(){this.iterations_=this.iterations+1},e.prototype.computeGradients=function(t,r){return VR(t,r)},e.prototype.dispose=function(){this.iterations_!=null&&ur(this.iterations_)},e.prototype.saveIterations=function(){return Re(this,void 0,void 0,function(){return je(this,function(t){return this.iterations_==null&&(this.iterations_=0),[2,{name:"iter",tensor:ke(this.iterations_,"int32")}]})})},e.prototype.getWeights=function(){return Re(this,void 0,void 0,function(){return je(this,function(t){throw new Error("getWeights() is not implemented for this optimizer yet.")})})},e.prototype.setWeights=function(t){return Re(this,void 0,void 0,function(){return je(this,function(r){throw new Error("setWeights() is not implemented for this optimizer class "+this.getClassName())})})},e.prototype.extractIterations=function(t){return Re(this,void 0,void 0,function(){var r;return je(this,function(i){switch(i.label){case 0:return r=this,[4,t[0].tensor.data()];case 1:return r.iterations_=i.sent()[0],[2,t.slice(1)]}})})},e}(jM);Object.defineProperty(Ma,Symbol.hasInstance,{value:function(n){return n.minimize!=null&&n.computeGradients!=null&&n.applyGradients!=null}});var DM=function(n){function e(t,r,i){i===void 0&&(i=null);var o=n.call(this)||this;return o.learningRate=t,o.rho=r,o.epsilon=i,o.accumulatedGrads=[],o.accumulatedUpdates=[],i==null&&(o.epsilon=Z.backend.epsilon()),o}return hi(e,n),e.prototype.applyGradients=function(t){var r=this;(Array.isArray(t)?t.map(function(i){return i.name}):Object.keys(t)).forEach(function(i,o){var s=Z.registeredVariables[i];r.accumulatedGrads[o]==null&&(r.accumulatedGrads[o]={originalName:i+"/accum_grad",variable:Ee(function(){return st(s).variable(!1)})}),r.accumulatedUpdates[o]==null&&(r.accumulatedUpdates[o]={originalName:i+"/accum_var",variable:Ee(function(){return st(s).variable(!1)})});var a=Array.isArray(t)?t[o].tensor:t[i];if(a!=null){var l=r.accumulatedGrads[o].variable,u=r.accumulatedUpdates[o].variable;Ee(function(){var f=l.mul(r.rho).add(a.square().mul(1-r.rho)),p=u.add(r.epsilon).sqrt().div(l.add(r.epsilon).sqrt()).mul(a),m=u.mul(r.rho).add(p.square().mul(1-r.rho));l.assign(f),u.assign(m);var v=p.mul(-r.learningRate).add(s);s.assign(v)})}}),this.incrementIterations()},e.prototype.dispose=function(){this.accumulatedUpdates!=null&&(ur(this.accumulatedGrads.map(function(t){return t.variable})),ur(this.accumulatedUpdates.map(function(t){return t.variable})))},e.prototype.getWeights=function(){return Re(this,void 0,void 0,function(){var t;return je(this,function(r){switch(r.label){case 0:return t=this.accumulatedGrads.concat(this.accumulatedUpdates),[4,this.saveIterations()];case 1:return[2,[r.sent()].concat(t.map(function(i){return{name:i.originalName,tensor:i.variable}}))]}})})},e.prototype.setWeights=function(t){return Re(this,void 0,void 0,function(){var r;return je(this,function(i){switch(i.label){case 0:return[4,this.extractIterations(t)];case 1:return t=i.sent(),r=t.length/2,this.accumulatedGrads=t.slice(0,r).map(function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}}),this.accumulatedUpdates=t.slice(r,2*r).map(function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}}),[2]}})})},e.prototype.getConfig=function(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}},e.fromConfig=function(t,r){return new t(r.learningRate,r.rho,r.epsilon)},e.className="Adadelta",e}(Ma);Da(DM);var MM=function(n){function e(t,r){r===void 0&&(r=.1);var i=n.call(this)||this;return i.learningRate=t,i.initialAccumulatorValue=r,i.accumulatedGrads=[],i}return hi(e,n),e.prototype.applyGradients=function(t){var r=this;(Array.isArray(t)?t.map(function(i){return i.name}):Object.keys(t)).forEach(function(i,o){var s=Z.registeredVariables[i];r.accumulatedGrads[o]==null&&(r.accumulatedGrads[o]={originalName:i+"/accumulator",variable:Ee(function(){return Fi(s.shape,r.initialAccumulatorValue).variable(!1)})});var a=Array.isArray(t)?t[o].tensor:t[i];if(a!=null){var l=r.accumulatedGrads[o].variable;Ee(function(){var u=l.add(a.square());l.assign(u);var f=a.div(u.add(Z.backend.epsilon()).sqrt()).mul(-r.learningRate).add(s);s.assign(f)})}}),this.incrementIterations()},e.prototype.dispose=function(){this.accumulatedGrads!=null&&ur(this.accumulatedGrads.map(function(t){return t.variable}))},e.prototype.getWeights=function(){return Re(this,void 0,void 0,function(){return je(this,function(t){switch(t.label){case 0:return[4,this.saveIterations()];case 1:return[2,[t.sent()].concat(this.accumulatedGrads.map(function(r){return{name:r.originalName,tensor:r.variable}}))]}})})},e.prototype.setWeights=function(t){return Re(this,void 0,void 0,function(){return je(this,function(r){switch(r.label){case 0:return[4,this.extractIterations(t)];case 1:return t=r.sent(),this.accumulatedGrads=t.map(function(i){return{originalName:i.name,variable:i.tensor.variable(!1)}}),[2]}})})},e.prototype.getConfig=function(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}},e.fromConfig=function(t,r){return new t(r.learningRate,r.initialAccumulatorValue)},e.className="Adagrad",e}(Ma);Da(MM);var PM=function(n){function e(t,r,i,o){o===void 0&&(o=null);var s=n.call(this)||this;return s.learningRate=t,s.beta1=r,s.beta2=i,s.epsilon=o,s.accumulatedFirstMoment=[],s.accumulatedSecondMoment=[],Ee(function(){s.accBeta1=ke(r).variable(),s.accBeta2=ke(i).variable()}),o==null&&(s.epsilon=Z.backend.epsilon()),s}return hi(e,n),e.prototype.applyGradients=function(t){var r=this,i=Array.isArray(t)?t.map(function(o){return o.name}):Object.keys(t);Ee(function(){var o=on(1,r.accBeta1),s=on(1,r.accBeta2);i.forEach(function(a,l){var u=Z.registeredVariables[a];r.accumulatedFirstMoment[l]==null&&(r.accumulatedFirstMoment[l]={originalName:a+"/m",variable:Ee(function(){return st(u).variable(!1)})}),r.accumulatedSecondMoment[l]==null&&(r.accumulatedSecondMoment[l]={originalName:a+"/v",variable:Ee(function(){return st(u).variable(!1)})});var f=Array.isArray(t)?t[l].tensor:t[a];if(f!=null){var p=r.accumulatedFirstMoment[l].variable,m=r.accumulatedSecondMoment[l].variable,v=p.mul(r.beta1).add(f.mul(1-r.beta1)),y=m.mul(r.beta2).add(f.square().mul(1-r.beta2)),w=v.div(o),_=y.div(s);p.assign(v),m.assign(y);var k=w.div(_.sqrt().add(r.epsilon)).mul(-r.learningRate).add(u);u.assign(k)}}),r.accBeta1.assign(r.accBeta1.mul(r.beta1)),r.accBeta2.assign(r.accBeta2.mul(r.beta2))}),this.incrementIterations()},e.prototype.dispose=function(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&ur(this.accumulatedFirstMoment.map(function(t){return t.variable})),this.accumulatedSecondMoment!=null&&ur(this.accumulatedSecondMoment.map(function(t){return t.variable}))},e.prototype.getWeights=function(){return Re(this,void 0,void 0,function(){var t;return je(this,function(r){switch(r.label){case 0:return t=this.accumulatedFirstMoment.concat(this.accumulatedSecondMoment),[4,this.saveIterations()];case 1:return[2,[r.sent()].concat(t.map(function(i){return{name:i.originalName,tensor:i.variable}}))]}})})},e.prototype.setWeights=function(t){return Re(this,void 0,void 0,function(){var r,i=this;return je(this,function(o){switch(o.label){case 0:return[4,this.extractIterations(t)];case 1:return t=o.sent(),Ee(function(){i.accBeta1.assign(Df(i.beta1,i.iterations_+1)),i.accBeta2.assign(Df(i.beta2,i.iterations_+1))}),r=t.length/2,this.accumulatedFirstMoment=t.slice(0,r).map(function(s){return{originalName:s.name,variable:s.tensor.variable(!1)}}),this.accumulatedSecondMoment=t.slice(r,2*r).map(function(s){return{originalName:s.name,variable:s.tensor.variable(!1)}}),[2]}})})},e.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}},e.fromConfig=function(t,r){return new t(r.learningRate,r.beta1,r.beta2,r.epsilon)},e.className="Adam",e}(Ma);Da(PM);var OM=function(n){function e(t,r,i,o,s){o===void 0&&(o=null),s===void 0&&(s=0);var a=n.call(this)||this;return a.learningRate=t,a.beta1=r,a.beta2=i,a.epsilon=o,a.decay=s,a.accumulatedFirstMoment=[],a.accumulatedWeightedInfNorm=[],Ee(function(){a.iteration=ke(0).variable(),a.accBeta1=ke(r).variable()}),o==null&&(a.epsilon=Z.backend.epsilon()),a}return hi(e,n),e.prototype.applyGradients=function(t){var r=this,i=Array.isArray(t)?t.map(function(o){return o.name}):Object.keys(t);Ee(function(){var o=on(1,r.accBeta1),s=oi(-r.learningRate,r.iteration.mul(r.decay).add(1));i.forEach(function(a,l){var u=Z.registeredVariables[a];r.accumulatedFirstMoment[l]==null&&(r.accumulatedFirstMoment[l]={originalName:a+"/m",variable:st(u).variable(!1)}),r.accumulatedWeightedInfNorm[l]==null&&(r.accumulatedWeightedInfNorm[l]={originalName:a+"/v",variable:st(u).variable(!1)});var f=Array.isArray(t)?t[l].tensor:t[a];if(f!=null){var p=r.accumulatedFirstMoment[l].variable,m=r.accumulatedWeightedInfNorm[l].variable,v=p.mul(r.beta1).add(f.mul(1-r.beta1)),y=m.mul(r.beta2),w=f.abs(),_=y.maximum(w);p.assign(v),m.assign(_);var k=s.div(o).mul(v.div(_.add(r.epsilon))).add(u);u.assign(k)}}),r.iteration.assign(r.iteration.add(1)),r.accBeta1.assign(r.accBeta1.mul(r.beta1))}),this.incrementIterations()},e.prototype.dispose=function(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&ur(this.accumulatedFirstMoment.map(function(t){return t.variable})),this.accumulatedWeightedInfNorm!=null&&ur(this.accumulatedWeightedInfNorm.map(function(t){return t.variable}))},e.prototype.getWeights=function(){return Re(this,void 0,void 0,function(){return je(this,function(t){throw new Error("getWeights() is not implemented for Adamax yet.")})})},e.prototype.setWeights=function(t){return Re(this,void 0,void 0,function(){return je(this,function(r){throw new Error("setWeights() is not implemented for Adamax yet.")})})},e.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}},e.fromConfig=function(t,r){return new t(r.learningRate,r.beta1,r.beta2,r.epsilon,r.decay)},e.className="Adamax",e}(Ma);Da(OM);var q4=function(n){function e(t){var r=n.call(this)||this;return r.learningRate=t,r.setLearningRate(t),r}return hi(e,n),e.prototype.applyGradients=function(t){var r=this;(Array.isArray(t)?t.map(function(i){return i.name}):Object.keys(t)).forEach(function(i,o){var s=Array.isArray(t)?t[o].tensor:t[i];if(s!=null){var a=Z.registeredVariables[i];Ee(function(){var l=r.c.mul(s).add(a);a.assign(l)})}}),this.incrementIterations()},e.prototype.setLearningRate=function(t){this.learningRate=t,this.c!=null&&this.c.dispose(),this.c=nR(ke(-t))},e.prototype.dispose=function(){this.c.dispose()},e.prototype.getWeights=function(){return Re(this,void 0,void 0,function(){return je(this,function(t){switch(t.label){case 0:return[4,this.saveIterations()];case 1:return[2,[t.sent()]]}})})},e.prototype.setWeights=function(t){return Re(this,void 0,void 0,function(){return je(this,function(r){switch(r.label){case 0:return[4,this.extractIterations(t)];case 1:if((t=r.sent()).length!==0)throw new Error("SGD optimizer does not have settable weights.");return[2]}})})},e.prototype.getConfig=function(){return{learningRate:this.learningRate}},e.fromConfig=function(t,r){return new t(r.learningRate)},e.className="SGD",e}(Ma);Da(q4);var FM=function(n){function e(t,r,i){i===void 0&&(i=!1);var o=n.call(this,t)||this;return o.learningRate=t,o.momentum=r,o.useNesterov=i,o.accumulations=[],o.m=ke(o.momentum),o}return hi(e,n),e.prototype.applyGradients=function(t){var r=this;(Array.isArray(t)?t.map(function(i){return i.name}):Object.keys(t)).forEach(function(i,o){var s=Z.registeredVariables[i];r.accumulations[o]==null&&(r.accumulations[o]={originalName:i+"/momentum",variable:Ee(function(){return st(s).variable(!1)})});var a=r.accumulations[o].variable,l=Array.isArray(t)?t[o].tensor:t[i];l!=null&&Ee(function(){var u,f=r.m.mul(a).add(l);u=r.useNesterov?r.c.mul(l.add(f.mul(r.m))).add(s):r.c.mul(f).add(s),a.assign(f),s.assign(u)})}),this.incrementIterations()},e.prototype.dispose=function(){this.m.dispose(),this.accumulations!=null&&ur(this.accumulations.map(function(t){return t.variable}))},e.prototype.setMomentum=function(t){this.momentum=t},e.prototype.getWeights=function(){return Re(this,void 0,void 0,function(){return je(this,function(t){switch(t.label){case 0:return[4,this.saveIterations()];case 1:return[2,[t.sent()].concat(this.accumulations.map(function(r){return{name:r.originalName,tensor:r.variable}}))]}})})},e.prototype.setWeights=function(t){return Re(this,void 0,void 0,function(){return je(this,function(r){switch(r.label){case 0:return[4,this.extractIterations(t)];case 1:return t=r.sent(),this.accumulations=t.map(function(i){return{originalName:i.name,variable:i.tensor.variable(!1)}}),[2]}})})},e.prototype.getConfig=function(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}},e.fromConfig=function(t,r){return new t(r.learningRate,r.momentum,r.useNesterov)},e.className="Momentum",e}(q4);Da(FM);var LM=function(n){function e(t,r,i,o,s){r===void 0&&(r=.9),i===void 0&&(i=0),o===void 0&&(o=null),s===void 0&&(s=!1);var a=n.call(this)||this;if(a.learningRate=t,a.decay=r,a.momentum=i,a.epsilon=o,a.accumulatedMeanSquares=[],a.accumulatedMoments=[],a.accumulatedMeanGrads=[],a.centered=s,o==null&&(a.epsilon=Z.backend.epsilon()),t==null)throw new Error("learningRate for RMSPropOptimizer must be defined.");return a}return hi(e,n),e.prototype.applyGradients=function(t){var r=this;(Array.isArray(t)?t.map(function(i){return i.name}):Object.keys(t)).forEach(function(i,o){var s=Z.registeredVariables[i];r.accumulatedMeanSquares[o]==null&&(r.accumulatedMeanSquares[o]={originalName:i+"/rms",variable:Ee(function(){return st(s).variable(!1)})}),r.accumulatedMoments[o]==null&&(r.accumulatedMoments[o]={originalName:i+"/momentum",variable:Ee(function(){return st(s).variable(!1)})}),r.accumulatedMeanGrads[o]==null&&r.centered&&(r.accumulatedMeanGrads[o]={originalName:i+"/mg",variable:Ee(function(){return st(s).variable(!1)})});var a=Array.isArray(t)?t[o].tensor:t[i];if(a!=null){var l=r.accumulatedMeanSquares[o].variable,u=r.accumulatedMoments[o].variable;Ee(function(){var f=l.mul(r.decay).add(a.square().mul(1-r.decay));if(r.centered){var p=r.accumulatedMeanGrads[o].variable,m=p.mul(r.decay).add(a.mul(1-r.decay)),v=u.mul(r.momentum).add(a.mul(r.learningRate).div(f.sub(m.square().add(r.epsilon)).sqrt()));l.assign(f),p.assign(m),u.assign(v);var y=s.sub(v);s.assign(y)}else{var w=l.mul(r.decay).add(a.square().mul(1-r.decay));v=u.mul(r.momentum).add(a.mul(r.learningRate).div(w.add(r.epsilon).sqrt())),l.assign(w),u.assign(v),y=s.sub(v),s.assign(y)}})}}),this.incrementIterations()},e.prototype.dispose=function(){this.accumulatedMeanSquares!=null&&ur(this.accumulatedMeanSquares.map(function(t){return t.variable})),this.accumulatedMeanGrads!=null&&this.centered&&ur(this.accumulatedMeanGrads.map(function(t){return t.variable})),this.accumulatedMoments!=null&&ur(this.accumulatedMoments.map(function(t){return t.variable}))},e.prototype.getWeights=function(){return Re(this,void 0,void 0,function(){var t;return je(this,function(r){switch(r.label){case 0:return t=this.accumulatedMeanSquares.concat(this.accumulatedMoments),this.centered&&t.push.apply(t,this.accumulatedMeanGrads),[4,this.saveIterations()];case 1:return[2,[r.sent()].concat(t.map(function(i){return{name:i.originalName,tensor:i.variable}}))]}})})},e.prototype.setWeights=function(t){return Re(this,void 0,void 0,function(){var r;return je(this,function(i){switch(i.label){case 0:return[4,this.extractIterations(t)];case 1:return t=i.sent(),r=this.centered?t.length/3:t.length/2,this.accumulatedMeanSquares=t.slice(0,r).map(function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}}),this.accumulatedMoments=t.slice(r,2*r).map(function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}}),this.centered&&(this.accumulatedMeanGrads=t.slice(2*r,3*r).map(function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}})),[2]}})})},e.prototype.getConfig=function(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}},e.fromConfig=function(t,r){return new t(r.learningRate,r.decay,r.momentum,r.epsilon,r.centered)},e.className="RMSProp",e}(Ma);Da(LM);Pt.prototype.squaredDifference=function(n){return l4(this,n)},ue=uM;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Ng=function(n,e){return Ng=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])},Ng(n,e)};function Ge(n,e){Ng(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Mn=function(){return Mn=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Mn.apply(this,arguments)};function Fe(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(f){try{u(r.next(f))}catch(p){s(p)}}function l(f){try{u(r.throw(f))}catch(p){s(p)}}function u(f){f.done?o(f.value):i(f.value).then(a,l)}u((r=r.apply(n,[])).next())})}function Le(n,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(u){return function(f){return l([u,f])}}function l(u){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){t.label=u[1];break}if(u[0]===6&&t.label<o[1]){t.label=o[1],o=u;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(u);break}o[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(n,t)}catch(f){u=[6,f],i=0}finally{r=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function xu(){for(var n=0,e=0,t=arguments.length;e<t;e++)n+=arguments[e].length;for(var r=Array(n),i=0,e=0;e<t;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}var Vl=function(){function n(e,t){if(!va(e)||!va(t))throw new Error("Dimensions.constructor - expected width and height to be valid numbers, instead have "+JSON.stringify({width:e,height:t}));this._width=e,this._height=t}return Object.defineProperty(n.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),n.prototype.reverse=function(){return new n(1/this.width,1/this.height)},n}();function sp(n,e){return n instanceof Pt&&n.shape.length===e}function BM(n){return sp(n,2)}function ap(n){return sp(n,3)}function _s(n){return sp(n,4)}function zM(n){return n%1!==0}function w2(n){return n%2===0}function WM(n,e){e===void 0&&(e=2);var t=Math.pow(10,e);return Math.floor(n*t)/t}function _2(n){return n&&n.width&&n.height}function VM(n,e){var t=n.width,r=n.height,i=e/Math.max(r,t);return new Vl(Math.round(t*i),Math.round(r*i))}function Tv(n){return n.reduce(function(e,t){return e.add(t)},new ut(0,0)).div(new ut(n.length,n.length))}function ju(n,e,t){return Array(n).fill(0).map(function(r,i){return e+i*t})}function va(n){return!!n&&n!==1/0&&n!==-1/0&&!isNaN(n)||n===0}function k2(n){return va(n)&&0<=n&&n<=1}var ut=function(){function n(e,t){this._x=e,this._y=t}return Object.defineProperty(n.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),n.prototype.add=function(e){return new n(this.x+e.x,this.y+e.y)},n.prototype.sub=function(e){return new n(this.x-e.x,this.y-e.y)},n.prototype.mul=function(e){return new n(this.x*e.x,this.y*e.y)},n.prototype.div=function(e){return new n(this.x/e.x,this.y/e.y)},n.prototype.abs=function(){return new n(Math.abs(this.x),Math.abs(this.y))},n.prototype.magnitude=function(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))},n.prototype.floor=function(){return new n(Math.floor(this.x),Math.floor(this.y))},n}(),Es=function(){function n(e,t){t===void 0&&(t=!0);var r=e||{},i=[r.left,r.top,r.right,r.bottom].every(va),o=[r.x,r.y,r.width,r.height].every(va);if(!o&&!i)throw new Error("Box.constructor - expected box to be IBoundingBox | IRect, instead have "+JSON.stringify(r));var s=o?[r.x,r.y,r.width,r.height]:[r.left,r.top,r.right-r.left,r.bottom-r.top],a=s[0],l=s[1],u=s[2],f=s[3];n.assertIsValidBox({x:a,y:l,width:u,height:f},"Box.constructor",t),this._x=a,this._y=l,this._width=u,this._height=f}return n.isRect=function(e){return!!e&&[e.x,e.y,e.width,e.height].every(va)},n.assertIsValidBox=function(e,t,r){if(r===void 0&&(r=!1),!n.isRect(e))throw new Error(t+" - invalid box: "+JSON.stringify(e)+", expected object with properties x, y, width, height");if(!r&&(e.width<0||e.height<0))throw new Error(t+" - width ("+e.width+") and height ("+e.height+") must be positive numbers")},Object.defineProperty(n.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"left",{get:function(){return this.x},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"top",{get:function(){return this.y},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"right",{get:function(){return this.x+this.width},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"area",{get:function(){return this.width*this.height},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"topLeft",{get:function(){return new ut(this.left,this.top)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"topRight",{get:function(){return new ut(this.right,this.top)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"bottomLeft",{get:function(){return new ut(this.left,this.bottom)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"bottomRight",{get:function(){return new ut(this.right,this.bottom)},enumerable:!0,configurable:!0}),n.prototype.round=function(){var e=[this.x,this.y,this.width,this.height].map(function(s){return Math.round(s)}),t=e[0],r=e[1],i=e[2],o=e[3];return new n({x:t,y:r,width:i,height:o})},n.prototype.floor=function(){var e=[this.x,this.y,this.width,this.height].map(function(s){return Math.floor(s)}),t=e[0],r=e[1],i=e[2],o=e[3];return new n({x:t,y:r,width:i,height:o})},n.prototype.toSquare=function(){var e=this,t=e.x,r=e.y,i=e.width,o=e.height,s=Math.abs(i-o);return i<o&&(t-=s/2,i+=s),o<i&&(r-=s/2,o+=s),new n({x:t,y:r,width:i,height:o})},n.prototype.rescale=function(e){var t=_2(e)?e.width:e,r=_2(e)?e.height:e;return new n({x:this.x*t,y:this.y*r,width:this.width*t,height:this.height*r})},n.prototype.pad=function(e,t){var r=[this.x-e/2,this.y-t/2,this.width+e,this.height+t],i=r[0],o=r[1],s=r[2],a=r[3];return new n({x:i,y:o,width:s,height:a})},n.prototype.clipAtImageBorders=function(e,t){var r=this,i=r.x,o=r.y,s=r.right,a=r.bottom,l=Math.max(i,0),u=Math.max(o,0),f=s-l,p=a-u,m=Math.min(f,e-l),v=Math.min(p,t-u);return new n({x:l,y:u,width:m,height:v}).floor()},n.prototype.shift=function(e,t){var r=this,i=r.width,o=r.height,s=this.x+e,a=this.y+t;return new n({x:s,y:a,width:i,height:o})},n.prototype.padAtBorders=function(e,t){var r=this.width+1,i=this.height+1,o=1,s=1,a=r,l=i,u=this.left,f=this.top,p=this.right,m=this.bottom;return p>t&&(a=-p+t+r,p=t),m>e&&(l=-m+e+i,m=e),u<1&&(l=2-u,u=1),f<1&&(l=2-f,f=1),{dy:s,edy:l,dx:o,edx:a,y:f,ey:m,x:u,ex:p,w:r,h:i}},n.prototype.calibrate=function(e){return new n({left:this.left+e.left*this.width,top:this.top+e.top*this.height,right:this.right+e.right*this.width,bottom:this.bottom+e.bottom*this.height}).toSquare().round()},n}(),lp=function(n){Ge(e,n);function e(t,r,i,o,s){return s===void 0&&(s=!1),n.call(this,{left:t,top:r,right:i,bottom:o},s)||this}return e}(Es),K4=function(){function n(e,t,r,i,o){this._imageDims=new Vl(o.width,o.height),this._score=e,this._classScore=t,this._className=r,this._box=new Es(i).rescale(this._imageDims)}return Object.defineProperty(n.prototype,"score",{get:function(){return this._score},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"classScore",{get:function(){return this._classScore},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"className",{get:function(){return this._className},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"box",{get:function(){return this._box},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"imageDims",{get:function(){return this._imageDims},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"imageWidth",{get:function(){return this.imageDims.width},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"imageHeight",{get:function(){return this.imageDims.height},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"relativeBox",{get:function(){return new Es(this._box).rescale(this.imageDims.reverse())},enumerable:!0,configurable:!0}),n.prototype.forSize=function(e,t){return new n(this.score,this.classScore,this.className,this.relativeBox,{width:e,height:t})},n}(),Ui=function(n){Ge(e,n);function e(t,r,i){return n.call(this,t,t,"",r,i)||this}return e.prototype.forSize=function(t,r){var i=n.prototype.forSize.call(this,t,r),o=i.score,s=i.relativeBox,a=i.imageDims;return new e(o,s,a)},e}(K4);function UM(n,e,t){t===void 0&&(t=!0);var r=Math.max(0,Math.min(n.right,e.right)-Math.max(n.left,e.left)),i=Math.max(0,Math.min(n.bottom,e.bottom)-Math.max(n.top,e.top)),o=r*i;return t?o/(n.area+e.area-o):o/Math.min(n.area,e.area)}function HM(n){var e=n.map(function(a){return a.x}),t=n.map(function(a){return a.y}),r=e.reduce(function(a,l){return l<a?l:a},1/0),i=t.reduce(function(a,l){return l<a?l:a},1/0),o=e.reduce(function(a,l){return a<l?l:a},0),s=t.reduce(function(a,l){return a<l?l:a},0);return new lp(r,i,o,s)}function Tu(n,e,t,r){r===void 0&&(r=!0);for(var i=e.map(function(a,l){return{score:a,boxIndex:l}}).sort(function(a,l){return a.score-l.score}).map(function(a){return a.boxIndex}),o=[],s=function(){var a=i.pop();o.push(a);for(var l=i,u=[],f=0;f<l.length;f++){var p=l[f],m=n[a],v=n[p];u.push(UM(m,v,r))}i=i.filter(function(y,w){return u[w]<=t})};i.length>0;)s();return o}function nd(n,e){return Ee(function(){var t=e[0],r=e[1],i=e[2],o=Fi(xu(n.shape.slice(0,3),[1]),t),s=Fi(xu(n.shape.slice(0,3),[1]),r),a=Fi(xu(n.shape.slice(0,3),[1]),i),l=tn([o,s,a],3);return on(n,l)})}function GM(n,e){return e===void 0&&(e=!1),Ee(function(){var t=n.shape.slice(1),r=t[0],i=t[1];if(r===i)return n;var o=Math.abs(r-i),s=Math.round(o*(e?.5:1)),a=r>i?2:1,l=function(v){var y=n.shape.slice();return y[a]=v,Fi(y,0)},u=l(s),f=o-u.shape[a],p=e&&f?l(f):null,m=[p,n,u].filter(function(v){return!!v}).map(function(v){return v.toFloat()});return tn(m,a)})}function R0(n){return 1/(1+Math.exp(-n))}var Dv=function(n){Ge(e,n);function e(t,r,i,o,s){return s===void 0&&(s=!1),n.call(this,{x:t,y:r,width:i,height:o},s)||this}return e}(Es),$M=.5,qM=.43,KM=.45,Of=function(){function n(e,t,r){r===void 0&&(r=new ut(0,0));var i=t.width,o=t.height;this._imgDims=new Vl(i,o),this._shift=r,this._positions=e.map(function(s){return s.mul(new ut(i,o)).add(r)})}return Object.defineProperty(n.prototype,"shift",{get:function(){return new ut(this._shift.x,this._shift.y)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"imageWidth",{get:function(){return this._imgDims.width},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"imageHeight",{get:function(){return this._imgDims.height},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"positions",{get:function(){return this._positions},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"relativePositions",{get:function(){var e=this;return this._positions.map(function(t){return t.sub(e._shift).div(new ut(e.imageWidth,e.imageHeight))})},enumerable:!0,configurable:!0}),n.prototype.forSize=function(e,t){return new this.constructor(this.relativePositions,{width:e,height:t})},n.prototype.shiftBy=function(e,t){return new this.constructor(this.relativePositions,this._imgDims,new ut(e,t))},n.prototype.shiftByPoint=function(e){return this.shiftBy(e.x,e.y)},n.prototype.align=function(e,t){if(t===void 0&&(t={}),e){var r=e instanceof Ui?e.box.floor():new Es(e);return this.shiftBy(r.x,r.y).align(null,t)}var i=Object.assign({},{useDlibAlignment:!1,minBoxPadding:.2},t),o=i.useDlibAlignment,s=i.minBoxPadding;return o?this.alignDlib():this.alignMinBbox(s)},n.prototype.alignDlib=function(){var e=this.getRefPointsForAlignment(),t=e[0],r=e[1],i=e[2],o=function(p){return i.sub(p).magnitude()},s=(o(t)+o(r))/2,a=Math.floor(s/KM),l=Tv(e),u=Math.floor(Math.max(0,l.x-$M*a)),f=Math.floor(Math.max(0,l.y-qM*a));return new Dv(u,f,Math.min(a,this.imageWidth+u),Math.min(a,this.imageHeight+f))},n.prototype.alignMinBbox=function(e){var t=HM(this.positions);return t.pad(t.width*e,t.height*e)},n.prototype.getRefPointsForAlignment=function(){throw new Error("getRefPointsForAlignment not implemented by base class")},n}(),XM=function(n){Ge(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getRefPointsForAlignment=function(){var t=this.positions;return[t[0],t[1],Tv([t[3],t[4]])]},e}(Of),YM=function(n){Ge(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getJawOutline=function(){return this.positions.slice(0,17)},e.prototype.getLeftEyeBrow=function(){return this.positions.slice(17,22)},e.prototype.getRightEyeBrow=function(){return this.positions.slice(22,27)},e.prototype.getNose=function(){return this.positions.slice(27,36)},e.prototype.getLeftEye=function(){return this.positions.slice(36,42)},e.prototype.getRightEye=function(){return this.positions.slice(42,48)},e.prototype.getMouth=function(){return this.positions.slice(48,68)},e.prototype.getRefPointsForAlignment=function(){return[this.getLeftEye(),this.getRightEye(),this.getMouth()].map(Tv)},e}(Of),C2=function(){function n(e,t){this._label=e,this._distance=t}return Object.defineProperty(n.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"distance",{get:function(){return this._distance},enumerable:!0,configurable:!0}),n.prototype.toString=function(e){return e===void 0&&(e=!0),""+this.label+(e?" ("+WM(this.distance)+")":"")},n}(),E2=function(n){Ge(e,n);function e(t,r){var i=n.call(this,t)||this;return i._label=r,i}return e.assertIsValidLabeledBox=function(t,r){if(Es.assertIsValidBox(t,r),!va(t.label))throw new Error(r+" - expected property label ("+t.label+") to be a number")},Object.defineProperty(e.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),e}(Es),Th=function(){function n(e,t){if(typeof e!="string")throw new Error("LabeledFaceDescriptors - constructor expected label to be a string");if(!Array.isArray(t)||t.some(function(r){return!(r instanceof Float32Array)}))throw new Error("LabeledFaceDescriptors - constructor expected descriptors to be an array of Float32Array");this._label=e,this._descriptors=t}return Object.defineProperty(n.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"descriptors",{get:function(){return this._descriptors},enumerable:!0,configurable:!0}),n.prototype.toJSON=function(){return{label:this.label,descriptors:this.descriptors.map(function(e){return Array.from(e)})}},n.fromJSON=function(e){var t=e.descriptors.map(function(r){return new Float32Array(r)});return new n(e.label,t)},n}();(function(n){Ge(e,n);function e(t,r,i,o){var s=n.call(this,t,r)||this;return s._score=i,s._classScore=o,s}return e.assertIsValidPredictedBox=function(t,r){if(E2.assertIsValidLabeledBox(t,r),!k2(t.score)||!k2(t.classScore))throw new Error(r+" - expected properties score ("+t.score+") and ("+t.classScore+") to be a number between [0, 1]")},Object.defineProperty(e.prototype,"score",{get:function(){return this._score},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"classScore",{get:function(){return this._classScore},enumerable:!0,configurable:!0}),e})(E2);function JM(n){return n.detection instanceof Ui}function Mv(n,e){var t={detection:e};return Object.assign({},n,t)}function X4(){var n=window.fetch||function(){throw new Error("fetch - missing fetch implementation for browser environment")},e=function(){throw new Error("readFile - filesystem not available for browser environment")};return{Canvas:HTMLCanvasElement,CanvasRenderingContext2D,Image:HTMLImageElement,ImageData,Video:HTMLVideoElement,createCanvasElement:function(){return document.createElement("canvas")},createImageElement:function(){return document.createElement("img")},fetch:n,readFile:e}}function Y4(n){var e="";if(!n)try{n=require("fs")}catch(r){e=r.toString()}var t=n?function(r){return new Promise(function(i,o){n.readFile(r,function(s,a){return s?o(s):i(a)})})}:function(){throw new Error("readFile - failed to require fs in nodejs environment with error: "+e)};return{readFile:t}}function J4(){var n=global.Canvas||global.HTMLCanvasElement,e=global.Image||global.HTMLImageElement,t=function(){if(n)return new n;throw new Error("createCanvasElement - missing Canvas implementation for nodejs environment")},r=function(){if(e)return new e;throw new Error("createImageElement - missing Image implementation for nodejs environment")},i=global.fetch||function(){throw new Error("fetch - missing fetch implementation for nodejs environment")},o=Y4();return Mn({Canvas:n||function(){function s(){}return s}(),CanvasRenderingContext2D:global.CanvasRenderingContext2D||function(){function s(){}return s}(),Image:e||function(){function s(){}return s}(),ImageData:global.ImageData||function(){function s(){}return s}(),Video:global.HTMLVideoElement||function(){function s(){}return s}(),createCanvasElement:t,createImageElement:r,fetch:i},o)}function Q4(){return typeof window=="object"&&typeof document<"u"&&typeof HTMLImageElement<"u"&&typeof HTMLCanvasElement<"u"&&typeof HTMLVideoElement<"u"&&typeof ImageData<"u"&&typeof CanvasRenderingContext2D<"u"}function Z4(){return typeof global=="object"&&typeof require=="function"&&typeof R3<"u"&&typeof process<"u"&&!!process.version}var Zt;function QM(){if(!Zt)throw new Error("getEnv - environment is not defined, check isNodejs() and isBrowser()");return Zt}function Sg(n){Zt=n}function Pv(){Q4()&&Sg(X4()),Z4()&&Sg(J4())}function ZM(n){if(Zt||Pv(),!Zt)throw new Error("monkeyPatch - environment is not defined, check isNodejs() and isBrowser()");var e=n.Canvas,t=e===void 0?Zt.Canvas:e,r=n.Image,i=r===void 0?Zt.Image:r;Zt.Canvas=t,Zt.Image=i,Zt.createCanvasElement=n.createCanvasElement||function(){return new t},Zt.createImageElement=n.createImageElement||function(){return new i},Zt.ImageData=n.ImageData||Zt.ImageData,Zt.Video=n.Video||Zt.Video,Zt.fetch=n.fetch||Zt.fetch,Zt.readFile=n.readFile||Zt.readFile}var Bn={getEnv:QM,setEnv:Sg,initialize:Pv,createBrowserEnv:X4,createFileSystem:Y4,createNodejsEnv:J4,monkeyPatch:ZM,isBrowser:Q4,isNodejs:Z4};Pv();function eC(n){return!Bn.isNodejs()&&typeof n=="string"?document.getElementById(n):n}function Ea(n){var e=Bn.getEnv(),t=e.Canvas,r=e.CanvasRenderingContext2D;if(n instanceof r)return n;var i=eC(n);if(!(i instanceof t))throw new Error("resolveContext2d - expected canvas to be of instance of Canvas");var o=i.getContext("2d");if(!o)throw new Error("resolveContext2d - canvas 2d context is null");return o}var N2;(function(n){n.TOP_LEFT="TOP_LEFT",n.TOP_RIGHT="TOP_RIGHT",n.BOTTOM_LEFT="BOTTOM_LEFT",n.BOTTOM_RIGHT="BOTTOM_RIGHT"})(N2||(N2={}));function tC(n){var e=Bn.getEnv(),t=e.Image,r=e.Video;return n instanceof t&&n.complete||n instanceof r&&n.readyState>=3}function eP(n){return new Promise(function(e,t){if(n instanceof Bn.getEnv().Canvas||tC(n))return e();function r(o){o.currentTarget&&(o.currentTarget.removeEventListener("load",r),o.currentTarget.removeEventListener("error",i),e(o))}function i(o){o.currentTarget&&(o.currentTarget.removeEventListener("load",r),o.currentTarget.removeEventListener("error",i),t(o))}n.addEventListener("load",r),n.addEventListener("error",i)})}function nC(n){var e=Bn.getEnv(),t=e.Image,r=e.Video;return n instanceof t?new Vl(n.naturalWidth,n.naturalHeight):n instanceof r?new Vl(n.videoWidth,n.videoHeight):new Vl(n.width,n.height)}function cp(n){var e=n.width,t=n.height,r=Bn.getEnv().createCanvasElement,i=r();return i.width=e,i.height=t,i}function Ov(n,e){var t=Bn.getEnv().ImageData;if(!(n instanceof t)&&!tC(n))throw new Error("createCanvasFromMedia - media has not finished loading yet");var r=nC(n),i=r.width,o=r.height,s=cp({width:i,height:o});return n instanceof t?Ea(s).putImageData(n,0,0):Ea(s).drawImage(n,0,0,i,o),s}function tP(n,e){return Fe(this,void 0,void 0,function(){var t,r,i,o,s,a;return Le(this,function(l){switch(l.label){case 0:return t=Bn.getEnv().createCanvasElement(),r=n.shape.slice(_s(n)?1:0),i=r[0],o=r[1],s=r[2],a=Ee(function(){return n.as3D(i,o,s).toInt()}),[4,jv.toPixels(a,t)];case 1:return l.sent(),a.dispose(),[2,t]}})})}function S2(n){var e=Bn.getEnv(),t=e.Image,r=e.Canvas,i=e.Video;return n instanceof t||n instanceof r||n instanceof i}function nP(n,e,t){t===void 0&&(t=!1);var r=Bn.getEnv(),i=r.Image,o=r.Canvas;if(!(n instanceof i||n instanceof o))throw new Error("imageToSquare - expected arg0 to be HTMLImageElement | HTMLCanvasElement");var s=nC(n),a=e/Math.max(s.height,s.width),l=a*s.width,u=a*s.height,f=cp({width:e,height:e}),p=n instanceof o?n:Ov(n),m=Math.abs(l-u)/2,v=t&&l<u?m:0,y=t&&u<l?m:0;return Ea(f).drawImage(p,v,y,l,u),f}var Ff=function(){function n(e,t){var r=this;if(t===void 0&&(t=!1),this._imageTensors=[],this._canvases=[],this._treatAsBatchInput=!1,this._inputDimensions=[],!Array.isArray(e))throw new Error("NetInput.constructor - expected inputs to be an Array of TResolvedNetInput or to be instanceof tf.Tensor4D, instead have "+e);this._treatAsBatchInput=t,this._batchSize=e.length,e.forEach(function(i,o){if(ap(i)){r._imageTensors[o]=i,r._inputDimensions[o]=i.shape;return}if(_s(i)){var s=i.shape[0];if(s!==1)throw new Error("NetInput - tf.Tensor4D with batchSize "+s+" passed, but not supported in input array");r._imageTensors[o]=i,r._inputDimensions[o]=i.shape.slice(1);return}var a=i instanceof Bn.getEnv().Canvas?i:Ov(i);r._canvases[o]=a,r._inputDimensions[o]=[a.height,a.width,3]})}return Object.defineProperty(n.prototype,"imageTensors",{get:function(){return this._imageTensors},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"canvases",{get:function(){return this._canvases},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isBatchInput",{get:function(){return this.batchSize>1||this._treatAsBatchInput},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"batchSize",{get:function(){return this._batchSize},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"inputDimensions",{get:function(){return this._inputDimensions},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"inputSize",{get:function(){return this._inputSize},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"reshapedInputDimensions",{get:function(){var e=this;return ju(this.batchSize,0,1).map(function(t,r){return e.getReshapedInputDimensions(r)})},enumerable:!0,configurable:!0}),n.prototype.getInput=function(e){return this.canvases[e]||this.imageTensors[e]},n.prototype.getInputDimensions=function(e){return this._inputDimensions[e]},n.prototype.getInputHeight=function(e){return this._inputDimensions[e][0]},n.prototype.getInputWidth=function(e){return this._inputDimensions[e][1]},n.prototype.getReshapedInputDimensions=function(e){if(typeof this.inputSize!="number")throw new Error("getReshapedInputDimensions - inputSize not set, toBatchTensor has not been called yet");var t=this.getInputWidth(e),r=this.getInputHeight(e);return VM({width:t,height:r},this.inputSize)},n.prototype.toBatchTensor=function(e,t){var r=this;return t===void 0&&(t=!0),this._inputSize=e,Ee(function(){var i=ju(r.batchSize,0,1).map(function(s){var a=r.getInput(s);if(a instanceof Pt){var l=_s(a)?a:a.expandDims();return l=GM(l,t),(l.shape[1]!==e||l.shape[2]!==e)&&(l=Ev.resizeBilinear(l,[e,e])),l.as3D(e,e,3)}if(a instanceof Bn.getEnv().Canvas)return jv.fromPixels(nP(a,e,t));throw new Error("toBatchTensor - at batchIdx "+s+", expected input to be instanceof tf.Tensor or instanceof HTMLCanvasElement, instead have "+a)}),o=Sr(i.map(function(s){return s.toFloat()})).as4D(r.batchSize,e,e,3);return o})},n}();function mn(n){return Fe(this,void 0,void 0,function(){var e,t,r;return Le(this,function(i){switch(i.label){case 0:if(n instanceof Ff)return[2,n];if(e=Array.isArray(n)?n:[n],!e.length)throw new Error("toNetInput - empty array passed as input");return t=function(o){return Array.isArray(n)?" at input index "+o+":":""},r=e.map(eC),r.forEach(function(o,s){if(!S2(o)&&!ap(o)&&!_s(o))throw typeof e[s]=="string"?new Error("toNetInput -"+t(s)+" string passed, but could not resolve HTMLElement for element id "+e[s]):new Error("toNetInput -"+t(s)+" expected media to be of type HTMLImageElement | HTMLVideoElement | HTMLCanvasElement | tf.Tensor3D, or to be an element id");if(_s(o)){var a=o.shape[0];if(a!==1)throw new Error("toNetInput -"+t(s)+" tf.Tensor4D with batchSize "+a+" passed, but not supported in input array")}}),[4,Promise.all(r.map(function(o){return S2(o)&&eP(o)}))];case 1:return i.sent(),[2,new Ff(r,Array.isArray(n))]}})})}function Fv(n,e){return Fe(this,void 0,void 0,function(){var t,r,i,o,s,a,l;return Le(this,function(u){switch(u.label){case 0:return t=Bn.getEnv().Canvas,r=n,n instanceof t?[3,5]:[4,mn(n)];case 1:if(i=u.sent(),i.batchSize>1)throw new Error("extractFaces - batchSize > 1 not supported");return o=i.getInput(0),o instanceof t?(s=o,[3,4]):[3,2];case 2:return[4,tP(o)];case 3:s=u.sent(),u.label=4;case 4:r=s,u.label=5;case 5:return a=Ea(r),l=e.map(function(f){return f instanceof Ui?f.forSize(r.width,r.height).box.floor():f}).map(function(f){return f.clipAtImageBorders(r.width,r.height)}),[2,l.map(function(f){var p=f.x,m=f.y,v=f.width,y=f.height,w=cp({width:v,height:y});return Ea(w).putImageData(a.getImageData(p,m,v,y),0,0),w})]}})})}function Lv(n,e){return Fe(this,void 0,void 0,function(){return Le(this,function(t){if(!ap(n)&&!_s(n))throw new Error("extractFaceTensors - expected image tensor to be 3D or 4D");if(_s(n)&&n.shape[0]>1)throw new Error("extractFaceTensors - batchSize > 1 not supported");return[2,Ee(function(){var r=n.shape.slice(_s(n)?1:0),i=r[0],o=r[1],s=r[2],a=e.map(function(u){return u instanceof Ui?u.forSize(o,i).box:u}).map(function(u){return u.clipAtImageBorders(o,i)}),l=a.map(function(u){var f=u.x,p=u.y,m=u.width,v=u.height;return A4(n.as3D(i,o,s),[p,f,0],[v,m,s])});return l})]})})}function rP(n,e){return Fe(this,void 0,void 0,function(){var t,r;return Le(this,function(i){switch(i.label){case 0:return t=Bn.getEnv().fetch,[4,t(n,e)];case 1:if(r=i.sent(),!(r.status<400))throw new Error("failed to fetch: ("+r.status+") "+r.statusText+", from url: "+r.url);return[2,r]}})})}function iP(n){return Fe(this,void 0,void 0,function(){return Le(this,function(e){switch(e.label){case 0:return[4,rP(n)];case 1:return[2,e.sent().json()]}})})}function rC(n,e){var t=e+"-weights_manifest.json";if(!n)return{modelBaseUri:"",manifestUri:t};if(n==="/")return{modelBaseUri:"/",manifestUri:"/"+t};var r=n.startsWith("http://")?"http://":n.startsWith("https://")?"https://":"";n=n.replace(r,"");var i=n.split("/").filter(function(a){return a}),o=n.endsWith(".json")?i[i.length-1]:t,s=r+(n.endsWith(".json")?i.slice(0,i.length-1):i).join("/");return s=n.startsWith("/")?"/"+s:s,{modelBaseUri:s,manifestUri:s==="/"?"/"+o:s+"/"+o}}function oP(n,e){return Fe(this,void 0,void 0,function(){var t,r,i,o;return Le(this,function(s){switch(s.label){case 0:return t=rC(n,e),r=t.manifestUri,i=t.modelBaseUri,[4,iP(r)];case 1:return o=s.sent(),[2,$4.loadWeights(o,i)]}})})}var jo=function(){function n(e){this._name=e,this._params=void 0,this._paramMappings=[]}return Object.defineProperty(n.prototype,"params",{get:function(){return this._params},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"paramMappings",{get:function(){return this._paramMappings},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isLoaded",{get:function(){return!!this.params},enumerable:!0,configurable:!0}),n.prototype.getParamFromPath=function(e){var t=this.traversePropertyPath(e),r=t.obj,i=t.objProp;return r[i]},n.prototype.reassignParamFromPath=function(e,t){var r=this.traversePropertyPath(e),i=r.obj,o=r.objProp;i[o].dispose(),i[o]=t},n.prototype.getParamList=function(){var e=this;return this._paramMappings.map(function(t){var r=t.paramPath;return{path:r,tensor:e.getParamFromPath(r)}})},n.prototype.getTrainableParams=function(){return this.getParamList().filter(function(e){return e.tensor instanceof Kl})},n.prototype.getFrozenParams=function(){return this.getParamList().filter(function(e){return!(e.tensor instanceof Kl)})},n.prototype.variable=function(){var e=this;this.getFrozenParams().forEach(function(t){var r=t.path,i=t.tensor;e.reassignParamFromPath(r,i.variable())})},n.prototype.freeze=function(){var e=this;this.getTrainableParams().forEach(function(t){var r=t.path,i=t.tensor,o=kn(i.dataSync());i.dispose(),e.reassignParamFromPath(r,o)})},n.prototype.dispose=function(e){e===void 0&&(e=!0),this.getParamList().forEach(function(t){if(e&&t.tensor.isDisposed)throw new Error("param tensor has already been disposed for path "+t.path);t.tensor.dispose()}),this._params=void 0},n.prototype.serializeParams=function(){return new Float32Array(this.getParamList().map(function(e){var t=e.tensor;return Array.from(t.dataSync())}).reduce(function(e,t){return e.concat(t)}))},n.prototype.load=function(e){return Fe(this,void 0,void 0,function(){return Le(this,function(t){switch(t.label){case 0:return e instanceof Float32Array?(this.extractWeights(e),[2]):[4,this.loadFromUri(e)];case 1:return t.sent(),[2]}})})},n.prototype.loadFromUri=function(e){return Fe(this,void 0,void 0,function(){var t;return Le(this,function(r){switch(r.label){case 0:if(e&&typeof e!="string")throw new Error(this._name+".loadFromUri - expected model uri");return[4,oP(e,this.getDefaultModelName())];case 1:return t=r.sent(),this.loadFromWeightMap(t),[2]}})})},n.prototype.loadFromDisk=function(e){return Fe(this,void 0,void 0,function(){var t,r,i,o,s,a,l,u,f,p;return Le(this,function(m){switch(m.label){case 0:if(e&&typeof e!="string")throw new Error(this._name+".loadFromDisk - expected model file path");return t=Bn.getEnv().readFile,r=rC(e,this.getDefaultModelName()),i=r.manifestUri,o=r.modelBaseUri,s=function(v){return Promise.all(v.map(function(y){return t(y).then(function(w){return w.buffer})}))},a=$4.weightsLoaderFactory(s),f=(u=JSON).parse,[4,t(i)];case 1:return l=f.apply(u,[m.sent().toString()]),[4,a(l,o)];case 2:return p=m.sent(),this.loadFromWeightMap(p),[2]}})})},n.prototype.loadFromWeightMap=function(e){var t=this.extractParamsFromWeigthMap(e),r=t.paramMappings,i=t.params;this._paramMappings=r,this._params=i},n.prototype.extractWeights=function(e){var t=this.extractParams(e),r=t.paramMappings,i=t.params;this._paramMappings=r,this._params=i},n.prototype.traversePropertyPath=function(e){if(!this.params)throw new Error("traversePropertyPath - model has no loaded params");var t=e.split("/").reduce(function(o,s){if(!o.nextObj.hasOwnProperty(s))throw new Error("traversePropertyPath - object does not have property "+s+", for path "+e);return{obj:o.nextObj,objProp:s,nextObj:o.nextObj[s]}},{nextObj:this.params}),r=t.obj,i=t.objProp;if(!r||!i||!(r[i]instanceof Pt))throw new Error("traversePropertyPath - parameter is not a tensor, for path "+e);return{obj:r,objProp:i}},n}();function Er(n,e,t){return Ee(function(){var r=bv(n,e.depthwise_filter,e.pointwise_filter,t,"same");return r=Qe(r,e.bias),r})}function j0(n,e,t){return t===void 0&&(t=!1),Ee(function(){var r=Ot(t?Qe(Ur(n,e.conv0.filters,[2,2],"same"),e.conv0.bias):Er(n,e.conv0,[2,2])),i=Er(r,e.conv1,[1,1]),o=Ot(Qe(r,i)),s=Er(o,e.conv2,[1,1]);return Ot(Qe(r,Qe(i,s)))})}function Dh(n,e,t,r){return t===void 0&&(t=!1),r===void 0&&(r=!0),Ee(function(){var i=Ot(t?Qe(Ur(n,e.conv0.filters,r?[2,2]:[1,1],"same"),e.conv0.bias):Er(n,e.conv0,r?[2,2]:[1,1])),o=Er(i,e.conv1,[1,1]),s=Ot(Qe(i,o)),a=Er(s,e.conv2,[1,1]),l=Ot(Qe(i,Qe(o,a))),u=Er(l,e.conv3,[1,1]);return Ot(Qe(i,Qe(o,Qe(a,u))))})}function ui(n,e,t,r){return t===void 0&&(t="same"),r===void 0&&(r=!1),Ee(function(){var i=Qe(Ur(n,e.filters,[1,1],t),e.bias);return r?Ot(i):i})}function To(n,e){Object.keys(n).forEach(function(t){e.some(function(r){return r.originalPath===t})||n[t].dispose()})}function up(n,e){return function(t,r,i,o){var s=or(n(t*r*i*i),[i,i,t,r]),a=Kt(n(r));return e.push({paramPath:o+"/filters"},{paramPath:o+"/bias"}),{filters:s,bias:a}}}function Bv(n,e){return function(t,r,i){var o=bs(n(t*r),[t,r]),s=Kt(n(r));return e.push({paramPath:i+"/weights"},{paramPath:i+"/bias"}),{weights:o,bias:s}}}var iC=function(){function n(e,t,r){this.depthwise_filter=e,this.pointwise_filter=t,this.bias=r}return n}();function zv(n,e){return function(t,r,i){var o=or(n(9*t),[3,3,t,1]),s=or(n(t*r),[1,1,t,r]),a=Kt(n(r));return e.push({paramPath:i+"/depthwise_filter"},{paramPath:i+"/pointwise_filter"},{paramPath:i+"/bias"}),new iC(o,s,a)}}function Wv(n){return function(e){var t=n(e+"/depthwise_filter",4),r=n(e+"/pointwise_filter",4),i=n(e+"/bias",1);return new iC(t,r,i)}}function Ts(n,e){return function(t,r,i){var o=n[t];if(!sp(o,r))throw new Error("expected weightMap["+t+"] to be a Tensor"+r+"D, instead have "+o);return e.push({originalPath:t,paramPath:i||t}),o}}function Do(n){var e=n;function t(i){var o=e.slice(0,i);return e=e.slice(i),o}function r(){return e}return{extractWeights:t,getRemainingWeights:r}}function oC(n,e){var t=up(n,e),r=zv(n,e);function i(s,a,l,u){u===void 0&&(u=!1);var f=u?t(s,a,3,l+"/conv0"):r(s,a,l+"/conv0"),p=r(a,a,l+"/conv1"),m=r(a,a,l+"/conv2");return{conv0:f,conv1:p,conv2:m}}function o(s,a,l,u){u===void 0&&(u=!1);var f=i(s,a,l,u),p=f.conv0,m=f.conv1,v=f.conv2,y=r(a,a,l+"/conv3");return{conv0:p,conv1:m,conv2:v,conv3:y}}return{extractDenseBlock3Params:i,extractDenseBlock4Params:o}}function sP(n){var e=[],t=Do(n),r=t.extractWeights,i=t.getRemainingWeights,o=oC(r,e).extractDenseBlock4Params,s=o(3,32,"dense0",!0),a=o(32,64,"dense1"),l=o(64,128,"dense2"),u=o(128,256,"dense3");if(i().length!==0)throw new Error("weights remaing after extract: "+i().length);return{paramMappings:e,params:{dense0:s,dense1:a,dense2:l,dense3:u}}}function sC(n){return function(e){var t=n(e+"/filters",4),r=n(e+"/bias",1);return{filters:t,bias:r}}}function aC(n,e){var t=Ts(n,e),r=sC(t),i=Wv(t);function o(a,l){l===void 0&&(l=!1);var u=l?r(a+"/conv0"):i(a+"/conv0"),f=i(a+"/conv1"),p=i(a+"/conv2");return{conv0:u,conv1:f,conv2:p}}function s(a,l){l===void 0&&(l=!1);var u=l?r(a+"/conv0"):i(a+"/conv0"),f=i(a+"/conv1"),p=i(a+"/conv2"),m=i(a+"/conv3");return{conv0:u,conv1:f,conv2:p,conv3:m}}return{extractDenseBlock3Params:o,extractDenseBlock4Params:s}}function aP(n){var e=[],t=aC(n,e).extractDenseBlock4Params,r={dense0:t("dense0",!0),dense1:t("dense1"),dense2:t("dense2"),dense3:t("dense3")};return To(n,e),{params:r,paramMappings:e}}var lC=function(n){Ge(e,n);function e(){return n.call(this,"FaceFeatureExtractor")||this}return e.prototype.forwardInput=function(t){var r=this.params;if(!r)throw new Error("FaceFeatureExtractor - load model before inference");return Ee(function(){var i=t.toBatchTensor(112,!0),o=[122.782,117.001,104.298],s=nd(i,o).div(ke(255)),a=Dh(s,r.dense0,!0);return a=Dh(a,r.dense1),a=Dh(a,r.dense2),a=Dh(a,r.dense3),a=ed(a,[7,7],[2,2],"valid"),a})},e.prototype.forward=function(t){return Fe(this,void 0,void 0,function(){var r;return Le(this,function(i){switch(i.label){case 0:return r=this.forwardInput,[4,mn(t)];case 1:return[2,r.apply(this,[i.sent()])]}})})},e.prototype.getDefaultModelName=function(){return"face_feature_extractor_model"},e.prototype.extractParamsFromWeigthMap=function(t){return aP(t)},e.prototype.extractParams=function(t){return sP(t)},e}(jo);function Ti(n,e){return Ee(function(){return Qe(rp(n,e.weights),e.bias)})}function lP(n,e,t){var r=[],i=Do(n),o=i.extractWeights,s=i.getRemainingWeights,a=Bv(o,r),l=a(e,t,"fc");if(s().length!==0)throw new Error("weights remaing after extract: "+s().length);return{paramMappings:r,params:{fc:l}}}function cP(n){var e=[],t=Ts(n,e);function r(o){var s=t(o+"/weights",2),a=t(o+"/bias",1);return{weights:s,bias:a}}var i={fc:r("fc")};return To(n,e),{params:i,paramMappings:e}}function cC(n){var e={},t={};return Object.keys(n).forEach(function(r){var i=r.startsWith("fc")?t:e;i[r]=n[r]}),{featureExtractorMap:e,classifierMap:t}}var uC=function(n){Ge(e,n);function e(t,r){var i=n.call(this,t)||this;return i._faceFeatureExtractor=r,i}return Object.defineProperty(e.prototype,"faceFeatureExtractor",{get:function(){return this._faceFeatureExtractor},enumerable:!0,configurable:!0}),e.prototype.runNet=function(t){var r=this,i=this.params;if(!i)throw new Error(this._name+" - load model before inference");return Ee(function(){var o=t instanceof Ff?r.faceFeatureExtractor.forwardInput(t):t;return Ti(o.as2D(o.shape[0],-1),i.fc)})},e.prototype.dispose=function(t){t===void 0&&(t=!0),this.faceFeatureExtractor.dispose(t),n.prototype.dispose.call(this,t)},e.prototype.loadClassifierParams=function(t){var r=this.extractClassifierParams(t),i=r.params,o=r.paramMappings;this._params=i,this._paramMappings=o},e.prototype.extractClassifierParams=function(t){return lP(t,this.getClassifierChannelsIn(),this.getClassifierChannelsOut())},e.prototype.extractParamsFromWeigthMap=function(t){var r=cC(t),i=r.featureExtractorMap,o=r.classifierMap;return this.faceFeatureExtractor.loadFromWeightMap(i),cP(o)},e.prototype.extractParams=function(t){var r=this.getClassifierChannelsIn(),i=this.getClassifierChannelsOut(),o=i*r+i,s=t.slice(0,t.length-o),a=t.slice(t.length-o);return this.faceFeatureExtractor.extractWeights(s),this.extractClassifierParams(a)},e}(jo),I2=["neutral","happy","sad","angry","fearful","disgusted","surprised"],uP=function(){function n(e){var t=this;if(e.length!==7)throw new Error("FaceExpressions.constructor - expected probabilities.length to be 7, have: "+e.length);I2.forEach(function(r,i){t[r]=e[i]})}return n.prototype.asSortedArray=function(){var e=this;return I2.map(function(t){return{expression:t,probability:e[t]}}).sort(function(t,r){return r.probability-t.probability})},n}(),dP=function(n){Ge(e,n);function e(t){return t===void 0&&(t=new lC),n.call(this,"FaceExpressionNet",t)||this}return e.prototype.forwardInput=function(t){var r=this;return Ee(function(){return Ao(r.runNet(t))})},e.prototype.forward=function(t){return Fe(this,void 0,void 0,function(){var r;return Le(this,function(i){switch(i.label){case 0:return r=this.forwardInput,[4,mn(t)];case 1:return[2,r.apply(this,[i.sent()])]}})})},e.prototype.predictExpressions=function(t){return Fe(this,void 0,void 0,function(){var r,i,o,s,a=this;return Le(this,function(l){switch(l.label){case 0:return[4,mn(t)];case 1:return r=l.sent(),[4,this.forwardInput(r)];case 2:return i=l.sent(),[4,Promise.all(nn(i).map(function(u){return Fe(a,void 0,void 0,function(){var f;return Le(this,function(p){switch(p.label){case 0:return[4,u.data()];case 1:return f=p.sent(),u.dispose(),[2,f]}})})}))];case 3:return o=l.sent(),i.dispose(),s=o.map(function(u){return new uP(u)}),[2,r.isBatchInput?s:s[0]]}})})},e.prototype.getDefaultModelName=function(){return"face_expression_model"},e.prototype.getClassifierChannelsIn=function(){return 256},e.prototype.getClassifierChannelsOut=function(){return 7},e}(uC);function dC(n,e){var t={expressions:e};return Object.assign({},n,t)}function hP(n){return JM(n)&&n.landmarks instanceof Of&&n.unshiftedLandmarks instanceof Of&&n.alignedRect instanceof Ui}function Vv(n,e){var t=n.detection.box,r=e.shiftBy(t.x,t.y),i=r.align(),o=n.detection.imageDims,s=new Ui(n.detection.score,i.rescale(o.reverse()),o),a={landmarks:r,unshiftedLandmarks:e,alignedRect:s};return Object.assign({},n,a)}function fP(n,e){var t=up(n,e),r=zv(n,e);function i(s,a,l){var u=r(s,a,l+"/separable_conv0"),f=r(a,a,l+"/separable_conv1"),p=t(s,a,1,l+"/expansion_conv");return{separable_conv0:u,separable_conv1:f,expansion_conv:p}}function o(s,a){var l=r(s,s,a+"/separable_conv0"),u=r(s,s,a+"/separable_conv1"),f=r(s,s,a+"/separable_conv2");return{separable_conv0:l,separable_conv1:u,separable_conv2:f}}return{extractConvParams:t,extractSeparableConvParams:r,extractReductionBlockParams:i,extractMainBlockParams:o}}function pP(n,e){var t=[],r=Do(n),i=r.extractWeights,o=r.getRemainingWeights,s=fP(i,t),a=s.extractConvParams,l=s.extractSeparableConvParams,u=s.extractReductionBlockParams,f=s.extractMainBlockParams,p=a(3,32,3,"entry_flow/conv_in"),m=u(32,64,"entry_flow/reduction_block_0"),v=u(64,128,"entry_flow/reduction_block_1"),y={conv_in:p,reduction_block_0:m,reduction_block_1:v},w={};ju(e,0,1).forEach(function(N){w["main_block_"+N]=f(128,"middle_flow/main_block_"+N)});var _=u(128,256,"exit_flow/reduction_block"),k=l(256,512,"exit_flow/separable_conv"),E={reduction_block:_,separable_conv:k};if(o().length!==0)throw new Error("weights remaing after extract: "+o().length);return{paramMappings:t,params:{entry_flow:y,middle_flow:w,exit_flow:E}}}function mP(n,e){var t=Ts(n,e),r=sC(t),i=Wv(t);function o(a){var l=i(a+"/separable_conv0"),u=i(a+"/separable_conv1"),f=r(a+"/expansion_conv");return{separable_conv0:l,separable_conv1:u,expansion_conv:f}}function s(a){var l=i(a+"/separable_conv0"),u=i(a+"/separable_conv1"),f=i(a+"/separable_conv2");return{separable_conv0:l,separable_conv1:u,separable_conv2:f}}return{extractConvParams:r,extractSeparableConvParams:i,extractReductionBlockParams:o,extractMainBlockParams:s}}function gP(n,e){var t=[],r=mP(n,t),i=r.extractConvParams,o=r.extractSeparableConvParams,s=r.extractReductionBlockParams,a=r.extractMainBlockParams,l=i("entry_flow/conv_in"),u=s("entry_flow/reduction_block_0"),f=s("entry_flow/reduction_block_1"),p={conv_in:l,reduction_block_0:u,reduction_block_1:f},m={};ju(e,0,1).forEach(function(_){m["main_block_"+_]=a("middle_flow/main_block_"+_)});var v=s("exit_flow/reduction_block"),y=o("exit_flow/separable_conv"),w={reduction_block:v,separable_conv:y};return To(n,t),{params:{entry_flow:p,middle_flow:m,exit_flow:w},paramMappings:t}}function hC(n,e,t){return Qe(Ur(n,e.filters,t,"same"),e.bias)}function T0(n,e,t){t===void 0&&(t=!0);var r=t?Ot(n):n;return r=Er(r,e.separable_conv0,[1,1]),r=Er(Ot(r),e.separable_conv1,[1,1]),r=hn(r,[3,3],[2,2],"same"),r=Qe(r,hC(n,e.expansion_conv,[2,2])),r}function vP(n,e){var t=Er(Ot(n),e.separable_conv0,[1,1]);return t=Er(Ot(t),e.separable_conv1,[1,1]),t=Er(Ot(t),e.separable_conv2,[1,1]),t=Qe(t,n),t}var xP=function(n){Ge(e,n);function e(t){var r=n.call(this,"TinyXception")||this;return r._numMainBlocks=t,r}return e.prototype.forwardInput=function(t){var r=this,i=this.params;if(!i)throw new Error("TinyXception - load model before inference");return Ee(function(){var o=t.toBatchTensor(112,!0),s=[122.782,117.001,104.298],a=nd(o,s).div(ke(256)),l=Ot(hC(a,i.entry_flow.conv_in,[2,2]));return l=T0(l,i.entry_flow.reduction_block_0,!1),l=T0(l,i.entry_flow.reduction_block_1),ju(r._numMainBlocks,0,1).forEach(function(u){l=vP(l,i.middle_flow["main_block_"+u])}),l=T0(l,i.exit_flow.reduction_block),l=Ot(Er(l,i.exit_flow.separable_conv,[1,1])),l})},e.prototype.forward=function(t){return Fe(this,void 0,void 0,function(){var r;return Le(this,function(i){switch(i.label){case 0:return r=this.forwardInput,[4,mn(t)];case 1:return[2,r.apply(this,[i.sent()])]}})})},e.prototype.getDefaultModelName=function(){return"tiny_xception_model"},e.prototype.extractParamsFromWeigthMap=function(t){return gP(t,this._numMainBlocks)},e.prototype.extractParams=function(t){return pP(t,this._numMainBlocks)},e}(jo);function yP(n){var e=[],t=Do(n),r=t.extractWeights,i=t.getRemainingWeights,o=Bv(r,e),s=o(512,1,"fc/age"),a=o(512,2,"fc/gender");if(i().length!==0)throw new Error("weights remaing after extract: "+i().length);return{paramMappings:e,params:{fc:{age:s,gender:a}}}}function bP(n){var e=[],t=Ts(n,e);function r(o){var s=t(o+"/weights",2),a=t(o+"/bias",1);return{weights:s,bias:a}}var i={fc:{age:r("fc/age"),gender:r("fc/gender")}};return To(n,e),{params:i,paramMappings:e}}var Lf;(function(n){n.FEMALE="female",n.MALE="male"})(Lf||(Lf={}));var wP=function(n){Ge(e,n);function e(t){t===void 0&&(t=new xP(2));var r=n.call(this,"AgeGenderNet")||this;return r._faceFeatureExtractor=t,r}return Object.defineProperty(e.prototype,"faceFeatureExtractor",{get:function(){return this._faceFeatureExtractor},enumerable:!0,configurable:!0}),e.prototype.runNet=function(t){var r=this,i=this.params;if(!i)throw new Error(this._name+" - load model before inference");return Ee(function(){var o=t instanceof Ff?r.faceFeatureExtractor.forwardInput(t):t,s=ed(o,[7,7],[2,2],"valid").as2D(o.shape[0],-1),a=Ti(s,i.fc.age).as1D(),l=Ti(s,i.fc.gender);return{age:a,gender:l}})},e.prototype.forwardInput=function(t){var r=this;return Ee(function(){var i=r.runNet(t),o=i.age,s=i.gender;return{age:o,gender:Ao(s)}})},e.prototype.forward=function(t){return Fe(this,void 0,void 0,function(){var r;return Le(this,function(i){switch(i.label){case 0:return r=this.forwardInput,[4,mn(t)];case 1:return[2,r.apply(this,[i.sent()])]}})})},e.prototype.predictAgeAndGender=function(t){return Fe(this,void 0,void 0,function(){var r,i,o,s,a,l,u=this;return Le(this,function(f){switch(f.label){case 0:return[4,mn(t)];case 1:return r=f.sent(),[4,this.forwardInput(r)];case 2:return i=f.sent(),o=nn(i.age),s=nn(i.gender),a=o.map(function(p,m){return{ageTensor:p,genderTensor:s[m]}}),[4,Promise.all(a.map(function(p){var m=p.ageTensor,v=p.genderTensor;return Fe(u,void 0,void 0,function(){var y,w,_,k,E;return Le(this,function(N){switch(N.label){case 0:return[4,m.data()];case 1:return y=N.sent()[0],[4,v.data()];case 2:return w=N.sent()[0],_=w>.5,k=_?Lf.MALE:Lf.FEMALE,E=_?w:1-w,m.dispose(),v.dispose(),[2,{age:y,gender:k,genderProbability:E}]}})})}))];case 3:return l=f.sent(),i.age.dispose(),i.gender.dispose(),[2,r.isBatchInput?l:l[0]]}})})},e.prototype.getDefaultModelName=function(){return"age_gender_model"},e.prototype.dispose=function(t){t===void 0&&(t=!0),this.faceFeatureExtractor.dispose(t),n.prototype.dispose.call(this,t)},e.prototype.loadClassifierParams=function(t){var r=this.extractClassifierParams(t),i=r.params,o=r.paramMappings;this._params=i,this._paramMappings=o},e.prototype.extractClassifierParams=function(t){return yP(t)},e.prototype.extractParamsFromWeigthMap=function(t){var r=cC(t),i=r.featureExtractorMap,o=r.classifierMap;return this.faceFeatureExtractor.loadFromWeightMap(i),bP(o)},e.prototype.extractParams=function(t){var r=1539,i=t.slice(0,t.length-r),o=t.slice(t.length-r);return this.faceFeatureExtractor.extractWeights(i),this.extractClassifierParams(o)},e}(jo),fC=function(n){Ge(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.postProcess=function(t,r,i){var o=i.map(function(a){var l=a.width,u=a.height,f=r/Math.max(u,l);return{width:l*f,height:u*f}}),s=o.length;return Ee(function(){var a=function(m,v){return Sr([Fi([68],m),Fi([68],v)],1).as2D(1,136).as1D()},l=function(m,v){var y=o[m],w=y.width,_=y.height;return v(w,_)?Math.abs(w-_)/2:0},u=function(m){return l(m,function(v,y){return v<y})},f=function(m){return l(m,function(v,y){return y<v})},p=t.mul(Fi([s,136],r)).sub(Sr(Array.from(Array(s),function(m,v){return a(u(v),f(v))}))).div(Sr(Array.from(Array(s),function(m,v){return a(o[v].width,o[v].height)})));return p})},e.prototype.forwardInput=function(t){var r=this;return Ee(function(){var i=r.runNet(t);return r.postProcess(i,t.inputSize,t.inputDimensions.map(function(o){var s=o[0],a=o[1];return{height:s,width:a}}))})},e.prototype.forward=function(t){return Fe(this,void 0,void 0,function(){var r;return Le(this,function(i){switch(i.label){case 0:return r=this.forwardInput,[4,mn(t)];case 1:return[2,r.apply(this,[i.sent()])]}})})},e.prototype.detectLandmarks=function(t){return Fe(this,void 0,void 0,function(){var r,i,o,s=this;return Le(this,function(a){switch(a.label){case 0:return[4,mn(t)];case 1:return r=a.sent(),i=Ee(function(){return nn(s.forwardInput(r))}),[4,Promise.all(i.map(function(l,u){return Fe(s,void 0,void 0,function(){var f,p,m,v,y;return Le(this,function(w){switch(w.label){case 0:return m=(p=Array).from,[4,l.data()];case 1:return f=m.apply(p,[w.sent()]),v=f.filter(function(_,k){return w2(k)}),y=f.filter(function(_,k){return!w2(k)}),[2,new YM(Array(68).fill(0).map(function(_,k){return new ut(v[k],y[k])}),{height:r.getInputHeight(u),width:r.getInputWidth(u)})]}})})}))];case 2:return o=a.sent(),i.forEach(function(l){return l.dispose()}),[2,r.isBatchInput?o:o[0]]}})})},e.prototype.getClassifierChannelsOut=function(){return 136},e}(uC),pC=function(n){Ge(e,n);function e(t){return t===void 0&&(t=new lC),n.call(this,"FaceLandmark68Net",t)||this}return e.prototype.getDefaultModelName=function(){return"face_landmark_68_model"},e.prototype.getClassifierChannelsIn=function(){return 256},e}(fC);function _P(n){var e=[],t=aC(n,e).extractDenseBlock3Params,r={dense0:t("dense0",!0),dense1:t("dense1"),dense2:t("dense2")};return To(n,e),{params:r,paramMappings:e}}function kP(n){var e=[],t=Do(n),r=t.extractWeights,i=t.getRemainingWeights,o=oC(r,e).extractDenseBlock3Params,s=o(3,32,"dense0",!0),a=o(32,64,"dense1"),l=o(64,128,"dense2");if(i().length!==0)throw new Error("weights remaing after extract: "+i().length);return{paramMappings:e,params:{dense0:s,dense1:a,dense2:l}}}var CP=function(n){Ge(e,n);function e(){return n.call(this,"TinyFaceFeatureExtractor")||this}return e.prototype.forwardInput=function(t){var r=this.params;if(!r)throw new Error("TinyFaceFeatureExtractor - load model before inference");return Ee(function(){var i=t.toBatchTensor(112,!0),o=[122.782,117.001,104.298],s=nd(i,o).div(ke(255)),a=j0(s,r.dense0,!0);return a=j0(a,r.dense1),a=j0(a,r.dense2),a=ed(a,[14,14],[2,2],"valid"),a})},e.prototype.forward=function(t){return Fe(this,void 0,void 0,function(){var r;return Le(this,function(i){switch(i.label){case 0:return r=this.forwardInput,[4,mn(t)];case 1:return[2,r.apply(this,[i.sent()])]}})})},e.prototype.getDefaultModelName=function(){return"face_feature_extractor_tiny_model"},e.prototype.extractParamsFromWeigthMap=function(t){return _P(t)},e.prototype.extractParams=function(t){return kP(t)},e}(jo),EP=function(n){Ge(e,n);function e(t){return t===void 0&&(t=new CP),n.call(this,"FaceLandmark68TinyNet",t)||this}return e.prototype.getDefaultModelName=function(){return"face_landmark_68_tiny_model"},e.prototype.getClassifierChannelsIn=function(){return 128},e}(fC);(function(n){Ge(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e})(pC);function NP(n,e){return Qe(Fn(n,e.weights),e.biases)}function Uv(n,e,t,r,i){i===void 0&&(i="same");var o=e.conv,s=o.filters,a=o.bias,l=Ur(n,s,t,i);return l=Qe(l,a),l=NP(l,e.scale),r?Ot(l):l}function SP(n,e){return Uv(n,e,[1,1],!0)}function mC(n,e){return Uv(n,e,[1,1],!1)}function gC(n,e){return Uv(n,e,[2,2],!0,"valid")}function IP(n,e){function t(a,l,u){var f=n(a),p=f.length/(l*u*u);if(zM(p))throw new Error("depth has to be an integer: "+p+", weights.length: "+f.length+", numFilters: "+l+", filterSize: "+u);return Ee(function(){return Cs(or(f,[l,p,u,u]),[2,3,1,0])})}function r(a,l,u,f){var p=t(a,l,u),m=Kt(n(l));return e.push({paramPath:f+"/filters"},{paramPath:f+"/bias"}),{filters:p,bias:m}}function i(a,l){var u=Kt(n(a)),f=Kt(n(a));return e.push({paramPath:l+"/weights"},{paramPath:l+"/biases"}),{weights:u,biases:f}}function o(a,l,u,f){var p=r(a,l,u,f+"/conv"),m=i(l,f+"/scale");return{conv:p,scale:m}}function s(a,l,u,f,p){p===void 0&&(p=!1);var m=o((p?.5:1)*a,l,u,f+"/conv1"),v=o(a,l,u,f+"/conv2");return{conv1:m,conv2:v}}return{extractConvLayerParams:o,extractResidualLayerParams:s}}function AP(n){var e=Do(n),t=e.extractWeights,r=e.getRemainingWeights,i=[],o=IP(t,i),s=o.extractConvLayerParams,a=o.extractResidualLayerParams,l=s(4704,32,7,"conv32_down"),u=a(9216,32,3,"conv32_1"),f=a(9216,32,3,"conv32_2"),p=a(9216,32,3,"conv32_3"),m=a(36864,64,3,"conv64_down",!0),v=a(36864,64,3,"conv64_1"),y=a(36864,64,3,"conv64_2"),w=a(36864,64,3,"conv64_3"),_=a(147456,128,3,"conv128_down",!0),k=a(147456,128,3,"conv128_1"),E=a(147456,128,3,"conv128_2"),N=a(589824,256,3,"conv256_down",!0),S=a(589824,256,3,"conv256_1"),A=a(589824,256,3,"conv256_2"),P=a(589824,256,3,"conv256_down_out"),D=Ee(function(){return Cs(bs(t(256*128),[128,256]),[1,0])});if(i.push({paramPath:"fc"}),r().length!==0)throw new Error("weights remaing after extract: "+r().length);var j={conv32_down:l,conv32_1:u,conv32_2:f,conv32_3:p,conv64_down:m,conv64_1:v,conv64_2:y,conv64_3:w,conv128_down:_,conv128_1:k,conv128_2:E,conv256_down:N,conv256_1:S,conv256_2:A,conv256_down_out:P,fc:D};return{params:j,paramMappings:i}}function RP(n,e){var t=Ts(n,e);function r(s){var a=t(s+"/scale/weights",1),l=t(s+"/scale/biases",1);return{weights:a,biases:l}}function i(s){var a=t(s+"/conv/filters",4),l=t(s+"/conv/bias",1),u=r(s);return{conv:{filters:a,bias:l},scale:u}}function o(s){return{conv1:i(s+"/conv1"),conv2:i(s+"/conv2")}}return{extractConvLayerParams:i,extractResidualLayerParams:o}}function jP(n){var e=[],t=RP(n,e),r=t.extractConvLayerParams,i=t.extractResidualLayerParams,o=r("conv32_down"),s=i("conv32_1"),a=i("conv32_2"),l=i("conv32_3"),u=i("conv64_down"),f=i("conv64_1"),p=i("conv64_2"),m=i("conv64_3"),v=i("conv128_down"),y=i("conv128_1"),w=i("conv128_2"),_=i("conv256_down"),k=i("conv256_1"),E=i("conv256_2"),N=i("conv256_down_out"),S=n.fc;if(e.push({originalPath:"fc",paramPath:"fc"}),!BM(S))throw new Error("expected weightMap[fc] to be a Tensor2D, instead have "+S);var A={conv32_down:o,conv32_1:s,conv32_2:a,conv32_3:l,conv64_down:u,conv64_1:f,conv64_2:p,conv64_3:m,conv128_down:v,conv128_1:y,conv128_2:w,conv256_down:_,conv256_1:k,conv256_2:E,conv256_down_out:N,fc:S};return To(n,e),{params:A,paramMappings:e}}function Ei(n,e){var t=SP(n,e.conv1);return t=mC(t,e.conv2),t=Qe(t,n),t=Ot(t),t}function Mh(n,e){var t=gC(n,e.conv1);t=mC(t,e.conv2);var r=ed(n,2,2,"valid"),i=Nt(r.shape),o=r.shape[3]!==t.shape[3],s=r.shape[1]!==t.shape[1]||r.shape[2]!==t.shape[2];if(s){var a=xu(t.shape);a[1]=1;var l=Nt(a);t=tn([t,l],1);var u=xu(t.shape);u[2]=1;var f=Nt(u);t=tn([t,f],2)}return r=o?tn([r,i],3):r,t=Qe(r,t),t=Ot(t),t}var TP=function(n){Ge(e,n);function e(){return n.call(this,"FaceRecognitionNet")||this}return e.prototype.forwardInput=function(t){var r=this.params;if(!r)throw new Error("FaceRecognitionNet - load model before inference");return Ee(function(){var i=t.toBatchTensor(150,!0).toFloat(),o=[122.782,117.001,104.298],s=nd(i,o).div(ke(256)),a=gC(s,r.conv32_down);a=hn(a,3,2,"valid"),a=Ei(a,r.conv32_1),a=Ei(a,r.conv32_2),a=Ei(a,r.conv32_3),a=Mh(a,r.conv64_down),a=Ei(a,r.conv64_1),a=Ei(a,r.conv64_2),a=Ei(a,r.conv64_3),a=Mh(a,r.conv128_down),a=Ei(a,r.conv128_1),a=Ei(a,r.conv128_2),a=Mh(a,r.conv256_down),a=Ei(a,r.conv256_1),a=Ei(a,r.conv256_2),a=Mh(a,r.conv256_down_out);var l=a.mean([1,2]),u=rp(l,r.fc);return u})},e.prototype.forward=function(t){return Fe(this,void 0,void 0,function(){var r;return Le(this,function(i){switch(i.label){case 0:return r=this.forwardInput,[4,mn(t)];case 1:return[2,r.apply(this,[i.sent()])]}})})},e.prototype.computeFaceDescriptor=function(t){return Fe(this,void 0,void 0,function(){var r,i,o,s=this;return Le(this,function(a){switch(a.label){case 0:return[4,mn(t)];case 1:return r=a.sent(),i=Ee(function(){return nn(s.forwardInput(r))}),[4,Promise.all(i.map(function(l){return l.data()}))];case 2:return o=a.sent(),i.forEach(function(l){return l.dispose()}),[2,r.isBatchInput?o:o[0]]}})})},e.prototype.getDefaultModelName=function(){return"face_recognition_model"},e.prototype.extractParamsFromWeigthMap=function(t){return jP(t)},e.prototype.extractParams=function(t){return AP(t)},e}(jo);function vC(n,e){var t={descriptor:e};return Object.assign({},n,t)}function xC(n,e){var t={age:e};return Object.assign({},n,t)}function yC(n,e,t){var r={gender:e,genderProbability:t};return Object.assign({},n,r)}var bC=function(){function n(e){var t=e===void 0?{}:e,r=t.minFaceSize,i=t.scaleFactor,o=t.maxNumScales,s=t.scoreThresholds,a=t.scaleSteps;if(this._name="MtcnnOptions",this._minFaceSize=r||20,this._scaleFactor=i||.709,this._maxNumScales=o||10,this._scoreThresholds=s||[.6,.7,.7],this._scaleSteps=a,typeof this._minFaceSize!="number"||this._minFaceSize<0)throw new Error(this._name+" - expected minFaceSize to be a number > 0");if(typeof this._scaleFactor!="number"||this._scaleFactor<=0||this._scaleFactor>=1)throw new Error(this._name+" - expected scaleFactor to be a number between 0 and 1");if(typeof this._maxNumScales!="number"||this._maxNumScales<0)throw new Error(this._name+" - expected maxNumScales to be a number > 0");if(!Array.isArray(this._scoreThresholds)||this._scoreThresholds.length!==3||this._scoreThresholds.some(function(l){return typeof l!="number"}))throw new Error(this._name+" - expected scoreThresholds to be an array of numbers of length 3");if(this._scaleSteps&&(!Array.isArray(this._scaleSteps)||this._scaleSteps.some(function(l){return typeof l!="number"})))throw new Error(this._name+" - expected scaleSteps to be an array of numbers")}return Object.defineProperty(n.prototype,"minFaceSize",{get:function(){return this._minFaceSize},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"scaleFactor",{get:function(){return this._scaleFactor},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"maxNumScales",{get:function(){return this._maxNumScales},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"scoreThresholds",{get:function(){return this._scoreThresholds},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"scaleSteps",{get:function(){return this._scaleSteps},enumerable:!0,configurable:!0}),n}();function DP(n,e){function t(l,u){var f=or(n(9*l),[3,3,l,1]),p=Kt(n(l)),m=Kt(n(l)),v=Kt(n(l)),y=Kt(n(l));return e.push({paramPath:u+"/filters"},{paramPath:u+"/batch_norm_scale"},{paramPath:u+"/batch_norm_offset"},{paramPath:u+"/batch_norm_mean"},{paramPath:u+"/batch_norm_variance"}),{filters:f,batch_norm_scale:p,batch_norm_offset:m,batch_norm_mean:v,batch_norm_variance:y}}function r(l,u,f,p,m){var v=or(n(l*u*f*f),[f,f,l,u]),y=Kt(n(u));return e.push({paramPath:p+"/filters"},{paramPath:p+"/"+(m?"batch_norm_offset":"bias")}),{filters:v,bias:y}}function i(l,u,f,p){var m=r(l,u,f,p,!0),v=m.filters,y=m.bias;return{filters:v,batch_norm_offset:y}}function o(l,u,f){var p=t(l,f+"/depthwise_conv"),m=i(l,u,1,f+"/pointwise_conv");return{depthwise_conv:p,pointwise_conv:m}}function s(){var l=i(3,32,3,"mobilenetv1/conv_0"),u=o(32,64,"mobilenetv1/conv_1"),f=o(64,128,"mobilenetv1/conv_2"),p=o(128,128,"mobilenetv1/conv_3"),m=o(128,256,"mobilenetv1/conv_4"),v=o(256,256,"mobilenetv1/conv_5"),y=o(256,512,"mobilenetv1/conv_6"),w=o(512,512,"mobilenetv1/conv_7"),_=o(512,512,"mobilenetv1/conv_8"),k=o(512,512,"mobilenetv1/conv_9"),E=o(512,512,"mobilenetv1/conv_10"),N=o(512,512,"mobilenetv1/conv_11"),S=o(512,1024,"mobilenetv1/conv_12"),A=o(1024,1024,"mobilenetv1/conv_13");return{conv_0:l,conv_1:u,conv_2:f,conv_3:p,conv_4:m,conv_5:v,conv_6:y,conv_7:w,conv_8:_,conv_9:k,conv_10:E,conv_11:N,conv_12:S,conv_13:A}}function a(){var l=i(1024,256,1,"prediction_layer/conv_0"),u=i(256,512,3,"prediction_layer/conv_1"),f=i(512,128,1,"prediction_layer/conv_2"),p=i(128,256,3,"prediction_layer/conv_3"),m=i(256,128,1,"prediction_layer/conv_4"),v=i(128,256,3,"prediction_layer/conv_5"),y=i(256,64,1,"prediction_layer/conv_6"),w=i(64,128,3,"prediction_layer/conv_7"),_=r(512,12,1,"prediction_layer/box_predictor_0/box_encoding_predictor"),k=r(512,9,1,"prediction_layer/box_predictor_0/class_predictor"),E=r(1024,24,1,"prediction_layer/box_predictor_1/box_encoding_predictor"),N=r(1024,18,1,"prediction_layer/box_predictor_1/class_predictor"),S=r(512,24,1,"prediction_layer/box_predictor_2/box_encoding_predictor"),A=r(512,18,1,"prediction_layer/box_predictor_2/class_predictor"),P=r(256,24,1,"prediction_layer/box_predictor_3/box_encoding_predictor"),D=r(256,18,1,"prediction_layer/box_predictor_3/class_predictor"),j=r(256,24,1,"prediction_layer/box_predictor_4/box_encoding_predictor"),T=r(256,18,1,"prediction_layer/box_predictor_4/class_predictor"),M=r(128,24,1,"prediction_layer/box_predictor_5/box_encoding_predictor"),L=r(128,18,1,"prediction_layer/box_predictor_5/class_predictor"),B={box_encoding_predictor:_,class_predictor:k},F={box_encoding_predictor:E,class_predictor:N},K={box_encoding_predictor:S,class_predictor:A},te={box_encoding_predictor:P,class_predictor:D},se={box_encoding_predictor:j,class_predictor:T},q={box_encoding_predictor:M,class_predictor:L};return{conv_0:l,conv_1:u,conv_2:f,conv_3:p,conv_4:m,conv_5:v,conv_6:y,conv_7:w,box_predictor_0:B,box_predictor_1:F,box_predictor_2:K,box_predictor_3:te,box_predictor_4:se,box_predictor_5:q}}return{extractMobilenetV1Params:s,extractPredictionLayerParams:a}}function MP(n){var e=[],t=Do(n),r=t.extractWeights,i=t.getRemainingWeights,o=DP(r,e),s=o.extractMobilenetV1Params,a=o.extractPredictionLayerParams,l=s(),u=a(),f=ov(r(5118*4),[1,5118,4]),p={extra_dim:f};if(e.push({paramPath:"output_layer/extra_dim"}),i().length!==0)throw new Error("weights remaing after extract: "+i().length);return{params:{mobilenetv1:l,prediction_layer:u,output_layer:p},paramMappings:e}}function PP(n,e){var t=Ts(n,e);function r(u,f,p){var m=t(u+"/Conv2d_"+f+"_pointwise/weights",4,p+"/filters"),v=t(u+"/Conv2d_"+f+"_pointwise/convolution_bn_offset",1,p+"/batch_norm_offset");return{filters:m,batch_norm_offset:v}}function i(u){var f="mobilenetv1/conv_"+u,p="MobilenetV1/Conv2d_"+u+"_depthwise",m=f+"/depthwise_conv",v=f+"/pointwise_conv",y=t(p+"/depthwise_weights",4,m+"/filters"),w=t(p+"/BatchNorm/gamma",1,m+"/batch_norm_scale"),_=t(p+"/BatchNorm/beta",1,m+"/batch_norm_offset"),k=t(p+"/BatchNorm/moving_mean",1,m+"/batch_norm_mean"),E=t(p+"/BatchNorm/moving_variance",1,m+"/batch_norm_variance");return{depthwise_conv:{filters:y,batch_norm_scale:w,batch_norm_offset:_,batch_norm_mean:k,batch_norm_variance:E},pointwise_conv:r("MobilenetV1",u,v)}}function o(){return{conv_0:r("MobilenetV1",0,"mobilenetv1/conv_0"),conv_1:i(1),conv_2:i(2),conv_3:i(3),conv_4:i(4),conv_5:i(5),conv_6:i(6),conv_7:i(7),conv_8:i(8),conv_9:i(9),conv_10:i(10),conv_11:i(11),conv_12:i(12),conv_13:i(13)}}function s(u,f){var p=t(u+"/weights",4,f+"/filters"),m=t(u+"/biases",1,f+"/bias");return{filters:p,bias:m}}function a(u){var f=s("Prediction/BoxPredictor_"+u+"/BoxEncodingPredictor","prediction_layer/box_predictor_"+u+"/box_encoding_predictor"),p=s("Prediction/BoxPredictor_"+u+"/ClassPredictor","prediction_layer/box_predictor_"+u+"/class_predictor");return{box_encoding_predictor:f,class_predictor:p}}function l(){return{conv_0:r("Prediction",0,"prediction_layer/conv_0"),conv_1:r("Prediction",1,"prediction_layer/conv_1"),conv_2:r("Prediction",2,"prediction_layer/conv_2"),conv_3:r("Prediction",3,"prediction_layer/conv_3"),conv_4:r("Prediction",4,"prediction_layer/conv_4"),conv_5:r("Prediction",5,"prediction_layer/conv_5"),conv_6:r("Prediction",6,"prediction_layer/conv_6"),conv_7:r("Prediction",7,"prediction_layer/conv_7"),box_predictor_0:a(0),box_predictor_1:a(1),box_predictor_2:a(2),box_predictor_3:a(3),box_predictor_4:a(4),box_predictor_5:a(5)}}return{extractMobilenetV1Params:o,extractPredictionLayerParams:l}}function OP(n){var e=[],t=PP(n,e),r=t.extractMobilenetV1Params,i=t.extractPredictionLayerParams,o=n["Output/extra_dim"];if(e.push({originalPath:"Output/extra_dim",paramPath:"output_layer/extra_dim"}),!ap(o))throw new Error("expected weightMap['Output/extra_dim'] to be a Tensor3D, instead have "+o);var s={mobilenetv1:r(),prediction_layer:i(),output_layer:{extra_dim:o}};return To(n,e),{params:s,paramMappings:e}}function Si(n,e,t){return Ee(function(){var r=Ur(n,e.filters,t,"same");return r=Qe(r,e.batch_norm_offset),gv(r,0,6)})}var FP=.0010000000474974513;function LP(n,e,t){return Ee(function(){var r=np(n,e.filters,t,"same");return r=p4(r,e.batch_norm_mean,e.batch_norm_variance,e.batch_norm_offset,e.batch_norm_scale,FP),gv(r,0,6)})}function BP(n){return[2,4,6,12].some(function(e){return e===n})?[2,2]:[1,1]}function zP(n,e){return Ee(function(){var t=null,r=Si(n,e.conv_0,[2,2]),i=[e.conv_1,e.conv_2,e.conv_3,e.conv_4,e.conv_5,e.conv_6,e.conv_7,e.conv_8,e.conv_9,e.conv_10,e.conv_11,e.conv_12,e.conv_13];if(i.forEach(function(o,s){var a=s+1,l=BP(a);r=LP(r,o.depthwise_conv,l),r=Si(r,o.pointwise_conv,[1,1]),a===11&&(t=r)}),t===null)throw new Error("mobileNetV1 - output of conv layer 11 is null");return{out:r,conv11:t}})}function WP(n,e,t,r,i){var o=n.shape[0],s=Math.min(t,o),a=e.map(function(f,p){return{score:f,boxIndex:p}}).filter(function(f){return f.score>i}).sort(function(f,p){return p.score-f.score}),l=function(f){return f<=r?1:0},u=[];return a.forEach(function(f){if(!(u.length>=s)){for(var p=f.score,m=u.length-1;m>=0;--m){var v=VP(n,f.boxIndex,u[m]);if(v!==0&&(f.score*=l(v),f.score<=i))break}p===f.score&&u.push(f.boxIndex)}}),u}function VP(n,e,t){var r=n.arraySync(),i=Math.min(r[e][0],r[e][2]),o=Math.min(r[e][1],r[e][3]),s=Math.max(r[e][0],r[e][2]),a=Math.max(r[e][1],r[e][3]),l=Math.min(r[t][0],r[t][2]),u=Math.min(r[t][1],r[t][3]),f=Math.max(r[t][0],r[t][2]),p=Math.max(r[t][1],r[t][3]),m=(s-i)*(a-o),v=(f-l)*(p-u);if(m<=0||v<=0)return 0;var y=Math.max(i,l),w=Math.max(o,u),_=Math.min(s,f),k=Math.min(a,p),E=Math.max(_-y,0)*Math.max(k-w,0);return E/(m+v-E)}function UP(n){var e=nn(Cs(n,[1,0])),t=[on(e[2],e[0]),on(e[3],e[1])],r=[Qe(e[0],oi(t[0],ke(2))),Qe(e[1],oi(t[1],ke(2)))];return{sizes:t,centers:r}}function HP(n,e){var t=UP(n),r=t.sizes,i=t.centers,o=nn(Cs(e,[1,0])),s=oi(Fn(bg(oi(o[2],ke(5))),r[0]),ke(2)),a=Qe(Fn(oi(o[0],ke(10)),r[0]),i[0]),l=oi(Fn(bg(oi(o[3],ke(5))),r[1]),ke(2)),u=Qe(Fn(oi(o[1],ke(10)),r[1]),i[1]);return Cs(Sr([on(a,s),on(u,l),Qe(a,s),Qe(u,l)]),[1,0])}function GP(n,e,t){return Ee(function(){var r=n.shape[0],i=HP(li(Fl(t.extra_dim,[r,1,1]),[-1,4]),li(n,[-1,4]));i=li(i,[r,i.shape[0]/r,4]);var o=u4(Bi(e,[0,0,1],[-1,-1,-1])),s=Bi(o,[0,0,0],[-1,-1,1]);s=li(s,[r,s.shape[1]]);var a=nn(i),l=nn(s);return{boxes:a,scores:l}})}function El(n,e){return Ee(function(){var t=n.shape[0],r=li(ui(n,e.box_encoding_predictor),[t,-1,1,4]),i=li(ui(n,e.class_predictor),[t,-1,3]);return{boxPredictionEncoding:r,classPrediction:i}})}function $P(n,e,t){return Ee(function(){var r=Si(n,t.conv_0,[1,1]),i=Si(r,t.conv_1,[2,2]),o=Si(i,t.conv_2,[1,1]),s=Si(o,t.conv_3,[2,2]),a=Si(s,t.conv_4,[1,1]),l=Si(a,t.conv_5,[2,2]),u=Si(l,t.conv_6,[1,1]),f=Si(u,t.conv_7,[2,2]),p=El(e,t.box_predictor_0),m=El(n,t.box_predictor_1),v=El(i,t.box_predictor_2),y=El(s,t.box_predictor_3),w=El(l,t.box_predictor_4),_=El(f,t.box_predictor_5),k=tn([p.boxPredictionEncoding,m.boxPredictionEncoding,v.boxPredictionEncoding,y.boxPredictionEncoding,w.boxPredictionEncoding,_.boxPredictionEncoding],1),E=tn([p.classPrediction,m.classPrediction,v.classPrediction,y.classPrediction,w.classPrediction,_.classPrediction],1);return{boxPredictions:k,classPredictions:E}})}var Hv=function(){function n(e){var t=e===void 0?{}:e,r=t.minConfidence,i=t.maxResults;if(this._name="SsdMobilenetv1Options",this._minConfidence=r||.5,this._maxResults=i||100,typeof this._minConfidence!="number"||this._minConfidence<=0||this._minConfidence>=1)throw new Error(this._name+" - expected minConfidence to be a number between 0 and 1");if(typeof this._maxResults!="number")throw new Error(this._name+" - expected maxResults to be a number")}return Object.defineProperty(n.prototype,"minConfidence",{get:function(){return this._minConfidence},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"maxResults",{get:function(){return this._maxResults},enumerable:!0,configurable:!0}),n}(),wC=function(n){Ge(e,n);function e(){return n.call(this,"SsdMobilenetv1")||this}return e.prototype.forwardInput=function(t){var r=this.params;if(!r)throw new Error("SsdMobilenetv1 - load model before inference");return Ee(function(){var i=t.toBatchTensor(512,!1).toFloat(),o=on(Fn(i,ke(.007843137718737125)),ke(1)),s=zP(o,r.mobilenetv1),a=$P(s.out,s.conv11,r.prediction_layer),l=a.boxPredictions,u=a.classPredictions;return GP(l,u,r.output_layer)})},e.prototype.forward=function(t){return Fe(this,void 0,void 0,function(){var r;return Le(this,function(i){switch(i.label){case 0:return r=this.forwardInput,[4,mn(t)];case 1:return[2,r.apply(this,[i.sent()])]}})})},e.prototype.locateFaces=function(t,r){return r===void 0&&(r={}),Fe(this,void 0,void 0,function(){var i,o,s,a,l,u,f,p,m,v,y,w,_,k,E,N,S,A,P,D,j;return Le(this,function(T){switch(T.label){case 0:return i=new Hv(r),o=i.maxResults,s=i.minConfidence,[4,mn(t)];case 1:for(a=T.sent(),l=this.forwardInput(a),u=l.boxes,f=l.scores,p=u[0],m=f[0],v=1;v<u.length;v++)u[v].dispose(),f[v].dispose();return _=(w=Array).from,[4,m.data()];case 2:return y=_.apply(w,[T.sent()]),k=.5,E=WP(p,y,o,k,s),N=a.getReshapedInputDimensions(0),S=a.inputSize,A=S/N.width,P=S/N.height,D=p.arraySync(),j=E.map(function(M){var L=[Math.max(0,D[M][0]),Math.min(1,D[M][2])].map(function(q){return q*P}),B=L[0],F=L[1],K=[Math.max(0,D[M][1]),Math.min(1,D[M][3])].map(function(q){return q*A}),te=K[0],se=K[1];return new Ui(y[M],new Dv(te,B,se-te,F-B),{height:a.getInputHeight(0),width:a.getInputWidth(0)})}),p.dispose(),m.dispose(),[2,j]}})})},e.prototype.getDefaultModelName=function(){return"ssd_mobilenetv1_model"},e.prototype.extractParamsFromWeigthMap=function(t){return OP(t)},e.prototype.extractParams=function(t){return MP(t)},e}(jo);(function(n){Ge(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e})(wC);var qP=.4,KP=[new ut(.738768,.874946),new ut(2.42204,2.65704),new ut(4.30971,7.04493),new ut(10.246,4.59428),new ut(12.6868,11.8741)],XP=[new ut(1.603231,2.094468),new ut(6.041143,7.080126),new ut(2.882459,3.518061),new ut(4.266906,5.178857),new ut(9.041765,10.66308)],YP=[117.001,114.697,97.404],JP="tiny_yolov2_model",QP="tiny_yolov2_separable_conv_model",Ph=function(n){return typeof n=="number"};function ZP(n){if(!n)throw new Error("invalid config: "+n);if(typeof n.withSeparableConvs!="boolean")throw new Error("config.withSeparableConvs has to be a boolean, have: "+n.withSeparableConvs);if(!Ph(n.iouThreshold)||n.iouThreshold<0||n.iouThreshold>1)throw new Error("config.iouThreshold has to be a number between [0, 1], have: "+n.iouThreshold);if(!Array.isArray(n.classes)||!n.classes.length||!n.classes.every(function(e){return typeof e=="string"}))throw new Error("config.classes has to be an array class names: string[], have: "+JSON.stringify(n.classes));if(!Array.isArray(n.anchors)||!n.anchors.length||!n.anchors.map(function(e){return e||{}}).every(function(e){return Ph(e.x)&&Ph(e.y)}))throw new Error("config.anchors has to be an array of { x: number, y: number }, have: "+JSON.stringify(n.anchors));if(n.meanRgb&&(!Array.isArray(n.meanRgb)||n.meanRgb.length!==3||!n.meanRgb.every(Ph)))throw new Error("config.meanRgb has to be an array of shape [number, number, number], have: "+JSON.stringify(n.meanRgb))}function Gv(n){return Ee(function(){var e=Fn(n,ke(.10000000149011612));return Qe(Ot(on(n,e)),e)})}function ss(n,e){return Ee(function(){var t=ja(n,[[0,0],[1,1],[1,1],[0,0]]);return t=Ur(t,e.conv.filters,[1,1],"valid"),t=on(t,e.bn.sub),t=Fn(t,e.bn.truediv),t=Qe(t,e.conv.bias),Gv(t)})}function as(n,e){return Ee(function(){var t=ja(n,[[0,0],[1,1],[1,1],[0,0]]);return t=bv(t,e.depthwise_filter,e.pointwise_filter,[1,1],"valid"),t=Qe(t,e.bias),Gv(t)})}function eO(n,e){var t=up(n,e);function r(s,a){var l=Kt(n(s)),u=Kt(n(s));return e.push({paramPath:a+"/sub"},{paramPath:a+"/truediv"}),{sub:l,truediv:u}}function i(s,a,l){var u=t(s,a,3,l+"/conv"),f=r(a,l+"/bn");return{conv:u,bn:f}}var o=zv(n,e);return{extractConvParams:t,extractConvWithBatchNormParams:i,extractSeparableConvParams:o}}function tO(n,e,t,r){var i=Do(n),o=i.extractWeights,s=i.getRemainingWeights,a=[],l=eO(o,a),u=l.extractConvParams,f=l.extractConvWithBatchNormParams,p=l.extractSeparableConvParams,m;if(e.withSeparableConvs){var v=r[0],y=r[1],w=r[2],_=r[3],k=r[4],E=r[5],N=r[6],S=r[7],A=r[8],P=e.isFirstLayerConv2d?u(v,y,3,"conv0"):p(v,y,"conv0"),D=p(y,w,"conv1"),j=p(w,_,"conv2"),T=p(_,k,"conv3"),M=p(k,E,"conv4"),L=p(E,N,"conv5"),B=S?p(N,S,"conv6"):void 0,F=A?p(S,A,"conv7"):void 0,K=u(A||S||N,5*t,1,"conv8");m={conv0:P,conv1:D,conv2:j,conv3:T,conv4:M,conv5:L,conv6:B,conv7:F,conv8:K}}else{var v=r[0],y=r[1],w=r[2],_=r[3],k=r[4],E=r[5],N=r[6],S=r[7],A=r[8],P=f(v,y,"conv0"),D=f(y,w,"conv1"),j=f(w,_,"conv2"),T=f(_,k,"conv3"),M=f(k,E,"conv4"),L=f(E,N,"conv5"),B=f(N,S,"conv6"),F=f(S,A,"conv7"),K=u(A,5*t,1,"conv8");m={conv0:P,conv1:D,conv2:j,conv3:T,conv4:M,conv5:L,conv6:B,conv7:F,conv8:K}}if(s().length!==0)throw new Error("weights remaing after extract: "+s().length);return{params:m,paramMappings:a}}function nO(n,e){var t=Ts(n,e);function r(a){var l=t(a+"/sub",1),u=t(a+"/truediv",1);return{sub:l,truediv:u}}function i(a){var l=t(a+"/filters",4),u=t(a+"/bias",1);return{filters:l,bias:u}}function o(a){var l=i(a+"/conv"),u=r(a+"/bn");return{conv:l,bn:u}}var s=Wv(t);return{extractConvParams:i,extractConvWithBatchNormParams:o,extractSeparableConvParams:s}}function rO(n,e){var t=[],r=nO(n,t),i=r.extractConvParams,o=r.extractConvWithBatchNormParams,s=r.extractSeparableConvParams,a;if(e.withSeparableConvs){var l=e.filterSizes&&e.filterSizes.length||9;a={conv0:e.isFirstLayerConv2d?i("conv0"):s("conv0"),conv1:s("conv1"),conv2:s("conv2"),conv3:s("conv3"),conv4:s("conv4"),conv5:s("conv5"),conv6:l>7?s("conv6"):void 0,conv7:l>8?s("conv7"):void 0,conv8:i("conv8")}}else a={conv0:o("conv0"),conv1:o("conv1"),conv2:o("conv2"),conv3:o("conv3"),conv4:o("conv4"),conv5:o("conv5"),conv6:o("conv6"),conv7:o("conv7"),conv8:i("conv8")};return To(n,t),{params:a,paramMappings:t}}var A2;(function(n){n[n.XS=224]="XS",n[n.SM=320]="SM",n[n.MD=416]="MD",n[n.LG=608]="LG"})(A2||(A2={}));var $v=function(){function n(e){var t=e===void 0?{}:e,r=t.inputSize,i=t.scoreThreshold;if(this._name="TinyYolov2Options",this._inputSize=r||416,this._scoreThreshold=i||.5,typeof this._inputSize!="number"||this._inputSize%32!==0)throw new Error(this._name+" - expected inputSize to be a number divisible by 32");if(typeof this._scoreThreshold!="number"||this._scoreThreshold<=0||this._scoreThreshold>=1)throw new Error(this._name+" - expected scoreThreshold to be a number between 0 and 1")}return Object.defineProperty(n.prototype,"inputSize",{get:function(){return this._inputSize},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"scoreThreshold",{get:function(){return this._scoreThreshold},enumerable:!0,configurable:!0}),n}(),_C=function(n){Ge(e,n);function e(t){var r=n.call(this,"TinyYolov2")||this;return ZP(t),r._config=t,r}return Object.defineProperty(e.prototype,"config",{get:function(){return this._config},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"withClassScores",{get:function(){return this.config.withClassScores||this.config.classes.length>1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"boxEncodingSize",{get:function(){return 5+(this.withClassScores?this.config.classes.length:0)},enumerable:!0,configurable:!0}),e.prototype.runTinyYolov2=function(t,r){var i=ss(t,r.conv0);return i=hn(i,[2,2],[2,2],"same"),i=ss(i,r.conv1),i=hn(i,[2,2],[2,2],"same"),i=ss(i,r.conv2),i=hn(i,[2,2],[2,2],"same"),i=ss(i,r.conv3),i=hn(i,[2,2],[2,2],"same"),i=ss(i,r.conv4),i=hn(i,[2,2],[2,2],"same"),i=ss(i,r.conv5),i=hn(i,[2,2],[1,1],"same"),i=ss(i,r.conv6),i=ss(i,r.conv7),ui(i,r.conv8,"valid",!1)},e.prototype.runMobilenet=function(t,r){var i=this.config.isFirstLayerConv2d?Gv(ui(t,r.conv0,"valid",!1)):as(t,r.conv0);return i=hn(i,[2,2],[2,2],"same"),i=as(i,r.conv1),i=hn(i,[2,2],[2,2],"same"),i=as(i,r.conv2),i=hn(i,[2,2],[2,2],"same"),i=as(i,r.conv3),i=hn(i,[2,2],[2,2],"same"),i=as(i,r.conv4),i=hn(i,[2,2],[2,2],"same"),i=as(i,r.conv5),i=hn(i,[2,2],[1,1],"same"),i=r.conv6?as(i,r.conv6):i,i=r.conv7?as(i,r.conv7):i,ui(i,r.conv8,"valid",!1)},e.prototype.forwardInput=function(t,r){var i=this,o=this.params;if(!o)throw new Error("TinyYolov2 - load model before inference");return Ee(function(){var s=t.toBatchTensor(r,!1).toFloat();return s=i.config.meanRgb?nd(s,i.config.meanRgb):s,s=s.div(ke(256)),i.config.withSeparableConvs?i.runMobilenet(s,o):i.runTinyYolov2(s,o)})},e.prototype.forward=function(t,r){return Fe(this,void 0,void 0,function(){var i;return Le(this,function(o){switch(o.label){case 0:return i=this.forwardInput,[4,mn(t)];case 1:return[4,i.apply(this,[o.sent(),r])];case 2:return[2,o.sent()]}})})},e.prototype.detect=function(t,r){return r===void 0&&(r={}),Fe(this,void 0,void 0,function(){var i,o,s,a,l,u,f,p,m,v,y,w,_,k,E=this;return Le(this,function(N){switch(N.label){case 0:return i=new $v(r),o=i.inputSize,s=i.scoreThreshold,[4,mn(t)];case 1:return a=N.sent(),[4,this.forwardInput(a,o)];case 2:return l=N.sent(),u=Ee(function(){return nn(l)[0].expandDims()}),f={width:a.getInputWidth(0),height:a.getInputHeight(0)},[4,this.extractBoxes(u,a.getReshapedInputDimensions(0),s)];case 3:return p=N.sent(),l.dispose(),u.dispose(),m=p.map(function(S){return S.box}),v=p.map(function(S){return S.score}),y=p.map(function(S){return S.classScore}),w=p.map(function(S){return E.config.classes[S.label]}),_=Tu(m.map(function(S){return S.rescale(o)}),v,this.config.iouThreshold,!0),k=_.map(function(S){return new K4(v[S],y[S],w[S],m[S],f)}),[2,k]}})})},e.prototype.getDefaultModelName=function(){return""},e.prototype.extractParamsFromWeigthMap=function(t){return rO(t,this.config)},e.prototype.extractParams=function(t){var r=this.config.filterSizes||e.DEFAULT_FILTER_SIZES,i=r?r.length:void 0;if(i!==7&&i!==8&&i!==9)throw new Error("TinyYolov2 - expected 7 | 8 | 9 convolutional filters, but found "+i+" filterSizes in config");return tO(t,this.config,this.boxEncodingSize,r)},e.prototype.extractBoxes=function(t,r,i){return Fe(this,void 0,void 0,function(){var o,s,a,l,u,f,p,m,v,y,w,_,k,E,N,S,A,P,D,j,T,M,L,B,F,K,te,se,q,$=this;return Le(this,function(Y){switch(Y.label){case 0:return o=r.width,s=r.height,a=Math.max(o,s),l=a/o,u=a/s,f=t.shape[1],p=this.config.anchors.length,m=Ee(function(){var Q=t.reshape([f,f,p,$.boxEncodingSize]),H=Q.slice([0,0,0,0],[f,f,p,4]),ne=Q.slice([0,0,0,4],[f,f,p,1]),fe=$.withClassScores?Ao(Q.slice([0,0,0,5],[f,f,p,$.config.classes.length]),3):ke(0);return[H,ne,fe]}),v=m[0],y=m[1],w=m[2],_=[],[4,y.array()];case 1:return k=Y.sent(),[4,v.array()];case 2:E=Y.sent(),N=0,Y.label=3;case 3:if(!(N<f))return[3,12];S=0,Y.label=4;case 4:if(!(S<f))return[3,11];A=0,Y.label=5;case 5:return A<p?(P=R0(k[N][S][A][0]),!i||P>i?(D=(S+R0(E[N][S][A][0]))/f*l,j=(N+R0(E[N][S][A][1]))/f*u,T=Math.exp(E[N][S][A][2])*this.config.anchors[A].x/f*l,M=Math.exp(E[N][S][A][3])*this.config.anchors[A].y/f*u,L=D-T/2,B=j-M/2,F={row:N,col:S,anchor:A},this.withClassScores?[4,this.extractPredictedClass(w,F)]:[3,7]):[3,9]):[3,10];case 6:return q=Y.sent(),[3,8];case 7:q={classScore:1,label:0},Y.label=8;case 8:K=q,te=K.classScore,se=K.label,_.push(Mn({box:new lp(L,B,L+T,B+M),score:P,classScore:P*te,label:se},F)),Y.label=9;case 9:return A++,[3,5];case 10:return S++,[3,4];case 11:return N++,[3,3];case 12:return v.dispose(),y.dispose(),w.dispose(),[2,_]}})})},e.prototype.extractPredictedClass=function(t,r){return Fe(this,void 0,void 0,function(){var i,o,s,a;return Le(this,function(l){switch(l.label){case 0:return i=r.row,o=r.col,s=r.anchor,[4,t.array()];case 1:return a=l.sent(),[2,Array(this.config.classes.length).fill(0).map(function(u,f){return a[i][o][s][f]}).map(function(u,f){return{classScore:u,label:f}}).reduce(function(u,f){return u.classScore>f.classScore?u:f})]}})})},e.DEFAULT_FILTER_SIZES=[3,16,32,64,128,256,512,1024,1024],e}(jo),iO=function(n){Ge(e,n);function e(t){t===void 0&&(t=!0);var r=this,i=Object.assign({},{withSeparableConvs:t,iouThreshold:qP,classes:["face"]},t?{anchors:XP,meanRgb:YP}:{anchors:KP,withClassScores:!0});return r=n.call(this,i)||this,r}return Object.defineProperty(e.prototype,"withSeparableConvs",{get:function(){return this.config.withSeparableConvs},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"anchors",{get:function(){return this.config.anchors},enumerable:!0,configurable:!0}),e.prototype.locateFaces=function(t,r){return Fe(this,void 0,void 0,function(){var i;return Le(this,function(o){switch(o.label){case 0:return[4,this.detect(t,r)];case 1:return i=o.sent(),[2,i.map(function(s){return new Ui(s.score,s.relativeBox,{width:s.imageWidth,height:s.imageHeight})})]}})})},e.prototype.getDefaultModelName=function(){return this.withSeparableConvs?QP:JP},e.prototype.extractParamsFromWeigthMap=function(t){return n.prototype.extractParamsFromWeigthMap.call(this,t)},e}(_C),oO=function(n){Ge(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t._name="TinyFaceDetectorOptions",t}return e}($v),rd=function(){function n(){}return n.prototype.then=function(e){return Fe(this,void 0,void 0,function(){var t;return Le(this,function(r){switch(r.label){case 0:return t=e,[4,this.run()];case 1:return[2,t.apply(void 0,[r.sent()])]}})})},n.prototype.run=function(){return Fe(this,void 0,void 0,function(){return Le(this,function(e){throw new Error("ComposableTask - run is not implemented")})})},n}();function dp(n,e,t,r,i){return i===void 0&&(i=function(o){var s=o.alignedRect;return s}),Fe(this,void 0,void 0,function(){var o,s,a,l,u;return Le(this,function(f){switch(f.label){case 0:return o=n.map(function(p){return hP(p)?i(p):p.detection}),a=r,a?[3,5]:e instanceof Pt?[4,Lv(e,o)]:[3,2];case 1:return l=f.sent(),[3,4];case 2:return[4,Fv(e,o)];case 3:l=f.sent(),f.label=4;case 4:a=l,f.label=5;case 5:return s=a,[4,t(s)];case 6:return u=f.sent(),s.forEach(function(p){return p instanceof Pt&&p.dispose()}),[2,u]}})})}function qv(n,e,t,r,i){return Fe(this,void 0,void 0,function(){var o=this;return Le(this,function(s){return[2,dp([n],e,function(a){return Fe(o,void 0,void 0,function(){return Le(this,function(l){return[2,t(a[0])]})})},r,i)]})})}function sO(n){return Ee(function(){return Sr(nn(n,3).reverse(),3)})}var Oh=2,Bf=12;function aO(n,e){var t=up(n,e),r=Bv(n,e);function i(u,f){var p=Kt(n(u));return e.push({paramPath:f}),p}function o(u,f,p){p===void 0&&(p=!1);var m=t(u[0],u[1],3,f+"/conv1"),v=i(u[1],f+"/prelu1_alpha"),y=t(u[1],u[2],3,f+"/conv2"),w=i(u[2],f+"/prelu2_alpha"),_=t(u[2],u[3],p?2:3,f+"/conv3"),k=i(u[3],f+"/prelu3_alpha");return{conv1:m,prelu1_alpha:v,conv2:y,prelu2_alpha:w,conv3:_,prelu3_alpha:k}}function s(){var u=o([3,10,16,32],"pnet"),f=t(32,2,1,"pnet/conv4_1"),p=t(32,4,1,"pnet/conv4_2");return Mn(Mn({},u),{conv4_1:f,conv4_2:p})}function a(){var u=o([3,28,48,64],"rnet",!0),f=r(576,128,"rnet/fc1"),p=i(128,"rnet/prelu4_alpha"),m=r(128,2,"rnet/fc2_1"),v=r(128,4,"rnet/fc2_2");return Mn(Mn({},u),{fc1:f,prelu4_alpha:p,fc2_1:m,fc2_2:v})}function l(){var u=o([3,32,64,64],"onet"),f=t(64,128,2,"onet/conv4"),p=i(128,"onet/prelu4_alpha"),m=r(1152,256,"onet/fc1"),v=i(256,"onet/prelu5_alpha"),y=r(256,2,"onet/fc2_1"),w=r(256,4,"onet/fc2_2"),_=r(256,10,"onet/fc2_3");return Mn(Mn({},u),{conv4:f,prelu4_alpha:p,fc1:m,prelu5_alpha:v,fc2_1:y,fc2_2:w,fc2_3:_})}return{extractPNetParams:s,extractRNetParams:a,extractONetParams:l}}function lO(n){var e=Do(n),t=e.extractWeights,r=e.getRemainingWeights,i=[],o=aO(t,i),s=o.extractPNetParams,a=o.extractRNetParams,l=o.extractONetParams,u=s(),f=a(),p=l();if(r().length!==0)throw new Error("weights remaing after extract: "+r().length);return{params:{pnet:u,rnet:f,onet:p},paramMappings:i}}function cO(n,e){var t=Ts(n,e);function r(f){var p=t(f+"/weights",4,f+"/filters"),m=t(f+"/bias",1);return{filters:p,bias:m}}function i(f){var p=t(f+"/weights",2),m=t(f+"/bias",1);return{weights:p,bias:m}}function o(f){return t(f,1)}function s(f){var p=r(f+"/conv1"),m=o(f+"/prelu1_alpha"),v=r(f+"/conv2"),y=o(f+"/prelu2_alpha"),w=r(f+"/conv3"),_=o(f+"/prelu3_alpha");return{conv1:p,prelu1_alpha:m,conv2:v,prelu2_alpha:y,conv3:w,prelu3_alpha:_}}function a(){var f=s("pnet"),p=r("pnet/conv4_1"),m=r("pnet/conv4_2");return Mn(Mn({},f),{conv4_1:p,conv4_2:m})}function l(){var f=s("rnet"),p=i("rnet/fc1"),m=o("rnet/prelu4_alpha"),v=i("rnet/fc2_1"),y=i("rnet/fc2_2");return Mn(Mn({},f),{fc1:p,prelu4_alpha:m,fc2_1:v,fc2_2:y})}function u(){var f=s("onet"),p=r("onet/conv4"),m=o("onet/prelu4_alpha"),v=i("onet/fc1"),y=o("onet/prelu5_alpha"),w=i("onet/fc2_1"),_=i("onet/fc2_2"),k=i("onet/fc2_3");return Mn(Mn({},f),{conv4:p,prelu4_alpha:m,fc1:v,prelu5_alpha:y,fc2_1:w,fc2_2:_,fc2_3:k})}return{extractPNetParams:a,extractRNetParams:l,extractONetParams:u}}function uO(n){var e=[],t=cO(n,e),r=t.extractPNetParams,i=t.extractRNetParams,o=t.extractONetParams,s=r(),a=i(),l=o();return To(n,e),{params:{pnet:s,rnet:a,onet:l},paramMappings:e}}function Ig(n,e){var t=e[0],r=e[1];return{height:Math.floor(t*n),width:Math.floor(r*n)}}function dO(n,e,t){for(var r=t[0],i=t[1],o=Bf/n,s=[],a=Math.min(r,i)*o,l=0;a>=12;)s.push(o*Math.pow(e,l)),a=a*e,l+=1;return s}var Kv=function(n){Ge(e,n);function e(t,r,i,o){return n.call(this,{left:t,top:r,right:i,bottom:o},!0)||this}return e}(Es);function kC(n){return Ee(function(){return Fn(on(n,ke(127.5)),ke(.0078125))})}function Ul(n,e){return Ee(function(){return Qe(Ot(n),Fn(e,Tf(Ot(Tf(n)))))})}function Xv(n,e,t){return t===void 0&&(t=!1),Ee(function(){var r=ui(n,e.conv1,"valid");return r=Ul(r,e.prelu1_alpha),r=hn(r,t?[2,2]:[3,3],[2,2],"same"),r=ui(r,e.conv2,"valid"),r=Ul(r,e.prelu2_alpha),r=t?r:hn(r,[3,3],[2,2],"valid"),r=ui(r,e.conv3,"valid"),r=Ul(r,e.prelu3_alpha),r})}function hO(n,e){return Ee(function(){var t=Xv(n,e,!0),r=ui(t,e.conv4_1,"valid"),i=Br(ip(r,3),3),o=Ao(on(r,i),3),s=ui(t,e.conv4_2,"valid");return{prob:o,regions:s}})}function fO(n,e){return Ee(function(){var t=Ig(e,n.shape.slice(1)),r=t.height,i=t.width,o=Ev.resizeBilinear(n,[r,i]),s=kC(o);return Cs(s,[0,2,1,3])})}function pO(n,e,t,r){for(var i=[],o=n.arraySync(),s=0;s<n.shape[0];s++)for(var a=0;a<n.shape[1];a++)o[s][a]>=r&&i.push(new ut(a,s));var l=i.map(function(u){var f=new lp(Math.round((u.y*Oh+1)/t),Math.round((u.x*Oh+1)/t),Math.round((u.y*Oh+Bf)/t),Math.round((u.x*Oh+Bf)/t)),p=o[u.y][u.x],m=e.arraySync(),v=new Kv(m[u.y][u.x][0],m[u.y][u.x][1],m[u.y][u.x][2],m[u.y][u.x][3]);return{cell:f,score:p,region:v}});return l}function mO(n,e,t,r,i){i.stage1=[];var o=e.map(function(m){return Ee(function(){var v={scale:m},y=fO(n,m),w=Date.now(),_=hO(y,r),k=_.prob,E=_.regions;v.pnet=Date.now()-w;var N=nn(nn(k,3)[1])[0],S=nn(E)[0];return{scoresTensor:N,regionsTensor:S,scale:m,statsForScale:v}})}),s=o.map(function(m){var v=m.scoresTensor,y=m.regionsTensor,w=m.scale,_=m.statsForScale,k=pO(v,y,w,t);if(v.dispose(),y.dispose(),!k.length)return i.stage1.push(_),[];var E=Date.now(),N=Tu(k.map(function(S){return S.cell}),k.map(function(S){return S.score}),.5);return _.nms=Date.now()-E,_.numBoxes=N.length,i.stage1.push(_),N.map(function(S){return k[S]})}),a=s.reduce(function(m,v){return m.concat(v)},[]),l=[],u=[];if(a.length>0){var f=Date.now(),p=Tu(a.map(function(m){return m.cell}),a.map(function(m){return m.score}),.7);i.stage1_nms=Date.now()-f,u=p.map(function(m){return a[m].score}),l=p.map(function(m){return a[m]}).map(function(m){var v=m.cell,y=m.region;return new lp(v.left+y.left*v.width,v.top+y.top*v.height,v.right+y.right*v.width,v.bottom+y.bottom*v.height).toSquare().round()})}return{boxes:l,scores:u}}function CC(n,e,t){var r=t.width,i=t.height;return Fe(this,void 0,void 0,function(){var o,s,a,l=this;return Le(this,function(u){switch(u.label){case 0:return o=Ea(n),[4,Promise.all(e.map(function(f){return Fe(l,void 0,void 0,function(){var p,m,v,y,w,_,k,E;return Le(this,function(N){return p=f.padAtBorders(n.height,n.width),m=p.y,v=p.ey,y=p.x,w=p.ex,_=y-1,k=m-1,E=o.getImageData(_,k,w-_,v-k),[2,Bn.isNodejs()?Ov(E):createImageBitmap(E)]})})}))];case 1:return s=u.sent(),a=[],s.forEach(function(f){var p=cp({width:r,height:i}),m=Ea(p);m.drawImage(f,0,0,r,i);for(var v=m.getImageData(0,0,r,i).data,y=[],w=0;w<v.length;w+=4)y.push(v[w+2]),y.push(v[w+1]),y.push(v[w]);a.push(y)}),[2,a.map(function(f){var p=Ee(function(){var m=Cs(or(f,[1,r,i,3]),[0,2,1,3]).toFloat();return kC(m)});return p})]}})})}function gO(n,e){return Ee(function(){var t=Xv(n,e),r=li(t,[t.shape[0],e.fc1.weights.shape[0]]),i=Ti(r,e.fc1),o=Ul(i,e.prelu4_alpha),s=Ti(o,e.fc2_1),a=Br(ip(s,1),1),l=Ao(on(s,a),1),u=Ti(o,e.fc2_2),f=nn(l,1)[1];return{scores:f,regions:u}})}function vO(n,e,t,r,i){return Fe(this,void 0,void 0,function(){var o,s,a,l,u,f,p,m,v,y,w,_,k,E;return Le(this,function(N){switch(N.label){case 0:return o=Date.now(),[4,CC(n,e,{width:24,height:24})];case 1:return s=N.sent(),i.stage2_extractImagePatches=Date.now()-o,o=Date.now(),a=s.map(function(S){var A=gO(S,r);return S.dispose(),A}),i.stage2_rnet=Date.now()-o,l=a.length>1?tn(a.map(function(S){return S.scores})):a[0].scores,p=(f=Array).from,[4,l.data()];case 2:return u=p.apply(f,[N.sent()]),l.dispose(),m=u.map(function(S,A){return{score:S,idx:A}}).filter(function(S){return S.score>t}).map(function(S){var A=S.idx;return A}),v=m.map(function(S){return e[S]}),y=m.map(function(S){return u[S]}),w=[],_=[],v.length>0&&(o=Date.now(),k=Tu(v,y,.7),i.stage2_nms=Date.now()-o,E=k.map(function(S){var A=a[m[S]].regions.arraySync();return new Kv(A[0][0],A[0][1],A[0][2],A[0][3])}),_=k.map(function(S){return y[S]}),w=k.map(function(S,A){return v[S].calibrate(E[A])})),a.forEach(function(S){S.regions.dispose(),S.scores.dispose()}),[2,{boxes:w,scores:_}]}})})}function xO(n,e){return Ee(function(){var t=Xv(n,e);t=hn(t,[2,2],[2,2],"same"),t=ui(t,e.conv4,"valid"),t=Ul(t,e.prelu4_alpha);var r=li(t,[t.shape[0],e.fc1.weights.shape[0]]),i=Ti(r,e.fc1),o=Ul(i,e.prelu5_alpha),s=Ti(o,e.fc2_1),a=Br(ip(s,1),1),l=Ao(on(s,a),1),u=Ti(o,e.fc2_2),f=Ti(o,e.fc2_3),p=nn(l,1)[1];return{scores:p,regions:u,points:f}})}function yO(n,e,t,r,i){return Fe(this,void 0,void 0,function(){var o,s,a,l,u,f,p,m,v,y,w,_,k,E,N;return Le(this,function(S){switch(S.label){case 0:return o=Date.now(),[4,CC(n,e,{width:48,height:48})];case 1:return s=S.sent(),i.stage3_extractImagePatches=Date.now()-o,o=Date.now(),a=s.map(function(A){var P=xO(A,r);return A.dispose(),P}),i.stage3_onet=Date.now()-o,l=a.length>1?tn(a.map(function(A){return A.scores})):a[0].scores,p=(f=Array).from,[4,l.data()];case 2:return u=p.apply(f,[S.sent()]),l.dispose(),m=u.map(function(A,P){return{score:A,idx:P}}).filter(function(A){return A.score>t}).map(function(A){var P=A.idx;return P}),v=m.map(function(A){var P=a[A].regions.arraySync();return new Kv(P[0][0],P[0][1],P[0][2],P[0][3])}),y=m.map(function(A,P){return e[A].calibrate(v[P])}),w=m.map(function(A){return u[A]}),_=[],k=[],E=[],y.length>0&&(o=Date.now(),N=Tu(y,w,.7,!1),i.stage3_nms=Date.now()-o,_=N.map(function(A){return y[A]}),k=N.map(function(A){return w[A]}),E=N.map(function(A,P){return Array(5).fill(0).map(function(D,j){var T=a[A].points.arraySync();return new ut(T[0][j]*(_[P].width+1)+_[P].left,T[0][j+5]*(_[P].height+1)+_[P].top)})})),a.forEach(function(A){A.regions.dispose(),A.scores.dispose(),A.points.dispose()}),[2,{boxes:_,scores:k,points:E}]}})})}var bO=function(n){Ge(e,n);function e(){return n.call(this,"Mtcnn")||this}return e.prototype.load=function(t){return Fe(this,void 0,void 0,function(){return Le(this,function(r){return console.warn("mtcnn is deprecated and will be removed soon"),[2,n.prototype.load.call(this,t)]})})},e.prototype.loadFromDisk=function(t){return Fe(this,void 0,void 0,function(){return Le(this,function(r){return console.warn("mtcnn is deprecated and will be removed soon"),[2,n.prototype.loadFromDisk.call(this,t)]})})},e.prototype.forwardInput=function(t,r){return r===void 0&&(r={}),Fe(this,void 0,void 0,function(){var i,o,s,a,l,u,f,p,m,v,y,w,_,k,E,N,S,A,P,D,j;return Le(this,function(T){switch(T.label){case 0:if(i=this.params,!i)throw new Error("Mtcnn - load model before inference");if(o=t.canvases[0],!o)throw new Error("Mtcnn - inputCanvas is not defined, note that passing tensors into Mtcnn.forwardInput is not supported yet.");return s={},a=Date.now(),l=Ee(function(){return sO(Br(jv.fromPixels(o)).toFloat())}),u=function(M){return l.dispose(),s.total=Date.now()-a,M},f=l.shape.slice(1),p=f[0],m=f[1],v=new bC(r),y=v.minFaceSize,w=v.scaleFactor,_=v.maxNumScales,k=v.scoreThresholds,E=v.scaleSteps,N=(E||dO(y,w,[p,m])).filter(function(M){var L=Ig(M,[p,m]);return Math.min(L.width,L.height)>Bf}).slice(0,_),s.scales=N,s.pyramid=N.map(function(M){return Ig(M,[p,m])}),S=Date.now(),[4,mO(l,N,k[0],i.pnet,s)];case 1:return A=T.sent(),s.total_stage1=Date.now()-S,A.boxes.length?(s.stage2_numInputBoxes=A.boxes.length,S=Date.now(),[4,vO(o,A.boxes,k[1],i.rnet,s)]):[2,u({results:[],stats:s})];case 2:return P=T.sent(),s.total_stage2=Date.now()-S,P.boxes.length?(s.stage3_numInputBoxes=P.boxes.length,S=Date.now(),[4,yO(o,P.boxes,k[2],i.onet,s)]):[2,u({results:[],stats:s})];case 3:return D=T.sent(),s.total_stage3=Date.now()-S,j=D.boxes.map(function(M,L){return Vv(Mv({},new Ui(D.scores[L],new Dv(M.left/m,M.top/p,M.width/m,M.height/p),{height:p,width:m})),new XM(D.points[L].map(function(B){return B.sub(new ut(M.left,M.top)).div(new ut(M.width,M.height))}),{width:M.width,height:M.height}))}),[2,u({results:j,stats:s})]}})})},e.prototype.forward=function(t,r){return r===void 0&&(r={}),Fe(this,void 0,void 0,function(){var i;return Le(this,function(o){switch(o.label){case 0:return i=this.forwardInput,[4,mn(t)];case 1:return[4,i.apply(this,[o.sent(),r])];case 2:return[2,o.sent().results]}})})},e.prototype.forwardWithStats=function(t,r){return r===void 0&&(r={}),Fe(this,void 0,void 0,function(){var i;return Le(this,function(o){switch(o.label){case 0:return i=this.forwardInput,[4,mn(t)];case 1:return[2,i.apply(this,[o.sent(),r])]}})})},e.prototype.getDefaultModelName=function(){return"mtcnn_model"},e.prototype.extractParamsFromWeigthMap=function(t){return uO(t)},e.prototype.extractParams=function(t){return lO(t)},e}(jo),wO=.4,_O=[new ut(1.603231,2.094468),new ut(6.041143,7.080126),new ut(2.882459,3.518061),new ut(4.266906,5.178857),new ut(9.041765,10.66308)],kO=[117.001,114.697,97.404],CO=function(n){Ge(e,n);function e(){var t=this,r={withSeparableConvs:!0,iouThreshold:wO,classes:["face"],anchors:_O,meanRgb:kO,isFirstLayerConv2d:!0,filterSizes:[3,16,32,64,128,256,512]};return t=n.call(this,r)||this,t}return Object.defineProperty(e.prototype,"anchors",{get:function(){return this.config.anchors},enumerable:!0,configurable:!0}),e.prototype.locateFaces=function(t,r){return Fe(this,void 0,void 0,function(){var i;return Le(this,function(o){switch(o.label){case 0:return[4,this.detect(t,r)];case 1:return i=o.sent(),[2,i.map(function(s){return new Ui(s.score,s.relativeBox,{width:s.imageWidth,height:s.imageHeight})})]}})})},e.prototype.getDefaultModelName=function(){return"tiny_face_detector_model"},e.prototype.extractParamsFromWeigthMap=function(t){return n.prototype.extractParamsFromWeigthMap.call(this,t)},e}(_C),Nr={ssdMobilenetv1:new wC,tinyFaceDetector:new CO,tinyYolov2:new iO,mtcnn:new bO,faceLandmark68Net:new pC,faceLandmark68TinyNet:new EP,faceRecognitionNet:new TP,faceExpressionNet:new dP,ageGenderNet:new wP},EC=function(n){Ge(e,n);function e(t,r,i){var o=n.call(this)||this;return o.parentTask=t,o.input=r,o.extractedFaces=i,o}return e}(rd),Yv=function(n){Ge(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.run=function(){return Fe(this,void 0,void 0,function(){var t,r,i=this;return Le(this,function(o){switch(o.label){case 0:return[4,this.parentTask];case 1:return t=o.sent(),[4,dp(t,this.input,function(s){return Fe(i,void 0,void 0,function(){return Le(this,function(a){switch(a.label){case 0:return[4,Promise.all(s.map(function(l){return Nr.faceExpressionNet.predictExpressions(l)}))];case 1:return[2,a.sent()]}})})},this.extractedFaces)];case 2:return r=o.sent(),[2,t.map(function(s,a){return dC(s,r[a])})]}})})},e.prototype.withAgeAndGender=function(){return new ex(this,this.input)},e}(EC),Jv=function(n){Ge(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.run=function(){return Fe(this,void 0,void 0,function(){var t,r;return Le(this,function(i){switch(i.label){case 0:return[4,this.parentTask];case 1:return t=i.sent(),t?[4,qv(t,this.input,function(o){return Nr.faceExpressionNet.predictExpressions(o)},this.extractedFaces)]:[2];case 2:return r=i.sent(),[2,dC(t,r)]}})})},e.prototype.withAgeAndGender=function(){return new tx(this,this.input)},e}(EC),Qv=function(n){Ge(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.withAgeAndGender=function(){return new nx(this,this.input)},e.prototype.withFaceDescriptors=function(){return new ix(this,this.input)},e}(Yv),Zv=function(n){Ge(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.withAgeAndGender=function(){return new rx(this,this.input)},e.prototype.withFaceDescriptor=function(){return new ox(this,this.input)},e}(Jv),NC=function(n){Ge(e,n);function e(t,r,i){var o=n.call(this)||this;return o.parentTask=t,o.input=r,o.extractedFaces=i,o}return e}(rd),ex=function(n){Ge(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.run=function(){return Fe(this,void 0,void 0,function(){var t,r,i=this;return Le(this,function(o){switch(o.label){case 0:return[4,this.parentTask];case 1:return t=o.sent(),[4,dp(t,this.input,function(s){return Fe(i,void 0,void 0,function(){return Le(this,function(a){switch(a.label){case 0:return[4,Promise.all(s.map(function(l){return Nr.ageGenderNet.predictAgeAndGender(l)}))];case 1:return[2,a.sent()]}})})},this.extractedFaces)];case 2:return r=o.sent(),[2,t.map(function(s,a){var l=r[a],u=l.age,f=l.gender,p=l.genderProbability;return xC(yC(s,f,p),u)})]}})})},e.prototype.withFaceExpressions=function(){return new Yv(this,this.input)},e}(NC),tx=function(n){Ge(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.run=function(){return Fe(this,void 0,void 0,function(){var t,r,i,o,s;return Le(this,function(a){switch(a.label){case 0:return[4,this.parentTask];case 1:return t=a.sent(),t?[4,qv(t,this.input,function(l){return Nr.ageGenderNet.predictAgeAndGender(l)},this.extractedFaces)]:[2];case 2:return r=a.sent(),i=r.age,o=r.gender,s=r.genderProbability,[2,xC(yC(t,o,s),i)]}})})},e.prototype.withFaceExpressions=function(){return new Jv(this,this.input)},e}(NC),nx=function(n){Ge(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.withFaceExpressions=function(){return new Qv(this,this.input)},e.prototype.withFaceDescriptors=function(){return new ix(this,this.input)},e}(ex),rx=function(n){Ge(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.withFaceExpressions=function(){return new Zv(this,this.input)},e.prototype.withFaceDescriptor=function(){return new ox(this,this.input)},e}(tx),SC=function(n){Ge(e,n);function e(t,r){var i=n.call(this)||this;return i.parentTask=t,i.input=r,i}return e}(rd),ix=function(n){Ge(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.run=function(){return Fe(this,void 0,void 0,function(){var t,r;return Le(this,function(i){switch(i.label){case 0:return[4,this.parentTask];case 1:return t=i.sent(),[4,dp(t,this.input,function(o){return Promise.all(o.map(function(s){return Nr.faceRecognitionNet.computeFaceDescriptor(s)}))},null,function(o){return o.landmarks.align(null,{useDlibAlignment:!0})})];case 2:return r=i.sent(),[2,r.map(function(o,s){return vC(t[s],o)})]}})})},e.prototype.withFaceExpressions=function(){return new Qv(this,this.input)},e.prototype.withAgeAndGender=function(){return new nx(this,this.input)},e}(SC),ox=function(n){Ge(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.run=function(){return Fe(this,void 0,void 0,function(){var t,r;return Le(this,function(i){switch(i.label){case 0:return[4,this.parentTask];case 1:return t=i.sent(),t?[4,qv(t,this.input,function(o){return Nr.faceRecognitionNet.computeFaceDescriptor(o)},null,function(o){return o.landmarks.align(null,{useDlibAlignment:!0})})]:[2];case 2:return r=i.sent(),[2,vC(t,r)]}})})},e.prototype.withFaceExpressions=function(){return new Zv(this,this.input)},e.prototype.withAgeAndGender=function(){return new rx(this,this.input)},e}(SC),IC=function(n){Ge(e,n);function e(t,r,i){var o=n.call(this)||this;return o.parentTask=t,o.input=r,o.useTinyLandmarkNet=i,o}return Object.defineProperty(e.prototype,"landmarkNet",{get:function(){return this.useTinyLandmarkNet?Nr.faceLandmark68TinyNet:Nr.faceLandmark68Net},enumerable:!0,configurable:!0}),e}(rd),EO=function(n){Ge(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.run=function(){return Fe(this,void 0,void 0,function(){var t,r,i,o,s,a=this;return Le(this,function(l){switch(l.label){case 0:return[4,this.parentTask];case 1:return t=l.sent(),r=t.map(function(u){return u.detection}),this.input instanceof Pt?[4,Lv(this.input,r)]:[3,3];case 2:return o=l.sent(),[3,5];case 3:return[4,Fv(this.input,r)];case 4:o=l.sent(),l.label=5;case 5:return i=o,[4,Promise.all(i.map(function(u){return a.landmarkNet.detectLandmarks(u)}))];case 6:return s=l.sent(),i.forEach(function(u){return u instanceof Pt&&u.dispose()}),[2,t.map(function(u,f){return Vv(u,s[f])})]}})})},e.prototype.withFaceExpressions=function(){return new Qv(this,this.input)},e.prototype.withAgeAndGender=function(){return new nx(this,this.input)},e.prototype.withFaceDescriptors=function(){return new ix(this,this.input)},e}(IC),NO=function(n){Ge(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.run=function(){return Fe(this,void 0,void 0,function(){var t,r,i,o,s;return Le(this,function(a){switch(a.label){case 0:return[4,this.parentTask];case 1:return t=a.sent(),t?(r=t.detection,this.input instanceof Pt?[4,Lv(this.input,[r])]:[3,3]):[2];case 2:return o=a.sent(),[3,5];case 3:return[4,Fv(this.input,[r])];case 4:o=a.sent(),a.label=5;case 5:return i=o,[4,this.landmarkNet.detectLandmarks(i[0])];case 6:return s=a.sent(),i.forEach(function(l){return l instanceof Pt&&l.dispose()}),[2,Vv(t,s)]}})})},e.prototype.withFaceExpressions=function(){return new Zv(this,this.input)},e.prototype.withAgeAndGender=function(){return new rx(this,this.input)},e.prototype.withFaceDescriptor=function(){return new ox(this,this.input)},e}(IC),AC=function(n){Ge(e,n);function e(t,r){r===void 0&&(r=new Hv);var i=n.call(this)||this;return i.input=t,i.options=r,i}return e}(rd),SO=function(n){Ge(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.run=function(){return Fe(this,void 0,void 0,function(){var t,r,i,o;return Le(this,function(s){switch(s.label){case 0:return t=this,r=t.input,i=t.options,i instanceof bC?[4,Nr.mtcnn.forward(r,i)]:[3,2];case 1:return[2,s.sent().map(function(a){return a.detection})];case 2:if(o=i instanceof oO?function(a){return Nr.tinyFaceDetector.locateFaces(a,i)}:i instanceof Hv?function(a){return Nr.ssdMobilenetv1.locateFaces(a,i)}:i instanceof $v?function(a){return Nr.tinyYolov2.locateFaces(a,i)}:null,!o)throw new Error("detectFaces - expected options to be instance of TinyFaceDetectorOptions | SsdMobilenetv1Options | MtcnnOptions | TinyYolov2Options");return[2,o(r)]}})})},e.prototype.runAndExtendWithFaceDetections=function(){var t=this;return new Promise(function(r){return Fe(t,void 0,void 0,function(){var i;return Le(this,function(o){switch(o.label){case 0:return[4,this.run()];case 1:return i=o.sent(),[2,r(i.map(function(s){return Mv({},s)}))]}})})})},e.prototype.withFaceLandmarks=function(t){return t===void 0&&(t=!1),new EO(this.runAndExtendWithFaceDetections(),this.input,t)},e.prototype.withFaceExpressions=function(){return new Yv(this.runAndExtendWithFaceDetections(),this.input)},e.prototype.withAgeAndGender=function(){return new ex(this.runAndExtendWithFaceDetections(),this.input)},e}(AC);(function(n){Ge(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.run=function(){return Fe(this,void 0,void 0,function(){var t,r;return Le(this,function(i){switch(i.label){case 0:return[4,new SO(this.input,this.options)];case 1:return t=i.sent(),r=t[0],t.forEach(function(o){o.score>r.score&&(r=o)}),[2,r]}})})},e.prototype.runAndExtendWithFaceDetection=function(){var t=this;return new Promise(function(r){return Fe(t,void 0,void 0,function(){var i;return Le(this,function(o){switch(o.label){case 0:return[4,this.run()];case 1:return i=o.sent(),[2,r(i?Mv({},i):void 0)]}})})})},e.prototype.withFaceLandmarks=function(t){return t===void 0&&(t=!1),new NO(this.runAndExtendWithFaceDetection(),this.input,t)},e.prototype.withFaceExpressions=function(){return new Jv(this.runAndExtendWithFaceDetection(),this.input)},e.prototype.withAgeAndGender=function(){return new tx(this.runAndExtendWithFaceDetection(),this.input)},e})(AC);function IO(n,e){if(n.length!==e.length)throw new Error("euclideanDistance: arr1.length !== arr2.length");var t=Array.from(n),r=Array.from(e);return Math.sqrt(t.map(function(i,o){return i-r[o]}).reduce(function(i,o){return i+Math.pow(o,2)},0))}(function(){function n(e,t){t===void 0&&(t=.6),this._distanceThreshold=t;var r=Array.isArray(e)?e:[e];if(!r.length)throw new Error("FaceRecognizer.constructor - expected atleast one input");var i=1,o=function(){return"person "+i++};this._labeledDescriptors=r.map(function(s){if(s instanceof Th)return s;if(s instanceof Float32Array)return new Th(o(),[s]);if(s.descriptor&&s.descriptor instanceof Float32Array)return new Th(o(),[s.descriptor]);throw new Error("FaceRecognizer.constructor - expected inputs to be of type LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array | Array<LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array>")})}return Object.defineProperty(n.prototype,"labeledDescriptors",{get:function(){return this._labeledDescriptors},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"distanceThreshold",{get:function(){return this._distanceThreshold},enumerable:!0,configurable:!0}),n.prototype.computeMeanDistance=function(e,t){return t.map(function(r){return IO(r,e)}).reduce(function(r,i){return r+i},0)/(t.length||1)},n.prototype.matchDescriptor=function(e){var t=this;return this.labeledDescriptors.map(function(r){var i=r.descriptors,o=r.label;return new C2(o,t.computeMeanDistance(e,i))}).reduce(function(r,i){return r.distance<i.distance?r:i})},n.prototype.findBestMatch=function(e){var t=this.matchDescriptor(e);return t.distance<this.distanceThreshold?t:new C2("unknown",t.distance)},n.prototype.toJSON=function(){return{distanceThreshold:this.distanceThreshold,labeledDescriptors:this.labeledDescriptors.map(function(e){return e.toJSON()})}},n.fromJSON=function(e){var t=e.labeledDescriptors.map(function(r){return Th.fromJSON(r)});return new n(t,e.distanceThreshold)},n})();const AO=({navigateTo:n})=>{const[e,t]=re.useState(0),[r,i]=re.useState(0),[o,s]=re.useState(""),[a,l]=re.useState(""),[u,f]=re.useState(""),[p,m]=re.useState(""),[v,y]=re.useState(!1),[w,_]=re.useState(!1),[k,E]=re.useState(null),[N,S]=re.useState(null),A=[{id:"step-1",label:"Your Name",type:"text",value:o,setter:s,placeholder:" ",required:!0},{id:"step-2",label:"Email Address",type:"email",value:a,setter:l,placeholder:" ",required:!0},{id:"step-3",label:"Create Password",type:"password",value:u,setter:f,placeholder:" ",required:!0,hint:"Must be at least 8 characters with 1 number"},{id:"step-4",label:"Your City",type:"text",value:p,setter:m,placeholder:" ",required:!0},{id:"step-5",label:"Scan Your Face to Complete",type:"facescan"}];re.useEffect(()=>{Nr.tinyFaceDetector.load("/models")},[]);const P=[10,15,20,25,30],D=[{id:"fact-plastic-bottle",title:"Plastic Bottle Warrior ",description:"You just saved marine life from a plastic bottle that would take 450+ years to decompose! +10 Ocean Points"},{id:"fact-plastic-bag",title:"Turtle Savior ",description:"You just saved a sea turtle from mistaking a plastic bag for food! +15 Ocean Points"},{id:"fact-cigarette-butt",title:"Toxin Terminator ",description:"You removed a cigarette butt that could contaminate up to 50 liters of water! +20 Ocean Points"},{id:"fact-soda-can",title:"Recycling Champion ",description:"You saved enough energy to power a TV for 3 hours by recycling this can! +25 Ocean Points"},{id:"fact-fishing-net",title:"Marine Liberator ",description:"You removed a ghost net that could have entangled countless marine animals! +30 Ocean Points"}],j=()=>{switch(e){case 0:return"Clean the Beach";case 1:return"Continue Cleaning";case 2:return"Almost There";case 3:return"Final Step";default:return""}},T=()=>{const q=document.getElementById("confetti-container");if(!q)return;const $=["#0ea5e9","#06b6d4","#0284c7","#0369a1","#38bdf8"];for(let Y=0;Y<50;Y++){const Q=document.createElement("div");Q.className="confetti",Q.style.left=Math.random()*100+"vw",Q.style.backgroundColor=$[Math.floor(Math.random()*$.length)],Q.style.width=Math.random()*10+5+"px",Q.style.height=Math.random()*10+5+"px",Q.style.opacity="1",Q.style.animation=`confetti-fall ${Math.random()*3+2}s linear forwards`,Q.style.animationDelay=Math.random()*2+"s",q.appendChild(Q),setTimeout(()=>{Q.remove()},5e3)}},M=q=>{const $=document.getElementById(D[q].id),Y=document.getElementById(D[q].id.replace("fact-",""));$&&($.classList.add("show"),$.style.left="50%",$.style.top="40%",$.style.transform="translate(-50%, -50%) scale(0.9)"),Y&&Y.classList.add("removed"),i(Q=>Q+P[q]),T(),setTimeout(()=>{$&&$.classList.remove("show")},3e3)},L=()=>{const q=document.getElementById(A[e].id.replace("step-",""));if(q&&!q.checkValidity()){q.reportValidity();return}e<A.length-1&&(M(e),t($=>$+1))},B=()=>{e>0&&t(q=>q-1)},F=async q=>{q.preventDefault();try{await kS(fk,a,u),M(A.length-1),T(),T(),setTimeout(()=>{_(!0)},2e3)}catch($){console.error("Error creating user:",$.message),alert("Signup failed: "+$.message)}};u_.useEffect(()=>{if(e===A.length-1&&A[e].type==="facescan"){const q=document.querySelector(".camera-scan");q&&(q.style.animation="scan 2s linear infinite")}},[e,A]),re.useEffect(()=>{const q=async()=>{const $=document.getElementById("video");if($)try{const Y=await navigator.mediaDevices.getUserMedia({video:!0});$.srcObject=Y,S(Y),await $.play()}catch(Y){console.error("Error accessing webcam",Y)}};return A[e].type==="facescan"&&!k&&q(),()=>{N&&N.getTracks().forEach($=>$.stop())}},[e,k]);const K=()=>{const q=document.getElementById("video");if(!q)return;const $=document.createElement("canvas");$.width=q.videoWidth,$.height=q.videoHeight,$.getContext("2d").drawImage(q,0,0,$.width,$.height);const Y=$.toDataURL("image/png");E(Y),N&&N.getTracks().forEach(Q=>Q.stop())},te=()=>{E(null)},se=(e+(w?1:0))/A.length*100;return h.jsxs(h.Fragment,{children:[h.jsx("style",{children:`
                @import url('https://fonts.googleapis.com/css2?family=Quicksand:wght@400;500;600;700&family=Poppins:wght@400;500;600;700&display=swap');
                
                body {
                    font-family: 'Quicksand', sans-serif;
                    background-color: #f0f9ff;
                    min-height: 100vh;
                }
                
                h1, h2, h3, h4, h5 {
                    font-family: 'Poppins', sans-serif;
                }
                
                .beach-bg {
                    background-image: linear-gradient(to bottom, #87CEEB 0%, #87CEEB 60%, #F0E68C 60%, #F0E68C 100%);
                }
                
                .waste-item {
                    position: absolute;
                    transition: all 0.8s cubic-bezier(0.68, -0.55, 0.27, 1.55);
                    z-index: 5;
                }
                
                .waste-item.removed {
                    transform: translateY(-100px) rotate(20deg);
                    opacity: 0;
                }
                
                .fact-popup {
                    position: fixed;
                    background-color: white;
                    border-radius: 12px;
                    padding: 16px;
                    box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.2);
                    opacity: 0;
                    transform: translateY(20px) scale(0.9);
                    transition: all 0.5s cubic-bezier(0.68, -0.55, 0.27, 1.55);
                    z-index: 50;
                    pointer-events: none;
                    max-width: 300px;
                    border: 2px solid #0ea5e9;
                }
                
                .fact-popup.show {
                    opacity: 1;
                    transform: translateY(0) scale(1);
                }
                
                .achievement-icon {
                    background: linear-gradient(135deg, #0ea5e9, #06b6d4);
                    border-radius: 50%;
                    width: 40px;
                    height: 40px;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    margin-right: 12px;
                    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
                }
                
                .progress-bar {
                    transition: width 0.5s ease;
                }
                
                .bubble {
                    position: absolute;
                    background-color: rgba(255, 255, 255, 0.4);
                    border-radius: 50%;
                    animation: float 8s infinite ease-in-out;
                }
                
                @keyframes float {
                    0%, 100% {
                        transform: translateY(0);
                    }
                    50% {
                        transform: translateY(-20px);
                    }
                }
                
                .wave {
                    position: absolute;
                    top: 58%; /* Adjusted to match the visual of the original HTML */
                    left: 0;
                    width: 100%;
                    overflow: hidden;
                    line-height: 0;
                    transform: rotate(180deg);
                }

                .wave svg {
                    position: relative;
                    display: block;
                    width: calc(100% + 1.3px);
                    height: 46px; /* Specific height from original HTML */
                }

                .wave .shape-fill {
                    fill: #87CEEB; /* Specific color from original HTML */
                }
                
                .form-input:focus + label {
                    color: #0ea5e9;
                }
                
                .confetti {
                    position: absolute;
                    width: 10px;
                    height: 10px;
                    background-color: #0ea5e9;
                    opacity: 0;
                }
                
                @keyframes confetti-fall {
                    0% {
                        transform: translateY(0) rotate(0deg);
                        opacity: 1;
                    }
                    100% {
                        transform: translateY(100vh) rotate(720deg);
                        opacity: 0;
                    }
                }
                
                .camera-container {
  position: relative;
  width: 100%;
  aspect-ratio: 4/3; /* or height: 100% */
  background-color: #000;
  border-radius: 8px;
  overflow: hidden;
}

                
                .camera-overlay {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 160px;  /* or whatever size you like */
  height: 160px;
  border: 4px dashed #0ea5e9;
  border-radius: 50%;
}

                
                .camera-scan {
                    position: absolute;
                    width: 100%;
                    height: 5px;
                    background: linear-gradient(90deg, transparent, #0ea5e9, transparent);
                    animation: scan 2s linear infinite;
                }
                
                @keyframes scan {
                    0% {
                        top: 0;
                    }
                    50% {
                        top: 100%;
                    }
                    100% {
                        top: 0;
                    }
                }
                `}),h.jsxs("div",{className:"min-h-screen flex flex-col",children:[h.jsxs("nav",{className:"bg-sky-500 text-white shadow-lg z-50",children:[h.jsxs("div",{className:"container mx-auto px-4 py-3 flex justify-between items-center",children:[h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),h.jsx("span",{className:"text-xl font-bold",children:"Beach Warriors"})]}),h.jsxs("div",{className:"hidden md:flex space-x-8",children:[h.jsx("button",{onClick:()=>n("home"),className:"hover:text-sky-100 transition",children:"Home"}),h.jsx("button",{onClick:()=>n("home","about-section"),className:"hover:text-sky-100 transition",children:"About"}),h.jsx("button",{onClick:()=>n("home","articles-section"),className:"hover:text-sky-100 transition",children:"Articles"})]}),h.jsx("div",{className:"md:hidden",children:h.jsx("button",{id:"menu-toggle",className:"focus:outline-none",onClick:()=>y(!v),children:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h16"})})})})]}),h.jsxs("div",{id:"mobile-menu",className:`md:hidden ${v?"":"hidden"} bg-sky-600 pb-4 px-4`,children:[h.jsx("button",{onClick:()=>n("home"),className:"block py-2 hover:text-sky-100 transition",children:"Home"}),h.jsx("button",{onClick:()=>n("home","about-section"),className:"block py-2 hover:text-sky-100 transition",children:"About"}),h.jsx("button",{onClick:()=>n("home","articles-section"),className:"block py-2 hover:text-sky-100 transition",children:"Articles"})]})]}),h.jsxs("div",{className:"flex-grow flex items-center justify-center beach-bg relative py-12 px-4",children:[h.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[h.jsx("div",{className:"absolute top-10 right-20 w-20 h-20 bg-yellow-300 rounded-full opacity-80"}),h.jsx("div",{className:"wave",children:h.jsxs("svg",{"data-name":"Layer 1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1200 120",preserveAspectRatio:"none",children:[h.jsx("path",{d:"M0,0V46.29c47.79,22.2,103.59,32.17,158,28,70.36-5.37,136.33-33.31,206.8-37.5C438.64,32.43,512.34,53.67,583,72.05c69.27,18,138.3,24.88,209.4,13.08,36.15-6,69.85-17.84,104.45-29.34C989.49,25,1113-14.29,1200,52.47V0Z",opacity:".25",className:"shape-fill"}),h.jsx("path",{d:"M0,0V15.81C13,36.92,27.64,56.86,47.69,72.05,99.41,111.27,165,111,224.58,91.58c31.15-10.15,60.09-26.07,89.67-39.8,40.92-19,84.73-46,130.83-49.67,36.26-2.85,70.9,9.42,98.6,31.56,31.77,25.39,62.32,62,103.63,73,40.44,10.79,81.35-6.69,119.13-24.28s75.16-39,116.92-43.05c59.73-5.85,113.28,22.88,168.9,38.84,30.2,8.66,59,6.17,87.09-7.5,22.43-10.89,48-26.93,60.65-49.24V0Z",opacity:".5",className:"shape-fill"}),h.jsx("path",{d:"M0,0V5.63C149.93,59,314.09,71.32,475.83,42.57c43-7.64,84.23-20.12,127.61-26.46,59-8.63,112.48,12.24,165.56,35.4C827.93,77.22,886,95.24,951.2,90c86.53-7,172.46-45.71,248.8-84.81V0Z",className:"shape-fill"})]})})]}),h.jsx("div",{id:"plastic-bottle",className:`waste-item ${e>0?"removed":""}`,style:{top:"20%",left:"5%"},children:h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"40",height:"80",viewBox:"0 0 40 80",children:[h.jsx("path",{d:"M15,5 L25,5 L25,15 C30,20 35,30 35,40 L35,70 C35,75 30,75 20,75 C10,75 5,75 5,70 L5,40 C5,30 10,20 15,15 Z",fill:"#D1ECF1",stroke:"#86C7DB",strokeWidth:"1"}),h.jsx("path",{d:"M15,5 L25,5 L25,15 L15,15 Z",fill:"#86C7DB"}),h.jsx("path",{d:"M15,0 L25,0 L25,5 L15,5 Z",fill:"#86C7DB",stroke:"#5BAFC6",strokeWidth:"1"})]})}),h.jsx("div",{id:"plastic-bag",className:`waste-item ${e>1?"removed":""}`,style:{top:"30%",right:"5%"},children:h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"60",height:"70",viewBox:"0 0 60 70",children:[h.jsx("path",{d:"M10,10 C10,5 20,0 30,0 C40,0 50,5 50,10 L55,60 C55,65 45,70 30,70 C15,70 5,65 5,60 Z",fill:"#FFFFFF",fillOpacity:"0.7",stroke:"#CCCCCC",strokeWidth:"1"}),h.jsx("path",{d:"M10,10 L50,10 L50,20 L10,20 Z",fill:"#EEEEEE",stroke:"#CCCCCC",strokeWidth:"1"})]})}),h.jsx("div",{id:"cigarette-butt",className:`waste-item ${e>2?"removed":""}`,style:{bottom:"25%",left:"10%"},children:h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"30",height:"10",viewBox:"0 0 30 10",children:[h.jsx("rect",{x:"0",y:"2",width:"20",height:"6",fill:"#FFFFFF",stroke:"#CCCCCC",strokeWidth:"1"}),h.jsx("rect",{x:"20",y:"0",width:"10",height:"10",rx:"2",fill:"#D4A76A",stroke:"#B38E68",strokeWidth:"1"}),h.jsx("line",{x1:"2",y1:"5",x2:"18",y2:"5",stroke:"#EEEEEE",strokeWidth:"1"})]})}),h.jsx("div",{id:"soda-can",className:`waste-item ${e>3?"removed":""}`,style:{bottom:"30%",right:"10%"},children:h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"30",height:"50",viewBox:"0 0 30 50",children:[h.jsx("path",{d:"M5,5 L25,5 L28,10 L28,45 L25,50 L5,50 L2,45 L2,10 Z",fill:"#FF6B6B",stroke:"#E95858",strokeWidth:"1"}),h.jsx("ellipse",{cx:"15",cy:"5",rx:"10",ry:"3",fill:"#DDDDDD",stroke:"#CCCCCC",strokeWidth:"1"}),h.jsx("rect",{x:"10",y:"20",width:"10",height:"15",fill:"#FFFFFF",fillOpacity:"0.3"})]})}),h.jsx("div",{id:"fishing-net",className:`waste-item ${e>4?"removed":""}`,style:{top:"60%",left:"50%",transform:"translateX(-50%)"},children:h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"70",height:"40",viewBox:"0 0 70 40",children:[h.jsx("path",{d:"M5,5 Q35,20 65,5 L65,35 Q35,20 5,35 Z",fill:"none",stroke:"#77AADD",strokeWidth:"2"}),h.jsx("path",{d:"M5,5 L5,35",stroke:"#77AADD",strokeWidth:"2"}),h.jsx("path",{d:"M65,5 L65,35",stroke:"#77AADD",strokeWidth:"2"}),h.jsx("path",{d:"M20,5 Q20,20 20,35",stroke:"#77AADD",strokeWidth:"1"}),h.jsx("path",{d:"M35,5 Q35,20 35,35",stroke:"#77AADD",strokeWidth:"1"}),h.jsx("path",{d:"M50,5 Q50,20 50,35",stroke:"#77AADD",strokeWidth:"1"}),h.jsx("path",{d:"M5,12 Q35,27 65,12",stroke:"#77AADD",strokeWidth:"1"}),h.jsx("path",{d:"M5,20 Q35,35 65,20",stroke:"#77AADD",strokeWidth:"1"}),h.jsx("path",{d:"M5,28 Q35,13 65,28",stroke:"#77AADD",strokeWidth:"1"})]})}),D.map((q,$)=>h.jsxs("div",{id:q.id,className:"fact-popup",children:[h.jsxs("div",{className:"flex items-center mb-2",children:[h.jsx("div",{className:"achievement-icon",children:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),h.jsx("div",{className:"text-sky-800 font-bold",children:"Achievement Unlocked!"})]}),h.jsx("h3",{className:"font-bold text-lg mb-1",children:q.title}),h.jsx("p",{className:"text-gray-600",children:q.description})]},q.id)),h.jsxs("div",{className:"max-w-md w-full bg-white rounded-xl shadow-2xl overflow-hidden z-10",children:[w?h.jsxs("div",{className:"p-8 text-center",children:[h.jsx("div",{className:"flex items-center justify-center mb-6",children:h.jsx("div",{className:"bg-green-100 rounded-full p-3",children:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12 text-green-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),h.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Mission Accepted!"}),h.jsxs("p",{className:"text-gray-600 mb-6",children:["You've earned ",r," Ocean Points and are now officially a Beach Warrior!"]}),h.jsxs("div",{className:"bg-sky-50 rounded-lg p-4 mb-6",children:[h.jsx("h3",{className:"font-bold text-sky-800 mb-2",children:"Your First Mission:"}),h.jsx("p",{className:"text-gray-700",children:"Join our upcoming beach cleanup this weekend. Check your email for details!"})]}),h.jsx("button",{onClick:()=>n("newvoldashboard"),className:"inline-block px-6 py-3 bg-sky-600 text-white font-bold rounded-lg hover:bg-sky-700 transition",children:"Go to Dashboard"})]}):h.jsxs("div",{className:"p-8",children:[h.jsx("div",{className:"flex items-center justify-center mb-6",children:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12 text-sky-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})})}),h.jsx("h2",{className:"text-2xl font-bold text-center text-gray-800 mb-2",children:"Begin Your Ocean Mission"}),h.jsx("p",{className:"text-center text-gray-600 mb-6",children:"Each field you complete helps clean our virtual beach!"}),h.jsxs("div",{className:"mb-6",children:[h.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:h.jsx("div",{id:"progress-bar",className:"bg-sky-500 h-2.5 rounded-full progress-bar",style:{width:`${se}%`}})}),h.jsxs("div",{className:"flex justify-between mt-1",children:[h.jsx("span",{className:"text-xs text-gray-500",children:"Start"}),h.jsx("span",{className:"text-xs text-gray-500",children:"Beach Warrior!"})]})]}),h.jsx("div",{id:"points-counter",className:"mb-6 bg-sky-50 rounded-lg p-3 flex items-center justify-center",children:h.jsxs("div",{className:"text-sky-700 font-bold",children:["Ocean Points: ",h.jsx("span",{id:"points-value",children:r})]})}),h.jsxs("form",{id:"signup-form",onSubmit:F,children:[A.map((q,$)=>h.jsx("div",{id:q.id,className:`mb-6 ${e===$?"":"hidden"}`,children:q.type==="facescan"?h.jsxs(h.Fragment,{children:[h.jsx("label",{className:"block text-gray-700 text-sm font-medium mb-2",children:q.label}),h.jsx("div",{className:"camera-container relative w-full aspect-[4/3] bg-black rounded-lg overflow-hidden",children:k?h.jsx("img",{src:k,alt:"Captured",className:"w-full h-full object-cover rounded-lg"}):h.jsxs("div",{className:"relative w-full h-full",children:[h.jsx("video",{id:"video",autoPlay:!0,muted:!0,playsInline:!0,className:"absolute top-0 left-0 w-full h-full object-cover rounded-lg"}),h.jsx("div",{className:"camera-overlay"})]})}),h.jsx("p",{className:"text-xs text-gray-500 mt-2 text-center",children:"Position your face in the circle for identity verification"})]}):h.jsxs("div",{className:"relative",children:[h.jsx("input",{type:q.type,id:q.id.replace("step-",""),className:"form-input peer w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-sky-500 focus:border-transparent transition pt-6",placeholder:" ",required:q.required,value:q.value,onChange:Y=>q.setter(Y.target.value)}),h.jsx("label",{htmlFor:q.id.replace("step-",""),className:"absolute text-sm text-gray-500 duration-300 transform -translate-y-3 scale-75 top-4 z-10 origin-[0] left-4 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-3",children:q.label}),q.hint&&h.jsx("p",{className:"text-xs text-gray-500 mt-1",children:q.hint})]})},q.id)),h.jsxs("div",{className:"flex justify-between items-center mt-4 flex-wrap gap-2",children:[e>0&&h.jsx("button",{type:"button",onClick:B,className:"px-4 py-2 border border-sky-500 text-sky-500 rounded-lg hover:bg-sky-50 transition",children:"Back"}),A[e].type==="facescan"?h.jsxs(h.Fragment,{children:[!k&&h.jsx("button",{type:"button",onClick:K,className:"px-6 py-2 bg-sky-500 text-white font-bold rounded-lg hover:bg-sky-600 transition",children:"Capture"}),k&&h.jsxs(h.Fragment,{children:[h.jsx("button",{type:"button",onClick:te,className:"px-4 py-2 border border-sky-500 text-sky-500 rounded-lg hover:bg-sky-50 transition",children:"Retry"}),h.jsx("button",{type:"submit",className:"px-6 py-2 bg-green-500 text-white font-bold rounded-lg hover:bg-green-600 transition",children:"Submit"})]})]}):h.jsx("button",{type:"button",onClick:L,className:"px-6 py-2 bg-sky-500 text-white font-bold rounded-lg hover:bg-sky-600 transition",children:j()})]})]}),h.jsx("div",{className:"text-center mt-6",children:h.jsxs("p",{className:"text-sm text-gray-600",children:["Already a Beach Warrior?"," ",h.jsx("button",{onClick:()=>n("login"),className:"font-semibold text-sky-600 hover:text-sky-700 focus:outline-none transition",children:"Sign in"})]})})]}),h.jsx("div",{className:"bg-gradient-to-r from-sky-400 to-sky-600 h-2"})]})]}),h.jsx("div",{id:"confetti-container",className:"fixed inset-0 pointer-events-none overflow-hidden z-40"}),h.jsx("footer",{className:"bg-sky-900 text-white py-6",children:h.jsxs("div",{className:"container mx-auto px-4 text-center",children:[h.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-4",children:[h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),h.jsx("span",{className:"text-lg font-bold",children:"Beach Warriors"})]}),h.jsx("p",{className:"text-sky-200 text-sm",children:"Join our mission to clean beaches and protect marine ecosystems"}),h.jsxs("div",{className:"flex justify-center space-x-4 mt-4",children:[h.jsx("a",{href:"#",className:"text-white hover:text-sky-300 transition",children:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{d:"M22.675 0h-21.35c-.732 0-1.325.593-1.325 1.325v21.351c0 .731.593 1.324 1.325 1.324h11.495v-9.294h-3.128v-3.622h3.128v-2.671c0-3.1 1.893-4.788 4.659-4.788 1.325 0 2.463.099 2.795.143v3.24l-1.918.001c-1.504 0-1.795.715-1.795 1.763v2.313h3.587l-.467 3.622h-3.12v9.293h6.116c.73 0 1.323-.593 1.323-1.325v-21.35c0-.732-.593-1.325-1.325-1.325z"})})}),h.jsx("a",{href:"#",className:"text-white hover:text-sky-300 transition",children:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{d:"M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723 10.054 10.054 0 01-3.127 1.184 4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"})})}),h.jsx("a",{href:"#",className:"text-white hover:text-sky-300 transition",children:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{d:"M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"})})})]}),h.jsx("p",{className:"text-xs text-sky-300 mt-4",children:" 2023 Beach Warriors. All rights reserved."})]})})]})]})},RC=()=>{const[n,e]=re.useState(""),[t,r]=re.useState("all"),[i,o]=re.useState("all"),[s,a]=re.useState(!1),[l,u]=re.useState(""),[f,p]=re.useState("volunteers"),[m,v]=re.useState(""),y=[{id:"juhu-upcoming",status:"upcoming",beach:"juhu",title:"Juhu Beach Weekend Cleanup",datetime:"Saturday, June 14, 2025  6:00 AM - 10:00 AM",location:"Juhu Beach, Near ISKCON Temple",registered:45,target:60,filled:"75%",progressWidth:"75%",actions:[{label:"Manage",type:"primary",onClick:"openManageModal"},{label:"Share",type:"secondary"},{label:"Edit",type:"secondary"}]},{id:"marine-live",status:"live",beach:"marine",title:"Marine Drive Morning Drive",datetime:"Today  6:00 AM - 9:00 AM",location:"Marine Drive, Near Aquarium",registered:28,kgCollected:142,attendance:"87%",progressWidth:"87%",actions:[{label:"Live Track",type:"success",onClick:"openManageModal"},{label:"Message",type:"primary"},{label:"Monitor",type:"secondary"}]},{id:"versova-completed",status:"completed",beach:"versova",title:"Versova Beach Mega Drive",datetime:"Last Saturday  5:30 AM - 11:00 AM",location:"Versova Beach, Full Stretch",volunteers:89,kgWaste:450,satisfaction:"95%",progressWidth:"100%",actions:[{label:"View Report",type:"primary",onClick:"openManageModal"},{label:"Share Results",type:"secondary"}]}],w=[{id:1,name:"Arjun Mehta",email:"arjun.mehta@email.com",phone:"+91 98765 43210",registered:"June 10, 2025"},{id:2,name:"Priya Sharma",email:"priya.sharma@email.com",phone:"+91 87654 32109",registered:"June 11, 2025"},{id:3,name:"Raj Kumar",email:"raj.kumar@email.com",phone:"+91 76543 21098",registered:"June 12, 2025"}],_={welcome:"Welcome to Beach Warriors! Thank you for registering for our beach cleanup drive. We're excited to have you join us in making our beaches cleaner and safer for everyone. Please arrive 15 minutes early for check-in and safety briefing.",reminder:"Reminder: Your beach cleanup event is tomorrow! Please bring: sunscreen, water bottle, comfortable clothes, and enthusiasm. We'll provide gloves, bags, and all cleanup equipment. See you bright and early!",safety:"Safety First! Please follow these guidelines: 1) Stay hydrated 2) Use provided gloves 3) Don't handle sharp objects directly 4) Report any injuries immediately 5) Work in assigned teams 6) Follow team leader instructions",thankyou:"Thank you for your amazing contribution to our beach cleanup drive! Together we collected [X] kg of waste and made a real difference. Your dedication to environmental protection is inspiring. We hope to see you at our next event!"},k=P=>{u(`Managing: ${P}`),a(!0),document.body.style.overflow="hidden"},E=()=>{a(!1),document.body.style.overflow="auto",p("volunteers")},N=P=>{p(P)},S=P=>{v(_[P]||"")},A=y.filter(P=>{const D=P.title.toLowerCase(),j=P.status,T=P.beach;return D.includes(n.toLowerCase())&&(t==="all"||j===t)&&(i==="all"||T===i)});return h.jsxs(h.Fragment,{children:[h.jsx("style",{children:`
                /* Event Management Specific Styles (from beach_warriors_system.html, adapted to Tailwind and custom CSS) */
                /* Base styles for the Event Management section */
                .event-management-container {
                    /* Removed fixed width as it conflicts with responsive design */
                    /* max-width: 1200px; /* Example max-width if needed */
                    /* margin: 0 auto; /* Center content */
                    min-height: calc(100vh - 120px); /* Adjust based on header/footer height */
                }

                .controls {
                    display: flex;
                    gap: 20px;
                    margin-bottom: 30px;
                    flex-wrap: wrap;
                    align-items: center;
                }

                .search-box {
                    flex: 1;
                    min-width: 250px;
                    position: relative;
                }

                .search-box input {
                    width: 100%;
                    padding: 12px 45px 12px 15px;
                    border: 2px solid #e2e8f0;
                    border-radius: 12px;
                    font-size: 14px;
                    background: white;
                    transition: border-color 0.3s ease;
                }

                .search-box input:focus {
                    outline: none;
                    border-color: #0ea5e9;
                }

                .search-box .search-icon {
                    position: absolute;
                    right: 15px;
                    top: 50%;
                    transform: translateY(-50%);
                    color: #64748b;
                    height: 20px;
                    width: 20px;
                }
                
                .filter-dropdown {
                    position: relative;
                }

                .filter-dropdown select {
                    padding: 12px 35px 12px 15px;
                    border: 2px solid #e2e8f0;
                    border-radius: 12px;
                    background: white;
                    font-size: 14px;
                    cursor: pointer;
                    appearance: none;
                    transition: border-color 0.3s ease;
                }

                .filter-dropdown select:focus {
                    outline: none;
                    border-color: #0ea5e9;
                }
                
                .filter-dropdown .dropdown-icon {
                    position: absolute;
                    right: 12px;
                    top: 50%;
                    transform: translateY(-50%);
                    pointer-events: none;
                    color: #64748b;
                    height: 16px;
                    width: 16px;
                }

                .create-btn {
                    background: linear-gradient(135deg, #0ea5e9 0%, #0284c7 100%);
                    color: white;
                    padding: 12px 24px;
                    border: none;
                    border-radius: 12px;
                    font-weight: 600;
                    cursor: pointer;
                    transition: all 0.3s ease;
                    font-size: 14px;
                    box-shadow: 0 4px 15px rgba(14, 165, 233, 0.3);
                }

                .create-btn:hover {
                    transform: translateY(-2px);
                    box-shadow: 0 8px 25px rgba(14, 165, 233, 0.3);
                }

                .events-grid {
                    display: grid;
                    grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
                    gap: 25px;
                }

                .event-card {
                    background: white;
                    border-radius: 16px;
                    padding: 25px;
                    box-shadow: 0 4px 20px rgba(0,0,0,0.08);
                    transition: all 0.3s ease;
                    border: 1px solid #f1f5f9;
                }

                .event-card:hover {
                    transform: translateY(-5px);
                    box-shadow: 0 12px 40px rgba(0,0,0,0.15);
                }

                .event-status {
                    display: inline-block;
                    padding: 6px 12px;
                    border-radius: 20px;
                    font-size: 12px;
                    font-weight: 600;
                    text-transform: uppercase;
                    margin-bottom: 15px;
                }

                .status-upcoming {
                    background: #fef3c7;
                    color: #d97706;
                }

                .status-live {
                    background: #dcfce7;
                    color: #16a34a;
                    animation: pulse 2s infinite;
                }

                .status-completed {
                    background: #e0e7ff;
                    color: #4f46e5;
                }

                @keyframes pulse {
                    0%, 100% { opacity: 1; }
                    50% { opacity: 0.7; }
                }

                .event-title {
                    font-size: 20px;
                    font-weight: 700;
                    color: #0f172a;
                    margin-bottom: 10px;
                }

                .event-datetime, .event-location {
                    color: #64748b;
                    margin-bottom: 8px;
                    display: flex;
                    align-items: center;
                    font-size: 14px;
                }
                .event-location {
                    margin-bottom: 15px;
                }
                .event-datetime .icon, .event-location .icon {
                    height: 18px;
                    width: 18px;
                    margin-right: 8px;
                    color: #0ea5e9;
                }

                .volunteer-info-card {
                    background: #f8fafc;
                    padding: 15px;
                    border-radius: 10px;
                    margin-bottom: 15px;
                }

                .volunteer-stats-card {
                    display: flex;
                    justify-content: space-between;
                    margin-bottom: 10px;
                }

                .stat-item-card {
                    text-align: center;
                }

                .stat-number-card {
                    font-size: 18px;
                    font-weight: 700;
                    color: #0f172a;
                }

                .stat-label-card {
                    font-size: 12px;
                    color: #64748b;
                    text-transform: uppercase;
                }

                .progress-bar-event {
                    width: 100%;
                    height: 8px;
                    background: #e2e8f0;
                    border-radius: 4px;
                    overflow: hidden;
                    margin-top: 10px;
                }

                .progress-fill {
                    height: 100%;
                    background: linear-gradient(90deg, #22d3ee 0%, #0ea5e9 100%);
                    border-radius: 4px;
                    transition: width 0.5s ease;
                }

                .event-actions {
                    display: flex;
                    gap: 10px;
                    flex-wrap: wrap;
                }

                .action-btn {
                    padding: 8px 16px;
                    border-radius: 8px;
                    border: none;
                    font-size: 12px;
                    font-weight: 600;
                    cursor: pointer;
                    transition: all 0.3s ease;
                }

                .btn-primary {
                    background: #0ea5e9;
                    color: white;
                }

                .btn-secondary {
                    background: #f1f5f9;
                    color: #475569;
                }

                .btn-success {
                    background: #10b981;
                    color: white;
                }

                .action-btn:hover {
                    transform: translateY(-1px);
                }

                /* Management Modal Styles */
                .modal {
                    position: fixed;
                    top: 0;
                    left: 0;
                    width: 100%;
                    height: 100%;
                    background: rgba(0,0,0,0.5);
                    z-index: 1000;
                    overflow-y: auto;
                    display: flex; /* Always flex to center content, controlled by isModalOpen */
                    justify-content: center;
                    align-items: center;
                }

                .modal-content {
                    background: white;
                    width: 90%;
                    max-width: 900px; /* Adjusted from 1000px to 900px */
                    margin: 20px auto;
                    border-radius: 16px;
                    position: relative;
                    box-shadow: 0 8px 30px rgba(0,0,0,0.25);
                }

                .modal-header {
                    padding: 15px 20px; /* Reduced padding */
                    border-bottom: 1px solid #e2e8f0;
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                }

                .modal-title {
                    font-size: 20px; /* Slightly reduced font size */
                    font-weight: 700;
                    color: #0f172a;
                }

                .close-btn {
                    background: none;
                    border: none;
                    font-size: 20px; /* Slightly reduced font size */
                    cursor: pointer;
                    color: #64748b;
                }

                .modal-tabs {
                    display: flex;
                    border-bottom: 1px solid #e2e8f0;
                }

                .tab-btn {
                    padding: 10px 18px; /* Reduced padding */
                    border: none;
                    background: none;
                    cursor: pointer;
                    font-weight: 600;
                    color: #64748b;
                    border-bottom: 3px solid transparent;
                    transition: all 0.3s ease;
                }

                .tab-btn.active {
                    color: #0ea5e9;
                    border-bottom-color: #0ea5e9;
                }

                .tab-content-modal {
                    display: none;
                    padding: 15px; /* Reduced padding from 20px */
                }

                .tab-content-modal.active {
                    display: block;
                }

                .volunteer-list {
                    max-height: 280px; /* Reduced max-height from 350px */
                    overflow-y: auto;
                    padding-right: 5px; /* Reduced padding */
                }

                .volunteer-item {
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                    padding: 8px 10px; /* Reduced padding */
                    border: 1px solid #e2e8f0;
                    border-radius: 8px;
                    margin-bottom: 6px; /* Reduced margin */
                }

                .volunteer-info-modal {
                    display: flex;
                    align-items: center;
                    gap: 8px; /* Reduced gap */
                }

                .volunteer-avatar {
                    width: 32px; /* Reduced size */
                    height: 32px; /* Reduced size */
                    background: linear-gradient(135deg, #0ea5e9, #22d3ee);
                    border-radius: 50%;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    color: white;
                    font-weight: bold;
                    font-size: 12px; /* Reduced font size */
                    flex-shrink: 0;
                }
                .volunteer-info-modal div {
                    color: #0f172a;
                }
                .volunteer-info-modal div div {
                    color: #64748b;
                    font-size: 11px; /* Reduced font size */
                }
                .volunteer-info-modal div div:last-child {
                    font-size: 9px; /* Reduced font size */
                }


                .attendance-system {
                    text-align: center;
                    padding: 15px; /* Reduced padding */
                }

                .camera-interface {
                    width: 220px; /* Reduced width */
                    height: 150px; /* Reduced height */
                    background: #f1f5f9;
                    border: 2px dashed #cbd5e1;
                    border-radius: 12px;
                    margin: 10px auto; /* Reduced margin */
                    display: flex;
                    flex-direction: column;
                    align-items: center;
                    justify-content: center;
                    color: #64748b;
                }
                .camera-interface .camera-icon {
                    height: 36px; /* Reduced size */
                    width: 36px; /* Reduced size */
                    margin-bottom: 6px; /* Reduced margin */
                }
                .camera-interface div:first-child {
                    font-size: 12px; /* Reduced font size */
                }
                .camera-interface div:last-child {
                    font-size: 9px; /* Reduced font size */
                    color: #64748b;
                }

                .message-center-grid {
                    display: grid;
                    grid-template-columns: 1fr 2fr;
                    gap: 15px; /* Reduced gap */
                }

                .message-templates {
                    background: #f8fafc;
                    padding: 12px; /* Reduced padding */
                    border-radius: 12px;
                }
                .message-templates h4 {
                    font-weight: 600;
                    color: #0f172a;
                    margin-bottom: 10px; /* Reduced margin */
                    font-size: 16px; /* Slightly reduced font size */
                }

                .template-item {
                    background: white;
                    padding: 8px 10px; /* Reduced padding */
                    border-radius: 8px;
                    margin-bottom: 6px; /* Reduced margin */
                    cursor: pointer;
                    transition: all 0.3s ease;
                    box-shadow: 0 1px 3px rgba(0,0,0,0.05);
                }

                .template-item:hover {
                    background: #e0f2fe;
                }
                .template-item strong {
                    font-weight: 600;
                    color: #0f172a;
                    font-size: 13px; /* Reduced font size */
                }
                .template-item div {
                    font-size: 9px; /* Reduced font size */
                    color: #64748b;
                }

                .compose-area {
                    background: white;
                    padding: 15px; /* Kept similar to message templates */
                    border-radius: 12px;
                    border: 1px solid #e2e8f0;
                }
                .compose-area h4 {
                    font-weight: 600;
                    color: #0f172a;
                    margin-bottom: 12px;
                    font-size: 16px; /* Slightly reduced font size */
                }

                .compose-area label {
                    display: block;
                    margin-bottom: 3px; /* Reduced margin */
                    font-weight: 600;
                    color: #475569;
                    font-size: 12px; /* Reduced font size */
                }

                .compose-area select,
                .compose-area input[type="text"] {
                    width: 100%;
                    padding: 5px; /* Reduced padding */
                    border: 1px solid #e2e8f0;
                    border-radius: 6px;
                    font-size: 11px; /* Reduced font size */
                    color: #333;
                }
                .compose-area select:focus,
                .compose-area input[type="text"]:focus,
                .compose-area textarea:focus {
                    outline: none;
                    border-color: #0ea5e9;
                }


                .compose-area textarea {
                    width: 100%;
                    height: 120px; /* Reduced height from 150px */
                    border: 1px solid #e2e8f0;
                    border-radius: 8px;
                    padding: 8px; /* Reduced padding */
                    font-family: inherit;
                    resize: vertical;
                    font-size: 11px; /* Reduced font size */
                    color: #333;
                }

                .documentation-grid {
                    display: grid;
                    grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); /* Reduced minmax from 200px */
                    gap: 12px; /* Reduced gap */
                }

                .doc-card {
                    background: white;
                    border-radius: 12px;
                    padding: 12px; /* Reduced padding */
                    text-align: center;
                    border: 1px solid #e2e8f0;
                    box-shadow: 0 2px 10px rgba(0,0,0,0.05);
                }
                .doc-card h4 {
                    font-weight: 700;
                    color: #0f172a;
                    font-size: 14px; /* Reduced font size */
                }
                .doc-card p {
                    color: #64748b;
                    font-size: 11px; /* Reduced font size */
                }

                .photo-placeholder {
                    width: 100%;
                    height: 100px; /* Reduced height from 120px */
                    background: #f1f5f9;
                    border-radius: 8px;
                    display: flex;
                    flex-direction: column;
                    align-items: center;
                    justify-content: center;
                    margin-bottom: 10px; /* Reduced margin */
                    color: #64748b;
                }
                .photo-placeholder .placeholder-icon {
                    height: 28px; /* Reduced size */
                    width: 28px; /* Reduced size */
                    margin-bottom: 6px; /* Reduced margin */
                }

                .quick-stats-section {
                    margin-top: 20px; /* Reduced margin */
                    background: white;
                    padding: 12px; /* Reduced padding */
                    border-radius: 12px;
                    border: 1px solid #e2e8f0;
                    box-shadow: 0 2px 10px rgba(0,0,0,0.05);
                }
                .quick-stats-section h4 {
                    font-weight: 700;
                    color: #0f172a;
                    margin-bottom: 10px; /* Reduced margin */
                    font-size: 16px; /* Slightly reduced font size */
                }

                .quick-stats-grid {
                    display: grid;
                    grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); /* Reduced minmax from 150px */
                    gap: 12px; /* Reduced gap */
                    margin-top: 10px; /* Reduced margin */
                }

                .quick-stat-item {
                    text-align: center;
                    padding: 10px; /* Reduced padding */
                    background: #f8fafc;
                    border-radius: 8px;
                }
                .quick-stat-item div:first-child {
                    font-size: 18px; /* Reduced font size */
                    font-weight: 700;
                    color: #0ea5e9;
                }
                .quick-stat-item div:last-child {
                    color: #64748b;
                    font-size: 11px; /* Reduced font size */
                }

                @media (max-width: 768px) {
                    .events-grid {
                        grid-template-columns: 1fr;
                    }
        
                    .controls {
                        flex-direction: column;
                        align-items: stretch;
                    }
        
                    .search-box {
                        min-width: auto;
                    }

                    .modal-content {
                        margin: 10px;
                        max-width: 95%; /* Adjusted for mobile */
                    }
                    .message-center-grid {
                        grid-template-columns: 1fr;
                    }
                    .quick-stats-grid {
                        grid-template-columns: 1fr;
                    }
                    .camera-interface {
                        width: 90%; /* Adjusted for mobile */
                    }
                }
                `}),h.jsxs("div",{className:"event-management-container p-4 md:p-8 relative",children:[h.jsxs("div",{className:"header",children:[h.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-cyan-900",children:"Event Management"}),h.jsx("p",{className:"text-cyan-600 mt-1 mb-1",children:"Organize, track, and optimize your beach cleanup drives"})]}),h.jsxs("div",{className:"controls",children:[h.jsxs("div",{className:"search-box",children:[h.jsx("input",{type:"text",placeholder:"Search events...",value:n,onChange:P=>e(P.target.value)}),h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"search-icon",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]}),h.jsxs("div",{className:"filter-dropdown",children:[h.jsxs("select",{value:t,onChange:P=>r(P.target.value),children:[h.jsx("option",{value:"all",children:"All Events"}),h.jsx("option",{value:"upcoming",children:"Upcoming"}),h.jsx("option",{value:"live",children:"Live"}),h.jsx("option",{value:"completed",children:"Completed"})]}),h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"dropdown-icon",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})]}),h.jsxs("div",{className:"filter-dropdown",children:[h.jsxs("select",{value:i,onChange:P=>o(P.target.value),children:[h.jsx("option",{value:"all",children:"All Beaches"}),h.jsx("option",{value:"juhu",children:"Juhu Beach"}),h.jsx("option",{value:"marine",children:"Marine Drive"}),h.jsx("option",{value:"versova",children:"Versova Beach"})]}),h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"dropdown-icon",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})]})]}),h.jsx("div",{className:"events-grid",children:A.map(P=>h.jsxs("div",{className:"event-card",children:[h.jsx("div",{className:`event-status status-${P.status}`,children:P.status}),h.jsx("h3",{className:"event-title",children:P.title}),h.jsxs("div",{className:"event-datetime",children:[h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"icon",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),P.datetime]}),h.jsxs("div",{className:"event-location",children:[h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"icon",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),P.location]}),h.jsxs("div",{className:"volunteer-info-card",children:[h.jsxs("div",{className:"volunteer-stats-card",children:[h.jsxs("div",{className:"stat-item-card",children:[h.jsx("div",{className:"stat-number-card",children:P.registered||P.volunteers}),h.jsx("div",{className:"stat-label-card",children:P.status==="live"?"Active":"Registered"})]}),P.target&&h.jsxs("div",{className:"stat-item-card",children:[h.jsx("div",{className:"stat-number-card",children:P.target}),h.jsx("div",{className:"stat-label-card",children:"Target"})]}),P.kgCollected&&h.jsxs("div",{className:"stat-item-card",children:[h.jsx("div",{className:"stat-number-card",children:P.kgCollected}),h.jsx("div",{className:"stat-label-card",children:"Kg Collected"})]}),h.jsxs("div",{className:"stat-item-card",children:[h.jsx("div",{className:"stat-number-card",children:P.filled||P.attendance||P.satisfaction}),h.jsx("div",{className:"stat-label-card",children:P.filled?"Filled":P.attendance?"Attendance":"Satisfaction"})]})]}),h.jsx("div",{className:"progress-bar-event",children:h.jsx("div",{className:"progress-fill",style:{width:P.progressWidth}})})]}),h.jsx("div",{className:"event-actions",children:P.actions.map((D,j)=>h.jsx("button",{className:`action-btn btn-${D.type}`,onClick:()=>D.onClick==="openManageModal"?k(P.title):console.log(`${D.label} clicked for ${P.title}`),children:D.label},j))})]},P.id))}),s&&h.jsx("div",{className:"modal",style:{display:s?"flex":"none"},children:h.jsxs("div",{className:"modal-content",children:[h.jsxs("div",{className:"modal-header",children:[h.jsx("h2",{className:"modal-title",children:l}),h.jsx("button",{className:"close-btn",onClick:E,children:""})]}),h.jsxs("div",{className:"modal-tabs",children:[h.jsx("button",{className:`tab-btn ${f==="volunteers"?"active":""}`,onClick:()=>N("volunteers"),children:"Volunteer Management"}),h.jsx("button",{className:`tab-btn ${f==="attendance"?"active":""}`,onClick:()=>N("attendance"),children:"Attendance System"}),h.jsx("button",{className:`tab-btn ${f==="communication"?"active":""}`,onClick:()=>N("communication"),children:"Communication"}),h.jsx("button",{className:`tab-btn ${f==="documentation"?"active":""}`,onClick:()=>N("documentation"),children:"Documentation"})]}),h.jsxs("div",{className:`tab-content-modal ${f==="volunteers"?"active":""}`,children:[h.jsx("h3",{className:"text-lg font-semibold text-cyan-800 mb-4",children:"Registered Volunteers"}),h.jsx("div",{className:"volunteer-list",children:w.map(P=>h.jsxs("div",{className:"volunteer-item",children:[h.jsxs("div",{className:"volunteer-info-modal",children:[h.jsx("div",{className:"volunteer-avatar",children:P.name.split(" ").map(D=>D[0]).join("")}),h.jsxs("div",{children:[h.jsx("div",{className:"font-semibold",children:P.name}),h.jsxs("div",{children:[P.email,"  ",P.phone]}),h.jsxs("div",{children:["Registered: ",P.registered]})]})]}),h.jsx("div",{children:h.jsxs("select",{className:"p-1.5 border border-gray-300 rounded-md text-sm focus:outline-none focus:border-sky-500",children:[h.jsx("option",{children:"Team Leader"}),h.jsx("option",{children:"Collector"}),h.jsx("option",{children:"Sorter"})]})})]},P.id))})]}),h.jsx("div",{className:`tab-content-modal ${f==="attendance"?"active":""}`,children:h.jsxs("div",{className:"attendance-system",children:[h.jsx("h3",{className:"text-lg font-semibold text-cyan-800 mb-4",children:"Face Scan Attendance System"}),h.jsx("div",{className:"camera-interface",children:h.jsxs("div",{children:[h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"camera-icon",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.218A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.218A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]}),h.jsx("div",{children:"Camera Interface"}),h.jsx("div",{children:"Click to activate face recognition"})]})}),h.jsxs("div",{className:"flex gap-4 justify-center mt-5",children:[h.jsx("button",{className:"action-btn btn-success",children:"Start Check-in"}),h.jsx("button",{className:"action-btn btn-primary",children:"View Attendance"}),h.jsx("button",{className:"action-btn btn-secondary",children:"QR Backup"})]}),h.jsxs("div",{className:"mt-8 text-left",children:[h.jsx("h4",{className:"font-semibold text-cyan-800 mb-2",children:"Today's Attendance Log"}),h.jsxs("div",{className:"bg-cyan-50 p-4 rounded-lg border border-cyan-100",children:[h.jsxs("div",{className:"flex justify-between mb-2",children:[h.jsx("span",{className:"font-semibold",children:"Total Checked In: 28"}),h.jsx("span",{className:"text-green-600 text-sm font-medium",children:" Active Session"})]}),h.jsx("div",{className:"text-sm",children:"Last check-in: Priya Sharma - 8:45 AM"})]})]})]})}),h.jsx("div",{className:`tab-content-modal ${f==="communication"?"active":""}`,children:h.jsxs("div",{className:"message-center-grid",children:[h.jsxs("div",{className:"message-templates",children:[h.jsx("h4",{children:"Message Templates"}),h.jsxs("div",{className:"space-y-2",children:[h.jsxs("div",{className:"template-item",onClick:()=>S("welcome"),children:[h.jsx("strong",{children:"Welcome Message"}),h.jsx("div",{children:"Thank volunteers for registering"})]}),h.jsxs("div",{className:"template-item",onClick:()=>S("reminder"),children:[h.jsx("strong",{children:"Event Reminder"}),h.jsx("div",{children:"Send event day reminders"})]}),h.jsxs("div",{className:"template-item",onClick:()=>S("safety"),children:[h.jsx("strong",{children:"Safety Instructions"}),h.jsx("div",{children:"Important safety guidelines"})]}),h.jsxs("div",{className:"template-item",onClick:()=>S("thankyou"),children:[h.jsx("strong",{children:"Thank You Message"}),h.jsx("div",{children:"Post-event appreciation"})]})]}),h.jsxs("div",{className:"mt-6",children:[h.jsx("h4",{children:"Message History"}),h.jsxs("div",{className:"bg-cyan-50 p-4 rounded-lg max-h-52 overflow-y-auto border border-cyan-100",children:[h.jsxs("div",{className:"pb-3 border-b border-cyan-200 mb-3",children:[h.jsx("div",{className:"font-semibold text-xs mb-1",children:"Today 9:30 AM"}),h.jsx("div",{className:"text-sm",children:"Event reminder sent to 45 volunteers"})]}),h.jsxs("div",{className:"pb-3 border-b border-cyan-200 mb-3",children:[h.jsx("div",{className:"font-semibold text-xs mb-1",children:"Yesterday 6:00 PM"}),h.jsx("div",{className:"text-sm",children:"Welcome message sent to 12 new volunteers"})]})]})]})]}),h.jsxs("div",{className:"compose-area",children:[h.jsx("h4",{children:"Compose Message"}),h.jsxs("div",{className:"mb-4",children:[h.jsx("label",{children:"Recipients:"}),h.jsxs("select",{className:"w-full p-2.5 border rounded-lg text-sm focus:outline-none focus:border-sky-500",children:[h.jsx("option",{children:"All Volunteers (45)"}),h.jsx("option",{children:"Team Leaders (8)"}),h.jsx("option",{children:"Collectors (25)"}),h.jsx("option",{children:"Sorters (12)"}),h.jsx("option",{children:"Individual Volunteer"})]})]}),h.jsxs("div",{className:"mb-4",children:[h.jsx("label",{children:"Subject:"}),h.jsx("input",{type:"text",className:"w-full p-2.5 border rounded-lg text-sm focus:outline-none focus:border-sky-500",placeholder:"Message subject"})]}),h.jsx("textarea",{value:m,onChange:P=>v(P.target.value),placeholder:"Type your message here..."}),h.jsxs("div",{className:"flex gap-3 mt-4",children:[h.jsx("button",{className:"action-btn btn-primary",children:"Send SMS"}),h.jsx("button",{className:"action-btn btn-secondary",children:"Send Email"}),h.jsx("button",{className:"action-btn btn-secondary",children:"Schedule"})]})]})]})}),h.jsxs("div",{className:`tab-content-modal ${f==="documentation"?"active":""}`,children:[h.jsxs("div",{className:"documentation-grid",children:[h.jsxs("div",{className:"doc-card",children:[h.jsx("div",{className:"photo-placeholder",children:h.jsxs("div",{children:[h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"placeholder-icon",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),h.jsx("div",{children:"Photo Gallery"})]})}),h.jsx("h4",{children:"Event Photos"}),h.jsx("p",{children:"Upload and manage event photos"}),h.jsx("button",{className:"action-btn btn-primary mt-4",children:"Upload Photos"})]}),h.jsxs("div",{className:"doc-card",children:[h.jsx("div",{className:"photo-placeholder",children:h.jsxs("div",{children:[h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"placeholder-icon",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),h.jsx("div",{children:"Before/After"})]})}),h.jsx("h4",{children:"Comparison Photos"}),h.jsx("p",{children:"Document cleanup impact"}),h.jsx("button",{className:"action-btn btn-primary mt-4",children:"Add Comparison"})]}),h.jsxs("div",{className:"doc-card",children:[h.jsx("div",{className:"photo-placeholder",children:h.jsxs("div",{children:[h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"placeholder-icon",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19.664 12c.797 0 1.442-.645 1.442-1.442V6.442c0-.797-.645-1.442-1.442-1.442H4.336C3.539 5 2.894 5.645 2.894 6.442v4.116c0 .797.645 1.442 1.442 1.442M21 12H3M3 12v6.558C3 19.355 3.645 20 4.442 20h15.116c.797 0 1.442-.645 1.442-1.442V12"})}),h.jsx("div",{children:"Waste Categories"})]})}),h.jsx("h4",{children:"Waste Categorization"}),h.jsx("p",{children:"Track waste types collected"}),h.jsx("button",{className:"action-btn btn-primary mt-4",children:"Categorize Waste"})]}),h.jsxs("div",{className:"doc-card",children:[h.jsx("div",{className:"photo-placeholder",children:h.jsxs("div",{children:[h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"placeholder-icon",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),h.jsx("div",{children:"Impact Data"})]})}),h.jsx("h4",{children:"Impact Measurement"}),h.jsx("p",{children:"Environmental impact metrics"}),h.jsx("button",{className:"action-btn btn-primary mt-4",children:"View Metrics"})]}),h.jsxs("div",{className:"doc-card",children:[h.jsx("div",{className:"photo-placeholder",children:h.jsxs("div",{children:[h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"placeholder-icon",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),h.jsx("div",{children:"Feedback"})]})}),h.jsx("h4",{children:"Volunteer Feedback"}),h.jsx("p",{children:"Collect volunteer reviews"}),h.jsx("button",{className:"action-btn btn-primary mt-4",children:"View Feedback"})]}),h.jsxs("div",{className:"doc-card",children:[h.jsx("div",{className:"photo-placeholder",children:h.jsxs("div",{children:[h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"placeholder-icon",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),h.jsx("div",{children:"Reports"})]})}),h.jsx("h4",{children:"Event Report"}),h.jsx("p",{children:"Generate comprehensive report"}),h.jsx("button",{className:"action-btn btn-primary mt-4",children:"Generate Report"})]})]}),h.jsxs("div",{className:"quick-stats-section",children:[h.jsx("h4",{children:"Quick Stats"}),h.jsxs("div",{className:"quick-stats-grid",children:[h.jsxs("div",{className:"quick-stat-item",children:[h.jsx("div",{style:{color:"#0ea5e9"},children:"142 kg"}),h.jsx("div",{children:"Waste Collected"})]}),h.jsxs("div",{className:"quick-stat-item",children:[h.jsx("div",{style:{color:"#10b981"},children:"28"}),h.jsx("div",{children:"Active Volunteers"})]}),h.jsxs("div",{className:"quick-stat-item",children:[h.jsx("div",{style:{color:"#f59e0b"},children:"3.5 hrs"}),h.jsx("div",{children:"Event Duration"})]}),h.jsxs("div",{className:"quick-stat-item",children:[h.jsx("div",{style:{color:"#8b5cf6"},children:"87%"}),h.jsx("div",{children:"Attendance Rate"})]})]})]})]})]})})]})]})},RO=()=>{const[n,e]=re.useState(""),[t,r]=re.useState("all"),[i,o]=re.useState("all"),[s,a]=re.useState(null),l=[{id:"juhu",name:"Juhu Beach",region:"west",status:"cleaned",top:"140px",left:"180px",details:"Near ISKCON Temple  Last cleaned: June 14, 2025",stats:[{value:"45",label:"Volunteers"},{value:"234kg",label:"Waste Removed"},{value:"4.8",label:"Rating"}]},{id:"versova",name:"Versova Beach",region:"west",status:"upcoming",top:"160px",left:"280px",details:"Andheri West  Event scheduled: July 5, 2025",stats:[{value:"32",label:"Registered"},{value:"50",label:"Target"},{value:"64%",label:"Filled"}]},{id:"worli",name:"Worli Beach",region:"south",status:"needs-cleanup",top:"220px",left:"250px",details:"Worli Seaface  Last cleaned: May 20, 2025",stats:[{value:"High",label:"Priority"},{value:"Est. 180kg",label:"Waste"},{value:"2.3km",label:"Length"}]},{id:"bandra",name:"Bandra Beach",region:"west",status:"cleaned",top:"120px",left:"380px",details:"Bandra West  Last cleaned: June 21, 2025",stats:[{value:"28",label:"Volunteers"},{value:"156kg",label:"Waste Removed"},{value:"4.6",label:"Rating"}]},{id:"chowpatty",name:"Chowpatty Beach",region:"south",status:"needs-cleanup",top:"260px",left:"320px",details:"Marine Drive  Last cleaned: May 15, 2025",stats:[{value:"Medium",label:"Priority"},{value:"Est. 120kg",label:"Waste"},{value:"1.8km",label:"Length"}]},{id:"aksa",name:"Aksa Beach",region:"north",status:"upcoming",top:"100px",left:"480px",details:"Malad West  Event scheduled: July 12, 2025",stats:[{value:"18",label:"Registered"},{value:"40",label:"Target"},{value:"45%",label:"Filled"}]}],[u,f]=re.useState(l);re.useEffect(()=>{const m=n.toLowerCase(),v=l.filter(y=>{const w=y.name.toLowerCase().includes(m),_=t==="all"||y.status===t,k=i==="all"||y.region===i;return w&&_&&k});f(v)},[n,t,i]);const p=m=>{a(m)};return h.jsxs(h.Fragment,{children:[h.jsx("style",{children:`
                /* General Styling - some already inherited from OrgDashboard */
                /* Keeping specific styles for BeachMaps component */
                .main-content {
                    flex: 1;
                    padding: 32px;
                    overflow-y: auto;
                }

                .header {
                    margin-bottom: 32px;
                }

                .header h1 {
                    font-size: 32px;
                    font-weight: 600;
                    color: #212529; /* Adjust to match Tailwind's text-cyan-900 if desired */
                    margin-bottom: 8px;
                }

                .header p {
                    color: #6c757d; /* Adjust to match Tailwind's text-cyan-600 */
                    font-size: 16px;
                }

                .controls {
                    display: flex;
                    gap: 16px;
                    margin-bottom: 24px;
                    flex-wrap: wrap;
                }

                .search-box {
                    flex: 1;
                    min-width: 250px;
                    position: relative;
                }

                .search-box input {
                    width: 100%;
                    padding: 12px 16px 12px 40px;
                    border: 1px solid #dee2e6;
                    border-radius: 8px;
                    font-size: 14px;
                    background: white;
                    color: #212529;
                }

                .search-icon {
                    position: absolute;
                    left: 12px;
                    top: 50%;
                    transform: translateY(-50%);
                    color: #6c757d;
                    pointer-events: none; /* Make icon non-interactive so clicks pass through to input */
                }

                .filter-dropdown {
                    padding: 12px 16px;
                    border: 1px solid #dee2e6;
                    border-radius: 8px;
                    background: white;
                    font-size: 14px;
                    min-width: 140px;
                    color: #212529;
                    cursor: pointer;
                }

                .add-beach-btn {
                    background: #0EA5E9; /* Using primary color from orgDashboard */
                    color: white;
                    padding: 12px 24px;
                    border: none;
                    border-radius: 8px;
                    font-weight: 500;
                    cursor: pointer;
                    transition: all 0.2s;
                    box-shadow: 0 4px 6px rgba(0,0,0,0.1);
                }

                .add-beach-btn:hover {
                    background: #0284C7; /* Darker shade on hover */
                    transform: translateY(-1px);
                    box-shadow: 0 6px 8px rgba(0,0,0,0.15);
                }

                .map-container {
                    background: white;
                    border-radius: 12px;
                    box-shadow: 0 4px 16px rgba(0,0,0,0.1);
                    margin-bottom: 24px;
                    overflow: hidden;
                }

                .map-header {
                    padding: 20px 24px;
                    border-bottom: 1px solid #e9ecef;
                    display: flex;
                    justify-content: space-between; /* Adjusted for clarity */
                    align-items: center;
                }

                .map-title {
                    font-size: 18px;
                    font-weight: 600;
                    color: #212529; /* Adjust to match Tailwind's text-cyan-900 if desired */
                }

                .map-view {
                    height: 450px;
                    background: linear-gradient(180deg, #87CEEB 0%, #4682B4 30%, #20B2AA 60%, #F0E68C 100%);
                    position: relative;
                    overflow: hidden;
                    border-radius: 0 0 12px 12px;
                }

                /* Add coastline and water effects */
                .map-view::before {
                    content: '';
                    position: absolute;
                    top: 0;
                    left: 0;
                    right: 0;
                    height: 70%;
                    background: 
                        radial-gradient(circle at 30% 40%, rgba(255,255,255,0.3) 2px, transparent 2px),
                        radial-gradient(circle at 70% 60%, rgba(255,255,255,0.2) 1px, transparent 1px),
                        radial-gradient(circle at 50% 80%, rgba(255,255,255,0.1) 3px, transparent 3px);
                    background-size: 100px 100px, 150px 150px, 200px 200px;
                    animation: waves 20s infinite linear;
                }

                .map-view::after {
                    content: '';
                    position: absolute;
                    bottom: 0;
                    left: 0;
                    right: 0;
                    height: 30%;
                    background: linear-gradient(to top, 
                        #F0E68C 0%, 
                        rgba(240, 230, 140, 0.8) 20%, 
                        rgba(240, 230, 140, 0.3) 40%, 
                        transparent 60%
                    );
                    pointer-events: none;
                }

                @keyframes waves {
                    0% { background-position: 0px 0px, 0px 0px, 0px 0px; }
                    100% { background-position: 100px 0px, -150px 0px, 200px 0px; }
                }

                .beach-marker {
                    position: absolute;
                    width: 32px;
                    height: 32px;
                    /* Using status-based background colors */
                    border: 4px solid white;
                    border-radius: 50%;
                    cursor: pointer;
                    transition: all 0.3s;
                    box-shadow: 0 4px 12px rgba(0,0,0,0.3);
                    z-index: 5;
                }

                .beach-marker::before {
                    content: '';
                    position: absolute;
                    top: 50%;
                    left: 50%;
                    transform: translate(-50%, -50%);
                    width: 8px;
                    height: 8px;
                    background: white;
                    border-radius: 50%;
                }

                .beach-marker:hover {
                    transform: scale(1.3);
                    z-index: 15;
                    box-shadow: 0 6px 20px rgba(0,0,0,0.4);
                }

                .beach-marker.active {
                    background: #3DADE8; /* Blue for active */
                    transform: scale(1.4);
                    z-index: 15;
                    box-shadow: 0 8px 24px rgba(61, 173, 232, 0.4);
                }

                /* Specific status colors for markers */
                .marker-cleaned { background: #4CAF50; } /* Green */
                .marker-upcoming { background: #FF9800; } /* Orange */
                .marker-needs-cleanup { background: #FF5722; } /* Red */

                .marker-tooltip {
                    position: absolute;
                    bottom: 45px;
                    left: 50%;
                    transform: translateX(-50%);
                    background: rgba(0,0,0,0.9);
                    color: white;
                    padding: 10px 14px;
                    border-radius: 8px;
                    font-size: 13px;
                    font-weight: 500;
                    white-space: nowrap;
                    opacity: 0;
                    pointer-events: none;
                    transition: all 0.3s;
                    box-shadow: 0 4px 12px rgba(0,0,0,0.3);
                }

                .marker-tooltip::after {
                    content: '';
                    position: absolute;
                    top: 100%;
                    left: 50%;
                    transform: translateX(-50%);
                    border: 6px solid transparent;
                    border-top-color: rgba(0,0,0,0.9);
                }

                .beach-marker:hover .marker-tooltip {
                    opacity: 1;
                }

                .beach-list {
                    background: white;
                    border-radius: 12px;
                    box-shadow: 0 4px 16px rgba(0,0,0,0.1);
                }

                .beach-list-header {
                    padding: 20px 24px;
                    border-bottom: 1px solid #e9ecef;
                }

                .beach-item {
                    padding: 20px 24px;
                    border-bottom: 1px solid #f8f9fa;
                    display: flex;
                    align-items: center;
                    gap: 16px;
                    cursor: pointer;
                    transition: all 0.2s;
                }

                .beach-item:hover {
                    background: #f8f9fa;
                }

                .beach-item.active-list-item {
                    background: #e8f4fd; /* Light blue for active list item */
                }

                .beach-item:last-child {
                    border-bottom: none;
                }

                .beach-status-indicator { /* Renamed to avoid conflict */
                    width: 12px;
                    height: 12px;
                    border-radius: 50%;
                    flex-shrink: 0;
                }

                .status-cleaned { background: #4CAF50; }
                .status-upcoming { background: #FF9800; }
                .status-needs-cleanup { background: #FF5722; }

                .beach-info {
                    flex: 1;
                }

                .beach-name {
                    font-weight: 600;
                    color: #212529;
                    margin-bottom: 4px;
                }

                .beach-details {
                    font-size: 14px;
                    color: #6c757d;
                }

                .beach-stats {
                    display: flex;
                    gap: 24px;
                    font-size: 14px;
                }

                .stat {
                    text-align: center;
                }

                .stat-value {
                    font-weight: 600;
                    color: #212529;
                }

                .stat-label {
                    color: #6c757d;
                    font-size: 12px;
                }

                .legend {
                    display: flex;
                    gap: 20px;
                    padding: 16px 24px;
                    background: #f8f9fa;
                    border-top: 1px solid #e9ecef;
                    font-size: 14px;
                }

                .legend-item {
                    display: flex;
                    align-items: center;
                    gap: 8px;
                }

                .legend-color {
                    width: 12px;
                    height: 12px;
                    border-radius: 50%;
                }

                /* Responsive adjustments */
                @media (max-width: 768px) {
                    .main-content {
                        padding: 16px;
                    }
                    .header h1 {
                        font-size: 26px;
                    }
                    .controls {
                        flex-direction: column;
                        align-items: stretch;
                    }
                    .search-box, .filter-dropdown, .add-beach-btn {
                        width: 100%;
                        min-width: unset;
                    }
                    .beach-item {
                        flex-direction: column;
                        align-items: flex-start;
                        gap: 8px;
                        text-align: left;
                    }
                    .beach-stats {
                        width: 100%;
                        justify-content: space-around;
                    }
                }
                `}),h.jsxs("div",{className:"main-content",children:[h.jsxs("div",{className:"header",children:[h.jsx("h1",{children:"Beach Maps"}),h.jsx("p",{children:"Visualize and manage beach cleanup locations across your region"})]}),h.jsxs("div",{className:"controls",children:[h.jsxs("div",{className:"search-box",children:[h.jsx("div",{className:"search-icon",children:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),h.jsx("input",{type:"text",placeholder:"Search beaches...",value:n,onChange:m=>e(m.target.value)})]}),h.jsxs("select",{className:"filter-dropdown",value:t,onChange:m=>r(m.target.value),children:[h.jsx("option",{value:"all",children:"All Beaches"}),h.jsx("option",{value:"cleaned",children:"Recently Cleaned"}),h.jsx("option",{value:"upcoming",children:"Upcoming Events"}),h.jsx("option",{value:"needs-cleanup",children:"Needs Cleanup"})]}),h.jsxs("select",{className:"filter-dropdown",value:i,onChange:m=>o(m.target.value),children:[h.jsx("option",{value:"all",children:"All Regions"}),h.jsx("option",{value:"north",children:"North Coast"}),h.jsx("option",{value:"south",children:"South Coast"}),h.jsx("option",{value:"east",children:"East Coast"})]})]}),h.jsxs("div",{className:"map-container ocean-card",children:[" ",h.jsx("div",{className:"map-header",children:h.jsx("div",{className:"map-title",children:"Interactive Beach Map"})}),h.jsx("div",{className:"map-view",id:"mapView",children:u.map(m=>h.jsx("div",{className:`beach-marker marker-${m.status} ${s===m.id?"active":""}`,style:{top:m.top,left:m.left},"data-beach":m.id,onClick:()=>p(m.id),children:h.jsxs("div",{className:"marker-tooltip",children:[m.name," - ",m.status.replace(/-/g," ").replace(/\b\w/g,v=>v.toUpperCase())]})},m.id))}),h.jsxs("div",{className:"legend",children:[h.jsxs("div",{className:"legend-item",children:[h.jsx("div",{className:"legend-color status-cleaned"}),h.jsx("span",{children:"Recently Cleaned"})]}),h.jsxs("div",{className:"legend-item",children:[h.jsx("div",{className:"legend-color status-upcoming"}),h.jsx("span",{children:"Upcoming Event"})]}),h.jsxs("div",{className:"legend-item",children:[h.jsx("div",{className:"legend-color status-needs-cleanup"}),h.jsx("span",{children:"Needs Cleanup"})]})]})]}),h.jsxs("div",{className:"beach-list ocean-card",children:[" ",h.jsx("div",{className:"beach-list-header",children:h.jsx("div",{className:"map-title",children:"Beach Locations"})}),u.map(m=>h.jsxs("div",{className:`beach-item ${s===m.id?"active-list-item":""}`,"data-beach":m.id,onClick:()=>p(m.id),children:[h.jsx("div",{className:`beach-status-indicator status-${m.status}`}),h.jsxs("div",{className:"beach-info",children:[h.jsx("div",{className:"beach-name",children:m.name}),h.jsx("div",{className:"beach-details",children:m.details})]}),h.jsx("div",{className:"beach-stats",children:m.stats.map((v,y)=>h.jsxs("div",{className:"stat",children:[h.jsx("div",{className:"stat-value",children:v.value}),h.jsx("div",{className:"stat-label",children:v.label})]},y))})]},m.id))]})]})]})},jO=({item:n,animatedHeight:e})=>h.jsxs("div",{className:"chart-bar-group flex flex-col items-center",children:[h.jsxs("div",{className:"chart-percentage text-xs font-semibold text-cyan-800 mb-1",children:[parseInt(n.height),"% "]}),h.jsx("div",{className:"chart-bar",style:{height:e||"0%"}}),h.jsx("div",{className:"chart-label",children:n.month||n.year})]},n.id),TO=({navigateTo:n,initialActiveTab:e="orgdashboard"})=>{const[t,r]=re.useState(!1),[i,o]=re.useState(e),[s,a]=re.useState("Monthly"),l={Monthly:[{id:"Jan",month:"Jan",height:"60%"},{id:"Feb",month:"Feb",height:"75%"},{id:"Mar",month:"Mar",height:"45%"},{id:"Apr",month:"Apr",height:"80%"},{id:"May",month:"May",height:"65%"},{id:"Jun",month:"Jun",height:"90%"},{id:"Jul",month:"Jul",height:"100%"},{id:"Aug",month:"Aug",height:"85%"},{id:"Sep",month:"Sep",height:"70%"},{id:"Oct",month:"Oct",height:"78%"},{id:"Nov",month:"Nov",height:"92%"},{id:"Dec",month:"Dec",height:"88%"}],Yearly:[{id:"2022",year:"2022",height:"70%"},{id:"2023",year:"2023",height:"85%"},{id:"2024",year:"2024",height:"95%"}]},[u,f]=re.useState({}),[p,m]=re.useState(!1),v=re.useRef(null),y=re.useRef(null),w={eventsAssigned:{value:12,unit:"this month",change:"+3 from last month",iconBg:"bg-cyan-100",iconColor:"text-cyan-600",icon:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})},registeredVolunteers:{value:248,unit:"active",change:"+24 new this month",iconBg:"bg-blue-100",iconColor:"text-blue-600",icon:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})},wasteCollected:{value:"1,250",unit:"kg",change:"+125 kg this month",iconBg:"bg-teal-100",iconColor:"text-teal-600",icon:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})},beachesCleaned:{value:18,unit:"locations",change:"+2 new locations",iconBg:"bg-amber-100",iconColor:"text-amber-600",icon:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})})}},_=[{type:"Plastic",percentage:45,color:"#0EA5E9"},{type:"Fishing Gear",percentage:25,color:"#06B6D4"},{type:"Glass",percentage:15,color:"#22D3EE"},{type:"Metal",percentage:10,color:"#67E8F9"},{type:"Other",percentage:5,color:"#A5F3FC"}];re.useEffect(()=>{const A=l[s];if(!A)return;const P=A.reduce((L,B)=>(L[B.id]=B.height,L),{});f(L=>JSON.stringify(L)===JSON.stringify(P)?L:P);const D=1500,j=100,T=setTimeout(()=>{const L=A.reduce((B,F)=>(B[F.id]="0%",B),{});f(L)},D),M=setTimeout(()=>{f(P)},D+j);return()=>{clearTimeout(T),clearTimeout(M)}},[s,JSON.stringify(l)]),re.useEffect(()=>{const A=y.current,P=15;if(A){A.innerHTML="";for(let D=0;D<P;D++){const j=Math.random()*20+5,T=document.createElement("div");T.classList.add("bubble"),T.style.width=`${j}px`,T.style.height=`${j}px`,T.style.left=`${Math.random()*100}%`,T.style.animationDuration=`${Math.random()*10+5}s`,T.style.animationDelay=`${Math.random()*5}s`,A.appendChild(T)}}},[]);const k=A=>{o(A),r(!1),console.log(`Switched dashboard view to: ${A}`)},E=()=>{m(A=>!A)},N=(A,P)=>h.jsx("div",{className:"ocean-card p-6 stat-card",children:h.jsxs("div",{className:"flex flex-col",children:[h.jsx("div",{className:`stat-card-icon ${P.iconBg} ${P.iconColor}`,children:P.icon}),h.jsx("h3",{className:"text-sm font-semibold text-cyan-900 uppercase tracking-wider mb-1",children:A.replace(/([A-Z])/g," $1").trim()}),h.jsxs("div",{className:"flex items-end space-x-2 mb-2",children:[h.jsx("div",{className:"text-4xl font-bold text-cyan-900",children:P.value}),h.jsx("div",{className:"text-sm text-cyan-600 mb-1",children:P.unit})]}),h.jsxs("div",{className:"flex items-center text-sm mt-auto",children:[P.change.startsWith("+")?h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-green-500 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 10l7-7m0 0l7 7m-7-7v18"})}):h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-red-500 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 14l-7 7m0 0l-7-7m7 7V3"})}),h.jsx("span",{className:`${P.change.startsWith("+")?"text-green-600":"text-red-600"}`,children:P.change})]})]})},A),S=()=>{switch(i){case"orgdashboard":return h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"flex justify-between items-center mb-8",children:[h.jsxs("div",{children:[h.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-cyan-900",children:"Dashboard"}),h.jsx("p",{className:"text-cyan-600",children:"Welcome back, Marina. Here's what's happening with your ocean cleanup initiatives."})]}),h.jsxs("div",{className:"flex items-center space-x-4",children:[h.jsx("button",{className:"md:hidden p-2 rounded-full hover:bg-cyan-100 transition-colors",id:"sidebar-toggle",onClick:()=>r(!t),children:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-cyan-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h16"})})}),h.jsxs("button",{className:"relative text-cyan-600 hover:text-cyan-800 transition-colors p-2 rounded-full hover:bg-cyan-100",onClick:E,children:[p&&h.jsx("div",{className:"absolute right-0 mt-2 w-64 bg-white border border-cyan-100 rounded-md shadow-lg z-50",children:h.jsxs("div",{className:"relative p-4 text-sm text-gray-700",children:[h.jsx("button",{onClick:A=>{A.stopPropagation(),m(!1)},className:"absolute top-2 right-2 text-gray-400 hover:text-gray-600 text-lg font-bold leading-none focus:outline-none","aria-label":"Close notifications",children:""}),h.jsx("p",{className:"font-semibold text-cyan-800 mb-2",children:"Notifications"}),h.jsxs("ul",{className:"space-y-2",children:[h.jsx("li",{className:"text-gray-600",children:" Beach Cleanup scheduled for 5th July"}),h.jsx("li",{className:"text-gray-600",children:" 12 new volunteers joined"}),h.jsx("li",{className:"text-gray-600",children:" Waste data submitted for review"})]})]})}),h.jsx("span",{role:"img","aria-label":"notifications",className:"text-2xl",children:""}),h.jsx("div",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center border-2 border-white",children:"3"})]})]})]}),h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:Object.entries(w).map(([A,P])=>N(A,P))}),h.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[h.jsx("div",{className:"lg:col-span-2",children:h.jsxs("div",{className:"ocean-card p-6",children:[h.jsxs("div",{className:"flex justify-between items-center mb-6",children:[h.jsx("h2",{className:"text-xl font-bold text-cyan-900",children:"Waste Collection Trends"}),h.jsxs("div",{className:"flex space-x-2",children:[h.jsx("button",{onClick:()=>a("Monthly"),className:`px-3 py-1 text-sm rounded-lg ${s==="Monthly"?"bg-cyan-100 text-cyan-800":"text-cyan-600 hover:bg-cyan-50"}`,children:"Monthly"}),h.jsx("button",{onClick:()=>a("Yearly"),className:`px-3 py-1 text-sm rounded-lg ${s==="Yearly"?"bg-cyan-100 text-cyan-800":"text-cyan-600 hover:bg-cyan-50"}`,children:"Yearly"})]})]}),h.jsx("div",{ref:v,className:"chart-container flex items-end justify-around mb-8",children:l[s].map(A=>h.jsx(jO,{item:A,animatedHeight:u[A.id]},A.id))}),h.jsxs("div",{className:"flex justify-between text-sm text-cyan-600 pt-4 border-t border-cyan-100",children:[h.jsx("div",{children:"Total this year: 8,750 kg"}),h.jsx("div",{children:"+32% from last year"})]})]})}),h.jsx("div",{children:h.jsxs("div",{className:"ocean-card p-6",children:[h.jsxs("div",{className:"flex justify-between items-center mb-6",children:[h.jsx("h2",{className:"text-xl font-bold text-cyan-900",children:"Waste Composition"}),h.jsx("div",{className:"text-sm text-cyan-600",children:"This Month"})]}),h.jsx("div",{className:"space-y-3 mb-4",children:_.map((A,P)=>h.jsxs("div",{children:[h.jsxs("div",{className:"flex justify-between mb-1",children:[h.jsx("span",{className:"text-sm text-cyan-900",children:A.type}),h.jsxs("span",{className:"text-sm text-cyan-600",children:[A.percentage,"%"]})]}),h.jsx("div",{className:"progress-bar",children:h.jsx("div",{className:"progress-value",style:{width:`${A.percentage}%`,backgroundColor:A.color}})})]},A.type))}),h.jsx("div",{className:"text-sm text-cyan-600",children:h.jsx("p",{children:"Total waste collected: 250 kg"})})]})})]})]});case"events":return h.jsx(RC,{});case"beachMaps":return h.jsx(RO,{});case"impactReports":return h.jsxs("div",{className:"p-4",children:[h.jsx("h2",{children:"Impact Reports (Under Construction)"}),h.jsx("p",{children:"This section will generate impact reports."})]});case"aiContentCopilot":return h.jsxs("div",{className:"p-4",children:[h.jsx("h2",{children:"AI Content Copilot (Under Construction)"}),h.jsx("p",{children:"This section will feature AI-powered tools."})]});case"settings":return h.jsxs("div",{className:"p-4",children:[h.jsx("h2",{children:"Settings (Under Construction)"}),h.jsx("p",{children:"This section will allow you to configure settings."})]});default:return null}};return h.jsxs(h.Fragment,{children:[h.jsx("style",{children:`
                @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Montserrat:wght@400;500;600;700&display=swap');

                :root {
                    --primary: #0891B2;
                    --primary-dark: #0E7490;
                    --secondary: #0EA5E9;
                    --accent: #06B6D4;
                    --light: #ECFEFF;
                    --dark: #164E63;
                }

                body {
                    font-family: 'Poppins', sans-serif;
                    background-color: #F0FDFF;
                    color: #164E63;
                    overflow-x: hidden;
                }

                h1, h2, h3, h4, h5, h6 {
                    font-family: 'Montserrat', sans-serif;
                }

                .ocean-card {
                    background: linear-gradient(to bottom, #ffffff, #f0fdff);
                    border-radius: 12px; /* Rounded corners */
                }

                .ocean-gradient {
                    background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
                }

                .wave-bg {
                    position: relative;
                    overflow: hidden;
                }

                .wave-bg::before {
                    content: '';
                    position: absolute;
                    bottom: 0;
                    left: 0;
                    right: 0;
                    height: 50px;
                    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1440 320' preserveAspectRatio='none'%3E%3Cpath fill='%230891B2' fill-opacity='0.1' d='M0,192L48,176C96,160,192,128,288,128C384,128,480,160,576,186.7C672,213,768,235,864,229.3C960,224,1056,192,1152,176C1248,160,1344,160,1392,160L1440,160L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z'%3E%3C/path%3E%3C/svg%3E");
                    background-size: cover;
                    opacity: 0.8;
                    z-index: 1;
                }

                .nav-item {
                    /* Essential for aligning icon and text */
                    display: flex;
                    align-items: center;
                    padding: 8px 16px; /* px-4 py-2 */
                    color: #4B5563; /* text-gray-700 */
                    border-radius: 8px; /* rounded-lg */
                    transition: all 0.2s ease-in-out; /* transition-colors duration-200 */
                }

                .nav-item:hover {
                    background-color: #F3F4F6; /* hover:bg-gray-100 */
                }

                .nav-item.active {
                    /* Enhanced highlight with shadow and rounded corners */
                    background-color: #BFDBFE; /* bg-blue-200 (light blue from screenshot) */
                    color: #0F766E; /* text-cyan-900 (stronger text for contrast) */
                    font-weight: 600; /* font-semibold */
                    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06); /* shadow-md */
                    border-radius: 8px; /* rounded-lg */
                }

                .nav-item svg {
                    /* Consistent icon size and margin */
                    height: 20px; /* h-5 */
                    width: 20px; /* w-5 */
                    margin-right: 12px; /* mr-3 */
                }

                /* Explicitly setting line-height for text within nav-item for perfect vertical alignment */
                .nav-item span {
                    line-height: 20px; /* Matches svg height for perfect vertical centering */
                }

                .stat-card {
                    @apply relative overflow-hidden;
                }

                .progress-bar {
                    @apply h-2 rounded-full bg-cyan-100 overflow-hidden;
                }

                .progress-value {
                    @apply h-full bg-cyan-500;
                }

                .badge {
                    @apply inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium;
                }

                .badge-primary {
                    @apply bg-cyan-100 text-cyan-800;
                }

                .badge-success {
                    @apply bg-green-100 text-green-800;
                }

                .badge-warning {
                    @apply bg-amber-100 text-amber-800;
                }

                .badge-danger {
                    @apply bg-red-100 text-red-800;
                }

                .avatar {
                    @apply rounded-full overflow-hidden flex items-center justify-center;
                }

                .avatar-sm {
                    @apply w-8 h-8;
                }

                .avatar-group {
                    @apply flex -space-x-2 overflow-hidden;
                }

                .avatar-group .avatar {
                    @apply ring-2 ring-white;
                }

                /* Ocean Animation */
                @keyframes wave {
                    0% { transform: translateX(0) translateZ(0) scaleY(1); }
                    50% { transform: translateX(-25%) translateZ(0) scaleY(0.8); }
                    100% { transform: translateX(-50%) translateZ(0) scaleY(1); }
                }

                .wave {
                    position: absolute;
                    bottom: 0;
                    left: 0;
                    width: 200%;
                    height: 100px;
                    background-repeat: repeat-x;
                    background-position: 0 bottom;
                    transform-origin: center bottom;
                }

                .wave-1 {
                    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1200 120' preserveAspectRatio='none'%3E%3Cpath fill='%230891B2' fill-opacity='0.2' d='M0,0V46.29c47.79,22.2,103.59,32.17,158,28,70.36-5.37,136.33-33.31,206.8-37.5C438.64,32.43,512.34,53.67,583,72.05c69.27,18,138.3,24.88,209.4,13.08,36.15-6,69.85-17.84,104.45-29.34C989.49,25,1113-14.29,1200,52.47V0Z'%3E%3C/path%3E%3C/svg%3E");
                    opacity: 0.2;
                    animation: wave 15s linear infinite;
                    z-index: 1;
                }

                .wave-2 {
                    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1200 120' preserveAspectRatio='none'%3E%3Cpath fill='%230891B2' fill-opacity='0.3' d='M0,0V46.29c47.79,22.2,103.59,32.17,158,28,70.36-5.37,136.33-33.31,206.8-37.5C438.64,32.43,512.34,53.67,583,72.05c69.27,18,138.3,24.88,209.4,13.08,36.15-6,69.85-17.84,104.45-29.34C989.49,25,1113-14.29,1200,52.47V0Z'%3E%3C/path%3E%3C/svg%3E");
                    opacity: 0.3;
                    animation: wave 10s linear infinite;
                    z-index: 2;
                }

                .wave-3 {
                    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1200 120' preserveAspectRatio='none'%3E%3Cpath fill='%230891B2' fill-opacity='0.4' d='M0,0V46.29c47.79,22.2,103.59,32.17,158,28,70.36-5.37,136.33-33.31,206.8-37.5C438.64,32.43,512.34,53.67,583,72.05c69.27,18,138.3,24.88,209.4,13.08,36.15-6,69.85-17.84,104.45-29.34C989.49,25,1113-14.29,1200,52.47V0Z'%3E%3C/path%3E%3C/svg%3E");
                    opacity: 0.4;
                    animation: wave 7s linear infinite;
                    z-index: 3;
                }

                /* Bubble Animation */
                .bubble-container {
                    position: absolute;
                    bottom: 0;
                    left: 0;
                    width: 100%;
                    height: 100%;
                    overflow: hidden;
                    pointer-events: none;
                    z-index: 0;
                }

                .bubble {
                    position: absolute;
                    border-radius: 50%;
                    background: rgba(8, 145, 178, 0.1);
                    animation: bubble-rise linear infinite;
                }

                @keyframes bubble-rise {
                    0% {
                        transform: translateY(100%) scale(0);
                        opacity: 0;
                    }
                    50% {
                        opacity: 0.5;
                    }
                    100% {
                        transform: translateY(-100vh) scale(1);
                        opacity: 0;
                    }
                }

                /* Responsive Sidebar */
                @media (max-width: 768px) {
                    .sidebar {
                        transform: translateX(-100%);
                        transition: transform 0.3s ease-in-out;
                    }

                    .sidebar.open {
                        transform: translateX(0);
                    }

                    .sidebar-overlay {
                        display: none;
                    }

                    .sidebar-overlay.open {
                        display: block;
                    }
                }

                /* Custom Scrollbar */
                ::-webkit-scrollbar {
                    width: 6px;
                }

                ::-webkit-scrollbar-track {
                    background: #f0fdff;
                }

                ::-webkit-scrollbar-thumb {
                    background: #0891B2;
                    border-radius: 3px;
                }

                ::-webkit-scrollbar-thumb:hover {
                    background: #0E7490;
                }

                /* Chart Styles */
                .chart-container {
                    position: relative;
                    height: 200px; /* Fixed height for the chart area */
                    width: 100%;
                    display: flex; /* Use flexbox for distribution */
                    align-items: flex-end; /* Align bars to the bottom */
                    justify-content: space-around; /* Distribute items evenly with space around them */
                }

                .chart-bar-group {
                    display: flex;
                    flex-direction: column;
                    align-items: center;
                    justify-content: flex-end; /* Keep bar at the bottom within its group */
                    height: 100%; /* Crucial: Ensures the group takes full height of the container */
                    flex-grow: 1; /* Allow groups to grow and take available space horizontally */
                    max-width: 8%; /* Max width for each bar group, keeping bars from getting too wide */
                    margin: 0 1%; /* Add some margin between bars */
                }

                .chart-bar {
                    width: 80%; /* Width of the bar within its group (e.g., 80% of 8% max-width = ~6.4% of total width) */
                    background: linear-gradient(to top, #0891B2, #22D3EE);
                    border-radius: 4px 4px 0 0;
                    transition: height 0.3s ease-in-out; /* Adjusted transition for a snappier animation */
                    transform-origin: bottom; /* Ensure it grows from the bottom */
                }

                .chart-label {
                    font-size: 10px;
                    color: #0E7490;
                    margin-top: 5px; /* Space between bar and label */
                    text-align: center;
                    width: 100%; /* Ensure label takes full width of its group */
                }

                /* Logo styles */
                .logo-container {
                    display: flex;
                    align-items: center;
                    padding: 24px 0;
                    justify-content: center;
                    border-bottom: 1px solid #e2e8f0;
                    margin-bottom: 24px;
                }
                .logo-container svg {
                    height: 32px;
                    width: 32px;
                    margin-right: 12px;
                    color: #0ea5e9; /* Added color to match the screenshot */
                }
                .logo-container span {
                    font-size: 24px;
                    font-weight: 700;
                    color: var(--primary-dark);
                }

                /* Stat card icon */
                .stat-card-icon {
                    @apply flex items-center justify-center rounded-full w-12 h-12 mb-4;
                }
                `}),h.jsxs("div",{className:"flex min-h-screen bg-cyan-50",children:[h.jsx("aside",{className:`sidebar fixed inset-y-0 left-0 w-64 bg-white shadow-lg z-30 transform md:translate-x-0 transition-transform duration-300 ${t?"open":""}`,children:h.jsxs("div",{className:"flex flex-col h-full",children:[h.jsxs("div",{className:"logo-container",children:[h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),h.jsx("span",{children:"Beach Warriors"})]}),h.jsx("nav",{className:"flex-1 overflow-y-auto py-4 px-3",children:h.jsxs("div",{className:"flex flex-col space-y-1",children:[" ",h.jsxs("button",{onClick:()=>k("orgdashboard"),className:`nav-item ${i==="orgdashboard"?"active":""}`,children:[h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),h.jsx("span",{children:"Dashboard"})]}),h.jsxs("button",{onClick:()=>k("events"),className:`nav-item ${i==="events"?"active":""}`,children:[h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),h.jsx("span",{children:"Events"})]}),h.jsxs("button",{onClick:()=>k("beachMaps"),className:`nav-item ${i==="beachMaps"?"active":""}`,children:[h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3.055 11H5a2 2 0 012 2v1a2 2 0 002 2h7m-9-6h8m-9 6a2 2 0 012-2h7a2 2 0 012 2v2a2 2 0 002 2h0a2 2 0 002-2V9a2 2 0 012-2h0a2 2 0 012 2v7a2 2 0 01-2 2H5a2 2 0 01-2-2v-7a2 2 0 00-2-2z"})}),h.jsx("span",{children:"Beach Maps"})]}),h.jsxs("button",{onClick:()=>k("impactReports"),className:`nav-item ${i==="impactReports"?"active":""}`,children:[h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 17v-2m3 2v-4m3 2v-6m2 9H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),h.jsx("span",{children:"Impact Reports"})]}),h.jsxs("button",{onClick:()=>k("aiContentCopilot"),className:`nav-item ${i==="aiContentCopilot"?"active":""}`,children:[h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),h.jsx("span",{children:"AI Content Copilot"})]}),h.jsxs("button",{onClick:()=>k("settings"),className:`nav-item ${i==="settings"?"active":""}`,children:[h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.564.342 1.258.164 1.724-1.065z"}),h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),h.jsx("span",{children:"Settings"})]})]})}),h.jsx("div",{className:"p-4 border-t border-cyan-100 mt-auto",children:h.jsxs("div",{className:"flex items-center space-x-3",children:[h.jsx("img",{className:"w-10 h-10 rounded-full",src:"https://placehold.co/40x40/0EA5E9/FFFFFF?text=MC",alt:"Marina Costa Profile",onError:A=>{A.target.onerror=null,A.target.src="https://placehold.co/40x40/cccccc/000000?text=User"}}),h.jsxs("div",{children:[h.jsx("p",{className:"text-sm font-medium text-cyan-900",children:"Anjali Verma"}),h.jsx("p",{className:"text-xs text-gray-600",children:"Beach Cleanup Organizer"})]})]})}),h.jsx("div",{className:"mt-auto mb-3",children:h.jsxs("button",{onClick:()=>{window.confirm("Are you sure you want to log out?")&&n("home")},className:"w-full flex items-center justify-center px-3 py-1.5 text-xs font-medium text-cyan-600 bg-white border border-cyan-500 rounded-[10px] hover:bg-cyan-50 transition-all duration-200",children:[h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3.5 w-3.0 mr-1.5 text-cyan-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a1 1 0 01-1 1H6a2 2 0 01-2-2V7a2 2 0 012-2h6a1 1 0 011 1v1"})}),"Logout"]})})]})}),h.jsx("div",{onClick:()=>r(!1),className:`sidebar-overlay fixed inset-0 bg-black bg-opacity-50 z-20 md:hidden ${t?"open":""}`}),h.jsxs("main",{className:"flex-1 ml-0 md:ml-64 p-4 md:p-8 relative overflow-hidden",children:[h.jsx("div",{className:"bubble-container",ref:y}),S()," ",h.jsxs("div",{className:"fixed bottom-0 left-0 right-0 h-20 pointer-events-none z-0",children:[h.jsx("div",{className:"wave wave-1"}),h.jsx("div",{className:"wave wave-2"}),h.jsx("div",{className:"wave wave-3"})]})]})]})]})};/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DO=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),jC=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var MO={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PO=re.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:i="",children:o,iconNode:s,...a},l)=>re.createElement("svg",{ref:l,...MO,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:jC("lucide",i),...a},[...s.map(([u,f])=>re.createElement(u,f)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ir=(n,e)=>{const t=re.forwardRef(({className:r,...i},o)=>re.createElement(PO,{ref:o,iconNode:e,className:jC(`lucide-${DO(n)}`,r),...i}));return t.displayName=`${n}`,t};/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qc=Ir("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OO=Ir("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R2=Ir("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FO=Ir("Leaf",[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LO=Ir("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j2=Ir("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D0=Ir("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T2=Ir("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BO=Ir("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D2=Ir("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zO=Ir("Waves",[["path",{d:"M2 6c.6.5 1.2 1 2.5 1C7 7 7 5 9.5 5c2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"knzxuh"}],["path",{d:"M2 12c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"2jd2cc"}],["path",{d:"M2 18c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"rd2r6e"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WO=Ir("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M2=Ir("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),VO=()=>{const[n,e]=re.useState(!1),[t,r]=re.useState([]),[i,o]=re.useState(""),[s,a]=re.useState([{role:"assistant",content:"Hello! How can I assist you today?"}]),l=re.useRef(null);re.useEffect(()=>{const p=m=>{l.current&&!l.current.contains(m.target)&&e(!1)};return n?document.addEventListener("mousedown",p):document.removeEventListener("mousedown",p),()=>document.removeEventListener("mousedown",p)},[n]);const u=async(p=i)=>{if(!p.trim())return;const m={role:"user",content:p};a(v=>[...v,m]);try{const y=await(await fetch("https://hackathon-project-backend-5dzg.onrender.com/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:p})})).json(),w={role:"assistant",content:y.reply};a(_=>[..._,w]),r(y.suggestions||[])}catch(v){console.error("Chatbot error:",v),a(y=>[...y,{role:"assistant",content:"Sorry, I'm having trouble answering right now."}])}o("")},f=p=>{u(p),r([])};return h.jsxs("div",{className:"fixed bottom-6 right-6 z-50",children:[n&&h.jsxs("div",{ref:l,className:"w-80 h-[30rem] bg-[#FFF8E1] rounded-2xl shadow-2xl p-4 flex flex-col border border-[#F4511E]",children:[h.jsxs("div",{className:"flex justify-between items-center mb-2",children:[h.jsx("h2",{className:"text-lg font-semibold text-[#FF7043]",children:"BeachBot "}),h.jsx("button",{onClick:()=>e(!1),className:"text-[#F4511E] font-bold text-xl",children:""})]}),h.jsxs("div",{className:"flex-1 overflow-y-auto border rounded p-2 text-sm text-[#4E342E] bg-white space-y-2",children:[s.map((p,m)=>h.jsx("div",{className:`p-2 rounded-lg ${p.role==="user"?"bg-[#FFE0B2] self-end text-right":"bg-[#FFF3E0]"}`,children:p.content},m)),t.length>0&&h.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:t.map((p,m)=>h.jsx("button",{onClick:()=>f(p),className:"bg-orange-100 text-sm text-[#BF360C] border border-orange-300 px-3 py-1 rounded-full hover:bg-orange-200 transition",children:p},m))})]}),h.jsxs("div",{className:"mt-2 flex items-center space-x-2",children:[h.jsx("input",{type:"text",placeholder:"Type your message...",value:i,onChange:p=>o(p.target.value),onKeyDown:p=>p.key==="Enter"&&u(),className:"flex-1 bg-white border border-orange-300 rounded-full px-5 py-2 text-[#333] shadow-inner focus:outline-none focus:ring-2 focus:ring-orange-400 transition"}),h.jsx("button",{onClick:()=>u(),className:"p-3 bg-gradient-to-br from-orange-500 via-rose-500 to-red-500 text-white rounded-full shadow-[0_4px_14px_rgba(255,80,80,0.4)] hover:shadow-[0_6px_24px_rgba(255,50,50,0.6)] transition-all duration-300 ease-in-out transform hover:scale-110 active:scale-95 focus:outline-none","aria-label":"Send message",children:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 24 24",fill:"currentColor",children:h.jsx("path",{d:"M2 21l21-9L2 3v7l15 2-15 2z"})})})]})]}),!n&&h.jsx("button",{onClick:()=>e(!0),className:"bg-[#FF7043] text-white rounded-full p-4 shadow-lg hover:bg-[#F4511E] transition-all",children:h.jsx(LO,{})})]})};/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function id(n){return n+.5|0}const ps=(n,e,t)=>Math.max(Math.min(n,t),e);function lu(n){return ps(id(n*2.55),0,255)}function ks(n){return ps(id(n*255),0,255)}function vo(n){return ps(id(n/2.55)/100,0,1)}function P2(n){return ps(id(n*100),0,100)}const Lr={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Ag=[..."0123456789ABCDEF"],UO=n=>Ag[n&15],HO=n=>Ag[(n&240)>>4]+Ag[n&15],Fh=n=>(n&240)>>4===(n&15),GO=n=>Fh(n.r)&&Fh(n.g)&&Fh(n.b)&&Fh(n.a);function $O(n){var e=n.length,t;return n[0]==="#"&&(e===4||e===5?t={r:255&Lr[n[1]]*17,g:255&Lr[n[2]]*17,b:255&Lr[n[3]]*17,a:e===5?Lr[n[4]]*17:255}:(e===7||e===9)&&(t={r:Lr[n[1]]<<4|Lr[n[2]],g:Lr[n[3]]<<4|Lr[n[4]],b:Lr[n[5]]<<4|Lr[n[6]],a:e===9?Lr[n[7]]<<4|Lr[n[8]]:255})),t}const qO=(n,e)=>n<255?e(n):"";function KO(n){var e=GO(n)?UO:HO;return n?"#"+e(n.r)+e(n.g)+e(n.b)+qO(n.a,e):void 0}const XO=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function TC(n,e,t){const r=e*Math.min(t,1-t),i=(o,s=(o+n/30)%12)=>t-r*Math.max(Math.min(s-3,9-s,1),-1);return[i(0),i(8),i(4)]}function YO(n,e,t){const r=(i,o=(i+n/60)%6)=>t-t*e*Math.max(Math.min(o,4-o,1),0);return[r(5),r(3),r(1)]}function JO(n,e,t){const r=TC(n,1,.5);let i;for(e+t>1&&(i=1/(e+t),e*=i,t*=i),i=0;i<3;i++)r[i]*=1-e-t,r[i]+=e;return r}function QO(n,e,t,r,i){return n===i?(e-t)/r+(e<t?6:0):e===i?(t-n)/r+2:(n-e)/r+4}function sx(n){const t=n.r/255,r=n.g/255,i=n.b/255,o=Math.max(t,r,i),s=Math.min(t,r,i),a=(o+s)/2;let l,u,f;return o!==s&&(f=o-s,u=a>.5?f/(2-o-s):f/(o+s),l=QO(t,r,i,f,o),l=l*60+.5),[l|0,u||0,a]}function ax(n,e,t,r){return(Array.isArray(e)?n(e[0],e[1],e[2]):n(e,t,r)).map(ks)}function lx(n,e,t){return ax(TC,n,e,t)}function ZO(n,e,t){return ax(JO,n,e,t)}function eF(n,e,t){return ax(YO,n,e,t)}function DC(n){return(n%360+360)%360}function tF(n){const e=XO.exec(n);let t=255,r;if(!e)return;e[5]!==r&&(t=e[6]?lu(+e[5]):ks(+e[5]));const i=DC(+e[2]),o=+e[3]/100,s=+e[4]/100;return e[1]==="hwb"?r=ZO(i,o,s):e[1]==="hsv"?r=eF(i,o,s):r=lx(i,o,s),{r:r[0],g:r[1],b:r[2],a:t}}function nF(n,e){var t=sx(n);t[0]=DC(t[0]+e),t=lx(t),n.r=t[0],n.g=t[1],n.b=t[2]}function rF(n){if(!n)return;const e=sx(n),t=e[0],r=P2(e[1]),i=P2(e[2]);return n.a<255?`hsla(${t}, ${r}%, ${i}%, ${vo(n.a)})`:`hsl(${t}, ${r}%, ${i}%)`}const O2={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},F2={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function iF(){const n={},e=Object.keys(F2),t=Object.keys(O2);let r,i,o,s,a;for(r=0;r<e.length;r++){for(s=a=e[r],i=0;i<t.length;i++)o=t[i],a=a.replace(o,O2[o]);o=parseInt(F2[s],16),n[a]=[o>>16&255,o>>8&255,o&255]}return n}let Lh;function oF(n){Lh||(Lh=iF(),Lh.transparent=[0,0,0,0]);const e=Lh[n.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const sF=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function aF(n){const e=sF.exec(n);let t=255,r,i,o;if(e){if(e[7]!==r){const s=+e[7];t=e[8]?lu(s):ps(s*255,0,255)}return r=+e[1],i=+e[3],o=+e[5],r=255&(e[2]?lu(r):ps(r,0,255)),i=255&(e[4]?lu(i):ps(i,0,255)),o=255&(e[6]?lu(o):ps(o,0,255)),{r,g:i,b:o,a:t}}}function lF(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${vo(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}const M0=n=>n<=.0031308?n*12.92:Math.pow(n,1/2.4)*1.055-.055,Nl=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function cF(n,e,t){const r=Nl(vo(n.r)),i=Nl(vo(n.g)),o=Nl(vo(n.b));return{r:ks(M0(r+t*(Nl(vo(e.r))-r))),g:ks(M0(i+t*(Nl(vo(e.g))-i))),b:ks(M0(o+t*(Nl(vo(e.b))-o))),a:n.a+t*(e.a-n.a)}}function Bh(n,e,t){if(n){let r=sx(n);r[e]=Math.max(0,Math.min(r[e]+r[e]*t,e===0?360:1)),r=lx(r),n.r=r[0],n.g=r[1],n.b=r[2]}}function MC(n,e){return n&&Object.assign(e||{},n)}function L2(n){var e={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(e={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(e.a=ks(n[3]))):(e=MC(n,{r:0,g:0,b:0,a:1}),e.a=ks(e.a)),e}function uF(n){return n.charAt(0)==="r"?aF(n):tF(n)}class Du{constructor(e){if(e instanceof Du)return e;const t=typeof e;let r;t==="object"?r=L2(e):t==="string"&&(r=$O(e)||oF(e)||uF(e)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var e=MC(this._rgb);return e&&(e.a=vo(e.a)),e}set rgb(e){this._rgb=L2(e)}rgbString(){return this._valid?lF(this._rgb):void 0}hexString(){return this._valid?KO(this._rgb):void 0}hslString(){return this._valid?rF(this._rgb):void 0}mix(e,t){if(e){const r=this.rgb,i=e.rgb;let o;const s=t===o?.5:t,a=2*s-1,l=r.a-i.a,u=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;o=1-u,r.r=255&u*r.r+o*i.r+.5,r.g=255&u*r.g+o*i.g+.5,r.b=255&u*r.b+o*i.b+.5,r.a=s*r.a+(1-s)*i.a,this.rgb=r}return this}interpolate(e,t){return e&&(this._rgb=cF(this._rgb,e._rgb,t)),this}clone(){return new Du(this.rgb)}alpha(e){return this._rgb.a=ks(e),this}clearer(e){const t=this._rgb;return t.a*=1-e,this}greyscale(){const e=this._rgb,t=id(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=t,this}opaquer(e){const t=this._rgb;return t.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Bh(this._rgb,2,e),this}darken(e){return Bh(this._rgb,2,-e),this}saturate(e){return Bh(this._rgb,1,e),this}desaturate(e){return Bh(this._rgb,1,-e),this}rotate(e){return nF(this._rgb,e),this}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function fo(){}const dF=(()=>{let n=0;return()=>n++})();function Ze(n){return n==null}function At(n){if(Array.isArray&&Array.isArray(n))return!0;const e=Object.prototype.toString.call(n);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function tt(n){return n!==null&&Object.prototype.toString.call(n)==="[object Object]"}function zt(n){return(typeof n=="number"||n instanceof Number)&&isFinite(+n)}function br(n,e){return zt(n)?n:e}function qe(n,e){return typeof n>"u"?e:n}const hF=(n,e)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100:+n/e,PC=(n,e)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100*e:+n;function _t(n,e,t){if(n&&typeof n.call=="function")return n.apply(t,e)}function vt(n,e,t,r){let i,o,s;if(At(n))for(o=n.length,i=0;i<o;i++)e.call(t,n[i],i);else if(tt(n))for(s=Object.keys(n),o=s.length,i=0;i<o;i++)e.call(t,n[s[i]],s[i])}function zf(n,e){let t,r,i,o;if(!n||!e||n.length!==e.length)return!1;for(t=0,r=n.length;t<r;++t)if(i=n[t],o=e[t],i.datasetIndex!==o.datasetIndex||i.index!==o.index)return!1;return!0}function Wf(n){if(At(n))return n.map(Wf);if(tt(n)){const e=Object.create(null),t=Object.keys(n),r=t.length;let i=0;for(;i<r;++i)e[t[i]]=Wf(n[t[i]]);return e}return n}function OC(n){return["__proto__","prototype","constructor"].indexOf(n)===-1}function fF(n,e,t,r){if(!OC(n))return;const i=e[n],o=t[n];tt(i)&&tt(o)?Mu(i,o,r):e[n]=Wf(o)}function Mu(n,e,t){const r=At(e)?e:[e],i=r.length;if(!tt(n))return n;t=t||{};const o=t.merger||fF;let s;for(let a=0;a<i;++a){if(s=r[a],!tt(s))continue;const l=Object.keys(s);for(let u=0,f=l.length;u<f;++u)o(l[u],n,s,t)}return n}function yu(n,e){return Mu(n,e,{merger:pF})}function pF(n,e,t){if(!OC(n))return;const r=e[n],i=t[n];tt(r)&&tt(i)?yu(r,i):Object.prototype.hasOwnProperty.call(e,n)||(e[n]=Wf(i))}const B2={"":n=>n,x:n=>n.x,y:n=>n.y};function mF(n){const e=n.split("."),t=[];let r="";for(const i of e)r+=i,r.endsWith("\\")?r=r.slice(0,-1)+".":(t.push(r),r="");return t}function gF(n){const e=mF(n);return t=>{for(const r of e){if(r==="")break;t=t&&t[r]}return t}}function Ns(n,e){return(B2[e]||(B2[e]=gF(e)))(n)}function cx(n){return n.charAt(0).toUpperCase()+n.slice(1)}const Pu=n=>typeof n<"u",Ss=n=>typeof n=="function",z2=(n,e)=>{if(n.size!==e.size)return!1;for(const t of n)if(!e.has(t))return!1;return!0};function vF(n){return n.type==="mouseup"||n.type==="click"||n.type==="contextmenu"}const ct=Math.PI,St=2*ct,xF=St+ct,Vf=Number.POSITIVE_INFINITY,yF=ct/180,Ut=ct/2,oa=ct/4,W2=ct*2/3,ms=Math.log10,Li=Math.sign;function bu(n,e,t){return Math.abs(n-e)<t}function V2(n){const e=Math.round(n);n=bu(n,e,n/1e3)?e:n;const t=Math.pow(10,Math.floor(ms(n))),r=n/t;return(r<=1?1:r<=2?2:r<=5?5:10)*t}function bF(n){const e=[],t=Math.sqrt(n);let r;for(r=1;r<t;r++)n%r===0&&(e.push(r),e.push(n/r));return t===(t|0)&&e.push(t),e.sort((i,o)=>i-o).pop(),e}function wF(n){return typeof n=="symbol"||typeof n=="object"&&n!==null&&!(Symbol.toPrimitive in n||"toString"in n||"valueOf"in n)}function Jl(n){return!wF(n)&&!isNaN(parseFloat(n))&&isFinite(n)}function _F(n,e){const t=Math.round(n);return t-e<=n&&t+e>=n}function FC(n,e,t){let r,i,o;for(r=0,i=n.length;r<i;r++)o=n[r][t],isNaN(o)||(e.min=Math.min(e.min,o),e.max=Math.max(e.max,o))}function ci(n){return n*(ct/180)}function ux(n){return n*(180/ct)}function U2(n){if(!zt(n))return;let e=1,t=0;for(;Math.round(n*e)/e!==n;)e*=10,t++;return t}function LC(n,e){const t=e.x-n.x,r=e.y-n.y,i=Math.sqrt(t*t+r*r);let o=Math.atan2(r,t);return o<-.5*ct&&(o+=St),{angle:o,distance:i}}function Rg(n,e){return Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))}function kF(n,e){return(n-e+xF)%St-ct}function Dn(n){return(n%St+St)%St}function Ou(n,e,t,r){const i=Dn(n),o=Dn(e),s=Dn(t),a=Dn(o-i),l=Dn(s-i),u=Dn(i-o),f=Dn(i-s);return i===o||i===s||r&&o===s||a>l&&u<f}function fn(n,e,t){return Math.max(e,Math.min(t,n))}function CF(n){return fn(n,-32768,32767)}function wo(n,e,t,r=1e-6){return n>=Math.min(e,t)-r&&n<=Math.max(e,t)+r}function dx(n,e,t){t=t||(s=>n[s]<e);let r=n.length-1,i=0,o;for(;r-i>1;)o=i+r>>1,t(o)?i=o:r=o;return{lo:i,hi:r}}const _o=(n,e,t,r)=>dx(n,t,r?i=>{const o=n[i][e];return o<t||o===t&&n[i+1][e]===t}:i=>n[i][e]<t),EF=(n,e,t)=>dx(n,t,r=>n[r][e]>=t);function NF(n,e,t){let r=0,i=n.length;for(;r<i&&n[r]<e;)r++;for(;i>r&&n[i-1]>t;)i--;return r>0||i<n.length?n.slice(r,i):n}const BC=["push","pop","shift","splice","unshift"];function SF(n,e){if(n._chartjs){n._chartjs.listeners.push(e);return}Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),BC.forEach(t=>{const r="_onData"+cx(t),i=n[t];Object.defineProperty(n,t,{configurable:!0,enumerable:!1,value(...o){const s=i.apply(this,o);return n._chartjs.listeners.forEach(a=>{typeof a[r]=="function"&&a[r](...o)}),s}})})}function H2(n,e){const t=n._chartjs;if(!t)return;const r=t.listeners,i=r.indexOf(e);i!==-1&&r.splice(i,1),!(r.length>0)&&(BC.forEach(o=>{delete n[o]}),delete n._chartjs)}function zC(n){const e=new Set(n);return e.size===n.length?n:Array.from(e)}const WC=function(){return typeof window>"u"?function(n){return n()}:window.requestAnimationFrame}();function VC(n,e){let t=[],r=!1;return function(...i){t=i,r||(r=!0,WC.call(window,()=>{r=!1,n.apply(e,t)}))}}function IF(n,e){let t;return function(...r){return e?(clearTimeout(t),t=setTimeout(n,e,r)):n.apply(this,r),e}}const hx=n=>n==="start"?"left":n==="end"?"right":"center",jn=(n,e,t)=>n==="start"?e:n==="end"?t:(e+t)/2,AF=(n,e,t,r)=>n===(r?"left":"right")?t:n==="center"?(e+t)/2:e;function UC(n,e,t){const r=e.length;let i=0,o=r;if(n._sorted){const{iScale:s,vScale:a,_parsed:l}=n,u=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null,f=s.axis,{min:p,max:m,minDefined:v,maxDefined:y}=s.getUserBounds();if(v){if(i=Math.min(_o(l,f,p).lo,t?r:_o(e,f,s.getPixelForValue(p)).lo),u){const w=l.slice(0,i+1).reverse().findIndex(_=>!Ze(_[a.axis]));i-=Math.max(0,w)}i=fn(i,0,r-1)}if(y){let w=Math.max(_o(l,s.axis,m,!0).hi+1,t?0:_o(e,f,s.getPixelForValue(m),!0).hi+1);if(u){const _=l.slice(w-1).findIndex(k=>!Ze(k[a.axis]));w+=Math.max(0,_)}o=fn(w,i,r)-i}else o=r-i}return{start:i,count:o}}function HC(n){const{xScale:e,yScale:t,_scaleRanges:r}=n,i={xmin:e.min,xmax:e.max,ymin:t.min,ymax:t.max};if(!r)return n._scaleRanges=i,!0;const o=r.xmin!==e.min||r.xmax!==e.max||r.ymin!==t.min||r.ymax!==t.max;return Object.assign(r,i),o}const zh=n=>n===0||n===1,G2=(n,e,t)=>-(Math.pow(2,10*(n-=1))*Math.sin((n-e)*St/t)),$2=(n,e,t)=>Math.pow(2,-10*n)*Math.sin((n-e)*St/t)+1,wu={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>-Math.cos(n*Ut)+1,easeOutSine:n=>Math.sin(n*Ut),easeInOutSine:n=>-.5*(Math.cos(ct*n)-1),easeInExpo:n=>n===0?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>n===1?1:-Math.pow(2,-10*n)+1,easeInOutExpo:n=>zh(n)?n:n<.5?.5*Math.pow(2,10*(n*2-1)):.5*(-Math.pow(2,-10*(n*2-1))+2),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>zh(n)?n:G2(n,.075,.3),easeOutElastic:n=>zh(n)?n:$2(n,.075,.3),easeInOutElastic(n){return zh(n)?n:n<.5?.5*G2(n*2,.1125,.45):.5+.5*$2(n*2-1,.1125,.45)},easeInBack(n){return n*n*((1.70158+1)*n-1.70158)},easeOutBack(n){return(n-=1)*n*((1.70158+1)*n+1.70158)+1},easeInOutBack(n){let e=1.70158;return(n/=.5)<1?.5*(n*n*(((e*=1.525)+1)*n-e)):.5*((n-=2)*n*(((e*=1.525)+1)*n+e)+2)},easeInBounce:n=>1-wu.easeOutBounce(1-n),easeOutBounce(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},easeInOutBounce:n=>n<.5?wu.easeInBounce(n*2)*.5:wu.easeOutBounce(n*2-1)*.5+.5};function fx(n){if(n&&typeof n=="object"){const e=n.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function q2(n){return fx(n)?n:new Du(n)}function P0(n){return fx(n)?n:new Du(n).saturate(.5).darken(.1).hexString()}const RF=["x","y","borderWidth","radius","tension"],jF=["color","borderColor","backgroundColor"];function TF(n){n.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),n.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),n.set("animations",{colors:{type:"color",properties:jF},numbers:{type:"number",properties:RF}}),n.describe("animations",{_fallback:"animation"}),n.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function DF(n){n.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const K2=new Map;function MF(n,e){e=e||{};const t=n+JSON.stringify(e);let r=K2.get(t);return r||(r=new Intl.NumberFormat(n,e),K2.set(t,r)),r}function od(n,e,t){return MF(e,t).format(n)}const GC={values(n){return At(n)?n:""+n},numeric(n,e,t){if(n===0)return"0";const r=this.chart.options.locale;let i,o=n;if(t.length>1){const u=Math.max(Math.abs(t[0].value),Math.abs(t[t.length-1].value));(u<1e-4||u>1e15)&&(i="scientific"),o=PF(n,t)}const s=ms(Math.abs(o)),a=isNaN(s)?1:Math.max(Math.min(-1*Math.floor(s),20),0),l={notation:i,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),od(n,r,l)},logarithmic(n,e,t){if(n===0)return"0";const r=t[e].significand||n/Math.pow(10,Math.floor(ms(n)));return[1,2,3,5,10,15].includes(r)||e>.8*t.length?GC.numeric.call(this,n,e,t):""}};function PF(n,e){let t=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(t)>=1&&n!==Math.floor(n)&&(t=n-Math.floor(n)),t}var hp={formatters:GC};function OF(n){n.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:hp.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),n.route("scale.ticks","color","","color"),n.route("scale.grid","color","","borderColor"),n.route("scale.border","color","","borderColor"),n.route("scale.title","color","","color"),n.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),n.describe("scales",{_fallback:"scale"}),n.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const Na=Object.create(null),jg=Object.create(null);function _u(n,e){if(!e)return n;const t=e.split(".");for(let r=0,i=t.length;r<i;++r){const o=t[r];n=n[o]||(n[o]=Object.create(null))}return n}function O0(n,e,t){return typeof e=="string"?Mu(_u(n,e),t):Mu(_u(n,""),e)}class FF{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,i)=>P0(i.backgroundColor),this.hoverBorderColor=(r,i)=>P0(i.borderColor),this.hoverColor=(r,i)=>P0(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return O0(this,e,t)}get(e){return _u(this,e)}describe(e,t){return O0(jg,e,t)}override(e,t){return O0(Na,e,t)}route(e,t,r,i){const o=_u(this,e),s=_u(this,r),a="_"+t;Object.defineProperties(o,{[a]:{value:o[t],writable:!0},[t]:{enumerable:!0,get(){const l=this[a],u=s[i];return tt(l)?Object.assign({},u,l):qe(l,u)},set(l){this[a]=l}}})}apply(e){e.forEach(t=>t(this))}}var Rt=new FF({_scriptable:n=>!n.startsWith("on"),_indexable:n=>n!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[TF,DF,OF]);function LF(n){return!n||Ze(n.size)||Ze(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}function Uf(n,e,t,r,i){let o=e[i];return o||(o=e[i]=n.measureText(i).width,t.push(i)),o>r&&(r=o),r}function BF(n,e,t,r){r=r||{};let i=r.data=r.data||{},o=r.garbageCollect=r.garbageCollect||[];r.font!==e&&(i=r.data={},o=r.garbageCollect=[],r.font=e),n.save(),n.font=e;let s=0;const a=t.length;let l,u,f,p,m;for(l=0;l<a;l++)if(p=t[l],p!=null&&!At(p))s=Uf(n,i,o,s,p);else if(At(p))for(u=0,f=p.length;u<f;u++)m=p[u],m!=null&&!At(m)&&(s=Uf(n,i,o,s,m));n.restore();const v=o.length/2;if(v>t.length){for(l=0;l<v;l++)delete i[o[l]];o.splice(0,v)}return s}function sa(n,e,t){const r=n.currentDevicePixelRatio,i=t!==0?Math.max(t/2,.5):0;return Math.round((e-i)*r)/r+i}function X2(n,e){!e&&!n||(e=e||n.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,n.width,n.height),e.restore())}function Tg(n,e,t,r){$C(n,e,t,r,null)}function $C(n,e,t,r,i){let o,s,a,l,u,f,p,m;const v=e.pointStyle,y=e.rotation,w=e.radius;let _=(y||0)*yF;if(v&&typeof v=="object"&&(o=v.toString(),o==="[object HTMLImageElement]"||o==="[object HTMLCanvasElement]")){n.save(),n.translate(t,r),n.rotate(_),n.drawImage(v,-v.width/2,-v.height/2,v.width,v.height),n.restore();return}if(!(isNaN(w)||w<=0)){switch(n.beginPath(),v){default:i?n.ellipse(t,r,i/2,w,0,0,St):n.arc(t,r,w,0,St),n.closePath();break;case"triangle":f=i?i/2:w,n.moveTo(t+Math.sin(_)*f,r-Math.cos(_)*w),_+=W2,n.lineTo(t+Math.sin(_)*f,r-Math.cos(_)*w),_+=W2,n.lineTo(t+Math.sin(_)*f,r-Math.cos(_)*w),n.closePath();break;case"rectRounded":u=w*.516,l=w-u,s=Math.cos(_+oa)*l,p=Math.cos(_+oa)*(i?i/2-u:l),a=Math.sin(_+oa)*l,m=Math.sin(_+oa)*(i?i/2-u:l),n.arc(t-p,r-a,u,_-ct,_-Ut),n.arc(t+m,r-s,u,_-Ut,_),n.arc(t+p,r+a,u,_,_+Ut),n.arc(t-m,r+s,u,_+Ut,_+ct),n.closePath();break;case"rect":if(!y){l=Math.SQRT1_2*w,f=i?i/2:l,n.rect(t-f,r-l,2*f,2*l);break}_+=oa;case"rectRot":p=Math.cos(_)*(i?i/2:w),s=Math.cos(_)*w,a=Math.sin(_)*w,m=Math.sin(_)*(i?i/2:w),n.moveTo(t-p,r-a),n.lineTo(t+m,r-s),n.lineTo(t+p,r+a),n.lineTo(t-m,r+s),n.closePath();break;case"crossRot":_+=oa;case"cross":p=Math.cos(_)*(i?i/2:w),s=Math.cos(_)*w,a=Math.sin(_)*w,m=Math.sin(_)*(i?i/2:w),n.moveTo(t-p,r-a),n.lineTo(t+p,r+a),n.moveTo(t+m,r-s),n.lineTo(t-m,r+s);break;case"star":p=Math.cos(_)*(i?i/2:w),s=Math.cos(_)*w,a=Math.sin(_)*w,m=Math.sin(_)*(i?i/2:w),n.moveTo(t-p,r-a),n.lineTo(t+p,r+a),n.moveTo(t+m,r-s),n.lineTo(t-m,r+s),_+=oa,p=Math.cos(_)*(i?i/2:w),s=Math.cos(_)*w,a=Math.sin(_)*w,m=Math.sin(_)*(i?i/2:w),n.moveTo(t-p,r-a),n.lineTo(t+p,r+a),n.moveTo(t+m,r-s),n.lineTo(t-m,r+s);break;case"line":s=i?i/2:Math.cos(_)*w,a=Math.sin(_)*w,n.moveTo(t-s,r-a),n.lineTo(t+s,r+a);break;case"dash":n.moveTo(t,r),n.lineTo(t+Math.cos(_)*(i?i/2:w),r+Math.sin(_)*w);break;case!1:n.closePath();break}n.fill(),e.borderWidth>0&&n.stroke()}}function ko(n,e,t){return t=t||.5,!e||n&&n.x>e.left-t&&n.x<e.right+t&&n.y>e.top-t&&n.y<e.bottom+t}function fp(n,e){n.save(),n.beginPath(),n.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),n.clip()}function pp(n){n.restore()}function zF(n,e,t,r,i){if(!e)return n.lineTo(t.x,t.y);if(i==="middle"){const o=(e.x+t.x)/2;n.lineTo(o,e.y),n.lineTo(o,t.y)}else i==="after"!=!!r?n.lineTo(e.x,t.y):n.lineTo(t.x,e.y);n.lineTo(t.x,t.y)}function WF(n,e,t,r){if(!e)return n.lineTo(t.x,t.y);n.bezierCurveTo(r?e.cp1x:e.cp2x,r?e.cp1y:e.cp2y,r?t.cp2x:t.cp1x,r?t.cp2y:t.cp1y,t.x,t.y)}function VF(n,e){e.translation&&n.translate(e.translation[0],e.translation[1]),Ze(e.rotation)||n.rotate(e.rotation),e.color&&(n.fillStyle=e.color),e.textAlign&&(n.textAlign=e.textAlign),e.textBaseline&&(n.textBaseline=e.textBaseline)}function UF(n,e,t,r,i){if(i.strikethrough||i.underline){const o=n.measureText(r),s=e-o.actualBoundingBoxLeft,a=e+o.actualBoundingBoxRight,l=t-o.actualBoundingBoxAscent,u=t+o.actualBoundingBoxDescent,f=i.strikethrough?(l+u)/2:u;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=i.decorationWidth||2,n.moveTo(s,f),n.lineTo(a,f),n.stroke()}}function HF(n,e){const t=n.fillStyle;n.fillStyle=e.color,n.fillRect(e.left,e.top,e.width,e.height),n.fillStyle=t}function Sa(n,e,t,r,i,o={}){const s=At(e)?e:[e],a=o.strokeWidth>0&&o.strokeColor!=="";let l,u;for(n.save(),n.font=i.string,VF(n,o),l=0;l<s.length;++l)u=s[l],o.backdrop&&HF(n,o.backdrop),a&&(o.strokeColor&&(n.strokeStyle=o.strokeColor),Ze(o.strokeWidth)||(n.lineWidth=o.strokeWidth),n.strokeText(u,t,r,o.maxWidth)),n.fillText(u,t,r,o.maxWidth),UF(n,t,r,u,o),r+=Number(i.lineHeight);n.restore()}function Fu(n,e){const{x:t,y:r,w:i,h:o,radius:s}=e;n.arc(t+s.topLeft,r+s.topLeft,s.topLeft,1.5*ct,ct,!0),n.lineTo(t,r+o-s.bottomLeft),n.arc(t+s.bottomLeft,r+o-s.bottomLeft,s.bottomLeft,ct,Ut,!0),n.lineTo(t+i-s.bottomRight,r+o),n.arc(t+i-s.bottomRight,r+o-s.bottomRight,s.bottomRight,Ut,0,!0),n.lineTo(t+i,r+s.topRight),n.arc(t+i-s.topRight,r+s.topRight,s.topRight,0,-Ut,!0),n.lineTo(t+s.topLeft,r)}const GF=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,$F=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function qF(n,e){const t=(""+n).match(GF);if(!t||t[1]==="normal")return e*1.2;switch(n=+t[2],t[3]){case"px":return n;case"%":n/=100;break}return e*n}const KF=n=>+n||0;function px(n,e){const t={},r=tt(e),i=r?Object.keys(e):e,o=tt(n)?r?s=>qe(n[s],n[e[s]]):s=>n[s]:()=>n;for(const s of i)t[s]=KF(o(s));return t}function qC(n){return px(n,{top:"y",right:"x",bottom:"y",left:"x"})}function xa(n){return px(n,["topLeft","topRight","bottomLeft","bottomRight"])}function zn(n){const e=qC(n);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function en(n,e){n=n||{},e=e||Rt.font;let t=qe(n.size,e.size);typeof t=="string"&&(t=parseInt(t,10));let r=qe(n.style,e.style);r&&!(""+r).match($F)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const i={family:qe(n.family,e.family),lineHeight:qF(qe(n.lineHeight,e.lineHeight),t),size:t,style:r,weight:qe(n.weight,e.weight),string:""};return i.string=LF(i),i}function cu(n,e,t,r){let i,o,s;for(i=0,o=n.length;i<o;++i)if(s=n[i],s!==void 0&&s!==void 0)return s}function XF(n,e,t){const{min:r,max:i}=n,o=PC(e,(i-r)/2),s=(a,l)=>t&&a===0?0:a+l;return{min:s(r,-Math.abs(o)),max:s(i,o)}}function Ds(n,e){return Object.assign(Object.create(n),e)}function mx(n,e=[""],t,r,i=()=>n[0]){const o=t||n;typeof r>"u"&&(r=JC("_fallback",n));const s={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:o,_fallback:r,_getTarget:i,override:a=>mx([a,...n],e,o,r)};return new Proxy(s,{deleteProperty(a,l){return delete a[l],delete a._keys,delete n[0][l],!0},get(a,l){return XC(a,l,()=>rL(l,e,n,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(n[0])},has(a,l){return J2(a).includes(l)},ownKeys(a){return J2(a)},set(a,l,u){const f=a._storage||(a._storage=i());return a[l]=f[l]=u,delete a._keys,!0}})}function Ql(n,e,t,r){const i={_cacheable:!1,_proxy:n,_context:e,_subProxy:t,_stack:new Set,_descriptors:KC(n,r),setContext:o=>Ql(n,o,t,r),override:o=>Ql(n.override(o),e,t,r)};return new Proxy(i,{deleteProperty(o,s){return delete o[s],delete n[s],!0},get(o,s,a){return XC(o,s,()=>JF(o,s,a))},getOwnPropertyDescriptor(o,s){return o._descriptors.allKeys?Reflect.has(n,s)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,s)},getPrototypeOf(){return Reflect.getPrototypeOf(n)},has(o,s){return Reflect.has(n,s)},ownKeys(){return Reflect.ownKeys(n)},set(o,s,a){return n[s]=a,delete o[s],!0}})}function KC(n,e={scriptable:!0,indexable:!0}){const{_scriptable:t=e.scriptable,_indexable:r=e.indexable,_allKeys:i=e.allKeys}=n;return{allKeys:i,scriptable:t,indexable:r,isScriptable:Ss(t)?t:()=>t,isIndexable:Ss(r)?r:()=>r}}const YF=(n,e)=>n?n+cx(e):e,gx=(n,e)=>tt(e)&&n!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function XC(n,e,t){if(Object.prototype.hasOwnProperty.call(n,e)||e==="constructor")return n[e];const r=t();return n[e]=r,r}function JF(n,e,t){const{_proxy:r,_context:i,_subProxy:o,_descriptors:s}=n;let a=r[e];return Ss(a)&&s.isScriptable(e)&&(a=QF(e,a,n,t)),At(a)&&a.length&&(a=ZF(e,a,n,s.isIndexable)),gx(e,a)&&(a=Ql(a,i,o&&o[e],s)),a}function QF(n,e,t,r){const{_proxy:i,_context:o,_subProxy:s,_stack:a}=t;if(a.has(n))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+n);a.add(n);let l=e(o,s||r);return a.delete(n),gx(n,l)&&(l=vx(i._scopes,i,n,l)),l}function ZF(n,e,t,r){const{_proxy:i,_context:o,_subProxy:s,_descriptors:a}=t;if(typeof o.index<"u"&&r(n))return e[o.index%e.length];if(tt(e[0])){const l=e,u=i._scopes.filter(f=>f!==l);e=[];for(const f of l){const p=vx(u,i,n,f);e.push(Ql(p,o,s&&s[n],a))}}return e}function YC(n,e,t){return Ss(n)?n(e,t):n}const eL=(n,e)=>n===!0?e:typeof n=="string"?Ns(e,n):void 0;function tL(n,e,t,r,i){for(const o of e){const s=eL(t,o);if(s){n.add(s);const a=YC(s._fallback,t,i);if(typeof a<"u"&&a!==t&&a!==r)return a}else if(s===!1&&typeof r<"u"&&t!==r)return null}return!1}function vx(n,e,t,r){const i=e._rootScopes,o=YC(e._fallback,t,r),s=[...n,...i],a=new Set;a.add(r);let l=Y2(a,s,t,o||t,r);return l===null||typeof o<"u"&&o!==t&&(l=Y2(a,s,o,l,r),l===null)?!1:mx(Array.from(a),[""],i,o,()=>nL(e,t,r))}function Y2(n,e,t,r,i){for(;t;)t=tL(n,e,t,r,i);return t}function nL(n,e,t){const r=n._getTarget();e in r||(r[e]={});const i=r[e];return At(i)&&tt(t)?t:i||{}}function rL(n,e,t,r){let i;for(const o of e)if(i=JC(YF(o,n),t),typeof i<"u")return gx(n,i)?vx(t,r,n,i):i}function JC(n,e){for(const t of e){if(!t)continue;const r=t[n];if(typeof r<"u")return r}}function J2(n){let e=n._keys;return e||(e=n._keys=iL(n._scopes)),e}function iL(n){const e=new Set;for(const t of n)for(const r of Object.keys(t).filter(i=>!i.startsWith("_")))e.add(r);return Array.from(e)}function QC(n,e,t,r){const{iScale:i}=n,{key:o="r"}=this._parsing,s=new Array(r);let a,l,u,f;for(a=0,l=r;a<l;++a)u=a+t,f=e[u],s[a]={r:i.parse(Ns(f,o),u)};return s}const oL=Number.EPSILON||1e-14,Zl=(n,e)=>e<n.length&&!n[e].skip&&n[e],ZC=n=>n==="x"?"y":"x";function sL(n,e,t,r){const i=n.skip?e:n,o=e,s=t.skip?e:t,a=Rg(o,i),l=Rg(s,o);let u=a/(a+l),f=l/(a+l);u=isNaN(u)?0:u,f=isNaN(f)?0:f;const p=r*u,m=r*f;return{previous:{x:o.x-p*(s.x-i.x),y:o.y-p*(s.y-i.y)},next:{x:o.x+m*(s.x-i.x),y:o.y+m*(s.y-i.y)}}}function aL(n,e,t){const r=n.length;let i,o,s,a,l,u=Zl(n,0);for(let f=0;f<r-1;++f)if(l=u,u=Zl(n,f+1),!(!l||!u)){if(bu(e[f],0,oL)){t[f]=t[f+1]=0;continue}i=t[f]/e[f],o=t[f+1]/e[f],a=Math.pow(i,2)+Math.pow(o,2),!(a<=9)&&(s=3/Math.sqrt(a),t[f]=i*s*e[f],t[f+1]=o*s*e[f])}}function lL(n,e,t="x"){const r=ZC(t),i=n.length;let o,s,a,l=Zl(n,0);for(let u=0;u<i;++u){if(s=a,a=l,l=Zl(n,u+1),!a)continue;const f=a[t],p=a[r];s&&(o=(f-s[t])/3,a[`cp1${t}`]=f-o,a[`cp1${r}`]=p-o*e[u]),l&&(o=(l[t]-f)/3,a[`cp2${t}`]=f+o,a[`cp2${r}`]=p+o*e[u])}}function cL(n,e="x"){const t=ZC(e),r=n.length,i=Array(r).fill(0),o=Array(r);let s,a,l,u=Zl(n,0);for(s=0;s<r;++s)if(a=l,l=u,u=Zl(n,s+1),!!l){if(u){const f=u[e]-l[e];i[s]=f!==0?(u[t]-l[t])/f:0}o[s]=a?u?Li(i[s-1])!==Li(i[s])?0:(i[s-1]+i[s])/2:i[s-1]:i[s]}aL(n,i,o),lL(n,o,e)}function Wh(n,e,t){return Math.max(Math.min(n,t),e)}function uL(n,e){let t,r,i,o,s,a=ko(n[0],e);for(t=0,r=n.length;t<r;++t)s=o,o=a,a=t<r-1&&ko(n[t+1],e),o&&(i=n[t],s&&(i.cp1x=Wh(i.cp1x,e.left,e.right),i.cp1y=Wh(i.cp1y,e.top,e.bottom)),a&&(i.cp2x=Wh(i.cp2x,e.left,e.right),i.cp2y=Wh(i.cp2y,e.top,e.bottom)))}function dL(n,e,t,r,i){let o,s,a,l;if(e.spanGaps&&(n=n.filter(u=>!u.skip)),e.cubicInterpolationMode==="monotone")cL(n,i);else{let u=r?n[n.length-1]:n[0];for(o=0,s=n.length;o<s;++o)a=n[o],l=sL(u,a,n[Math.min(o+1,s-(r?0:1))%s],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,u=a}e.capBezierPoints&&uL(n,t)}function xx(){return typeof window<"u"&&typeof document<"u"}function yx(n){let e=n.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function Hf(n,e,t){let r;return typeof n=="string"?(r=parseInt(n,10),n.indexOf("%")!==-1&&(r=r/100*e.parentNode[t])):r=n,r}const mp=n=>n.ownerDocument.defaultView.getComputedStyle(n,null);function hL(n,e){return mp(n).getPropertyValue(e)}const fL=["top","right","bottom","left"];function ya(n,e,t){const r={};t=t?"-"+t:"";for(let i=0;i<4;i++){const o=fL[i];r[o]=parseFloat(n[e+"-"+o+t])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const pL=(n,e,t)=>(n>0||e>0)&&(!t||!t.shadowRoot);function mL(n,e){const t=n.touches,r=t&&t.length?t[0]:n,{offsetX:i,offsetY:o}=r;let s=!1,a,l;if(pL(i,o,n.target))a=i,l=o;else{const u=e.getBoundingClientRect();a=r.clientX-u.left,l=r.clientY-u.top,s=!0}return{x:a,y:l,box:s}}function ha(n,e){if("native"in n)return n;const{canvas:t,currentDevicePixelRatio:r}=e,i=mp(t),o=i.boxSizing==="border-box",s=ya(i,"padding"),a=ya(i,"border","width"),{x:l,y:u,box:f}=mL(n,t),p=s.left+(f&&a.left),m=s.top+(f&&a.top);let{width:v,height:y}=e;return o&&(v-=s.width+a.width,y-=s.height+a.height),{x:Math.round((l-p)/v*t.width/r),y:Math.round((u-m)/y*t.height/r)}}function gL(n,e,t){let r,i;if(e===void 0||t===void 0){const o=n&&yx(n);if(!o)e=n.clientWidth,t=n.clientHeight;else{const s=o.getBoundingClientRect(),a=mp(o),l=ya(a,"border","width"),u=ya(a,"padding");e=s.width-u.width-l.width,t=s.height-u.height-l.height,r=Hf(a.maxWidth,o,"clientWidth"),i=Hf(a.maxHeight,o,"clientHeight")}}return{width:e,height:t,maxWidth:r||Vf,maxHeight:i||Vf}}const Vh=n=>Math.round(n*10)/10;function vL(n,e,t,r){const i=mp(n),o=ya(i,"margin"),s=Hf(i.maxWidth,n,"clientWidth")||Vf,a=Hf(i.maxHeight,n,"clientHeight")||Vf,l=gL(n,e,t);let{width:u,height:f}=l;if(i.boxSizing==="content-box"){const m=ya(i,"border","width"),v=ya(i,"padding");u-=v.width+m.width,f-=v.height+m.height}return u=Math.max(0,u-o.width),f=Math.max(0,r?u/r:f-o.height),u=Vh(Math.min(u,s,l.maxWidth)),f=Vh(Math.min(f,a,l.maxHeight)),u&&!f&&(f=Vh(u/2)),(e!==void 0||t!==void 0)&&r&&l.height&&f>l.height&&(f=l.height,u=Vh(Math.floor(f*r))),{width:u,height:f}}function Q2(n,e,t){const r=e||1,i=Math.floor(n.height*r),o=Math.floor(n.width*r);n.height=Math.floor(n.height),n.width=Math.floor(n.width);const s=n.canvas;return s.style&&(t||!s.style.height&&!s.style.width)&&(s.style.height=`${n.height}px`,s.style.width=`${n.width}px`),n.currentDevicePixelRatio!==r||s.height!==i||s.width!==o?(n.currentDevicePixelRatio=r,s.height=i,s.width=o,n.ctx.setTransform(r,0,0,r,0,0),!0):!1}const xL=function(){let n=!1;try{const e={get passive(){return n=!0,!1}};xx()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return n}();function Z2(n,e){const t=hL(n,e),r=t&&t.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function fa(n,e,t,r){return{x:n.x+t*(e.x-n.x),y:n.y+t*(e.y-n.y)}}function yL(n,e,t,r){return{x:n.x+t*(e.x-n.x),y:r==="middle"?t<.5?n.y:e.y:r==="after"?t<1?n.y:e.y:t>0?e.y:n.y}}function bL(n,e,t,r){const i={x:n.cp2x,y:n.cp2y},o={x:e.cp1x,y:e.cp1y},s=fa(n,i,t),a=fa(i,o,t),l=fa(o,e,t),u=fa(s,a,t),f=fa(a,l,t);return fa(u,f,t)}const wL=function(n,e){return{x(t){return n+n+e-t},setWidth(t){e=t},textAlign(t){return t==="center"?t:t==="right"?"left":"right"},xPlus(t,r){return t-r},leftForLtr(t,r){return t-r}}},_L=function(){return{x(n){return n},setWidth(n){},textAlign(n){return n},xPlus(n,e){return n+e},leftForLtr(n,e){return n}}};function Hl(n,e,t){return n?wL(e,t):_L()}function e3(n,e){let t,r;(e==="ltr"||e==="rtl")&&(t=n.canvas.style,r=[t.getPropertyValue("direction"),t.getPropertyPriority("direction")],t.setProperty("direction",e,"important"),n.prevTextDirection=r)}function t3(n,e){e!==void 0&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",e[0],e[1]))}function n3(n){return n==="angle"?{between:Ou,compare:kF,normalize:Dn}:{between:wo,compare:(e,t)=>e-t,normalize:e=>e}}function ew({start:n,end:e,count:t,loop:r,style:i}){return{start:n%t,end:e%t,loop:r&&(e-n+1)%t===0,style:i}}function kL(n,e,t){const{property:r,start:i,end:o}=t,{between:s,normalize:a}=n3(r),l=e.length;let{start:u,end:f,loop:p}=n,m,v;if(p){for(u+=l,f+=l,m=0,v=l;m<v&&s(a(e[u%l][r]),i,o);++m)u--,f--;u%=l,f%=l}return f<u&&(f+=l),{start:u,end:f,loop:p,style:n.style}}function r3(n,e,t){if(!t)return[n];const{property:r,start:i,end:o}=t,s=e.length,{compare:a,between:l,normalize:u}=n3(r),{start:f,end:p,loop:m,style:v}=kL(n,e,t),y=[];let w=!1,_=null,k,E,N;const S=()=>l(i,N,k)&&a(i,N)!==0,A=()=>a(o,k)===0||l(o,N,k),P=()=>w||S(),D=()=>!w||A();for(let j=f,T=f;j<=p;++j)E=e[j%s],!E.skip&&(k=u(E[r]),k!==N&&(w=l(k,i,o),_===null&&P()&&(_=a(k,i)===0?j:T),_!==null&&D()&&(y.push(ew({start:_,end:j,loop:m,count:s,style:v})),_=null),T=j,N=k));return _!==null&&y.push(ew({start:_,end:p,loop:m,count:s,style:v})),y}function i3(n,e){const t=[],r=n.segments;for(let i=0;i<r.length;i++){const o=r3(r[i],n.points,e);o.length&&t.push(...o)}return t}function CL(n,e,t,r){let i=0,o=e-1;if(t&&!r)for(;i<e&&!n[i].skip;)i++;for(;i<e&&n[i].skip;)i++;for(i%=e,t&&(o+=i);o>i&&n[o%e].skip;)o--;return o%=e,{start:i,end:o}}function EL(n,e,t,r){const i=n.length,o=[];let s=e,a=n[e],l;for(l=e+1;l<=t;++l){const u=n[l%i];u.skip||u.stop?a.skip||(r=!1,o.push({start:e%i,end:(l-1)%i,loop:r}),e=s=u.stop?l:null):(s=l,a.skip&&(e=l)),a=u}return s!==null&&o.push({start:e%i,end:s%i,loop:r}),o}function NL(n,e){const t=n.points,r=n.options.spanGaps,i=t.length;if(!i)return[];const o=!!n._loop,{start:s,end:a}=CL(t,i,o,r);if(r===!0)return tw(n,[{start:s,end:a,loop:o}],t,e);const l=a<s?a+i:a,u=!!n._fullLoop&&s===0&&a===i-1;return tw(n,EL(t,s,l,u),t,e)}function tw(n,e,t,r){return!r||!r.setContext||!t?e:SL(n,e,t,r)}function SL(n,e,t,r){const i=n._chart.getContext(),o=nw(n.options),{_datasetIndex:s,options:{spanGaps:a}}=n,l=t.length,u=[];let f=o,p=e[0].start,m=p;function v(y,w,_,k){const E=a?-1:1;if(y!==w){for(y+=l;t[y%l].skip;)y-=E;for(;t[w%l].skip;)w+=E;y%l!==w%l&&(u.push({start:y%l,end:w%l,loop:_,style:k}),f=k,p=w%l)}}for(const y of e){p=a?p:y.start;let w=t[p%l],_;for(m=p+1;m<=y.end;m++){const k=t[m%l];_=nw(r.setContext(Ds(i,{type:"segment",p0:w,p1:k,p0DataIndex:(m-1)%l,p1DataIndex:m%l,datasetIndex:s}))),IL(_,f)&&v(p,m-1,y.loop,f),w=k,f=_}p<m-1&&v(p,m-1,y.loop,f)}return u}function nw(n){return{backgroundColor:n.backgroundColor,borderCapStyle:n.borderCapStyle,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderJoinStyle:n.borderJoinStyle,borderWidth:n.borderWidth,borderColor:n.borderColor}}function IL(n,e){if(!e)return!1;const t=[],r=function(i,o){return fx(o)?(t.includes(o)||t.push(o),t.indexOf(o)):o};return JSON.stringify(n,r)!==JSON.stringify(e,r)}function Uh(n,e,t){return n.options.clip?n[t]:e[t]}function AL(n,e){const{xScale:t,yScale:r}=n;return t&&r?{left:Uh(t,e,"left"),right:Uh(t,e,"right"),top:Uh(r,e,"top"),bottom:Uh(r,e,"bottom")}:e}function o3(n,e){const t=e._clip;if(t.disabled)return!1;const r=AL(e,n.chartArea);return{left:t.left===!1?0:r.left-(t.left===!0?0:t.left),right:t.right===!1?n.width:r.right+(t.right===!0?0:t.right),top:t.top===!1?0:r.top-(t.top===!0?0:t.top),bottom:t.bottom===!1?n.height:r.bottom+(t.bottom===!0?0:t.bottom)}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class RL{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,r,i){const o=t.listeners[i],s=t.duration;o.forEach(a=>a({chart:e,initial:t.initial,numSteps:s,currentStep:Math.min(r-t.start,s)}))}_refresh(){this._request||(this._running=!0,this._request=WC.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let t=0;this._charts.forEach((r,i)=>{if(!r.running||!r.items.length)return;const o=r.items;let s=o.length-1,a=!1,l;for(;s>=0;--s)l=o[s],l._active?(l._total>r.duration&&(r.duration=l._total),l.tick(e),a=!0):(o[s]=o[o.length-1],o.pop());a&&(i.draw(),this._notify(i,r,e,"progress")),o.length||(r.running=!1,this._notify(i,r,e,"complete"),r.initial=!1),t+=o.length}),this._lastDate=e,t===0&&(this._running=!1)}_getAnims(e){const t=this._charts;let r=t.get(e);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,r)),r}listen(e,t,r){this._getAnims(e).listeners[t].push(r)}add(e,t){!t||!t.length||this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((r,i)=>Math.max(r,i._duration),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!(!t||!t.running||!t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const r=t.items;let i=r.length-1;for(;i>=0;--i)r[i].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var mo=new RL;const rw="transparent",jL={boolean(n,e,t){return t>.5?e:n},color(n,e,t){const r=q2(n||rw),i=r.valid&&q2(e||rw);return i&&i.valid?i.mix(r,t).hexString():e},number(n,e,t){return n+(e-n)*t}};class TL{constructor(e,t,r,i){const o=t[r];i=cu([e.to,i,o,e.from]);const s=cu([e.from,o,i]);this._active=!0,this._fn=e.fn||jL[e.type||typeof s],this._easing=wu[e.easing]||wu.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=r,this._from=s,this._to=i,this._promises=void 0}active(){return this._active}update(e,t,r){if(this._active){this._notify(!1);const i=this._target[this._prop],o=r-this._start,s=this._duration-o;this._start=r,this._duration=Math.floor(Math.max(s,e.duration)),this._total+=o,this._loop=!!e.loop,this._to=cu([e.to,t,i,e.from]),this._from=cu([e.from,i,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const t=e-this._start,r=this._duration,i=this._prop,o=this._from,s=this._loop,a=this._to;let l;if(this._active=o!==a&&(s||t<r),!this._active){this._target[i]=a,this._notify(!0);return}if(t<0){this._target[i]=o;return}l=t/r%2,l=s&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[i]=this._fn(o,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((t,r)=>{e.push({res:t,rej:r})})}_notify(e){const t=e?"res":"rej",r=this._promises||[];for(let i=0;i<r.length;i++)r[i][t]()}}class s3{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!tt(e))return;const t=Object.keys(Rt.animation),r=this._properties;Object.getOwnPropertyNames(e).forEach(i=>{const o=e[i];if(!tt(o))return;const s={};for(const a of t)s[a]=o[a];(At(o.properties)&&o.properties||[i]).forEach(a=>{(a===i||!r.has(a))&&r.set(a,s)})})}_animateOptions(e,t){const r=t.options,i=ML(e,r);if(!i)return[];const o=this._createAnimations(i,r);return r.$shared&&DL(e.options.$animations,r).then(()=>{e.options=r},()=>{}),o}_createAnimations(e,t){const r=this._properties,i=[],o=e.$animations||(e.$animations={}),s=Object.keys(t),a=Date.now();let l;for(l=s.length-1;l>=0;--l){const u=s[l];if(u.charAt(0)==="$")continue;if(u==="options"){i.push(...this._animateOptions(e,t));continue}const f=t[u];let p=o[u];const m=r.get(u);if(p)if(m&&p.active()){p.update(m,f,a);continue}else p.cancel();if(!m||!m.duration){e[u]=f;continue}o[u]=p=new TL(m,e,u,f),i.push(p)}return i}update(e,t){if(this._properties.size===0){Object.assign(e,t);return}const r=this._createAnimations(e,t);if(r.length)return mo.add(this._chart,r),!0}}function DL(n,e){const t=[],r=Object.keys(e);for(let i=0;i<r.length;i++){const o=n[r[i]];o&&o.active()&&t.push(o.wait())}return Promise.all(t)}function ML(n,e){if(!e)return;let t=n.options;if(!t){n.options=e;return}return t.$shared&&(n.options=t=Object.assign({},t,{$shared:!1,$animations:{}})),t}function iw(n,e){const t=n&&n.options||{},r=t.reverse,i=t.min===void 0?e:0,o=t.max===void 0?e:0;return{start:r?o:i,end:r?i:o}}function PL(n,e,t){if(t===!1)return!1;const r=iw(n,t),i=iw(e,t);return{top:i.end,right:r.end,bottom:i.start,left:r.start}}function OL(n){let e,t,r,i;return tt(n)?(e=n.top,t=n.right,r=n.bottom,i=n.left):e=t=r=i=n,{top:e,right:t,bottom:r,left:i,disabled:n===!1}}function a3(n,e){const t=[],r=n._getSortedDatasetMetas(e);let i,o;for(i=0,o=r.length;i<o;++i)t.push(r[i].index);return t}function ow(n,e,t,r={}){const i=n.keys,o=r.mode==="single";let s,a,l,u;if(e===null)return;let f=!1;for(s=0,a=i.length;s<a;++s){if(l=+i[s],l===t){if(f=!0,r.all)continue;break}u=n.values[l],zt(u)&&(o||e===0||Li(e)===Li(u))&&(e+=u)}return!f&&!r.all?0:e}function FL(n,e){const{iScale:t,vScale:r}=e,i=t.axis==="x"?"x":"y",o=r.axis==="x"?"x":"y",s=Object.keys(n),a=new Array(s.length);let l,u,f;for(l=0,u=s.length;l<u;++l)f=s[l],a[l]={[i]:f,[o]:n[f]};return a}function F0(n,e){const t=n&&n.options.stacked;return t||t===void 0&&e.stack!==void 0}function LL(n,e,t){return`${n.id}.${e.id}.${t.stack||t.type}`}function BL(n){const{min:e,max:t,minDefined:r,maxDefined:i}=n.getUserBounds();return{min:r?e:Number.NEGATIVE_INFINITY,max:i?t:Number.POSITIVE_INFINITY}}function zL(n,e,t){const r=n[e]||(n[e]={});return r[t]||(r[t]={})}function sw(n,e,t,r){for(const i of e.getMatchingVisibleMetas(r).reverse()){const o=n[i.index];if(t&&o>0||!t&&o<0)return i.index}return null}function aw(n,e){const{chart:t,_cachedMeta:r}=n,i=t._stacks||(t._stacks={}),{iScale:o,vScale:s,index:a}=r,l=o.axis,u=s.axis,f=LL(o,s,r),p=e.length;let m;for(let v=0;v<p;++v){const y=e[v],{[l]:w,[u]:_}=y,k=y._stacks||(y._stacks={});m=k[u]=zL(i,f,w),m[a]=_,m._top=sw(m,s,!0,r.type),m._bottom=sw(m,s,!1,r.type);const E=m._visualValues||(m._visualValues={});E[a]=_}}function L0(n,e){const t=n.scales;return Object.keys(t).filter(r=>t[r].axis===e).shift()}function WL(n,e){return Ds(n,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function VL(n,e,t){return Ds(n,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:t,index:e,mode:"default",type:"data"})}function Zc(n,e){const t=n.controller.index,r=n.vScale&&n.vScale.axis;if(r){e=e||n._parsed;for(const i of e){const o=i._stacks;if(!o||o[r]===void 0||o[r][t]===void 0)return;delete o[r][t],o[r]._visualValues!==void 0&&o[r]._visualValues[t]!==void 0&&delete o[r]._visualValues[t]}}}const B0=n=>n==="reset"||n==="none",lw=(n,e)=>e?n:Object.assign({},n),UL=(n,e,t)=>n&&!e.hidden&&e._stacked&&{keys:a3(t,!0),values:null};class Ms{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=F0(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Zc(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,t=this._cachedMeta,r=this.getDataset(),i=(p,m,v,y)=>p==="x"?m:p==="r"?y:v,o=t.xAxisID=qe(r.xAxisID,L0(e,"x")),s=t.yAxisID=qe(r.yAxisID,L0(e,"y")),a=t.rAxisID=qe(r.rAxisID,L0(e,"r")),l=t.indexAxis,u=t.iAxisID=i(l,o,s,a),f=t.vAxisID=i(l,s,o,a);t.xScale=this.getScaleForId(o),t.yScale=this.getScaleForId(s),t.rScale=this.getScaleForId(a),t.iScale=this.getScaleForId(u),t.vScale=this.getScaleForId(f)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&H2(this._data,this),e._stacked&&Zc(e)}_dataCheck(){const e=this.getDataset(),t=e.data||(e.data=[]),r=this._data;if(tt(t)){const i=this._cachedMeta;this._data=FL(t,i)}else if(r!==t){if(r){H2(r,this);const i=this._cachedMeta;Zc(i),i._parsed=[]}t&&Object.isExtensible(t)&&SF(t,this),this._syncList=[],this._data=t}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const t=this._cachedMeta,r=this.getDataset();let i=!1;this._dataCheck();const o=t._stacked;t._stacked=F0(t.vScale,t),t.stack!==r.stack&&(i=!0,Zc(t),t.stack=r.stack),this._resyncElements(e),(i||o!==t._stacked)&&(aw(this,t._parsed),t._stacked=F0(t.vScale,t))}configure(){const e=this.chart.config,t=e.datasetScopeKeys(this._type),r=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){const{_cachedMeta:r,_data:i}=this,{iScale:o,_stacked:s}=r,a=o.axis;let l=e===0&&t===i.length?!0:r._sorted,u=e>0&&r._parsed[e-1],f,p,m;if(this._parsing===!1)r._parsed=i,r._sorted=!0,m=i;else{At(i[e])?m=this.parseArrayData(r,i,e,t):tt(i[e])?m=this.parseObjectData(r,i,e,t):m=this.parsePrimitiveData(r,i,e,t);const v=()=>p[a]===null||u&&p[a]<u[a];for(f=0;f<t;++f)r._parsed[f+e]=p=m[f],l&&(v()&&(l=!1),u=p);r._sorted=l}s&&aw(this,m)}parsePrimitiveData(e,t,r,i){const{iScale:o,vScale:s}=e,a=o.axis,l=s.axis,u=o.getLabels(),f=o===s,p=new Array(i);let m,v,y;for(m=0,v=i;m<v;++m)y=m+r,p[m]={[a]:f||o.parse(u[y],y),[l]:s.parse(t[y],y)};return p}parseArrayData(e,t,r,i){const{xScale:o,yScale:s}=e,a=new Array(i);let l,u,f,p;for(l=0,u=i;l<u;++l)f=l+r,p=t[f],a[l]={x:o.parse(p[0],f),y:s.parse(p[1],f)};return a}parseObjectData(e,t,r,i){const{xScale:o,yScale:s}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,u=new Array(i);let f,p,m,v;for(f=0,p=i;f<p;++f)m=f+r,v=t[m],u[f]={x:o.parse(Ns(v,a),m),y:s.parse(Ns(v,l),m)};return u}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,r){const i=this.chart,o=this._cachedMeta,s=t[e.axis],a={keys:a3(i,!0),values:t._stacks[e.axis]._visualValues};return ow(a,s,o.index,{mode:r})}updateRangeFromParsed(e,t,r,i){const o=r[t.axis];let s=o===null?NaN:o;const a=i&&r._stacks[t.axis];i&&a&&(i.values=a,s=ow(i,o,this._cachedMeta.index)),e.min=Math.min(e.min,s),e.max=Math.max(e.max,s)}getMinMax(e,t){const r=this._cachedMeta,i=r._parsed,o=r._sorted&&e===r.iScale,s=i.length,a=this._getOtherScale(e),l=UL(t,r,this.chart),u={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:f,max:p}=BL(a);let m,v;function y(){v=i[m];const w=v[a.axis];return!zt(v[e.axis])||f>w||p<w}for(m=0;m<s&&!(!y()&&(this.updateRangeFromParsed(u,e,v,l),o));++m);if(o){for(m=s-1;m>=0;--m)if(!y()){this.updateRangeFromParsed(u,e,v,l);break}}return u}getAllParsedValues(e){const t=this._cachedMeta._parsed,r=[];let i,o,s;for(i=0,o=t.length;i<o;++i)s=t[i][e.axis],zt(s)&&r.push(s);return r}getMaxOverflow(){return!1}getLabelAndValue(e){const t=this._cachedMeta,r=t.iScale,i=t.vScale,o=this.getParsed(e);return{label:r?""+r.getLabelForValue(o[r.axis]):"",value:i?""+i.getLabelForValue(o[i.axis]):""}}_update(e){const t=this._cachedMeta;this.update(e||"default"),t._clip=OL(qe(this.options.clip,PL(t.xScale,t.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,t=this.chart,r=this._cachedMeta,i=r.data||[],o=t.chartArea,s=[],a=this._drawStart||0,l=this._drawCount||i.length-a,u=this.options.drawActiveElementsOnTop;let f;for(r.dataset&&r.dataset.draw(e,o,a,l),f=a;f<a+l;++f){const p=i[f];p.hidden||(p.active&&u?s.push(p):p.draw(e,o))}for(f=0;f<s.length;++f)s[f].draw(e,o)}getStyle(e,t){const r=t?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(e||0,r)}getContext(e,t,r){const i=this.getDataset();let o;if(e>=0&&e<this._cachedMeta.data.length){const s=this._cachedMeta.data[e];o=s.$context||(s.$context=VL(this.getContext(),e,s)),o.parsed=this.getParsed(e),o.raw=i.data[e],o.index=o.dataIndex=e}else o=this.$context||(this.$context=WL(this.chart.getContext(),this.index)),o.dataset=i,o.index=o.datasetIndex=this.index;return o.active=!!t,o.mode=r,o}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e,t="default",r){const i=t==="active",o=this._cachedDataOpts,s=e+"-"+t,a=o[s],l=this.enableOptionSharing&&Pu(r);if(a)return lw(a,l);const u=this.chart.config,f=u.datasetElementScopeKeys(this._type,e),p=i?[`${e}Hover`,"hover",e,""]:[e,""],m=u.getOptionScopes(this.getDataset(),f),v=Object.keys(Rt.elements[e]),y=()=>this.getContext(r,i,t),w=u.resolveNamedOptions(m,v,y,p);return w.$shared&&(w.$shared=l,o[s]=Object.freeze(lw(w,l))),w}_resolveAnimations(e,t,r){const i=this.chart,o=this._cachedDataOpts,s=`animation-${t}`,a=o[s];if(a)return a;let l;if(i.options.animation!==!1){const f=this.chart.config,p=f.datasetAnimationScopeKeys(this._type,t),m=f.getOptionScopes(this.getDataset(),p);l=f.createResolver(m,this.getContext(e,r,t))}const u=new s3(i,l&&l.animations);return l&&l._cacheable&&(o[s]=Object.freeze(u)),u}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||B0(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){const r=this.resolveDataElementOptions(e,t),i=this._sharedOptions,o=this.getSharedOptions(r),s=this.includeOptions(t,o)||o!==i;return this.updateSharedOptions(o,t,r),{sharedOptions:o,includeOptions:s}}updateElement(e,t,r,i){B0(i)?Object.assign(e,r):this._resolveAnimations(t,i).update(e,r)}updateSharedOptions(e,t,r){e&&!B0(t)&&this._resolveAnimations(void 0,t).update(e,r)}_setStyle(e,t,r,i){e.active=i;const o=this.getStyle(t,i);this._resolveAnimations(t,r,i).update(e,{options:!i&&this.getSharedOptions(o)||o})}removeHoverStyle(e,t,r){this._setStyle(e,r,"active",!1)}setHoverStyle(e,t,r){this._setStyle(e,r,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const t=this._data,r=this._cachedMeta.data;for(const[a,l,u]of this._syncList)this[a](l,u);this._syncList=[];const i=r.length,o=t.length,s=Math.min(o,i);s&&this.parse(0,s),o>i?this._insertElements(i,o-i,e):o<i&&this._removeElements(o,i-o)}_insertElements(e,t,r=!0){const i=this._cachedMeta,o=i.data,s=e+t;let a;const l=u=>{for(u.length+=t,a=u.length-1;a>=s;a--)u[a]=u[a-t]};for(l(o),a=e;a<s;++a)o[a]=new this.dataElementType;this._parsing&&l(i._parsed),this.parse(e,t),r&&this.updateElements(o,e,t,"reset")}updateElements(e,t,r,i){}_removeElements(e,t){const r=this._cachedMeta;if(this._parsing){const i=r._parsed.splice(e,t);r._stacked&&Zc(r,i)}r.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[t,r,i]=e;this[t](r,i)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);const r=arguments.length-2;r&&this._sync(["_insertElements",e,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function HL(n,e){if(!n._cache.$bar){const t=n.getMatchingVisibleMetas(e);let r=[];for(let i=0,o=t.length;i<o;i++)r=r.concat(t[i].controller.getAllParsedValues(n));n._cache.$bar=zC(r.sort((i,o)=>i-o))}return n._cache.$bar}function GL(n){const e=n.iScale,t=HL(e,n.type);let r=e._length,i,o,s,a;const l=()=>{s===32767||s===-32768||(Pu(a)&&(r=Math.min(r,Math.abs(s-a)||r)),a=s)};for(i=0,o=t.length;i<o;++i)s=e.getPixelForValue(t[i]),l();for(a=void 0,i=0,o=e.ticks.length;i<o;++i)s=e.getPixelForTick(i),l();return r}function $L(n,e,t,r){const i=t.barThickness;let o,s;return Ze(i)?(o=e.min*t.categoryPercentage,s=t.barPercentage):(o=i*r,s=1),{chunk:o/r,ratio:s,start:e.pixels[n]-o/2}}function qL(n,e,t,r){const i=e.pixels,o=i[n];let s=n>0?i[n-1]:null,a=n<i.length-1?i[n+1]:null;const l=t.categoryPercentage;s===null&&(s=o-(a===null?e.end-e.start:a-o)),a===null&&(a=o+o-s);const u=o-(o-Math.min(s,a))/2*l;return{chunk:Math.abs(a-s)/2*l/r,ratio:t.barPercentage,start:u}}function KL(n,e,t,r){const i=t.parse(n[0],r),o=t.parse(n[1],r),s=Math.min(i,o),a=Math.max(i,o);let l=s,u=a;Math.abs(s)>Math.abs(a)&&(l=a,u=s),e[t.axis]=u,e._custom={barStart:l,barEnd:u,start:i,end:o,min:s,max:a}}function l3(n,e,t,r){return At(n)?KL(n,e,t,r):e[t.axis]=t.parse(n,r),e}function cw(n,e,t,r){const i=n.iScale,o=n.vScale,s=i.getLabels(),a=i===o,l=[];let u,f,p,m;for(u=t,f=t+r;u<f;++u)m=e[u],p={},p[i.axis]=a||i.parse(s[u],u),l.push(l3(m,p,o,u));return l}function z0(n){return n&&n.barStart!==void 0&&n.barEnd!==void 0}function XL(n,e,t){return n!==0?Li(n):(e.isHorizontal()?1:-1)*(e.min>=t?1:-1)}function YL(n){let e,t,r,i,o;return n.horizontal?(e=n.base>n.x,t="left",r="right"):(e=n.base<n.y,t="bottom",r="top"),e?(i="end",o="start"):(i="start",o="end"),{start:t,end:r,reverse:e,top:i,bottom:o}}function JL(n,e,t,r){let i=e.borderSkipped;const o={};if(!i){n.borderSkipped=o;return}if(i===!0){n.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:s,end:a,reverse:l,top:u,bottom:f}=YL(n);i==="middle"&&t&&(n.enableBorderRadius=!0,(t._top||0)===r?i=u:(t._bottom||0)===r?i=f:(o[uw(f,s,a,l)]=!0,i=u)),o[uw(i,s,a,l)]=!0,n.borderSkipped=o}function uw(n,e,t,r){return r?(n=QL(n,e,t),n=dw(n,t,e)):n=dw(n,e,t),n}function QL(n,e,t){return n===e?t:n===t?e:n}function dw(n,e,t){return n==="start"?e:n==="end"?t:n}function ZL(n,{inflateAmount:e},t){n.inflateAmount=e==="auto"?t===1?.33:0:e}class e8 extends Ms{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(e,t,r,i){return cw(e,t,r,i)}parseArrayData(e,t,r,i){return cw(e,t,r,i)}parseObjectData(e,t,r,i){const{iScale:o,vScale:s}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,u=o.axis==="x"?a:l,f=s.axis==="x"?a:l,p=[];let m,v,y,w;for(m=r,v=r+i;m<v;++m)w=t[m],y={},y[o.axis]=o.parse(Ns(w,u),m),p.push(l3(Ns(w,f),y,s,m));return p}updateRangeFromParsed(e,t,r,i){super.updateRangeFromParsed(e,t,r,i);const o=r._custom;o&&t===this._cachedMeta.vScale&&(e.min=Math.min(e.min,o.min),e.max=Math.max(e.max,o.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const t=this._cachedMeta,{iScale:r,vScale:i}=t,o=this.getParsed(e),s=o._custom,a=z0(s)?"["+s.start+", "+s.end+"]":""+i.getLabelForValue(o[i.axis]);return{label:""+r.getLabelForValue(o[r.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const t=this._cachedMeta;this.updateElements(t.data,0,t.data.length,e)}updateElements(e,t,r,i){const o=i==="reset",{index:s,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),u=a.isHorizontal(),f=this._getRuler(),{sharedOptions:p,includeOptions:m}=this._getSharedOptions(t,i);for(let v=t;v<t+r;v++){const y=this.getParsed(v),w=o||Ze(y[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(v),_=this._calculateBarIndexPixels(v,f),k=(y._stacks||{})[a.axis],E={horizontal:u,base:w.base,enableBorderRadius:!k||z0(y._custom)||s===k._top||s===k._bottom,x:u?w.head:_.center,y:u?_.center:w.head,height:u?_.size:Math.abs(w.size),width:u?Math.abs(w.size):_.size};m&&(E.options=p||this.resolveDataElementOptions(v,e[v].active?"active":i));const N=E.options||e[v].options;JL(E,N,k,s),ZL(E,N,f.ratio),this.updateElement(e[v],v,E,i)}}_getStacks(e,t){const{iScale:r}=this._cachedMeta,i=r.getMatchingVisibleMetas(this._type).filter(f=>f.controller.options.grouped),o=r.options.stacked,s=[],a=this._cachedMeta.controller.getParsed(t),l=a&&a[r.axis],u=f=>{const p=f._parsed.find(v=>v[r.axis]===l),m=p&&p[f.vScale.axis];if(Ze(m)||isNaN(m))return!0};for(const f of i)if(!(t!==void 0&&u(f))&&((o===!1||s.indexOf(f.stack)===-1||o===void 0&&f.stack===void 0)&&s.push(f.stack),f.index===e))break;return s.length||s.push(void 0),s}_getStackCount(e){return this._getStacks(void 0,e).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const e=this.chart.scales,t=this.chart.options.indexAxis;return Object.keys(e).filter(r=>e[r].axis===t).shift()}_getAxis(){const e={},t=this.getFirstScaleIdForIndexAxis();for(const r of this.chart.data.datasets)e[qe(this.chart.options.indexAxis==="x"?r.xAxisID:r.yAxisID,t)]=!0;return Object.keys(e)}_getStackIndex(e,t,r){const i=this._getStacks(e,r),o=t!==void 0?i.indexOf(t):-1;return o===-1?i.length-1:o}_getRuler(){const e=this.options,t=this._cachedMeta,r=t.iScale,i=[];let o,s;for(o=0,s=t.data.length;o<s;++o)i.push(r.getPixelForValue(this.getParsed(o)[r.axis],o));const a=e.barThickness;return{min:a||GL(t),pixels:i,start:r._startPixel,end:r._endPixel,stackCount:this._getStackCount(),scale:r,grouped:e.grouped,ratio:a?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:t,_stacked:r,index:i},options:{base:o,minBarLength:s}}=this,a=o||0,l=this.getParsed(e),u=l._custom,f=z0(u);let p=l[t.axis],m=0,v=r?this.applyStack(t,l,r):p,y,w;v!==p&&(m=v-p,v=p),f&&(p=u.barStart,v=u.barEnd-u.barStart,p!==0&&Li(p)!==Li(u.barEnd)&&(m=0),m+=p);const _=!Ze(o)&&!f?o:m;let k=t.getPixelForValue(_);if(this.chart.getDataVisibility(e)?y=t.getPixelForValue(m+v):y=k,w=y-k,Math.abs(w)<s){w=XL(w,t,a)*s,p===a&&(k-=w/2);const E=t.getPixelForDecimal(0),N=t.getPixelForDecimal(1),S=Math.min(E,N),A=Math.max(E,N);k=Math.max(Math.min(k,A),S),y=k+w,r&&!f&&(l._stacks[t.axis]._visualValues[i]=t.getValueForPixel(y)-t.getValueForPixel(k))}if(k===t.getPixelForValue(a)){const E=Li(w)*t.getLineWidthForValue(a)/2;k+=E,w-=E}return{size:w,base:k,head:y,center:y+w/2}}_calculateBarIndexPixels(e,t){const r=t.scale,i=this.options,o=i.skipNull,s=qe(i.maxBarThickness,1/0);let a,l;const u=this._getAxisCount();if(t.grouped){const f=o?this._getStackCount(e):t.stackCount,p=i.barThickness==="flex"?qL(e,t,i,f*u):$L(e,t,i,f*u),m=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,v=this._getAxis().indexOf(qe(m,this.getFirstScaleIdForIndexAxis())),y=this._getStackIndex(this.index,this._cachedMeta.stack,o?e:void 0)+v;a=p.start+p.chunk*y+p.chunk/2,l=Math.min(s,p.chunk*p.ratio)}else a=r.getPixelForValue(this.getParsed(e)[r.axis],e),l=Math.min(s,t.min*t.ratio);return{base:a-l/2,head:a+l/2,center:a,size:l}}draw(){const e=this._cachedMeta,t=e.vScale,r=e.data,i=r.length;let o=0;for(;o<i;++o)this.getParsed(o)[t.axis]!==null&&!r[o].hidden&&r[o].draw(this._ctx)}}class t8 extends Ms{static id="bubble";static defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}};static overrides={scales:{x:{type:"linear"},y:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,t,r,i){const o=super.parsePrimitiveData(e,t,r,i);for(let s=0;s<o.length;s++)o[s]._custom=this.resolveDataElementOptions(s+r).radius;return o}parseArrayData(e,t,r,i){const o=super.parseArrayData(e,t,r,i);for(let s=0;s<o.length;s++){const a=t[r+s];o[s]._custom=qe(a[2],this.resolveDataElementOptions(s+r).radius)}return o}parseObjectData(e,t,r,i){const o=super.parseObjectData(e,t,r,i);for(let s=0;s<o.length;s++){const a=t[r+s];o[s]._custom=qe(a&&a.r&&+a.r,this.resolveDataElementOptions(s+r).radius)}return o}getMaxOverflow(){const e=this._cachedMeta.data;let t=0;for(let r=e.length-1;r>=0;--r)t=Math.max(t,e[r].size(this.resolveDataElementOptions(r))/2);return t>0&&t}getLabelAndValue(e){const t=this._cachedMeta,r=this.chart.data.labels||[],{xScale:i,yScale:o}=t,s=this.getParsed(e),a=i.getLabelForValue(s.x),l=o.getLabelForValue(s.y),u=s._custom;return{label:r[e]||"",value:"("+a+", "+l+(u?", "+u:"")+")"}}update(e){const t=this._cachedMeta.data;this.updateElements(t,0,t.length,e)}updateElements(e,t,r,i){const o=i==="reset",{iScale:s,vScale:a}=this._cachedMeta,{sharedOptions:l,includeOptions:u}=this._getSharedOptions(t,i),f=s.axis,p=a.axis;for(let m=t;m<t+r;m++){const v=e[m],y=!o&&this.getParsed(m),w={},_=w[f]=o?s.getPixelForDecimal(.5):s.getPixelForValue(y[f]),k=w[p]=o?a.getBasePixel():a.getPixelForValue(y[p]);w.skip=isNaN(_)||isNaN(k),u&&(w.options=l||this.resolveDataElementOptions(m,v.active?"active":i),o&&(w.options.radius=0)),this.updateElement(v,m,w,i)}}resolveDataElementOptions(e,t){const r=this.getParsed(e);let i=super.resolveDataElementOptions(e,t);i.$shared&&(i=Object.assign({},i,{$shared:!1}));const o=i.radius;return t!=="active"&&(i.radius=0),i.radius+=qe(r&&r._custom,o),i}}function n8(n,e,t){let r=1,i=1,o=0,s=0;if(e<St){const a=n,l=a+e,u=Math.cos(a),f=Math.sin(a),p=Math.cos(l),m=Math.sin(l),v=(N,S,A)=>Ou(N,a,l,!0)?1:Math.max(S,S*t,A,A*t),y=(N,S,A)=>Ou(N,a,l,!0)?-1:Math.min(S,S*t,A,A*t),w=v(0,u,p),_=v(Ut,f,m),k=y(ct,u,p),E=y(ct+Ut,f,m);r=(w-k)/2,i=(_-E)/2,o=-(w+k)/2,s=-(_+E)/2}return{ratioX:r,ratioY:i,offsetX:o,offsetY:s}}class bx extends Ms{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:r,color:i}}=e.legend.options;return t.labels.map((o,s)=>{const l=e.getDatasetMeta(0).controller.getStyle(s);return{text:o,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:i,lineWidth:l.borderWidth,pointStyle:r,hidden:!e.getDataVisibility(s),index:s}})}return[]}},onClick(e,t,r){r.chart.toggleDataVisibility(t.index),r.chart.update()}}}};constructor(e,t){super(e,t),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,t){const r=this.getDataset().data,i=this._cachedMeta;if(this._parsing===!1)i._parsed=r;else{let o=l=>+r[l];if(tt(r[e])){const{key:l="value"}=this._parsing;o=u=>+Ns(r[u],l)}let s,a;for(s=e,a=e+t;s<a;++s)i._parsed[s]=o(s)}}_getRotation(){return ci(this.options.rotation-90)}_getCircumference(){return ci(this.options.circumference)}_getRotationExtents(){let e=St,t=-St;for(let r=0;r<this.chart.data.datasets.length;++r)if(this.chart.isDatasetVisible(r)&&this.chart.getDatasetMeta(r).type===this._type){const i=this.chart.getDatasetMeta(r).controller,o=i._getRotation(),s=i._getCircumference();e=Math.min(e,o),t=Math.max(t,o+s)}return{rotation:e,circumference:t-e}}update(e){const t=this.chart,{chartArea:r}=t,i=this._cachedMeta,o=i.data,s=this.getMaxBorderWidth()+this.getMaxOffset(o)+this.options.spacing,a=Math.max((Math.min(r.width,r.height)-s)/2,0),l=Math.min(hF(this.options.cutout,a),1),u=this._getRingWeight(this.index),{circumference:f,rotation:p}=this._getRotationExtents(),{ratioX:m,ratioY:v,offsetX:y,offsetY:w}=n8(p,f,l),_=(r.width-s)/m,k=(r.height-s)/v,E=Math.max(Math.min(_,k)/2,0),N=PC(this.options.radius,E),S=Math.max(N*l,0),A=(N-S)/this._getVisibleDatasetWeightTotal();this.offsetX=y*N,this.offsetY=w*N,i.total=this.calculateTotal(),this.outerRadius=N-A*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-A*u,0),this.updateElements(o,0,o.length,e)}_circumference(e,t){const r=this.options,i=this._cachedMeta,o=this._getCircumference();return t&&r.animation.animateRotate||!this.chart.getDataVisibility(e)||i._parsed[e]===null||i.data[e].hidden?0:this.calculateCircumference(i._parsed[e]*o/St)}updateElements(e,t,r,i){const o=i==="reset",s=this.chart,a=s.chartArea,u=s.options.animation,f=(a.left+a.right)/2,p=(a.top+a.bottom)/2,m=o&&u.animateScale,v=m?0:this.innerRadius,y=m?0:this.outerRadius,{sharedOptions:w,includeOptions:_}=this._getSharedOptions(t,i);let k=this._getRotation(),E;for(E=0;E<t;++E)k+=this._circumference(E,o);for(E=t;E<t+r;++E){const N=this._circumference(E,o),S=e[E],A={x:f+this.offsetX,y:p+this.offsetY,startAngle:k,endAngle:k+N,circumference:N,outerRadius:y,innerRadius:v};_&&(A.options=w||this.resolveDataElementOptions(E,S.active?"active":i)),k+=N,this.updateElement(S,E,A,i)}}calculateTotal(){const e=this._cachedMeta,t=e.data;let r=0,i;for(i=0;i<t.length;i++){const o=e._parsed[i];o!==null&&!isNaN(o)&&this.chart.getDataVisibility(i)&&!t[i].hidden&&(r+=Math.abs(o))}return r}calculateCircumference(e){const t=this._cachedMeta.total;return t>0&&!isNaN(e)?St*(Math.abs(e)/t):0}getLabelAndValue(e){const t=this._cachedMeta,r=this.chart,i=r.data.labels||[],o=od(t._parsed[e],r.options.locale);return{label:i[e]||"",value:o}}getMaxBorderWidth(e){let t=0;const r=this.chart;let i,o,s,a,l;if(!e){for(i=0,o=r.data.datasets.length;i<o;++i)if(r.isDatasetVisible(i)){s=r.getDatasetMeta(i),e=s.data,a=s.controller;break}}if(!e)return 0;for(i=0,o=e.length;i<o;++i)l=a.resolveDataElementOptions(i),l.borderAlign!=="inner"&&(t=Math.max(t,l.borderWidth||0,l.hoverBorderWidth||0));return t}getMaxOffset(e){let t=0;for(let r=0,i=e.length;r<i;++r){const o=this.resolveDataElementOptions(r);t=Math.max(t,o.offset||0,o.hoverOffset||0)}return t}_getRingWeightOffset(e){let t=0;for(let r=0;r<e;++r)this.chart.isDatasetVisible(r)&&(t+=this._getRingWeight(r));return t}_getRingWeight(e){return Math.max(qe(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class r8 extends Ms{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const t=this._cachedMeta,{dataset:r,data:i=[],_dataset:o}=t,s=this.chart._animationsDisabled;let{start:a,count:l}=UC(t,i,s);this._drawStart=a,this._drawCount=l,HC(t)&&(a=0,l=i.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!o._decimated,r.points=i;const u=this.resolveDatasetElementOptions(e);this.options.showLine||(u.borderWidth=0),u.segment=this.options.segment,this.updateElement(r,void 0,{animated:!s,options:u},e),this.updateElements(i,a,l,e)}updateElements(e,t,r,i){const o=i==="reset",{iScale:s,vScale:a,_stacked:l,_dataset:u}=this._cachedMeta,{sharedOptions:f,includeOptions:p}=this._getSharedOptions(t,i),m=s.axis,v=a.axis,{spanGaps:y,segment:w}=this.options,_=Jl(y)?y:Number.POSITIVE_INFINITY,k=this.chart._animationsDisabled||o||i==="none",E=t+r,N=e.length;let S=t>0&&this.getParsed(t-1);for(let A=0;A<N;++A){const P=e[A],D=k?P:{};if(A<t||A>=E){D.skip=!0;continue}const j=this.getParsed(A),T=Ze(j[v]),M=D[m]=s.getPixelForValue(j[m],A),L=D[v]=o||T?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,j,l):j[v],A);D.skip=isNaN(M)||isNaN(L)||T,D.stop=A>0&&Math.abs(j[m]-S[m])>_,w&&(D.parsed=j,D.raw=u.data[A]),p&&(D.options=f||this.resolveDataElementOptions(A,P.active?"active":i)),k||this.updateElement(P,A,D,i),S=j}}getMaxOverflow(){const e=this._cachedMeta,t=e.dataset,r=t.options&&t.options.borderWidth||0,i=e.data||[];if(!i.length)return r;const o=i[0].size(this.resolveDataElementOptions(0)),s=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(r,o,s)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}class c3 extends Ms{static id="polarArea";static defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:r,color:i}}=e.legend.options;return t.labels.map((o,s)=>{const l=e.getDatasetMeta(0).controller.getStyle(s);return{text:o,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:i,lineWidth:l.borderWidth,pointStyle:r,hidden:!e.getDataVisibility(s),index:s}})}return[]}},onClick(e,t,r){r.chart.toggleDataVisibility(t.index),r.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};constructor(e,t){super(e,t),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const t=this._cachedMeta,r=this.chart,i=r.data.labels||[],o=od(t._parsed[e].r,r.options.locale);return{label:i[e]||"",value:o}}parseObjectData(e,t,r,i){return QC.bind(this)(e,t,r,i)}update(e){const t=this._cachedMeta.data;this._updateRadius(),this.updateElements(t,0,t.length,e)}getMinMax(){const e=this._cachedMeta,t={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach((r,i)=>{const o=this.getParsed(i).r;!isNaN(o)&&this.chart.getDataVisibility(i)&&(o<t.min&&(t.min=o),o>t.max&&(t.max=o))}),t}_updateRadius(){const e=this.chart,t=e.chartArea,r=e.options,i=Math.min(t.right-t.left,t.bottom-t.top),o=Math.max(i/2,0),s=Math.max(r.cutoutPercentage?o/100*r.cutoutPercentage:1,0),a=(o-s)/e.getVisibleDatasetCount();this.outerRadius=o-a*this.index,this.innerRadius=this.outerRadius-a}updateElements(e,t,r,i){const o=i==="reset",s=this.chart,l=s.options.animation,u=this._cachedMeta.rScale,f=u.xCenter,p=u.yCenter,m=u.getIndexAngle(0)-.5*ct;let v=m,y;const w=360/this.countVisibleElements();for(y=0;y<t;++y)v+=this._computeAngle(y,i,w);for(y=t;y<t+r;y++){const _=e[y];let k=v,E=v+this._computeAngle(y,i,w),N=s.getDataVisibility(y)?u.getDistanceFromCenterForValue(this.getParsed(y).r):0;v=E,o&&(l.animateScale&&(N=0),l.animateRotate&&(k=E=m));const S={x:f,y:p,innerRadius:0,outerRadius:N,startAngle:k,endAngle:E,options:this.resolveDataElementOptions(y,_.active?"active":i)};this.updateElement(_,y,S,i)}}countVisibleElements(){const e=this._cachedMeta;let t=0;return e.data.forEach((r,i)=>{!isNaN(this.getParsed(i).r)&&this.chart.getDataVisibility(i)&&t++}),t}_computeAngle(e,t,r){return this.chart.getDataVisibility(e)?ci(this.resolveDataElementOptions(e,t).angle||r):0}}class i8 extends bx{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}}class o8 extends Ms{static id="radar";static defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}};static overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};getLabelAndValue(e){const t=this._cachedMeta.vScale,r=this.getParsed(e);return{label:t.getLabels()[e],value:""+t.getLabelForValue(r[t.axis])}}parseObjectData(e,t,r,i){return QC.bind(this)(e,t,r,i)}update(e){const t=this._cachedMeta,r=t.dataset,i=t.data||[],o=t.iScale.getLabels();if(r.points=i,e!=="resize"){const s=this.resolveDatasetElementOptions(e);this.options.showLine||(s.borderWidth=0);const a={_loop:!0,_fullLoop:o.length===i.length,options:s};this.updateElement(r,void 0,a,e)}this.updateElements(i,0,i.length,e)}updateElements(e,t,r,i){const o=this._cachedMeta.rScale,s=i==="reset";for(let a=t;a<t+r;a++){const l=e[a],u=this.resolveDataElementOptions(a,l.active?"active":i),f=o.getPointPositionForValue(a,this.getParsed(a).r),p=s?o.xCenter:f.x,m=s?o.yCenter:f.y,v={x:p,y:m,angle:f.angle,skip:isNaN(p)||isNaN(m),options:u};this.updateElement(l,a,v,i)}}}class s8 extends Ms{static id="scatter";static defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1};static overrides={interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}};getLabelAndValue(e){const t=this._cachedMeta,r=this.chart.data.labels||[],{xScale:i,yScale:o}=t,s=this.getParsed(e),a=i.getLabelForValue(s.x),l=o.getLabelForValue(s.y);return{label:r[e]||"",value:"("+a+", "+l+")"}}update(e){const t=this._cachedMeta,{data:r=[]}=t,i=this.chart._animationsDisabled;let{start:o,count:s}=UC(t,r,i);if(this._drawStart=o,this._drawCount=s,HC(t)&&(o=0,s=r.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:a,_dataset:l}=t;a._chart=this.chart,a._datasetIndex=this.index,a._decimated=!!l._decimated,a.points=r;const u=this.resolveDatasetElementOptions(e);u.segment=this.options.segment,this.updateElement(a,void 0,{animated:!i,options:u},e)}else this.datasetElementType&&(delete t.dataset,this.datasetElementType=!1);this.updateElements(r,o,s,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,t,r,i){const o=i==="reset",{iScale:s,vScale:a,_stacked:l,_dataset:u}=this._cachedMeta,f=this.resolveDataElementOptions(t,i),p=this.getSharedOptions(f),m=this.includeOptions(i,p),v=s.axis,y=a.axis,{spanGaps:w,segment:_}=this.options,k=Jl(w)?w:Number.POSITIVE_INFINITY,E=this.chart._animationsDisabled||o||i==="none";let N=t>0&&this.getParsed(t-1);for(let S=t;S<t+r;++S){const A=e[S],P=this.getParsed(S),D=E?A:{},j=Ze(P[y]),T=D[v]=s.getPixelForValue(P[v],S),M=D[y]=o||j?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,P,l):P[y],S);D.skip=isNaN(T)||isNaN(M)||j,D.stop=S>0&&Math.abs(P[v]-N[v])>k,_&&(D.parsed=P,D.raw=u.data[S]),m&&(D.options=p||this.resolveDataElementOptions(S,A.active?"active":i)),E||this.updateElement(A,S,D,i),N=P}this.updateSharedOptions(p,i,f)}getMaxOverflow(){const e=this._cachedMeta,t=e.data||[];if(!this.options.showLine){let a=0;for(let l=t.length-1;l>=0;--l)a=Math.max(a,t[l].size(this.resolveDataElementOptions(l))/2);return a>0&&a}const r=e.dataset,i=r.options&&r.options.borderWidth||0;if(!t.length)return i;const o=t[0].size(this.resolveDataElementOptions(0)),s=t[t.length-1].size(this.resolveDataElementOptions(t.length-1));return Math.max(i,o,s)/2}}var a8=Object.freeze({__proto__:null,BarController:e8,BubbleController:t8,DoughnutController:bx,LineController:r8,PieController:i8,PolarAreaController:c3,RadarController:o8,ScatterController:s8});function aa(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class wx{static override(e){Object.assign(wx.prototype,e)}options;constructor(e){this.options=e||{}}init(){}formats(){return aa()}parse(){return aa()}format(){return aa()}add(){return aa()}diff(){return aa()}startOf(){return aa()}endOf(){return aa()}}var l8={_date:wx};function c8(n,e,t,r){const{controller:i,data:o,_sorted:s}=n,a=i._cachedMeta.iScale,l=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null;if(a&&e===a.axis&&e!=="r"&&s&&o.length){const u=a._reversePixels?EF:_o;if(r){if(i._sharedOptions){const f=o[0],p=typeof f.getRange=="function"&&f.getRange(e);if(p){const m=u(o,e,t-p),v=u(o,e,t+p);return{lo:m.lo,hi:v.hi}}}}else{const f=u(o,e,t);if(l){const{vScale:p}=i._cachedMeta,{_parsed:m}=n,v=m.slice(0,f.lo+1).reverse().findIndex(w=>!Ze(w[p.axis]));f.lo-=Math.max(0,v);const y=m.slice(f.hi).findIndex(w=>!Ze(w[p.axis]));f.hi+=Math.max(0,y)}return f}}return{lo:0,hi:o.length-1}}function gp(n,e,t,r,i){const o=n.getSortedVisibleDatasetMetas(),s=t[e];for(let a=0,l=o.length;a<l;++a){const{index:u,data:f}=o[a],{lo:p,hi:m}=c8(o[a],e,s,i);for(let v=p;v<=m;++v){const y=f[v];y.skip||r(y,u,v)}}}function u8(n){const e=n.indexOf("x")!==-1,t=n.indexOf("y")!==-1;return function(r,i){const o=e?Math.abs(r.x-i.x):0,s=t?Math.abs(r.y-i.y):0;return Math.sqrt(Math.pow(o,2)+Math.pow(s,2))}}function W0(n,e,t,r,i){const o=[];return!i&&!n.isPointInArea(e)||gp(n,t,e,function(a,l,u){!i&&!ko(a,n.chartArea,0)||a.inRange(e.x,e.y,r)&&o.push({element:a,datasetIndex:l,index:u})},!0),o}function d8(n,e,t,r){let i=[];function o(s,a,l){const{startAngle:u,endAngle:f}=s.getProps(["startAngle","endAngle"],r),{angle:p}=LC(s,{x:e.x,y:e.y});Ou(p,u,f)&&i.push({element:s,datasetIndex:a,index:l})}return gp(n,t,e,o),i}function h8(n,e,t,r,i,o){let s=[];const a=u8(t);let l=Number.POSITIVE_INFINITY;function u(f,p,m){const v=f.inRange(e.x,e.y,i);if(r&&!v)return;const y=f.getCenterPoint(i);if(!(!!o||n.isPointInArea(y))&&!v)return;const _=a(e,y);_<l?(s=[{element:f,datasetIndex:p,index:m}],l=_):_===l&&s.push({element:f,datasetIndex:p,index:m})}return gp(n,t,e,u),s}function V0(n,e,t,r,i,o){return!o&&!n.isPointInArea(e)?[]:t==="r"&&!r?d8(n,e,t,i):h8(n,e,t,r,i,o)}function hw(n,e,t,r,i){const o=[],s=t==="x"?"inXRange":"inYRange";let a=!1;return gp(n,t,e,(l,u,f)=>{l[s]&&l[s](e[t],i)&&(o.push({element:l,datasetIndex:u,index:f}),a=a||l.inRange(e.x,e.y,i))}),r&&!a?[]:o}var f8={modes:{index(n,e,t,r){const i=ha(e,n),o=t.axis||"x",s=t.includeInvisible||!1,a=t.intersect?W0(n,i,o,r,s):V0(n,i,o,!1,r,s),l=[];return a.length?(n.getSortedVisibleDatasetMetas().forEach(u=>{const f=a[0].index,p=u.data[f];p&&!p.skip&&l.push({element:p,datasetIndex:u.index,index:f})}),l):[]},dataset(n,e,t,r){const i=ha(e,n),o=t.axis||"xy",s=t.includeInvisible||!1;let a=t.intersect?W0(n,i,o,r,s):V0(n,i,o,!1,r,s);if(a.length>0){const l=a[0].datasetIndex,u=n.getDatasetMeta(l).data;a=[];for(let f=0;f<u.length;++f)a.push({element:u[f],datasetIndex:l,index:f})}return a},point(n,e,t,r){const i=ha(e,n),o=t.axis||"xy",s=t.includeInvisible||!1;return W0(n,i,o,r,s)},nearest(n,e,t,r){const i=ha(e,n),o=t.axis||"xy",s=t.includeInvisible||!1;return V0(n,i,o,t.intersect,r,s)},x(n,e,t,r){const i=ha(e,n);return hw(n,i,"x",t.intersect,r)},y(n,e,t,r){const i=ha(e,n);return hw(n,i,"y",t.intersect,r)}}};const u3=["left","top","right","bottom"];function eu(n,e){return n.filter(t=>t.pos===e)}function fw(n,e){return n.filter(t=>u3.indexOf(t.pos)===-1&&t.box.axis===e)}function tu(n,e){return n.sort((t,r)=>{const i=e?r:t,o=e?t:r;return i.weight===o.weight?i.index-o.index:i.weight-o.weight})}function p8(n){const e=[];let t,r,i,o,s,a;for(t=0,r=(n||[]).length;t<r;++t)i=n[t],{position:o,options:{stack:s,stackWeight:a=1}}=i,e.push({index:t,box:i,pos:o,horizontal:i.isHorizontal(),weight:i.weight,stack:s&&o+s,stackWeight:a});return e}function m8(n){const e={};for(const t of n){const{stack:r,pos:i,stackWeight:o}=t;if(!r||!u3.includes(i))continue;const s=e[r]||(e[r]={count:0,placed:0,weight:0,size:0});s.count++,s.weight+=o}return e}function g8(n,e){const t=m8(n),{vBoxMaxWidth:r,hBoxMaxHeight:i}=e;let o,s,a;for(o=0,s=n.length;o<s;++o){a=n[o];const{fullSize:l}=a.box,u=t[a.stack],f=u&&a.stackWeight/u.weight;a.horizontal?(a.width=f?f*r:l&&e.availableWidth,a.height=i):(a.width=r,a.height=f?f*i:l&&e.availableHeight)}return t}function v8(n){const e=p8(n),t=tu(e.filter(u=>u.box.fullSize),!0),r=tu(eu(e,"left"),!0),i=tu(eu(e,"right")),o=tu(eu(e,"top"),!0),s=tu(eu(e,"bottom")),a=fw(e,"x"),l=fw(e,"y");return{fullSize:t,leftAndTop:r.concat(o),rightAndBottom:i.concat(l).concat(s).concat(a),chartArea:eu(e,"chartArea"),vertical:r.concat(i).concat(l),horizontal:o.concat(s).concat(a)}}function pw(n,e,t,r){return Math.max(n[t],e[t])+Math.max(n[r],e[r])}function d3(n,e){n.top=Math.max(n.top,e.top),n.left=Math.max(n.left,e.left),n.bottom=Math.max(n.bottom,e.bottom),n.right=Math.max(n.right,e.right)}function x8(n,e,t,r){const{pos:i,box:o}=t,s=n.maxPadding;if(!tt(i)){t.size&&(n[i]-=t.size);const p=r[t.stack]||{size:0,count:1};p.size=Math.max(p.size,t.horizontal?o.height:o.width),t.size=p.size/p.count,n[i]+=t.size}o.getPadding&&d3(s,o.getPadding());const a=Math.max(0,e.outerWidth-pw(s,n,"left","right")),l=Math.max(0,e.outerHeight-pw(s,n,"top","bottom")),u=a!==n.w,f=l!==n.h;return n.w=a,n.h=l,t.horizontal?{same:u,other:f}:{same:f,other:u}}function y8(n){const e=n.maxPadding;function t(r){const i=Math.max(e[r]-n[r],0);return n[r]+=i,i}n.y+=t("top"),n.x+=t("left"),t("right"),t("bottom")}function b8(n,e){const t=e.maxPadding;function r(i){const o={left:0,top:0,right:0,bottom:0};return i.forEach(s=>{o[s]=Math.max(e[s],t[s])}),o}return r(n?["left","right"]:["top","bottom"])}function uu(n,e,t,r){const i=[];let o,s,a,l,u,f;for(o=0,s=n.length,u=0;o<s;++o){a=n[o],l=a.box,l.update(a.width||e.w,a.height||e.h,b8(a.horizontal,e));const{same:p,other:m}=x8(e,t,a,r);u|=p&&i.length,f=f||m,l.fullSize||i.push(a)}return u&&uu(i,e,t,r)||f}function Hh(n,e,t,r,i){n.top=t,n.left=e,n.right=e+r,n.bottom=t+i,n.width=r,n.height=i}function mw(n,e,t,r){const i=t.padding;let{x:o,y:s}=e;for(const a of n){const l=a.box,u=r[a.stack]||{placed:0,weight:1},f=a.stackWeight/u.weight||1;if(a.horizontal){const p=e.w*f,m=u.size||l.height;Pu(u.start)&&(s=u.start),l.fullSize?Hh(l,i.left,s,t.outerWidth-i.right-i.left,m):Hh(l,e.left+u.placed,s,p,m),u.start=s,u.placed+=p,s=l.bottom}else{const p=e.h*f,m=u.size||l.width;Pu(u.start)&&(o=u.start),l.fullSize?Hh(l,o,i.top,m,t.outerHeight-i.bottom-i.top):Hh(l,o,e.top+u.placed,m,p),u.start=o,u.placed+=p,o=l.right}}e.x=o,e.y=s}var Ln={addBox(n,e){n.boxes||(n.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},n.boxes.push(e)},removeBox(n,e){const t=n.boxes?n.boxes.indexOf(e):-1;t!==-1&&n.boxes.splice(t,1)},configure(n,e,t){e.fullSize=t.fullSize,e.position=t.position,e.weight=t.weight},update(n,e,t,r){if(!n)return;const i=zn(n.options.layout.padding),o=Math.max(e-i.width,0),s=Math.max(t-i.height,0),a=v8(n.boxes),l=a.vertical,u=a.horizontal;vt(n.boxes,w=>{typeof w.beforeLayout=="function"&&w.beforeLayout()});const f=l.reduce((w,_)=>_.box.options&&_.box.options.display===!1?w:w+1,0)||1,p=Object.freeze({outerWidth:e,outerHeight:t,padding:i,availableWidth:o,availableHeight:s,vBoxMaxWidth:o/2/f,hBoxMaxHeight:s/2}),m=Object.assign({},i);d3(m,zn(r));const v=Object.assign({maxPadding:m,w:o,h:s,x:i.left,y:i.top},i),y=g8(l.concat(u),p);uu(a.fullSize,v,p,y),uu(l,v,p,y),uu(u,v,p,y)&&uu(l,v,p,y),y8(v),mw(a.leftAndTop,v,p,y),v.x+=v.w,v.y+=v.h,mw(a.rightAndBottom,v,p,y),n.chartArea={left:v.left,top:v.top,right:v.left+v.w,bottom:v.top+v.h,height:v.h,width:v.w},vt(a.chartArea,w=>{const _=w.box;Object.assign(_,n.chartArea),_.update(v.w,v.h,{left:0,top:0,right:0,bottom:0})})}};class h3{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,r){}removeEventListener(e,t,r){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,r,i){return t=Math.max(0,t||e.width),r=r||e.height,{width:t,height:Math.max(0,i?Math.floor(t/i):r)}}isAttached(e){return!0}updateConfig(e){}}class w8 extends h3{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const sf="$chartjs",_8={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},gw=n=>n===null||n==="";function k8(n,e){const t=n.style,r=n.getAttribute("height"),i=n.getAttribute("width");if(n[sf]={initial:{height:r,width:i,style:{display:t.display,height:t.height,width:t.width}}},t.display=t.display||"block",t.boxSizing=t.boxSizing||"border-box",gw(i)){const o=Z2(n,"width");o!==void 0&&(n.width=o)}if(gw(r))if(n.style.height==="")n.height=n.width/(e||2);else{const o=Z2(n,"height");o!==void 0&&(n.height=o)}return n}const f3=xL?{passive:!0}:!1;function C8(n,e,t){n&&n.addEventListener(e,t,f3)}function E8(n,e,t){n&&n.canvas&&n.canvas.removeEventListener(e,t,f3)}function N8(n,e){const t=_8[n.type]||n.type,{x:r,y:i}=ha(n,e);return{type:t,chart:e,native:n,x:r!==void 0?r:null,y:i!==void 0?i:null}}function Gf(n,e){for(const t of n)if(t===e||t.contains(e))return!0}function S8(n,e,t){const r=n.canvas,i=new MutationObserver(o=>{let s=!1;for(const a of o)s=s||Gf(a.addedNodes,r),s=s&&!Gf(a.removedNodes,r);s&&t()});return i.observe(document,{childList:!0,subtree:!0}),i}function I8(n,e,t){const r=n.canvas,i=new MutationObserver(o=>{let s=!1;for(const a of o)s=s||Gf(a.removedNodes,r),s=s&&!Gf(a.addedNodes,r);s&&t()});return i.observe(document,{childList:!0,subtree:!0}),i}const Lu=new Map;let vw=0;function p3(){const n=window.devicePixelRatio;n!==vw&&(vw=n,Lu.forEach((e,t)=>{t.currentDevicePixelRatio!==n&&e()}))}function A8(n,e){Lu.size||window.addEventListener("resize",p3),Lu.set(n,e)}function R8(n){Lu.delete(n),Lu.size||window.removeEventListener("resize",p3)}function j8(n,e,t){const r=n.canvas,i=r&&yx(r);if(!i)return;const o=VC((a,l)=>{const u=i.clientWidth;t(a,l),u<i.clientWidth&&t()},window),s=new ResizeObserver(a=>{const l=a[0],u=l.contentRect.width,f=l.contentRect.height;u===0&&f===0||o(u,f)});return s.observe(i),A8(n,o),s}function U0(n,e,t){t&&t.disconnect(),e==="resize"&&R8(n)}function T8(n,e,t){const r=n.canvas,i=VC(o=>{n.ctx!==null&&t(N8(o,n))},n);return C8(r,e,i),i}class D8 extends h3{acquireContext(e,t){const r=e&&e.getContext&&e.getContext("2d");return r&&r.canvas===e?(k8(e,t),r):null}releaseContext(e){const t=e.canvas;if(!t[sf])return!1;const r=t[sf].initial;["height","width"].forEach(o=>{const s=r[o];Ze(s)?t.removeAttribute(o):t.setAttribute(o,s)});const i=r.style||{};return Object.keys(i).forEach(o=>{t.style[o]=i[o]}),t.width=t.width,delete t[sf],!0}addEventListener(e,t,r){this.removeEventListener(e,t);const i=e.$proxies||(e.$proxies={}),s={attach:S8,detach:I8,resize:j8}[t]||T8;i[t]=s(e,t,r)}removeEventListener(e,t){const r=e.$proxies||(e.$proxies={}),i=r[t];if(!i)return;({attach:U0,detach:U0,resize:U0}[t]||E8)(e,t,i),r[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,r,i){return vL(e,t,r,i)}isAttached(e){const t=e&&yx(e);return!!(t&&t.isConnected)}}function M8(n){return!xx()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?w8:D8}class Mo{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(e){const{x:t,y:r}=this.getProps(["x","y"],e);return{x:t,y:r}}hasValue(){return Jl(this.x)&&Jl(this.y)}getProps(e,t){const r=this.$animations;if(!t||!r)return this;const i={};return e.forEach(o=>{i[o]=r[o]&&r[o].active()?r[o]._to:this[o]}),i}}function P8(n,e){const t=n.options.ticks,r=O8(n),i=Math.min(t.maxTicksLimit||r,r),o=t.major.enabled?L8(e):[],s=o.length,a=o[0],l=o[s-1],u=[];if(s>i)return B8(e,u,o,s/i),u;const f=F8(o,e,i);if(s>0){let p,m;const v=s>1?Math.round((l-a)/(s-1)):null;for(Gh(e,u,f,Ze(v)?0:a-v,a),p=0,m=s-1;p<m;p++)Gh(e,u,f,o[p],o[p+1]);return Gh(e,u,f,l,Ze(v)?e.length:l+v),u}return Gh(e,u,f),u}function O8(n){const e=n.options.offset,t=n._tickSize(),r=n._length/t+(e?0:1),i=n._maxLength/t;return Math.floor(Math.min(r,i))}function F8(n,e,t){const r=z8(n),i=e.length/t;if(!r)return Math.max(i,1);const o=bF(r);for(let s=0,a=o.length-1;s<a;s++){const l=o[s];if(l>i)return l}return Math.max(i,1)}function L8(n){const e=[];let t,r;for(t=0,r=n.length;t<r;t++)n[t].major&&e.push(t);return e}function B8(n,e,t,r){let i=0,o=t[0],s;for(r=Math.ceil(r),s=0;s<n.length;s++)s===o&&(e.push(n[s]),i++,o=t[i*r])}function Gh(n,e,t,r,i){const o=qe(r,0),s=Math.min(qe(i,n.length),n.length);let a=0,l,u,f;for(t=Math.ceil(t),i&&(l=i-r,t=l/Math.floor(l/t)),f=o;f<0;)a++,f=Math.round(o+a*t);for(u=Math.max(o,0);u<s;u++)u===f&&(e.push(n[u]),a++,f=Math.round(o+a*t))}function z8(n){const e=n.length;let t,r;if(e<2)return!1;for(r=n[0],t=1;t<e;++t)if(n[t]-n[t-1]!==r)return!1;return r}const W8=n=>n==="left"?"right":n==="right"?"left":n,xw=(n,e,t)=>e==="top"||e==="left"?n[e]+t:n[e]-t,yw=(n,e)=>Math.min(e||n,n);function bw(n,e){const t=[],r=n.length/e,i=n.length;let o=0;for(;o<i;o+=r)t.push(n[Math.floor(o)]);return t}function V8(n,e,t){const r=n.ticks.length,i=Math.min(e,r-1),o=n._startPixel,s=n._endPixel,a=1e-6;let l=n.getPixelForTick(i),u;if(!(t&&(r===1?u=Math.max(l-o,s-l):e===0?u=(n.getPixelForTick(1)-l)/2:u=(l-n.getPixelForTick(i-1))/2,l+=i<e?u:-u,l<o-a||l>s+a)))return l}function U8(n,e){vt(n,t=>{const r=t.gc,i=r.length/2;let o;if(i>e){for(o=0;o<i;++o)delete t.data[r[o]];r.splice(0,i)}})}function nu(n){return n.drawTicks?n.tickLength:0}function ww(n,e){if(!n.display)return 0;const t=en(n.font,e),r=zn(n.padding);return(At(n.text)?n.text.length:1)*t.lineHeight+r.height}function H8(n,e){return Ds(n,{scale:e,type:"scale"})}function G8(n,e,t){return Ds(n,{tick:t,index:e,type:"tick"})}function $8(n,e,t){let r=hx(n);return(t&&e!=="right"||!t&&e==="right")&&(r=W8(r)),r}function q8(n,e,t,r){const{top:i,left:o,bottom:s,right:a,chart:l}=n,{chartArea:u,scales:f}=l;let p=0,m,v,y;const w=s-i,_=a-o;if(n.isHorizontal()){if(v=jn(r,o,a),tt(t)){const k=Object.keys(t)[0],E=t[k];y=f[k].getPixelForValue(E)+w-e}else t==="center"?y=(u.bottom+u.top)/2+w-e:y=xw(n,t,e);m=a-o}else{if(tt(t)){const k=Object.keys(t)[0],E=t[k];v=f[k].getPixelForValue(E)-_+e}else t==="center"?v=(u.left+u.right)/2-_+e:v=xw(n,t,e);y=jn(r,s,i),p=t==="left"?-Ut:Ut}return{titleX:v,titleY:y,maxWidth:m,rotation:p}}class Pa extends Mo{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:r,_suggestedMax:i}=this;return e=br(e,Number.POSITIVE_INFINITY),t=br(t,Number.NEGATIVE_INFINITY),r=br(r,Number.POSITIVE_INFINITY),i=br(i,Number.NEGATIVE_INFINITY),{min:br(e,r),max:br(t,i),minDefined:zt(e),maxDefined:zt(t)}}getMinMax(e){let{min:t,max:r,minDefined:i,maxDefined:o}=this.getUserBounds(),s;if(i&&o)return{min:t,max:r};const a=this.getMatchingVisibleMetas();for(let l=0,u=a.length;l<u;++l)s=a[l].controller.getMinMax(this,e),i||(t=Math.min(t,s.min)),o||(r=Math.max(r,s.max));return t=o&&t>r?r:t,r=i&&t>r?t:r,{min:br(t,br(r,t)),max:br(r,br(t,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){_t(this.options.beforeUpdate,[this])}update(e,t,r){const{beginAtZero:i,grace:o,ticks:s}=this.options,a=s.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=XF(this,o,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?bw(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),s.display&&(s.autoSkip||s.source==="auto")&&(this.ticks=P8(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,t,r;this.isHorizontal()?(t=this.left,r=this.right):(t=this.top,r=this.bottom,e=!e),this._startPixel=t,this._endPixel=r,this._reversePixels=e,this._length=r-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){_t(this.options.afterUpdate,[this])}beforeSetDimensions(){_t(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){_t(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),_t(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){_t(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this.options.ticks;let r,i,o;for(r=0,i=e.length;r<i;r++)o=e[r],o.label=_t(t.callback,[o.value,r,e],this)}afterTickToLabelConversion(){_t(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){_t(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,t=e.ticks,r=yw(this.ticks.length,e.ticks.maxTicksLimit),i=t.minRotation||0,o=t.maxRotation;let s=i,a,l,u;if(!this._isVisible()||!t.display||i>=o||r<=1||!this.isHorizontal()){this.labelRotation=i;return}const f=this._getLabelSizes(),p=f.widest.width,m=f.highest.height,v=fn(this.chart.width-p,0,this.maxWidth);a=e.offset?this.maxWidth/r:v/(r-1),p+6>a&&(a=v/(r-(e.offset?.5:1)),l=this.maxHeight-nu(e.grid)-t.padding-ww(e.title,this.chart.options.font),u=Math.sqrt(p*p+m*m),s=ux(Math.min(Math.asin(fn((f.highest.height+6)/a,-1,1)),Math.asin(fn(l/u,-1,1))-Math.asin(fn(m/u,-1,1)))),s=Math.max(i,Math.min(o,s))),this.labelRotation=s}afterCalculateLabelRotation(){_t(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){_t(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:t,options:{ticks:r,title:i,grid:o}}=this,s=this._isVisible(),a=this.isHorizontal();if(s){const l=ww(i,t.options.font);if(a?(e.width=this.maxWidth,e.height=nu(o)+l):(e.height=this.maxHeight,e.width=nu(o)+l),r.display&&this.ticks.length){const{first:u,last:f,widest:p,highest:m}=this._getLabelSizes(),v=r.padding*2,y=ci(this.labelRotation),w=Math.cos(y),_=Math.sin(y);if(a){const k=r.mirror?0:_*p.width+w*m.height;e.height=Math.min(this.maxHeight,e.height+k+v)}else{const k=r.mirror?0:w*p.width+_*m.height;e.width=Math.min(this.maxWidth,e.width+k+v)}this._calculatePadding(u,f,_,w)}}this._handleMargins(),a?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,r,i){const{ticks:{align:o,padding:s},position:a}=this.options,l=this.labelRotation!==0,u=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const f=this.getPixelForTick(0)-this.left,p=this.right-this.getPixelForTick(this.ticks.length-1);let m=0,v=0;l?u?(m=i*e.width,v=r*t.height):(m=r*e.height,v=i*t.width):o==="start"?v=t.width:o==="end"?m=e.width:o!=="inner"&&(m=e.width/2,v=t.width/2),this.paddingLeft=Math.max((m-f+s)*this.width/(this.width-f),0),this.paddingRight=Math.max((v-p+s)*this.width/(this.width-p),0)}else{let f=t.height/2,p=e.height/2;o==="start"?(f=0,p=e.height):o==="end"&&(f=t.height,p=0),this.paddingTop=f+s,this.paddingBottom=p+s}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){_t(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return t==="top"||t==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let t,r;for(t=0,r=e.length;t<r;t++)Ze(e[t].label)&&(e.splice(t,1),r--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const t=this.options.ticks.sampleSize;let r=this.ticks;t<r.length&&(r=bw(r,t)),this._labelSizes=e=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,r){const{ctx:i,_longestTextCache:o}=this,s=[],a=[],l=Math.floor(t/yw(t,r));let u=0,f=0,p,m,v,y,w,_,k,E,N,S,A;for(p=0;p<t;p+=l){if(y=e[p].label,w=this._resolveTickFontOptions(p),i.font=_=w.string,k=o[_]=o[_]||{data:{},gc:[]},E=w.lineHeight,N=S=0,!Ze(y)&&!At(y))N=Uf(i,k.data,k.gc,N,y),S=E;else if(At(y))for(m=0,v=y.length;m<v;++m)A=y[m],!Ze(A)&&!At(A)&&(N=Uf(i,k.data,k.gc,N,A),S+=E);s.push(N),a.push(S),u=Math.max(N,u),f=Math.max(S,f)}U8(o,t);const P=s.indexOf(u),D=a.indexOf(f),j=T=>({width:s[T]||0,height:a[T]||0});return{first:j(0),last:j(t-1),widest:j(P),highest:j(D),widths:s,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const t=this._startPixel+e*this._length;return CF(this._alignToPixels?sa(this.chart,t,0):t)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this.ticks||[];if(e>=0&&e<t.length){const r=t[e];return r.$context||(r.$context=G8(this.getContext(),e,r))}return this.$context||(this.$context=H8(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,t=ci(this.labelRotation),r=Math.abs(Math.cos(t)),i=Math.abs(Math.sin(t)),o=this._getLabelSizes(),s=e.autoSkipPadding||0,a=o?o.widest.width+s:0,l=o?o.highest.height+s:0;return this.isHorizontal()?l*r>a*i?a/r:l/i:l*i<a*r?l/r:a/i}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this.axis,r=this.chart,i=this.options,{grid:o,position:s,border:a}=i,l=o.offset,u=this.isHorizontal(),p=this.ticks.length+(l?1:0),m=nu(o),v=[],y=a.setContext(this.getContext()),w=y.display?y.width:0,_=w/2,k=function(se){return sa(r,se,w)};let E,N,S,A,P,D,j,T,M,L,B,F;if(s==="top")E=k(this.bottom),D=this.bottom-m,T=E-_,L=k(e.top)+_,F=e.bottom;else if(s==="bottom")E=k(this.top),L=e.top,F=k(e.bottom)-_,D=E+_,T=this.top+m;else if(s==="left")E=k(this.right),P=this.right-m,j=E-_,M=k(e.left)+_,B=e.right;else if(s==="right")E=k(this.left),M=e.left,B=k(e.right)-_,P=E+_,j=this.left+m;else if(t==="x"){if(s==="center")E=k((e.top+e.bottom)/2+.5);else if(tt(s)){const se=Object.keys(s)[0],q=s[se];E=k(this.chart.scales[se].getPixelForValue(q))}L=e.top,F=e.bottom,D=E+_,T=D+m}else if(t==="y"){if(s==="center")E=k((e.left+e.right)/2);else if(tt(s)){const se=Object.keys(s)[0],q=s[se];E=k(this.chart.scales[se].getPixelForValue(q))}P=E-_,j=P-m,M=e.left,B=e.right}const K=qe(i.ticks.maxTicksLimit,p),te=Math.max(1,Math.ceil(p/K));for(N=0;N<p;N+=te){const se=this.getContext(N),q=o.setContext(se),$=a.setContext(se),Y=q.lineWidth,Q=q.color,H=$.dash||[],ne=$.dashOffset,fe=q.tickWidth,ye=q.tickColor,be=q.tickBorderDash||[],_e=q.tickBorderDashOffset;S=V8(this,N,l),S!==void 0&&(A=sa(r,S,Y),u?P=j=M=B=A:D=T=L=F=A,v.push({tx1:P,ty1:D,tx2:j,ty2:T,x1:M,y1:L,x2:B,y2:F,width:Y,color:Q,borderDash:H,borderDashOffset:ne,tickWidth:fe,tickColor:ye,tickBorderDash:be,tickBorderDashOffset:_e}))}return this._ticksLength=p,this._borderValue=E,v}_computeLabelItems(e){const t=this.axis,r=this.options,{position:i,ticks:o}=r,s=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:u,padding:f,mirror:p}=o,m=nu(r.grid),v=m+f,y=p?-f:v,w=-ci(this.labelRotation),_=[];let k,E,N,S,A,P,D,j,T,M,L,B,F="middle";if(i==="top")P=this.bottom-y,D=this._getXAxisLabelAlignment();else if(i==="bottom")P=this.top+y,D=this._getXAxisLabelAlignment();else if(i==="left"){const te=this._getYAxisLabelAlignment(m);D=te.textAlign,A=te.x}else if(i==="right"){const te=this._getYAxisLabelAlignment(m);D=te.textAlign,A=te.x}else if(t==="x"){if(i==="center")P=(e.top+e.bottom)/2+v;else if(tt(i)){const te=Object.keys(i)[0],se=i[te];P=this.chart.scales[te].getPixelForValue(se)+v}D=this._getXAxisLabelAlignment()}else if(t==="y"){if(i==="center")A=(e.left+e.right)/2-v;else if(tt(i)){const te=Object.keys(i)[0],se=i[te];A=this.chart.scales[te].getPixelForValue(se)}D=this._getYAxisLabelAlignment(m).textAlign}t==="y"&&(l==="start"?F="top":l==="end"&&(F="bottom"));const K=this._getLabelSizes();for(k=0,E=a.length;k<E;++k){N=a[k],S=N.label;const te=o.setContext(this.getContext(k));j=this.getPixelForTick(k)+o.labelOffset,T=this._resolveTickFontOptions(k),M=T.lineHeight,L=At(S)?S.length:1;const se=L/2,q=te.color,$=te.textStrokeColor,Y=te.textStrokeWidth;let Q=D;s?(A=j,D==="inner"&&(k===E-1?Q=this.options.reverse?"left":"right":k===0?Q=this.options.reverse?"right":"left":Q="center"),i==="top"?u==="near"||w!==0?B=-L*M+M/2:u==="center"?B=-K.highest.height/2-se*M+M:B=-K.highest.height+M/2:u==="near"||w!==0?B=M/2:u==="center"?B=K.highest.height/2-se*M:B=K.highest.height-L*M,p&&(B*=-1),w!==0&&!te.showLabelBackdrop&&(A+=M/2*Math.sin(w))):(P=j,B=(1-L)*M/2);let H;if(te.showLabelBackdrop){const ne=zn(te.backdropPadding),fe=K.heights[k],ye=K.widths[k];let be=B-ne.top,_e=0-ne.left;switch(F){case"middle":be-=fe/2;break;case"bottom":be-=fe;break}switch(D){case"center":_e-=ye/2;break;case"right":_e-=ye;break;case"inner":k===E-1?_e-=ye:k>0&&(_e-=ye/2);break}H={left:_e,top:be,width:ye+ne.width,height:fe+ne.height,color:te.backdropColor}}_.push({label:S,font:T,textOffset:B,options:{rotation:w,color:q,strokeColor:$,strokeWidth:Y,textAlign:Q,textBaseline:F,translation:[A,P],backdrop:H}})}return _}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options;if(-ci(this.labelRotation))return e==="top"?"left":"right";let i="center";return t.align==="start"?i="left":t.align==="end"?i="right":t.align==="inner"&&(i="inner"),i}_getYAxisLabelAlignment(e){const{position:t,ticks:{crossAlign:r,mirror:i,padding:o}}=this.options,s=this._getLabelSizes(),a=e+o,l=s.widest.width;let u,f;return t==="left"?i?(f=this.right+o,r==="near"?u="left":r==="center"?(u="center",f+=l/2):(u="right",f+=l)):(f=this.right-a,r==="near"?u="right":r==="center"?(u="center",f-=l/2):(u="left",f=this.left)):t==="right"?i?(f=this.left+o,r==="near"?u="right":r==="center"?(u="center",f-=l/2):(u="left",f-=l)):(f=this.left+a,r==="near"?u="left":r==="center"?(u="center",f+=l/2):(u="right",f=this.right)):u="right",{textAlign:u,x:f}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,t=this.options.position;if(t==="left"||t==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(t==="top"||t==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:r,top:i,width:o,height:s}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(r,i,o,s),e.restore())}getLineWidthForValue(e){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const i=this.ticks.findIndex(o=>o.value===e);return i>=0?t.setContext(this.getContext(i)).lineWidth:0}drawGrid(e){const t=this.options.grid,r=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let o,s;const a=(l,u,f)=>{!f.width||!f.color||(r.save(),r.lineWidth=f.width,r.strokeStyle=f.color,r.setLineDash(f.borderDash||[]),r.lineDashOffset=f.borderDashOffset,r.beginPath(),r.moveTo(l.x,l.y),r.lineTo(u.x,u.y),r.stroke(),r.restore())};if(t.display)for(o=0,s=i.length;o<s;++o){const l=i[o];t.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),t.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:t,options:{border:r,grid:i}}=this,o=r.setContext(this.getContext()),s=r.display?o.width:0;if(!s)return;const a=i.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let u,f,p,m;this.isHorizontal()?(u=sa(e,this.left,s)-s/2,f=sa(e,this.right,a)+a/2,p=m=l):(p=sa(e,this.top,s)-s/2,m=sa(e,this.bottom,a)+a/2,u=f=l),t.save(),t.lineWidth=o.width,t.strokeStyle=o.color,t.beginPath(),t.moveTo(u,p),t.lineTo(f,m),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;const r=this.ctx,i=this._computeLabelArea();i&&fp(r,i);const o=this.getLabelItems(e);for(const s of o){const a=s.options,l=s.font,u=s.label,f=s.textOffset;Sa(r,u,0,f,l,a)}i&&pp(r)}drawTitle(){const{ctx:e,options:{position:t,title:r,reverse:i}}=this;if(!r.display)return;const o=en(r.font),s=zn(r.padding),a=r.align;let l=o.lineHeight/2;t==="bottom"||t==="center"||tt(t)?(l+=s.bottom,At(r.text)&&(l+=o.lineHeight*(r.text.length-1))):l+=s.top;const{titleX:u,titleY:f,maxWidth:p,rotation:m}=q8(this,l,t,a);Sa(e,r.text,0,0,o,{color:r.color,maxWidth:p,rotation:m,textAlign:$8(a,t,i),textBaseline:"middle",translation:[u,f]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,t=e.ticks&&e.ticks.z||0,r=qe(e.grid&&e.grid.z,-1),i=qe(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==Pa.prototype.draw?[{z:t,draw:o=>{this.draw(o)}}]:[{z:r,draw:o=>{this.drawBackground(),this.drawGrid(o),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:t,draw:o=>{this.drawLabels(o)}}]}getMatchingVisibleMetas(e){const t=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",i=[];let o,s;for(o=0,s=t.length;o<s;++o){const a=t[o];a[r]===this.id&&(!e||a.type===e)&&i.push(a)}return i}_resolveTickFontOptions(e){const t=this.options.ticks.setContext(this.getContext(e));return en(t.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class $h{constructor(e,t,r){this.type=e,this.scope=t,this.override=r,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=Object.getPrototypeOf(e);let r;Y8(t)&&(r=this.register(t));const i=this.items,o=e.id,s=this.scope+"."+o;if(!o)throw new Error("class does not have id: "+e);return o in i||(i[o]=e,K8(e,s,r),this.override&&Rt.override(e.id,e.overrides)),s}get(e){return this.items[e]}unregister(e){const t=this.items,r=e.id,i=this.scope;r in t&&delete t[r],i&&r in Rt[i]&&(delete Rt[i][r],this.override&&delete Na[r])}}function K8(n,e,t){const r=Mu(Object.create(null),[t?Rt.get(t):{},Rt.get(e),n.defaults]);Rt.set(e,r),n.defaultRoutes&&X8(e,n.defaultRoutes),n.descriptors&&Rt.describe(e,n.descriptors)}function X8(n,e){Object.keys(e).forEach(t=>{const r=t.split("."),i=r.pop(),o=[n].concat(r).join("."),s=e[t].split("."),a=s.pop(),l=s.join(".");Rt.route(o,i,l,a)})}function Y8(n){return"id"in n&&"defaults"in n}class J8{constructor(){this.controllers=new $h(Ms,"datasets",!0),this.elements=new $h(Mo,"elements"),this.plugins=new $h(Object,"plugins"),this.scales=new $h(Pa,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,t,r){[...t].forEach(i=>{const o=r||this._getRegistryForType(i);r||o.isForType(i)||o===this.plugins&&i.id?this._exec(e,o,i):vt(i,s=>{const a=r||this._getRegistryForType(s);this._exec(e,a,s)})})}_exec(e,t,r){const i=cx(e);_t(r["before"+i],[],r),t[e](r),_t(r["after"+i],[],r)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const r=this._typedRegistries[t];if(r.isForType(e))return r}return this.plugins}_get(e,t,r){const i=t.get(e);if(i===void 0)throw new Error('"'+e+'" is not a registered '+r+".");return i}}var Ii=new J8;class Q8{constructor(){this._init=[]}notify(e,t,r,i){t==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const o=i?this._descriptors(e).filter(i):this._descriptors(e),s=this._notify(o,e,t,r);return t==="afterDestroy"&&(this._notify(o,e,"stop"),this._notify(this._init,e,"uninstall")),s}_notify(e,t,r,i){i=i||{};for(const o of e){const s=o.plugin,a=s[r],l=[t,i,o.options];if(_t(a,l,s)===!1&&i.cancelable)return!1}return!0}invalidate(){Ze(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const r=e&&e.config,i=qe(r.options&&r.options.plugins,{}),o=Z8(r);return i===!1&&!t?[]:t9(e,o,i,t)}_notifyStateChanges(e){const t=this._oldCache||[],r=this._cache,i=(o,s)=>o.filter(a=>!s.some(l=>a.plugin.id===l.plugin.id));this._notify(i(t,r),e,"stop"),this._notify(i(r,t),e,"start")}}function Z8(n){const e={},t=[],r=Object.keys(Ii.plugins.items);for(let o=0;o<r.length;o++)t.push(Ii.getPlugin(r[o]));const i=n.plugins||[];for(let o=0;o<i.length;o++){const s=i[o];t.indexOf(s)===-1&&(t.push(s),e[s.id]=!0)}return{plugins:t,localIds:e}}function e9(n,e){return!e&&n===!1?null:n===!0?{}:n}function t9(n,{plugins:e,localIds:t},r,i){const o=[],s=n.getContext();for(const a of e){const l=a.id,u=e9(r[l],i);u!==null&&o.push({plugin:a,options:n9(n.config,{plugin:a,local:t[l]},u,s)})}return o}function n9(n,{plugin:e,local:t},r,i){const o=n.pluginScopeKeys(e),s=n.getOptionScopes(r,o);return t&&e.defaults&&s.push(e.defaults),n.createResolver(s,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Dg(n,e){const t=Rt.datasets[n]||{};return((e.datasets||{})[n]||{}).indexAxis||e.indexAxis||t.indexAxis||"x"}function r9(n,e){let t=n;return n==="_index_"?t=e:n==="_value_"&&(t=e==="x"?"y":"x"),t}function i9(n,e){return n===e?"_index_":"_value_"}function _w(n){if(n==="x"||n==="y"||n==="r")return n}function o9(n){if(n==="top"||n==="bottom")return"x";if(n==="left"||n==="right")return"y"}function Mg(n,...e){if(_w(n))return n;for(const t of e){const r=t.axis||o9(t.position)||n.length>1&&_w(n[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${n}' axis. Please provide 'axis' or 'position' option.`)}function kw(n,e,t){if(t[e+"AxisID"]===n)return{axis:e}}function s9(n,e){if(e.data&&e.data.datasets){const t=e.data.datasets.filter(r=>r.xAxisID===n||r.yAxisID===n);if(t.length)return kw(n,"x",t[0])||kw(n,"y",t[0])}return{}}function a9(n,e){const t=Na[n.type]||{scales:{}},r=e.scales||{},i=Dg(n.type,e),o=Object.create(null);return Object.keys(r).forEach(s=>{const a=r[s];if(!tt(a))return console.error(`Invalid scale configuration for scale: ${s}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${s}`);const l=Mg(s,a,s9(s,n),Rt.scales[a.type]),u=i9(l,i),f=t.scales||{};o[s]=yu(Object.create(null),[{axis:l},a,f[l],f[u]])}),n.data.datasets.forEach(s=>{const a=s.type||n.type,l=s.indexAxis||Dg(a,e),f=(Na[a]||{}).scales||{};Object.keys(f).forEach(p=>{const m=r9(p,l),v=s[m+"AxisID"]||m;o[v]=o[v]||Object.create(null),yu(o[v],[{axis:m},r[v],f[p]])})}),Object.keys(o).forEach(s=>{const a=o[s];yu(a,[Rt.scales[a.type],Rt.scale])}),o}function m3(n){const e=n.options||(n.options={});e.plugins=qe(e.plugins,{}),e.scales=a9(n,e)}function g3(n){return n=n||{},n.datasets=n.datasets||[],n.labels=n.labels||[],n}function l9(n){return n=n||{},n.data=g3(n.data),m3(n),n}const Cw=new Map,v3=new Set;function qh(n,e){let t=Cw.get(n);return t||(t=e(),Cw.set(n,t),v3.add(t)),t}const ru=(n,e,t)=>{const r=Ns(e,t);r!==void 0&&n.add(r)};class c9{constructor(e){this._config=l9(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=g3(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),m3(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return qh(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,t){return qh(`${e}.transition.${t}`,()=>[[`datasets.${e}.transitions.${t}`,`transitions.${t}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,t){return qh(`${e}-${t}`,()=>[[`datasets.${e}.elements.${t}`,`datasets.${e}`,`elements.${t}`,""]])}pluginScopeKeys(e){const t=e.id,r=this.type;return qh(`${r}-plugin-${t}`,()=>[[`plugins.${t}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,t){const r=this._scopeCache;let i=r.get(e);return(!i||t)&&(i=new Map,r.set(e,i)),i}getOptionScopes(e,t,r){const{options:i,type:o}=this,s=this._cachedScopes(e,r),a=s.get(t);if(a)return a;const l=new Set;t.forEach(f=>{e&&(l.add(e),f.forEach(p=>ru(l,e,p))),f.forEach(p=>ru(l,i,p)),f.forEach(p=>ru(l,Na[o]||{},p)),f.forEach(p=>ru(l,Rt,p)),f.forEach(p=>ru(l,jg,p))});const u=Array.from(l);return u.length===0&&u.push(Object.create(null)),v3.has(t)&&s.set(t,u),u}chartOptionScopes(){const{options:e,type:t}=this;return[e,Na[t]||{},Rt.datasets[t]||{},{type:t},Rt,jg]}resolveNamedOptions(e,t,r,i=[""]){const o={$shared:!0},{resolver:s,subPrefixes:a}=Ew(this._resolverCache,e,i);let l=s;if(d9(s,t)){o.$shared=!1,r=Ss(r)?r():r;const u=this.createResolver(e,r,a);l=Ql(s,r,u)}for(const u of t)o[u]=l[u];return o}createResolver(e,t,r=[""],i){const{resolver:o}=Ew(this._resolverCache,e,r);return tt(t)?Ql(o,t,void 0,i):o}}function Ew(n,e,t){let r=n.get(e);r||(r=new Map,n.set(e,r));const i=t.join();let o=r.get(i);return o||(o={resolver:mx(e,t),subPrefixes:t.filter(a=>!a.toLowerCase().includes("hover"))},r.set(i,o)),o}const u9=n=>tt(n)&&Object.getOwnPropertyNames(n).some(e=>Ss(n[e]));function d9(n,e){const{isScriptable:t,isIndexable:r}=KC(n);for(const i of e){const o=t(i),s=r(i),a=(s||o)&&n[i];if(o&&(Ss(a)||u9(a))||s&&At(a))return!0}return!1}var h9="4.5.0";const f9=["top","bottom","left","right","chartArea"];function Nw(n,e){return n==="top"||n==="bottom"||f9.indexOf(n)===-1&&e==="x"}function Sw(n,e){return function(t,r){return t[n]===r[n]?t[e]-r[e]:t[n]-r[n]}}function Iw(n){const e=n.chart,t=e.options.animation;e.notifyPlugins("afterRender"),_t(t&&t.onComplete,[n],e)}function p9(n){const e=n.chart,t=e.options.animation;_t(t&&t.onProgress,[n],e)}function x3(n){return xx()&&typeof n=="string"?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}const af={},Aw=n=>{const e=x3(n);return Object.values(af).filter(t=>t.canvas===e).pop()};function m9(n,e,t){const r=Object.keys(n);for(const i of r){const o=+i;if(o>=e){const s=n[i];delete n[i],(t>0||o>e)&&(n[o+t]=s)}}}function g9(n,e,t,r){return!t||n.type==="mouseout"?null:r?e:n}class sd{static defaults=Rt;static instances=af;static overrides=Na;static registry=Ii;static version=h9;static getChart=Aw;static register(...e){Ii.add(...e),Rw()}static unregister(...e){Ii.remove(...e),Rw()}constructor(e,t){const r=this.config=new c9(t),i=x3(e),o=Aw(i);if(o)throw new Error("Canvas is already in use. Chart with ID '"+o.id+"' must be destroyed before the canvas with ID '"+o.canvas.id+"' can be reused.");const s=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||M8(i)),this.platform.updateConfig(r);const a=this.platform.acquireContext(i,s.aspectRatio),l=a&&a.canvas,u=l&&l.height,f=l&&l.width;if(this.id=dF(),this.ctx=a,this.canvas=l,this.width=f,this.height=u,this._options=s,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Q8,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=IF(p=>this.update(p),s.resizeDelay||0),this._dataChanges=[],af[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}mo.listen(this,"complete",Iw),mo.listen(this,"progress",p9),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:t},width:r,height:i,_aspectRatio:o}=this;return Ze(e)?t&&o?o:i?r/i:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Ii}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Q2(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return X2(this.canvas,this.ctx),this}stop(){return mo.stop(this),this}resize(e,t){mo.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){const r=this.options,i=this.canvas,o=r.maintainAspectRatio&&this.aspectRatio,s=this.platform.getMaximumSize(i,e,t,o),a=r.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=s.width,this.height=s.height,this._aspectRatio=this.aspectRatio,Q2(this,a,!0)&&(this.notifyPlugins("resize",{size:s}),_t(r.onResize,[this,s],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const t=this.options.scales||{};vt(t,(r,i)=>{r.id=i})}buildOrUpdateScales(){const e=this.options,t=e.scales,r=this.scales,i=Object.keys(r).reduce((s,a)=>(s[a]=!1,s),{});let o=[];t&&(o=o.concat(Object.keys(t).map(s=>{const a=t[s],l=Mg(s,a),u=l==="r",f=l==="x";return{options:a,dposition:u?"chartArea":f?"bottom":"left",dtype:u?"radialLinear":f?"category":"linear"}}))),vt(o,s=>{const a=s.options,l=a.id,u=Mg(l,a),f=qe(a.type,s.dtype);(a.position===void 0||Nw(a.position,u)!==Nw(s.dposition))&&(a.position=s.dposition),i[l]=!0;let p=null;if(l in r&&r[l].type===f)p=r[l];else{const m=Ii.getScale(f);p=new m({id:l,type:f,ctx:this.ctx,chart:this}),r[p.id]=p}p.init(a,e)}),vt(i,(s,a)=>{s||delete r[a]}),vt(r,s=>{Ln.configure(this,s,s.options),Ln.addBox(this,s)})}_updateMetasets(){const e=this._metasets,t=this.data.datasets.length,r=e.length;if(e.sort((i,o)=>i.index-o.index),r>t){for(let i=t;i<r;++i)this._destroyDatasetMeta(i);e.splice(t,r-t)}this._sortedMetasets=e.slice(0).sort(Sw("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach((r,i)=>{t.filter(o=>o===r._dataset).length===0&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){const e=[],t=this.data.datasets;let r,i;for(this._removeUnreferencedMetasets(),r=0,i=t.length;r<i;r++){const o=t[r];let s=this.getDatasetMeta(r);const a=o.type||this.config.type;if(s.type&&s.type!==a&&(this._destroyDatasetMeta(r),s=this.getDatasetMeta(r)),s.type=a,s.indexAxis=o.indexAxis||Dg(a,this.options),s.order=o.order||0,s.index=r,s.label=""+o.label,s.visible=this.isDatasetVisible(r),s.controller)s.controller.updateIndex(r),s.controller.linkScales();else{const l=Ii.getController(a),{datasetElementType:u,dataElementType:f}=Rt.datasets[a];Object.assign(l,{dataElementType:Ii.getElement(f),datasetElementType:u&&Ii.getElement(u)}),s.controller=new l(this,r),e.push(s.controller)}}return this._updateMetasets(),e}_resetElements(){vt(this.data.datasets,(e,t)=>{this.getDatasetMeta(t).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const t=this.config;t.update();const r=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const o=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let s=0;for(let u=0,f=this.data.datasets.length;u<f;u++){const{controller:p}=this.getDatasetMeta(u),m=!i&&o.indexOf(p)===-1;p.buildOrUpdateElements(m),s=Math.max(+p.getMaxOverflow(),s)}s=this._minPadding=r.layout.autoPadding?s:0,this._updateLayout(s),i||vt(o,u=>{u.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(Sw("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){vt(this.scales,e=>{Ln.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,t=new Set(Object.keys(this._listeners)),r=new Set(e.events);(!z2(t,r)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(const{method:r,start:i,count:o}of t){const s=r==="_removeElements"?-o:o;m9(e,i,s)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const t=this.data.datasets.length,r=o=>new Set(e.filter(s=>s[0]===o).map((s,a)=>a+","+s.splice(1).join(","))),i=r(0);for(let o=1;o<t;o++)if(!z2(i,r(o)))return;return Array.from(i).map(o=>o.split(",")).map(o=>({method:o[1],start:+o[2],count:+o[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Ln.update(this,this.width,this.height,e);const t=this.chartArea,r=t.width<=0||t.height<=0;this._layers=[],vt(this.boxes,i=>{r&&i.position==="chartArea"||(i.configure&&i.configure(),this._layers.push(...i._layers()))},this),this._layers.forEach((i,o)=>{i._idx=o}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let t=0,r=this.data.datasets.length;t<r;++t)this.getDatasetMeta(t).controller.configure();for(let t=0,r=this.data.datasets.length;t<r;++t)this._updateDataset(t,Ss(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){const r=this.getDatasetMeta(e),i={meta:r,index:e,mode:t,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",i)!==!1&&(r.controller._update(t),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(mo.has(this)?this.attached&&!mo.running(this)&&mo.start(this):(this.draw(),Iw({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:r,height:i}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(r,i)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const t=this._sortedMetasets,r=[];let i,o;for(i=0,o=t.length;i<o;++i){const s=t[i];(!e||s.visible)&&r.push(s)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const t=this.ctx,r={meta:e,index:e.index,cancelable:!0},i=o3(this,e);this.notifyPlugins("beforeDatasetDraw",r)!==!1&&(i&&fp(t,i),e.controller.draw(),i&&pp(t),r.cancelable=!1,this.notifyPlugins("afterDatasetDraw",r))}isPointInArea(e){return ko(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,r,i){const o=f8.modes[t];return typeof o=="function"?o(this,e,r,i):[]}getDatasetMeta(e){const t=this.data.datasets[e],r=this._metasets;let i=r.filter(o=>o&&o._dataset===t).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},r.push(i)),i}getContext(){return this.$context||(this.$context=Ds(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const t=this.data.datasets[e];if(!t)return!1;const r=this.getDatasetMeta(e);return typeof r.hidden=="boolean"?!r.hidden:!t.hidden}setDatasetVisibility(e,t){const r=this.getDatasetMeta(e);r.hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,r){const i=r?"show":"hide",o=this.getDatasetMeta(e),s=o.controller._resolveAnimations(void 0,i);Pu(t)?(o.data[t].hidden=!r,this.update()):(this.setDatasetVisibility(e,r),s.update(o,{visible:r}),this.update(a=>a.datasetIndex===e?i:void 0))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){const t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),mo.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),X2(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),delete af[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,t=this.platform,r=(o,s)=>{t.addEventListener(this,o,s),e[o]=s},i=(o,s,a)=>{o.offsetX=s,o.offsetY=a,this._eventHandler(o)};vt(this.options.events,o=>r(o,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,t=this.platform,r=(l,u)=>{t.addEventListener(this,l,u),e[l]=u},i=(l,u)=>{e[l]&&(t.removeEventListener(this,l,u),delete e[l])},o=(l,u)=>{this.canvas&&this.resize(l,u)};let s;const a=()=>{i("attach",a),this.attached=!0,this.resize(),r("resize",o),r("detach",s)};s=()=>{this.attached=!1,i("resize",o),this._stop(),this._resize(0,0),r("attach",a)},t.isAttached(this.canvas)?a():s()}unbindEvents(){vt(this._listeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._listeners={},vt(this._responsiveListeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,t,r){const i=r?"set":"remove";let o,s,a,l;for(t==="dataset"&&(o=this.getDatasetMeta(e[0].datasetIndex),o.controller["_"+i+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){s=e[a];const u=s&&this.getDatasetMeta(s.datasetIndex).controller;u&&u[i+"HoverStyle"](s.element,s.datasetIndex,s.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const t=this._active||[],r=e.map(({datasetIndex:o,index:s})=>{const a=this.getDatasetMeta(o);if(!a)throw new Error("No dataset found at index "+o);return{datasetIndex:o,element:a.data[s],index:s}});!zf(r,t)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,t))}notifyPlugins(e,t,r){return this._plugins.notify(this,e,t,r)}isPluginEnabled(e){return this._plugins._cache.filter(t=>t.plugin.id===e).length===1}_updateHoverStyles(e,t,r){const i=this.options.hover,o=(l,u)=>l.filter(f=>!u.some(p=>f.datasetIndex===p.datasetIndex&&f.index===p.index)),s=o(t,e),a=r?e:o(e,t);s.length&&this.updateHoverStyle(s,i.mode,!1),a.length&&i.mode&&this.updateHoverStyle(a,i.mode,!0)}_eventHandler(e,t){const r={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},i=s=>(s.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",r,i)===!1)return;const o=this._handleEvent(e,t,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,i),(o||r.changed)&&this.render(),this}_handleEvent(e,t,r){const{_active:i=[],options:o}=this,s=t,a=this._getActiveElements(e,i,r,s),l=vF(e),u=g9(e,this._lastEvent,r,l);r&&(this._lastEvent=null,_t(o.onHover,[e,a,this],this),l&&_t(o.onClick,[e,a,this],this));const f=!zf(a,i);return(f||t)&&(this._active=a,this._updateHoverStyles(a,i,t)),this._lastEvent=u,f}_getActiveElements(e,t,r,i){if(e.type==="mouseout")return[];if(!r)return t;const o=this.options.hover;return this.getElementsAtEventForMode(e,o.mode,o,i)}}function Rw(){return vt(sd.instances,n=>n._plugins.invalidate())}function v9(n,e,t){const{startAngle:r,x:i,y:o,outerRadius:s,innerRadius:a,options:l}=e,{borderWidth:u,borderJoinStyle:f}=l,p=Math.min(u/s,Dn(r-t));if(n.beginPath(),n.arc(i,o,s-u/2,r+p/2,t-p/2),a>0){const m=Math.min(u/a,Dn(r-t));n.arc(i,o,a+u/2,t-m/2,r+m/2,!0)}else{const m=Math.min(u/2,s*Dn(r-t));if(f==="round")n.arc(i,o,m,t-ct/2,r+ct/2,!0);else if(f==="bevel"){const v=2*m*m,y=-v*Math.cos(t+ct/2)+i,w=-v*Math.sin(t+ct/2)+o,_=v*Math.cos(r+ct/2)+i,k=v*Math.sin(r+ct/2)+o;n.lineTo(y,w),n.lineTo(_,k)}}n.closePath(),n.moveTo(0,0),n.rect(0,0,n.canvas.width,n.canvas.height),n.clip("evenodd")}function x9(n,e,t){const{startAngle:r,pixelMargin:i,x:o,y:s,outerRadius:a,innerRadius:l}=e;let u=i/a;n.beginPath(),n.arc(o,s,a,r-u,t+u),l>i?(u=i/l,n.arc(o,s,l,t+u,r-u,!0)):n.arc(o,s,i,t+Ut,r-Ut),n.closePath(),n.clip()}function y9(n){return px(n,["outerStart","outerEnd","innerStart","innerEnd"])}function b9(n,e,t,r){const i=y9(n.options.borderRadius),o=(t-e)/2,s=Math.min(o,r*e/2),a=l=>{const u=(t-Math.min(o,l))*r/2;return fn(l,0,Math.min(o,u))};return{outerStart:a(i.outerStart),outerEnd:a(i.outerEnd),innerStart:fn(i.innerStart,0,s),innerEnd:fn(i.innerEnd,0,s)}}function Sl(n,e,t,r){return{x:t+n*Math.cos(e),y:r+n*Math.sin(e)}}function $f(n,e,t,r,i,o){const{x:s,y:a,startAngle:l,pixelMargin:u,innerRadius:f}=e,p=Math.max(e.outerRadius+r+t-u,0),m=f>0?f+r+t+u:0;let v=0;const y=i-l;if(r){const te=f>0?f-r:0,se=p>0?p-r:0,q=(te+se)/2,$=q!==0?y*q/(q+r):y;v=(y-$)/2}const w=Math.max(.001,y*p-t/ct)/p,_=(y-w)/2,k=l+_+v,E=i-_-v,{outerStart:N,outerEnd:S,innerStart:A,innerEnd:P}=b9(e,m,p,E-k),D=p-N,j=p-S,T=k+N/D,M=E-S/j,L=m+A,B=m+P,F=k+A/L,K=E-P/B;if(n.beginPath(),o){const te=(T+M)/2;if(n.arc(s,a,p,T,te),n.arc(s,a,p,te,M),S>0){const Y=Sl(j,M,s,a);n.arc(Y.x,Y.y,S,M,E+Ut)}const se=Sl(B,E,s,a);if(n.lineTo(se.x,se.y),P>0){const Y=Sl(B,K,s,a);n.arc(Y.x,Y.y,P,E+Ut,K+Math.PI)}const q=(E-P/m+(k+A/m))/2;if(n.arc(s,a,m,E-P/m,q,!0),n.arc(s,a,m,q,k+A/m,!0),A>0){const Y=Sl(L,F,s,a);n.arc(Y.x,Y.y,A,F+Math.PI,k-Ut)}const $=Sl(D,k,s,a);if(n.lineTo($.x,$.y),N>0){const Y=Sl(D,T,s,a);n.arc(Y.x,Y.y,N,k-Ut,T)}}else{n.moveTo(s,a);const te=Math.cos(T)*p+s,se=Math.sin(T)*p+a;n.lineTo(te,se);const q=Math.cos(M)*p+s,$=Math.sin(M)*p+a;n.lineTo(q,$)}n.closePath()}function w9(n,e,t,r,i){const{fullCircles:o,startAngle:s,circumference:a}=e;let l=e.endAngle;if(o){$f(n,e,t,r,l,i);for(let u=0;u<o;++u)n.fill();isNaN(a)||(l=s+(a%St||St))}return $f(n,e,t,r,l,i),n.fill(),l}function _9(n,e,t,r,i){const{fullCircles:o,startAngle:s,circumference:a,options:l}=e,{borderWidth:u,borderJoinStyle:f,borderDash:p,borderDashOffset:m,borderRadius:v}=l,y=l.borderAlign==="inner";if(!u)return;n.setLineDash(p||[]),n.lineDashOffset=m,y?(n.lineWidth=u*2,n.lineJoin=f||"round"):(n.lineWidth=u,n.lineJoin=f||"bevel");let w=e.endAngle;if(o){$f(n,e,t,r,w,i);for(let _=0;_<o;++_)n.stroke();isNaN(a)||(w=s+(a%St||St))}y&&x9(n,e,w),l.selfJoin&&w-s>=ct&&v===0&&f!=="miter"&&v9(n,e,w),o||($f(n,e,t,r,w,i),n.stroke())}class k9 extends Mo{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(e){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,t,r){const i=this.getProps(["x","y"],r),{angle:o,distance:s}=LC(i,{x:e,y:t}),{startAngle:a,endAngle:l,innerRadius:u,outerRadius:f,circumference:p}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],r),m=(this.options.spacing+this.options.borderWidth)/2,v=qe(p,l-a),y=Ou(o,a,l)&&a!==l,w=v>=St||y,_=wo(s,u+m,f+m);return w&&_}getCenterPoint(e){const{x:t,y:r,startAngle:i,endAngle:o,innerRadius:s,outerRadius:a}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:l,spacing:u}=this.options,f=(i+o)/2,p=(s+a+u+l)/2;return{x:t+Math.cos(f)*p,y:r+Math.sin(f)*p}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:t,circumference:r}=this,i=(t.offset||0)/4,o=(t.spacing||0)/2,s=t.circular;if(this.pixelMargin=t.borderAlign==="inner"?.33:0,this.fullCircles=r>St?Math.floor(r/St):0,r===0||this.innerRadius<0||this.outerRadius<0)return;e.save();const a=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(a)*i,Math.sin(a)*i);const l=1-Math.sin(Math.min(ct,r||0)),u=i*l;e.fillStyle=t.backgroundColor,e.strokeStyle=t.borderColor,w9(e,this,u,o,s),_9(e,this,u,o,s),e.restore()}}function y3(n,e,t=e){n.lineCap=qe(t.borderCapStyle,e.borderCapStyle),n.setLineDash(qe(t.borderDash,e.borderDash)),n.lineDashOffset=qe(t.borderDashOffset,e.borderDashOffset),n.lineJoin=qe(t.borderJoinStyle,e.borderJoinStyle),n.lineWidth=qe(t.borderWidth,e.borderWidth),n.strokeStyle=qe(t.borderColor,e.borderColor)}function C9(n,e,t){n.lineTo(t.x,t.y)}function E9(n){return n.stepped?zF:n.tension||n.cubicInterpolationMode==="monotone"?WF:C9}function b3(n,e,t={}){const r=n.length,{start:i=0,end:o=r-1}=t,{start:s,end:a}=e,l=Math.max(i,s),u=Math.min(o,a),f=i<s&&o<s||i>a&&o>a;return{count:r,start:l,loop:e.loop,ilen:u<l&&!f?r+u-l:u-l}}function N9(n,e,t,r){const{points:i,options:o}=e,{count:s,start:a,loop:l,ilen:u}=b3(i,t,r),f=E9(o);let{move:p=!0,reverse:m}=r||{},v,y,w;for(v=0;v<=u;++v)y=i[(a+(m?u-v:v))%s],!y.skip&&(p?(n.moveTo(y.x,y.y),p=!1):f(n,w,y,m,o.stepped),w=y);return l&&(y=i[(a+(m?u:0))%s],f(n,w,y,m,o.stepped)),!!l}function S9(n,e,t,r){const i=e.points,{count:o,start:s,ilen:a}=b3(i,t,r),{move:l=!0,reverse:u}=r||{};let f=0,p=0,m,v,y,w,_,k;const E=S=>(s+(u?a-S:S))%o,N=()=>{w!==_&&(n.lineTo(f,_),n.lineTo(f,w),n.lineTo(f,k))};for(l&&(v=i[E(0)],n.moveTo(v.x,v.y)),m=0;m<=a;++m){if(v=i[E(m)],v.skip)continue;const S=v.x,A=v.y,P=S|0;P===y?(A<w?w=A:A>_&&(_=A),f=(p*f+S)/++p):(N(),n.lineTo(S,A),y=P,p=0,w=_=A),k=A}N()}function Pg(n){const e=n.options,t=e.borderDash&&e.borderDash.length;return!n._decimated&&!n._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!t?S9:N9}function I9(n){return n.stepped?yL:n.tension||n.cubicInterpolationMode==="monotone"?bL:fa}function A9(n,e,t,r){let i=e._path;i||(i=e._path=new Path2D,e.path(i,t,r)&&i.closePath()),y3(n,e.options),n.stroke(i)}function R9(n,e,t,r){const{segments:i,options:o}=e,s=Pg(e);for(const a of i)y3(n,o,a.style),n.beginPath(),s(n,e,a,{start:t,end:t+r-1})&&n.closePath(),n.stroke()}const j9=typeof Path2D=="function";function T9(n,e,t,r){j9&&!e.options.segment?A9(n,e,t,r):R9(n,e,t,r)}class vp extends Mo{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"};constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,t){const r=this.options;if((r.tension||r.cubicInterpolationMode==="monotone")&&!r.stepped&&!this._pointsUpdated){const i=r.spanGaps?this._loop:this._fullLoop;dL(this._points,r,e,i,t),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=NL(this,this.options.segment))}first(){const e=this.segments,t=this.points;return e.length&&t[e[0].start]}last(){const e=this.segments,t=this.points,r=e.length;return r&&t[e[r-1].end]}interpolate(e,t){const r=this.options,i=e[t],o=this.points,s=i3(this,{property:t,start:i,end:i});if(!s.length)return;const a=[],l=I9(r);let u,f;for(u=0,f=s.length;u<f;++u){const{start:p,end:m}=s[u],v=o[p],y=o[m];if(v===y){a.push(v);continue}const w=Math.abs((i-v[t])/(y[t]-v[t])),_=l(v,y,w,r.stepped);_[t]=e[t],a.push(_)}return a.length===1?a[0]:a}pathSegment(e,t,r){return Pg(this)(e,this,t,r)}path(e,t,r){const i=this.segments,o=Pg(this);let s=this._loop;t=t||0,r=r||this.points.length-t;for(const a of i)s&=o(e,this,a,{start:t,end:t+r-1});return!!s}draw(e,t,r,i){const o=this.options||{};(this.points||[]).length&&o.borderWidth&&(e.save(),T9(e,this,r,i),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function jw(n,e,t,r){const i=n.options,{[t]:o}=n.getProps([t],r);return Math.abs(e-o)<i.radius+i.hitRadius}class D9 extends Mo{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,t,r){const i=this.options,{x:o,y:s}=this.getProps(["x","y"],r);return Math.pow(e-o,2)+Math.pow(t-s,2)<Math.pow(i.hitRadius+i.radius,2)}inXRange(e,t){return jw(this,e,"x",t)}inYRange(e,t){return jw(this,e,"y",t)}getCenterPoint(e){const{x:t,y:r}=this.getProps(["x","y"],e);return{x:t,y:r}}size(e){e=e||this.options||{};let t=e.radius||0;t=Math.max(t,t&&e.hoverRadius||0);const r=t&&e.borderWidth||0;return(t+r)*2}draw(e,t){const r=this.options;this.skip||r.radius<.1||!ko(this,t,this.size(r)/2)||(e.strokeStyle=r.borderColor,e.lineWidth=r.borderWidth,e.fillStyle=r.backgroundColor,Tg(e,r,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}function w3(n,e){const{x:t,y:r,base:i,width:o,height:s}=n.getProps(["x","y","base","width","height"],e);let a,l,u,f,p;return n.horizontal?(p=s/2,a=Math.min(t,i),l=Math.max(t,i),u=r-p,f=r+p):(p=o/2,a=t-p,l=t+p,u=Math.min(r,i),f=Math.max(r,i)),{left:a,top:u,right:l,bottom:f}}function gs(n,e,t,r){return n?0:fn(e,t,r)}function M9(n,e,t){const r=n.options.borderWidth,i=n.borderSkipped,o=qC(r);return{t:gs(i.top,o.top,0,t),r:gs(i.right,o.right,0,e),b:gs(i.bottom,o.bottom,0,t),l:gs(i.left,o.left,0,e)}}function P9(n,e,t){const{enableBorderRadius:r}=n.getProps(["enableBorderRadius"]),i=n.options.borderRadius,o=xa(i),s=Math.min(e,t),a=n.borderSkipped,l=r||tt(i);return{topLeft:gs(!l||a.top||a.left,o.topLeft,0,s),topRight:gs(!l||a.top||a.right,o.topRight,0,s),bottomLeft:gs(!l||a.bottom||a.left,o.bottomLeft,0,s),bottomRight:gs(!l||a.bottom||a.right,o.bottomRight,0,s)}}function O9(n){const e=w3(n),t=e.right-e.left,r=e.bottom-e.top,i=M9(n,t/2,r/2),o=P9(n,t/2,r/2);return{outer:{x:e.left,y:e.top,w:t,h:r,radius:o},inner:{x:e.left+i.l,y:e.top+i.t,w:t-i.l-i.r,h:r-i.t-i.b,radius:{topLeft:Math.max(0,o.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,o.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,o.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,o.bottomRight-Math.max(i.b,i.r))}}}}function H0(n,e,t,r){const i=e===null,o=t===null,a=n&&!(i&&o)&&w3(n,r);return a&&(i||wo(e,a.left,a.right))&&(o||wo(t,a.top,a.bottom))}function F9(n){return n.topLeft||n.topRight||n.bottomLeft||n.bottomRight}function L9(n,e){n.rect(e.x,e.y,e.w,e.h)}function G0(n,e,t={}){const r=n.x!==t.x?-e:0,i=n.y!==t.y?-e:0,o=(n.x+n.w!==t.x+t.w?e:0)-r,s=(n.y+n.h!==t.y+t.h?e:0)-i;return{x:n.x+r,y:n.y+i,w:n.w+o,h:n.h+s,radius:n.radius}}class B9 extends Mo{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:t,options:{borderColor:r,backgroundColor:i}}=this,{inner:o,outer:s}=O9(this),a=F9(s.radius)?Fu:L9;e.save(),(s.w!==o.w||s.h!==o.h)&&(e.beginPath(),a(e,G0(s,t,o)),e.clip(),a(e,G0(o,-t,s)),e.fillStyle=r,e.fill("evenodd")),e.beginPath(),a(e,G0(o,t)),e.fillStyle=i,e.fill(),e.restore()}inRange(e,t,r){return H0(this,e,t,r)}inXRange(e,t){return H0(this,e,null,t)}inYRange(e,t){return H0(this,null,e,t)}getCenterPoint(e){const{x:t,y:r,base:i,horizontal:o}=this.getProps(["x","y","base","horizontal"],e);return{x:o?(t+i)/2:t,y:o?r:(r+i)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}var z9=Object.freeze({__proto__:null,ArcElement:k9,BarElement:B9,LineElement:vp,PointElement:D9});const Og=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],Tw=Og.map(n=>n.replace("rgb(","rgba(").replace(")",", 0.5)"));function _3(n){return Og[n%Og.length]}function k3(n){return Tw[n%Tw.length]}function W9(n,e){return n.borderColor=_3(e),n.backgroundColor=k3(e),++e}function V9(n,e){return n.backgroundColor=n.data.map(()=>_3(e++)),e}function U9(n,e){return n.backgroundColor=n.data.map(()=>k3(e++)),e}function H9(n){let e=0;return(t,r)=>{const i=n.getDatasetMeta(r).controller;i instanceof bx?e=V9(t,e):i instanceof c3?e=U9(t,e):i&&(e=W9(t,e))}}function Dw(n){let e;for(e in n)if(n[e].borderColor||n[e].backgroundColor)return!0;return!1}function G9(n){return n&&(n.borderColor||n.backgroundColor)}function $9(){return Rt.borderColor!=="rgba(0,0,0,0.1)"||Rt.backgroundColor!=="rgba(0,0,0,0.1)"}var q9={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(n,e,t){if(!t.enabled)return;const{data:{datasets:r},options:i}=n.config,{elements:o}=i,s=Dw(r)||G9(i)||o&&Dw(o)||$9();if(!t.forceOverride&&s)return;const a=H9(n);r.forEach(a)}};function K9(n,e,t,r,i){const o=i.samples||r;if(o>=t)return n.slice(e,e+t);const s=[],a=(t-2)/(o-2);let l=0;const u=e+t-1;let f=e,p,m,v,y,w;for(s[l++]=n[f],p=0;p<o-2;p++){let _=0,k=0,E;const N=Math.floor((p+1)*a)+1+e,S=Math.min(Math.floor((p+2)*a)+1,t)+e,A=S-N;for(E=N;E<S;E++)_+=n[E].x,k+=n[E].y;_/=A,k/=A;const P=Math.floor(p*a)+1+e,D=Math.min(Math.floor((p+1)*a)+1,t)+e,{x:j,y:T}=n[f];for(v=y=-1,E=P;E<D;E++)y=.5*Math.abs((j-_)*(n[E].y-T)-(j-n[E].x)*(k-T)),y>v&&(v=y,m=n[E],w=E);s[l++]=m,f=w}return s[l++]=n[u],s}function X9(n,e,t,r){let i=0,o=0,s,a,l,u,f,p,m,v,y,w;const _=[],k=e+t-1,E=n[e].x,S=n[k].x-E;for(s=e;s<e+t;++s){a=n[s],l=(a.x-E)/S*r,u=a.y;const A=l|0;if(A===f)u<y?(y=u,p=s):u>w&&(w=u,m=s),i=(o*i+a.x)/++o;else{const P=s-1;if(!Ze(p)&&!Ze(m)){const D=Math.min(p,m),j=Math.max(p,m);D!==v&&D!==P&&_.push({...n[D],x:i}),j!==v&&j!==P&&_.push({...n[j],x:i})}s>0&&P!==v&&_.push(n[P]),_.push(a),f=A,o=0,y=w=u,p=m=v=s}}return _}function C3(n){if(n._decimated){const e=n._data;delete n._decimated,delete n._data,Object.defineProperty(n,"data",{configurable:!0,enumerable:!0,writable:!0,value:e})}}function Mw(n){n.data.datasets.forEach(e=>{C3(e)})}function Y9(n,e){const t=e.length;let r=0,i;const{iScale:o}=n,{min:s,max:a,minDefined:l,maxDefined:u}=o.getUserBounds();return l&&(r=fn(_o(e,o.axis,s).lo,0,t-1)),u?i=fn(_o(e,o.axis,a).hi+1,r,t)-r:i=t-r,{start:r,count:i}}var J9={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(n,e,t)=>{if(!t.enabled){Mw(n);return}const r=n.width;n.data.datasets.forEach((i,o)=>{const{_data:s,indexAxis:a}=i,l=n.getDatasetMeta(o),u=s||i.data;if(cu([a,n.options.indexAxis])==="y"||!l.controller.supportsDecimation)return;const f=n.scales[l.xAxisID];if(f.type!=="linear"&&f.type!=="time"||n.options.parsing)return;let{start:p,count:m}=Y9(l,u);const v=t.threshold||4*r;if(m<=v){C3(i);return}Ze(s)&&(i._data=u,delete i.data,Object.defineProperty(i,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(w){this._data=w}}));let y;switch(t.algorithm){case"lttb":y=K9(u,p,m,r,t);break;case"min-max":y=X9(u,p,m,r);break;default:throw new Error(`Unsupported decimation algorithm '${t.algorithm}'`)}i._decimated=y})},destroy(n){Mw(n)}};function Q9(n,e,t){const r=n.segments,i=n.points,o=e.points,s=[];for(const a of r){let{start:l,end:u}=a;u=xp(l,u,i);const f=Fg(t,i[l],i[u],a.loop);if(!e.segments){s.push({source:a,target:f,start:i[l],end:i[u]});continue}const p=i3(e,f);for(const m of p){const v=Fg(t,o[m.start],o[m.end],m.loop),y=r3(a,i,v);for(const w of y)s.push({source:w,target:m,start:{[t]:Pw(f,v,"start",Math.max)},end:{[t]:Pw(f,v,"end",Math.min)}})}}return s}function Fg(n,e,t,r){if(r)return;let i=e[n],o=t[n];return n==="angle"&&(i=Dn(i),o=Dn(o)),{property:n,start:i,end:o}}function Z9(n,e){const{x:t=null,y:r=null}=n||{},i=e.points,o=[];return e.segments.forEach(({start:s,end:a})=>{a=xp(s,a,i);const l=i[s],u=i[a];r!==null?(o.push({x:l.x,y:r}),o.push({x:u.x,y:r})):t!==null&&(o.push({x:t,y:l.y}),o.push({x:t,y:u.y}))}),o}function xp(n,e,t){for(;e>n;e--){const r=t[e];if(!isNaN(r.x)&&!isNaN(r.y))break}return e}function Pw(n,e,t,r){return n&&e?r(n[t],e[t]):n?n[t]:e?e[t]:0}function E3(n,e){let t=[],r=!1;return At(n)?(r=!0,t=n):t=Z9(n,e),t.length?new vp({points:t,options:{tension:0},_loop:r,_fullLoop:r}):null}function Ow(n){return n&&n.fill!==!1}function eB(n,e,t){let i=n[e].fill;const o=[e];let s;if(!t)return i;for(;i!==!1&&o.indexOf(i)===-1;){if(!zt(i))return i;if(s=n[i],!s)return!1;if(s.visible)return i;o.push(i),i=s.fill}return!1}function tB(n,e,t){const r=oB(n);if(tt(r))return isNaN(r.value)?!1:r;let i=parseFloat(r);return zt(i)&&Math.floor(i)===i?nB(r[0],e,i,t):["origin","start","end","stack","shape"].indexOf(r)>=0&&r}function nB(n,e,t,r){return(n==="-"||n==="+")&&(t=e+t),t===e||t<0||t>=r?!1:t}function rB(n,e){let t=null;return n==="start"?t=e.bottom:n==="end"?t=e.top:tt(n)?t=e.getPixelForValue(n.value):e.getBasePixel&&(t=e.getBasePixel()),t}function iB(n,e,t){let r;return n==="start"?r=t:n==="end"?r=e.options.reverse?e.min:e.max:tt(n)?r=n.value:r=e.getBaseValue(),r}function oB(n){const e=n.options,t=e.fill;let r=qe(t&&t.target,t);return r===void 0&&(r=!!e.backgroundColor),r===!1||r===null?!1:r===!0?"origin":r}function sB(n){const{scale:e,index:t,line:r}=n,i=[],o=r.segments,s=r.points,a=aB(e,t);a.push(E3({x:null,y:e.bottom},r));for(let l=0;l<o.length;l++){const u=o[l];for(let f=u.start;f<=u.end;f++)lB(i,s[f],a)}return new vp({points:i,options:{}})}function aB(n,e){const t=[],r=n.getMatchingVisibleMetas("line");for(let i=0;i<r.length;i++){const o=r[i];if(o.index===e)break;o.hidden||t.unshift(o.dataset)}return t}function lB(n,e,t){const r=[];for(let i=0;i<t.length;i++){const o=t[i],{first:s,last:a,point:l}=cB(o,e,"x");if(!(!l||s&&a)){if(s)r.unshift(l);else if(n.push(l),!a)break}}n.push(...r)}function cB(n,e,t){const r=n.interpolate(e,t);if(!r)return{};const i=r[t],o=n.segments,s=n.points;let a=!1,l=!1;for(let u=0;u<o.length;u++){const f=o[u],p=s[f.start][t],m=s[f.end][t];if(wo(i,p,m)){a=i===p,l=i===m;break}}return{first:a,last:l,point:r}}class N3{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,t,r){const{x:i,y:o,radius:s}=this;return t=t||{start:0,end:St},e.arc(i,o,s,t.end,t.start,!0),!r.bounds}interpolate(e){const{x:t,y:r,radius:i}=this,o=e.angle;return{x:t+Math.cos(o)*i,y:r+Math.sin(o)*i,angle:o}}}function uB(n){const{chart:e,fill:t,line:r}=n;if(zt(t))return dB(e,t);if(t==="stack")return sB(n);if(t==="shape")return!0;const i=hB(n);return i instanceof N3?i:E3(i,r)}function dB(n,e){const t=n.getDatasetMeta(e);return t&&n.isDatasetVisible(e)?t.dataset:null}function hB(n){return(n.scale||{}).getPointPositionForValue?pB(n):fB(n)}function fB(n){const{scale:e={},fill:t}=n,r=rB(t,e);if(zt(r)){const i=e.isHorizontal();return{x:i?r:null,y:i?null:r}}return null}function pB(n){const{scale:e,fill:t}=n,r=e.options,i=e.getLabels().length,o=r.reverse?e.max:e.min,s=iB(t,e,o),a=[];if(r.grid.circular){const l=e.getPointPositionForValue(0,o);return new N3({x:l.x,y:l.y,radius:e.getDistanceFromCenterForValue(s)})}for(let l=0;l<i;++l)a.push(e.getPointPositionForValue(l,s));return a}function $0(n,e,t){const r=uB(e),{chart:i,index:o,line:s,scale:a,axis:l}=e,u=s.options,f=u.fill,p=u.backgroundColor,{above:m=p,below:v=p}=f||{},y=i.getDatasetMeta(o),w=o3(i,y);r&&s.points.length&&(fp(n,t),mB(n,{line:s,target:r,above:m,below:v,area:t,scale:a,axis:l,clip:w}),pp(n))}function mB(n,e){const{line:t,target:r,above:i,below:o,area:s,scale:a,clip:l}=e,u=t._loop?"angle":e.axis;n.save();let f=o;o!==i&&(u==="x"?(Fw(n,r,s.top),q0(n,{line:t,target:r,color:i,scale:a,property:u,clip:l}),n.restore(),n.save(),Fw(n,r,s.bottom)):u==="y"&&(Lw(n,r,s.left),q0(n,{line:t,target:r,color:o,scale:a,property:u,clip:l}),n.restore(),n.save(),Lw(n,r,s.right),f=i)),q0(n,{line:t,target:r,color:f,scale:a,property:u,clip:l}),n.restore()}function Fw(n,e,t){const{segments:r,points:i}=e;let o=!0,s=!1;n.beginPath();for(const a of r){const{start:l,end:u}=a,f=i[l],p=i[xp(l,u,i)];o?(n.moveTo(f.x,f.y),o=!1):(n.lineTo(f.x,t),n.lineTo(f.x,f.y)),s=!!e.pathSegment(n,a,{move:s}),s?n.closePath():n.lineTo(p.x,t)}n.lineTo(e.first().x,t),n.closePath(),n.clip()}function Lw(n,e,t){const{segments:r,points:i}=e;let o=!0,s=!1;n.beginPath();for(const a of r){const{start:l,end:u}=a,f=i[l],p=i[xp(l,u,i)];o?(n.moveTo(f.x,f.y),o=!1):(n.lineTo(t,f.y),n.lineTo(f.x,f.y)),s=!!e.pathSegment(n,a,{move:s}),s?n.closePath():n.lineTo(t,p.y)}n.lineTo(t,e.first().y),n.closePath(),n.clip()}function q0(n,e){const{line:t,target:r,property:i,color:o,scale:s,clip:a}=e,l=Q9(t,r,i);for(const{source:u,target:f,start:p,end:m}of l){const{style:{backgroundColor:v=o}={}}=u,y=r!==!0;n.save(),n.fillStyle=v,gB(n,s,a,y&&Fg(i,p,m)),n.beginPath();const w=!!t.pathSegment(n,u);let _;if(y){w?n.closePath():Bw(n,r,m,i);const k=!!r.pathSegment(n,f,{move:w,reverse:!0});_=w&&k,_||Bw(n,r,p,i)}n.closePath(),n.fill(_?"evenodd":"nonzero"),n.restore()}}function gB(n,e,t,r){const i=e.chart.chartArea,{property:o,start:s,end:a}=r||{};if(o==="x"||o==="y"){let l,u,f,p;o==="x"?(l=s,u=i.top,f=a,p=i.bottom):(l=i.left,u=s,f=i.right,p=a),n.beginPath(),t&&(l=Math.max(l,t.left),f=Math.min(f,t.right),u=Math.max(u,t.top),p=Math.min(p,t.bottom)),n.rect(l,u,f-l,p-u),n.clip()}}function Bw(n,e,t,r){const i=e.interpolate(t,r);i&&n.lineTo(i.x,i.y)}var vB={id:"filler",afterDatasetsUpdate(n,e,t){const r=(n.data.datasets||[]).length,i=[];let o,s,a,l;for(s=0;s<r;++s)o=n.getDatasetMeta(s),a=o.dataset,l=null,a&&a.options&&a instanceof vp&&(l={visible:n.isDatasetVisible(s),index:s,fill:tB(a,s,r),chart:n,axis:o.controller.options.indexAxis,scale:o.vScale,line:a}),o.$filler=l,i.push(l);for(s=0;s<r;++s)l=i[s],!(!l||l.fill===!1)&&(l.fill=eB(i,s,t.propagate))},beforeDraw(n,e,t){const r=t.drawTime==="beforeDraw",i=n.getSortedVisibleDatasetMetas(),o=n.chartArea;for(let s=i.length-1;s>=0;--s){const a=i[s].$filler;a&&(a.line.updateControlPoints(o,a.axis),r&&a.fill&&$0(n.ctx,a,o))}},beforeDatasetsDraw(n,e,t){if(t.drawTime!=="beforeDatasetsDraw")return;const r=n.getSortedVisibleDatasetMetas();for(let i=r.length-1;i>=0;--i){const o=r[i].$filler;Ow(o)&&$0(n.ctx,o,n.chartArea)}},beforeDatasetDraw(n,e,t){const r=e.meta.$filler;!Ow(r)||t.drawTime!=="beforeDatasetDraw"||$0(n.ctx,r,n.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const zw=(n,e)=>{let{boxHeight:t=e,boxWidth:r=e}=n;return n.usePointStyle&&(t=Math.min(t,e),r=n.pointStyleWidth||Math.min(r,e)),{boxWidth:r,boxHeight:t,itemHeight:Math.max(e,t)}},xB=(n,e)=>n!==null&&e!==null&&n.datasetIndex===e.datasetIndex&&n.index===e.index;class Ww extends Mo{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,r){this.maxWidth=e,this.maxHeight=t,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let t=_t(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter(r=>e.filter(r,this.chart.data))),e.sort&&(t=t.sort((r,i)=>e.sort(r,i,this.chart.data))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){const{options:e,ctx:t}=this;if(!e.display){this.width=this.height=0;return}const r=e.labels,i=en(r.font),o=i.size,s=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=zw(r,o);let u,f;t.font=i.string,this.isHorizontal()?(u=this.maxWidth,f=this._fitRows(s,o,a,l)+10):(f=this.maxHeight,u=this._fitCols(s,i,a,l)+10),this.width=Math.min(u,e.maxWidth||this.maxWidth),this.height=Math.min(f,e.maxHeight||this.maxHeight)}_fitRows(e,t,r,i){const{ctx:o,maxWidth:s,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],u=this.lineWidths=[0],f=i+a;let p=e;o.textAlign="left",o.textBaseline="middle";let m=-1,v=-f;return this.legendItems.forEach((y,w)=>{const _=r+t/2+o.measureText(y.text).width;(w===0||u[u.length-1]+_+2*a>s)&&(p+=f,u[u.length-(w>0?0:1)]=0,v+=f,m++),l[w]={left:0,top:v,row:m,width:_,height:i},u[u.length-1]+=_+a}),p}_fitCols(e,t,r,i){const{ctx:o,maxHeight:s,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],u=this.columnSizes=[],f=s-e;let p=a,m=0,v=0,y=0,w=0;return this.legendItems.forEach((_,k)=>{const{itemWidth:E,itemHeight:N}=yB(r,t,o,_,i);k>0&&v+N+2*a>f&&(p+=m+a,u.push({width:m,height:v}),y+=m+a,w++,m=v=0),l[k]={left:y,top:v,col:w,width:E,height:N},m=Math.max(m,E),v+=N+a}),p+=m,u.push({width:m,height:v}),p}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:r,labels:{padding:i},rtl:o}}=this,s=Hl(o,this.left,this.width);if(this.isHorizontal()){let a=0,l=jn(r,this.left+i,this.right-this.lineWidths[a]);for(const u of t)a!==u.row&&(a=u.row,l=jn(r,this.left+i,this.right-this.lineWidths[a])),u.top+=this.top+e+i,u.left=s.leftForLtr(s.x(l),u.width),l+=u.width+i}else{let a=0,l=jn(r,this.top+e+i,this.bottom-this.columnSizes[a].height);for(const u of t)u.col!==a&&(a=u.col,l=jn(r,this.top+e+i,this.bottom-this.columnSizes[a].height)),u.top=l,u.left+=this.left+i,u.left=s.leftForLtr(s.x(u.left),u.width),l+=u.height+i}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;fp(e,this),this._draw(),pp(e)}}_draw(){const{options:e,columnSizes:t,lineWidths:r,ctx:i}=this,{align:o,labels:s}=e,a=Rt.color,l=Hl(e.rtl,this.left,this.width),u=en(s.font),{padding:f}=s,p=u.size,m=p/2;let v;this.drawTitle(),i.textAlign=l.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=u.string;const{boxWidth:y,boxHeight:w,itemHeight:_}=zw(s,p),k=function(P,D,j){if(isNaN(y)||y<=0||isNaN(w)||w<0)return;i.save();const T=qe(j.lineWidth,1);if(i.fillStyle=qe(j.fillStyle,a),i.lineCap=qe(j.lineCap,"butt"),i.lineDashOffset=qe(j.lineDashOffset,0),i.lineJoin=qe(j.lineJoin,"miter"),i.lineWidth=T,i.strokeStyle=qe(j.strokeStyle,a),i.setLineDash(qe(j.lineDash,[])),s.usePointStyle){const M={radius:w*Math.SQRT2/2,pointStyle:j.pointStyle,rotation:j.rotation,borderWidth:T},L=l.xPlus(P,y/2),B=D+m;$C(i,M,L,B,s.pointStyleWidth&&y)}else{const M=D+Math.max((p-w)/2,0),L=l.leftForLtr(P,y),B=xa(j.borderRadius);i.beginPath(),Object.values(B).some(F=>F!==0)?Fu(i,{x:L,y:M,w:y,h:w,radius:B}):i.rect(L,M,y,w),i.fill(),T!==0&&i.stroke()}i.restore()},E=function(P,D,j){Sa(i,j.text,P,D+_/2,u,{strikethrough:j.hidden,textAlign:l.textAlign(j.textAlign)})},N=this.isHorizontal(),S=this._computeTitleHeight();N?v={x:jn(o,this.left+f,this.right-r[0]),y:this.top+f+S,line:0}:v={x:this.left+f,y:jn(o,this.top+S+f,this.bottom-t[0].height),line:0},e3(this.ctx,e.textDirection);const A=_+f;this.legendItems.forEach((P,D)=>{i.strokeStyle=P.fontColor,i.fillStyle=P.fontColor;const j=i.measureText(P.text).width,T=l.textAlign(P.textAlign||(P.textAlign=s.textAlign)),M=y+m+j;let L=v.x,B=v.y;l.setWidth(this.width),N?D>0&&L+M+f>this.right&&(B=v.y+=A,v.line++,L=v.x=jn(o,this.left+f,this.right-r[v.line])):D>0&&B+A>this.bottom&&(L=v.x=L+t[v.line].width+f,v.line++,B=v.y=jn(o,this.top+S+f,this.bottom-t[v.line].height));const F=l.x(L);if(k(F,B,P),L=AF(T,L+y+m,N?L+M:this.right,e.rtl),E(l.x(L),B,P),N)v.x+=M+f;else if(typeof P.text!="string"){const K=u.lineHeight;v.y+=S3(P,K)+f}else v.y+=A}),t3(this.ctx,e.textDirection)}drawTitle(){const e=this.options,t=e.title,r=en(t.font),i=zn(t.padding);if(!t.display)return;const o=Hl(e.rtl,this.left,this.width),s=this.ctx,a=t.position,l=r.size/2,u=i.top+l;let f,p=this.left,m=this.width;if(this.isHorizontal())m=Math.max(...this.lineWidths),f=this.top+u,p=jn(e.align,p,this.right-m);else{const y=this.columnSizes.reduce((w,_)=>Math.max(w,_.height),0);f=u+jn(e.align,this.top,this.bottom-y-e.labels.padding-this._computeTitleHeight())}const v=jn(a,p,p+m);s.textAlign=o.textAlign(hx(a)),s.textBaseline="middle",s.strokeStyle=t.color,s.fillStyle=t.color,s.font=r.string,Sa(s,t.text,v,f,r)}_computeTitleHeight(){const e=this.options.title,t=en(e.font),r=zn(e.padding);return e.display?t.lineHeight+r.height:0}_getLegendItemAt(e,t){let r,i,o;if(wo(e,this.left,this.right)&&wo(t,this.top,this.bottom)){for(o=this.legendHitBoxes,r=0;r<o.length;++r)if(i=o[r],wo(e,i.left,i.left+i.width)&&wo(t,i.top,i.top+i.height))return this.legendItems[r]}return null}handleEvent(e){const t=this.options;if(!_B(e.type,t))return;const r=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const i=this._hoveredItem,o=xB(i,r);i&&!o&&_t(t.onLeave,[e,i,this],this),this._hoveredItem=r,r&&!o&&_t(t.onHover,[e,r,this],this)}else r&&_t(t.onClick,[e,r,this],this)}}function yB(n,e,t,r,i){const o=bB(r,n,e,t),s=wB(i,r,e.lineHeight);return{itemWidth:o,itemHeight:s}}function bB(n,e,t,r){let i=n.text;return i&&typeof i!="string"&&(i=i.reduce((o,s)=>o.length>s.length?o:s)),e+t.size/2+r.measureText(i).width}function wB(n,e,t){let r=n;return typeof e.text!="string"&&(r=S3(e,t)),r}function S3(n,e){const t=n.text?n.text.length:0;return e*t}function _B(n,e){return!!((n==="mousemove"||n==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(n==="click"||n==="mouseup"))}var kB={id:"legend",_element:Ww,start(n,e,t){const r=n.legend=new Ww({ctx:n.ctx,options:t,chart:n});Ln.configure(n,r,t),Ln.addBox(n,r)},stop(n){Ln.removeBox(n,n.legend),delete n.legend},beforeUpdate(n,e,t){const r=n.legend;Ln.configure(n,r,t),r.options=t},afterUpdate(n){const e=n.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(n,e){e.replay||n.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(n,e,t){const r=e.datasetIndex,i=t.chart;i.isDatasetVisible(r)?(i.hide(r),e.hidden=!0):(i.show(r),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:n=>n.chart.options.color,boxWidth:40,padding:10,generateLabels(n){const e=n.data.datasets,{labels:{usePointStyle:t,pointStyle:r,textAlign:i,color:o,useBorderRadius:s,borderRadius:a}}=n.legend.options;return n._getSortedDatasetMetas().map(l=>{const u=l.controller.getStyle(t?0:void 0),f=zn(u.borderWidth);return{text:e[l.index].label,fillStyle:u.backgroundColor,fontColor:o,hidden:!l.visible,lineCap:u.borderCapStyle,lineDash:u.borderDash,lineDashOffset:u.borderDashOffset,lineJoin:u.borderJoinStyle,lineWidth:(f.width+f.height)/4,strokeStyle:u.borderColor,pointStyle:r||u.pointStyle,rotation:u.rotation,textAlign:i||u.textAlign,borderRadius:s&&(a||u.borderRadius),datasetIndex:l.index}},this)}},title:{color:n=>n.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:n=>!n.startsWith("on"),labels:{_scriptable:n=>!["generateLabels","filter","sort"].includes(n)}}};class _x extends Mo{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){const r=this.options;if(this.left=0,this.top=0,!r.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=t;const i=At(r.text)?r.text.length:1;this._padding=zn(r.padding);const o=i*en(r.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=o:this.width=o}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:t,left:r,bottom:i,right:o,options:s}=this,a=s.align;let l=0,u,f,p;return this.isHorizontal()?(f=jn(a,r,o),p=t+e,u=o-r):(s.position==="left"?(f=r+e,p=jn(a,i,t),l=ct*-.5):(f=o-e,p=jn(a,t,i),l=ct*.5),u=i-t),{titleX:f,titleY:p,maxWidth:u,rotation:l}}draw(){const e=this.ctx,t=this.options;if(!t.display)return;const r=en(t.font),o=r.lineHeight/2+this._padding.top,{titleX:s,titleY:a,maxWidth:l,rotation:u}=this._drawArgs(o);Sa(e,t.text,0,0,r,{color:t.color,maxWidth:l,rotation:u,textAlign:hx(t.align),textBaseline:"middle",translation:[s,a]})}}function CB(n,e){const t=new _x({ctx:n.ctx,options:e,chart:n});Ln.configure(n,t,e),Ln.addBox(n,t),n.titleBlock=t}var EB={id:"title",_element:_x,start(n,e,t){CB(n,t)},stop(n){const e=n.titleBlock;Ln.removeBox(n,e),delete n.titleBlock},beforeUpdate(n,e,t){const r=n.titleBlock;Ln.configure(n,r,t),r.options=t},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Kh=new WeakMap;var NB={id:"subtitle",start(n,e,t){const r=new _x({ctx:n.ctx,options:t,chart:n});Ln.configure(n,r,t),Ln.addBox(n,r),Kh.set(n,r)},stop(n){Ln.removeBox(n,Kh.get(n)),Kh.delete(n)},beforeUpdate(n,e,t){const r=Kh.get(n);Ln.configure(n,r,t),r.options=t},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const du={average(n){if(!n.length)return!1;let e,t,r=new Set,i=0,o=0;for(e=0,t=n.length;e<t;++e){const a=n[e].element;if(a&&a.hasValue()){const l=a.tooltipPosition();r.add(l.x),i+=l.y,++o}}return o===0||r.size===0?!1:{x:[...r].reduce((a,l)=>a+l)/r.size,y:i/o}},nearest(n,e){if(!n.length)return!1;let t=e.x,r=e.y,i=Number.POSITIVE_INFINITY,o,s,a;for(o=0,s=n.length;o<s;++o){const l=n[o].element;if(l&&l.hasValue()){const u=l.getCenterPoint(),f=Rg(e,u);f<i&&(i=f,a=l)}}if(a){const l=a.tooltipPosition();t=l.x,r=l.y}return{x:t,y:r}}};function Ni(n,e){return e&&(At(e)?Array.prototype.push.apply(n,e):n.push(e)),n}function go(n){return(typeof n=="string"||n instanceof String)&&n.indexOf(`
`)>-1?n.split(`
`):n}function SB(n,e){const{element:t,datasetIndex:r,index:i}=e,o=n.getDatasetMeta(r).controller,{label:s,value:a}=o.getLabelAndValue(i);return{chart:n,label:s,parsed:o.getParsed(i),raw:n.data.datasets[r].data[i],formattedValue:a,dataset:o.getDataset(),dataIndex:i,datasetIndex:r,element:t}}function Vw(n,e){const t=n.chart.ctx,{body:r,footer:i,title:o}=n,{boxWidth:s,boxHeight:a}=e,l=en(e.bodyFont),u=en(e.titleFont),f=en(e.footerFont),p=o.length,m=i.length,v=r.length,y=zn(e.padding);let w=y.height,_=0,k=r.reduce((S,A)=>S+A.before.length+A.lines.length+A.after.length,0);if(k+=n.beforeBody.length+n.afterBody.length,p&&(w+=p*u.lineHeight+(p-1)*e.titleSpacing+e.titleMarginBottom),k){const S=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;w+=v*S+(k-v)*l.lineHeight+(k-1)*e.bodySpacing}m&&(w+=e.footerMarginTop+m*f.lineHeight+(m-1)*e.footerSpacing);let E=0;const N=function(S){_=Math.max(_,t.measureText(S).width+E)};return t.save(),t.font=u.string,vt(n.title,N),t.font=l.string,vt(n.beforeBody.concat(n.afterBody),N),E=e.displayColors?s+2+e.boxPadding:0,vt(r,S=>{vt(S.before,N),vt(S.lines,N),vt(S.after,N)}),E=0,t.font=f.string,vt(n.footer,N),t.restore(),_+=y.width,{width:_,height:w}}function IB(n,e){const{y:t,height:r}=e;return t<r/2?"top":t>n.height-r/2?"bottom":"center"}function AB(n,e,t,r){const{x:i,width:o}=r,s=t.caretSize+t.caretPadding;if(n==="left"&&i+o+s>e.width||n==="right"&&i-o-s<0)return!0}function RB(n,e,t,r){const{x:i,width:o}=t,{width:s,chartArea:{left:a,right:l}}=n;let u="center";return r==="center"?u=i<=(a+l)/2?"left":"right":i<=o/2?u="left":i>=s-o/2&&(u="right"),AB(u,n,e,t)&&(u="center"),u}function Uw(n,e,t){const r=t.yAlign||e.yAlign||IB(n,t);return{xAlign:t.xAlign||e.xAlign||RB(n,e,t,r),yAlign:r}}function jB(n,e){let{x:t,width:r}=n;return e==="right"?t-=r:e==="center"&&(t-=r/2),t}function TB(n,e,t){let{y:r,height:i}=n;return e==="top"?r+=t:e==="bottom"?r-=i+t:r-=i/2,r}function Hw(n,e,t,r){const{caretSize:i,caretPadding:o,cornerRadius:s}=n,{xAlign:a,yAlign:l}=t,u=i+o,{topLeft:f,topRight:p,bottomLeft:m,bottomRight:v}=xa(s);let y=jB(e,a);const w=TB(e,l,u);return l==="center"?a==="left"?y+=u:a==="right"&&(y-=u):a==="left"?y-=Math.max(f,m)+i:a==="right"&&(y+=Math.max(p,v)+i),{x:fn(y,0,r.width-e.width),y:fn(w,0,r.height-e.height)}}function Xh(n,e,t){const r=zn(t.padding);return e==="center"?n.x+n.width/2:e==="right"?n.x+n.width-r.right:n.x+r.left}function Gw(n){return Ni([],go(n))}function DB(n,e,t){return Ds(n,{tooltip:e,tooltipItems:t,type:"tooltip"})}function $w(n,e){const t=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return t?n.override(t):n}const I3={beforeTitle:fo,title(n){if(n.length>0){const e=n[0],t=e.chart.data.labels,r=t?t.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(r>0&&e.dataIndex<r)return t[e.dataIndex]}return""},afterTitle:fo,beforeBody:fo,beforeLabel:fo,label(n){if(this&&this.options&&this.options.mode==="dataset")return n.label+": "+n.formattedValue||n.formattedValue;let e=n.dataset.label||"";e&&(e+=": ");const t=n.formattedValue;return Ze(t)||(e+=t),e},labelColor(n){const t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){const t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:fo,afterBody:fo,beforeFooter:fo,footer:fo,afterFooter:fo};function ir(n,e,t,r){const i=n[e].call(t,r);return typeof i>"u"?I3[e].call(t,r):i}class qw extends Mo{static positioners=du;constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const t=this.chart,r=this.options.setContext(this.getContext()),i=r.enabled&&t.options.animation&&r.animations,o=new s3(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(o)),o}getContext(){return this.$context||(this.$context=DB(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,t){const{callbacks:r}=t,i=ir(r,"beforeTitle",this,e),o=ir(r,"title",this,e),s=ir(r,"afterTitle",this,e);let a=[];return a=Ni(a,go(i)),a=Ni(a,go(o)),a=Ni(a,go(s)),a}getBeforeBody(e,t){return Gw(ir(t.callbacks,"beforeBody",this,e))}getBody(e,t){const{callbacks:r}=t,i=[];return vt(e,o=>{const s={before:[],lines:[],after:[]},a=$w(r,o);Ni(s.before,go(ir(a,"beforeLabel",this,o))),Ni(s.lines,ir(a,"label",this,o)),Ni(s.after,go(ir(a,"afterLabel",this,o))),i.push(s)}),i}getAfterBody(e,t){return Gw(ir(t.callbacks,"afterBody",this,e))}getFooter(e,t){const{callbacks:r}=t,i=ir(r,"beforeFooter",this,e),o=ir(r,"footer",this,e),s=ir(r,"afterFooter",this,e);let a=[];return a=Ni(a,go(i)),a=Ni(a,go(o)),a=Ni(a,go(s)),a}_createItems(e){const t=this._active,r=this.chart.data,i=[],o=[],s=[];let a=[],l,u;for(l=0,u=t.length;l<u;++l)a.push(SB(this.chart,t[l]));return e.filter&&(a=a.filter((f,p,m)=>e.filter(f,p,m,r))),e.itemSort&&(a=a.sort((f,p)=>e.itemSort(f,p,r))),vt(a,f=>{const p=$w(e.callbacks,f);i.push(ir(p,"labelColor",this,f)),o.push(ir(p,"labelPointStyle",this,f)),s.push(ir(p,"labelTextColor",this,f))}),this.labelColors=i,this.labelPointStyles=o,this.labelTextColors=s,this.dataPoints=a,a}update(e,t){const r=this.options.setContext(this.getContext()),i=this._active;let o,s=[];if(!i.length)this.opacity!==0&&(o={opacity:0});else{const a=du[r.position].call(this,i,this._eventPosition);s=this._createItems(r),this.title=this.getTitle(s,r),this.beforeBody=this.getBeforeBody(s,r),this.body=this.getBody(s,r),this.afterBody=this.getAfterBody(s,r),this.footer=this.getFooter(s,r);const l=this._size=Vw(this,r),u=Object.assign({},a,l),f=Uw(this.chart,r,u),p=Hw(r,u,f,this.chart);this.xAlign=f.xAlign,this.yAlign=f.yAlign,o={opacity:1,x:p.x,y:p.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=s,this.$context=void 0,o&&this._resolveAnimations().update(this,o),e&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,r,i){const o=this.getCaretPosition(e,r,i);t.lineTo(o.x1,o.y1),t.lineTo(o.x2,o.y2),t.lineTo(o.x3,o.y3)}getCaretPosition(e,t,r){const{xAlign:i,yAlign:o}=this,{caretSize:s,cornerRadius:a}=r,{topLeft:l,topRight:u,bottomLeft:f,bottomRight:p}=xa(a),{x:m,y:v}=e,{width:y,height:w}=t;let _,k,E,N,S,A;return o==="center"?(S=v+w/2,i==="left"?(_=m,k=_-s,N=S+s,A=S-s):(_=m+y,k=_+s,N=S-s,A=S+s),E=_):(i==="left"?k=m+Math.max(l,f)+s:i==="right"?k=m+y-Math.max(u,p)-s:k=this.caretX,o==="top"?(N=v,S=N-s,_=k-s,E=k+s):(N=v+w,S=N+s,_=k+s,E=k-s),A=N),{x1:_,x2:k,x3:E,y1:N,y2:S,y3:A}}drawTitle(e,t,r){const i=this.title,o=i.length;let s,a,l;if(o){const u=Hl(r.rtl,this.x,this.width);for(e.x=Xh(this,r.titleAlign,r),t.textAlign=u.textAlign(r.titleAlign),t.textBaseline="middle",s=en(r.titleFont),a=r.titleSpacing,t.fillStyle=r.titleColor,t.font=s.string,l=0;l<o;++l)t.fillText(i[l],u.x(e.x),e.y+s.lineHeight/2),e.y+=s.lineHeight+a,l+1===o&&(e.y+=r.titleMarginBottom-a)}}_drawColorBox(e,t,r,i,o){const s=this.labelColors[r],a=this.labelPointStyles[r],{boxHeight:l,boxWidth:u}=o,f=en(o.bodyFont),p=Xh(this,"left",o),m=i.x(p),v=l<f.lineHeight?(f.lineHeight-l)/2:0,y=t.y+v;if(o.usePointStyle){const w={radius:Math.min(u,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},_=i.leftForLtr(m,u)+u/2,k=y+l/2;e.strokeStyle=o.multiKeyBackground,e.fillStyle=o.multiKeyBackground,Tg(e,w,_,k),e.strokeStyle=s.borderColor,e.fillStyle=s.backgroundColor,Tg(e,w,_,k)}else{e.lineWidth=tt(s.borderWidth)?Math.max(...Object.values(s.borderWidth)):s.borderWidth||1,e.strokeStyle=s.borderColor,e.setLineDash(s.borderDash||[]),e.lineDashOffset=s.borderDashOffset||0;const w=i.leftForLtr(m,u),_=i.leftForLtr(i.xPlus(m,1),u-2),k=xa(s.borderRadius);Object.values(k).some(E=>E!==0)?(e.beginPath(),e.fillStyle=o.multiKeyBackground,Fu(e,{x:w,y,w:u,h:l,radius:k}),e.fill(),e.stroke(),e.fillStyle=s.backgroundColor,e.beginPath(),Fu(e,{x:_,y:y+1,w:u-2,h:l-2,radius:k}),e.fill()):(e.fillStyle=o.multiKeyBackground,e.fillRect(w,y,u,l),e.strokeRect(w,y,u,l),e.fillStyle=s.backgroundColor,e.fillRect(_,y+1,u-2,l-2))}e.fillStyle=this.labelTextColors[r]}drawBody(e,t,r){const{body:i}=this,{bodySpacing:o,bodyAlign:s,displayColors:a,boxHeight:l,boxWidth:u,boxPadding:f}=r,p=en(r.bodyFont);let m=p.lineHeight,v=0;const y=Hl(r.rtl,this.x,this.width),w=function(j){t.fillText(j,y.x(e.x+v),e.y+m/2),e.y+=m+o},_=y.textAlign(s);let k,E,N,S,A,P,D;for(t.textAlign=s,t.textBaseline="middle",t.font=p.string,e.x=Xh(this,_,r),t.fillStyle=r.bodyColor,vt(this.beforeBody,w),v=a&&_!=="right"?s==="center"?u/2+f:u+2+f:0,S=0,P=i.length;S<P;++S){for(k=i[S],E=this.labelTextColors[S],t.fillStyle=E,vt(k.before,w),N=k.lines,a&&N.length&&(this._drawColorBox(t,e,S,y,r),m=Math.max(p.lineHeight,l)),A=0,D=N.length;A<D;++A)w(N[A]),m=p.lineHeight;vt(k.after,w)}v=0,m=p.lineHeight,vt(this.afterBody,w),e.y-=o}drawFooter(e,t,r){const i=this.footer,o=i.length;let s,a;if(o){const l=Hl(r.rtl,this.x,this.width);for(e.x=Xh(this,r.footerAlign,r),e.y+=r.footerMarginTop,t.textAlign=l.textAlign(r.footerAlign),t.textBaseline="middle",s=en(r.footerFont),t.fillStyle=r.footerColor,t.font=s.string,a=0;a<o;++a)t.fillText(i[a],l.x(e.x),e.y+s.lineHeight/2),e.y+=s.lineHeight+r.footerSpacing}}drawBackground(e,t,r,i){const{xAlign:o,yAlign:s}=this,{x:a,y:l}=e,{width:u,height:f}=r,{topLeft:p,topRight:m,bottomLeft:v,bottomRight:y}=xa(i.cornerRadius);t.fillStyle=i.backgroundColor,t.strokeStyle=i.borderColor,t.lineWidth=i.borderWidth,t.beginPath(),t.moveTo(a+p,l),s==="top"&&this.drawCaret(e,t,r,i),t.lineTo(a+u-m,l),t.quadraticCurveTo(a+u,l,a+u,l+m),s==="center"&&o==="right"&&this.drawCaret(e,t,r,i),t.lineTo(a+u,l+f-y),t.quadraticCurveTo(a+u,l+f,a+u-y,l+f),s==="bottom"&&this.drawCaret(e,t,r,i),t.lineTo(a+v,l+f),t.quadraticCurveTo(a,l+f,a,l+f-v),s==="center"&&o==="left"&&this.drawCaret(e,t,r,i),t.lineTo(a,l+p),t.quadraticCurveTo(a,l,a+p,l),t.closePath(),t.fill(),i.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){const t=this.chart,r=this.$animations,i=r&&r.x,o=r&&r.y;if(i||o){const s=du[e.position].call(this,this._active,this._eventPosition);if(!s)return;const a=this._size=Vw(this,e),l=Object.assign({},s,this._size),u=Uw(t,e,l),f=Hw(e,l,u,t);(i._to!==f.x||o._to!==f.y)&&(this.xAlign=u.xAlign,this.yAlign=u.yAlign,this.width=a.width,this.height=a.height,this.caretX=s.x,this.caretY=s.y,this._resolveAnimations().update(this,f))}}_willRender(){return!!this.opacity}draw(e){const t=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(t);const i={width:this.width,height:this.height},o={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const s=zn(t.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&a&&(e.save(),e.globalAlpha=r,this.drawBackground(o,e,i,t),e3(e,t.textDirection),o.y+=s.top,this.drawTitle(o,e,t),this.drawBody(o,e,t),this.drawFooter(o,e,t),t3(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){const r=this._active,i=e.map(({datasetIndex:a,index:l})=>{const u=this.chart.getDatasetMeta(a);if(!u)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:u.data[l],index:l}}),o=!zf(r,i),s=this._positionChanged(i,t);(o||s)&&(this._active=i,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t,r=!0){if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,o=this._active||[],s=this._getActiveElements(e,o,t,r),a=this._positionChanged(s,e),l=t||!zf(s,o)||a;return l&&(this._active=s,(i.enabled||i.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),l}_getActiveElements(e,t,r,i){const o=this.options;if(e.type==="mouseout")return[];if(!i)return t.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const s=this.chart.getElementsAtEventForMode(e,o.mode,o,r);return o.reverse&&s.reverse(),s}_positionChanged(e,t){const{caretX:r,caretY:i,options:o}=this,s=du[o.position].call(this,e,t);return s!==!1&&(r!==s.x||i!==s.y)}}var MB={id:"tooltip",_element:qw,positioners:du,afterInit(n,e,t){t&&(n.tooltip=new qw({chart:n,options:t}))},beforeUpdate(n,e,t){n.tooltip&&n.tooltip.initialize(t)},reset(n,e,t){n.tooltip&&n.tooltip.initialize(t)},afterDraw(n){const e=n.tooltip;if(e&&e._willRender()){const t={tooltip:e};if(n.notifyPlugins("beforeTooltipDraw",{...t,cancelable:!0})===!1)return;e.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",t)}},afterEvent(n,e){if(n.tooltip){const t=e.replay;n.tooltip.handleEvent(e.event,t,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,e)=>e.bodyFont.size,boxWidth:(n,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:I3},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>n!=="filter"&&n!=="itemSort"&&n!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},PB=Object.freeze({__proto__:null,Colors:q9,Decimation:J9,Filler:vB,Legend:kB,SubTitle:NB,Title:EB,Tooltip:MB});const OB=(n,e,t,r)=>(typeof e=="string"?(t=n.push(e)-1,r.unshift({index:t,label:e})):isNaN(e)&&(t=null),t);function FB(n,e,t,r){const i=n.indexOf(e);if(i===-1)return OB(n,e,t,r);const o=n.lastIndexOf(e);return i!==o?t:i}const LB=(n,e)=>n===null?null:fn(Math.round(n),0,e);function Kw(n){const e=this.getLabels();return n>=0&&n<e.length?e[n]:n}class BB extends Pa{static id="category";static defaults={ticks:{callback:Kw}};constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const t=this._addedLabels;if(t.length){const r=this.getLabels();for(const{index:i,label:o}of t)r[i]===o&&r.splice(i,1);this._addedLabels=[]}super.init(e)}parse(e,t){if(Ze(e))return null;const r=this.getLabels();return t=isFinite(t)&&r[t]===e?t:FB(r,e,qe(t,e),this._addedLabels),LB(t,r.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let{min:r,max:i}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(r=0),t||(i=this.getLabels().length-1)),this.min=r,this.max=i}buildTicks(){const e=this.min,t=this.max,r=this.options.offset,i=[];let o=this.getLabels();o=e===0&&t===o.length-1?o:o.slice(e,t+1),this._valueRange=Math.max(o.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let s=e;s<=t;s++)i.push({value:s});return i}getLabelForValue(e){return Kw.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}function zB(n,e){const t=[],{bounds:i,step:o,min:s,max:a,precision:l,count:u,maxTicks:f,maxDigits:p,includeBounds:m}=n,v=o||1,y=f-1,{min:w,max:_}=e,k=!Ze(s),E=!Ze(a),N=!Ze(u),S=(_-w)/(p+1);let A=V2((_-w)/y/v)*v,P,D,j,T;if(A<1e-14&&!k&&!E)return[{value:w},{value:_}];T=Math.ceil(_/A)-Math.floor(w/A),T>y&&(A=V2(T*A/y/v)*v),Ze(l)||(P=Math.pow(10,l),A=Math.ceil(A*P)/P),i==="ticks"?(D=Math.floor(w/A)*A,j=Math.ceil(_/A)*A):(D=w,j=_),k&&E&&o&&_F((a-s)/o,A/1e3)?(T=Math.round(Math.min((a-s)/A,f)),A=(a-s)/T,D=s,j=a):N?(D=k?s:D,j=E?a:j,T=u-1,A=(j-D)/T):(T=(j-D)/A,bu(T,Math.round(T),A/1e3)?T=Math.round(T):T=Math.ceil(T));const M=Math.max(U2(A),U2(D));P=Math.pow(10,Ze(l)?M:l),D=Math.round(D*P)/P,j=Math.round(j*P)/P;let L=0;for(k&&(m&&D!==s?(t.push({value:s}),D<s&&L++,bu(Math.round((D+L*A)*P)/P,s,Xw(s,S,n))&&L++):D<s&&L++);L<T;++L){const B=Math.round((D+L*A)*P)/P;if(E&&B>a)break;t.push({value:B})}return E&&m&&j!==a?t.length&&bu(t[t.length-1].value,a,Xw(a,S,n))?t[t.length-1].value=a:t.push({value:a}):(!E||j===a)&&t.push({value:j}),t}function Xw(n,e,{horizontal:t,minRotation:r}){const i=ci(r),o=(t?Math.sin(i):Math.cos(i))||.001,s=.75*e*(""+n).length;return Math.min(e/o,s)}class qf extends Pa{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return Ze(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:t,maxDefined:r}=this.getUserBounds();let{min:i,max:o}=this;const s=l=>i=t?i:l,a=l=>o=r?o:l;if(e){const l=Li(i),u=Li(o);l<0&&u<0?a(0):l>0&&u>0&&s(0)}if(i===o){let l=o===0?1:Math.abs(o*.05);a(o+l),e||s(i-l)}this.min=i,this.max=o}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:t,stepSize:r}=e,i;return r?(i=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,i>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${i} ticks. Limiting to 1000.`),i=1e3)):(i=this.computeTickLimit(),t=t||11),t&&(i=Math.min(t,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,t=e.ticks;let r=this.getTickLimit();r=Math.max(2,r);const i={maxTicks:r,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:t.includeBounds!==!1},o=this._range||this,s=zB(i,o);return e.bounds==="ticks"&&FC(s,this,"value"),e.reverse?(s.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),s}configure(){const e=this.ticks;let t=this.min,r=this.max;if(super.configure(),this.options.offset&&e.length){const i=(r-t)/Math.max(e.length-1,1)/2;t-=i,r+=i}this._startValue=t,this._endValue=r,this._valueRange=r-t}getLabelForValue(e){return od(e,this.chart.options.locale,this.options.ticks.format)}}class WB extends qf{static id="linear";static defaults={ticks:{callback:hp.formatters.numeric}};determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=zt(e)?e:0,this.max=zt(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),t=e?this.width:this.height,r=ci(this.options.ticks.minRotation),i=(e?Math.sin(r):Math.cos(r))||.001,o=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,o.lineHeight/i))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}const Bu=n=>Math.floor(ms(n)),la=(n,e)=>Math.pow(10,Bu(n)+e);function Yw(n){return n/Math.pow(10,Bu(n))===1}function Jw(n,e,t){const r=Math.pow(10,t),i=Math.floor(n/r);return Math.ceil(e/r)-i}function VB(n,e){const t=e-n;let r=Bu(t);for(;Jw(n,e,r)>10;)r++;for(;Jw(n,e,r)<10;)r--;return Math.min(r,Bu(n))}function UB(n,{min:e,max:t}){e=br(n.min,e);const r=[],i=Bu(e);let o=VB(e,t),s=o<0?Math.pow(10,Math.abs(o)):1;const a=Math.pow(10,o),l=i>o?Math.pow(10,i):0,u=Math.round((e-l)*s)/s,f=Math.floor((e-l)/a/10)*a*10;let p=Math.floor((u-f)/Math.pow(10,o)),m=br(n.min,Math.round((l+f+p*Math.pow(10,o))*s)/s);for(;m<t;)r.push({value:m,major:Yw(m),significand:p}),p>=10?p=p<15?15:20:p++,p>=20&&(o++,p=2,s=o>=0?1:s),m=Math.round((l+f+p*Math.pow(10,o))*s)/s;const v=br(n.max,m);return r.push({value:v,major:Yw(v),significand:p}),r}class HB extends Pa{static id="logarithmic";static defaults={ticks:{callback:hp.formatters.logarithmic,major:{enabled:!0}}};constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,t){const r=qf.prototype.parse.apply(this,[e,t]);if(r===0){this._zero=!0;return}return zt(r)&&r>0?r:null}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=zt(e)?Math.max(0,e):null,this.max=zt(t)?Math.max(0,t):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!zt(this._userMin)&&(this.min=e===la(this.min,0)?la(this.min,-1):la(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let r=this.min,i=this.max;const o=a=>r=e?r:a,s=a=>i=t?i:a;r===i&&(r<=0?(o(1),s(10)):(o(la(r,-1)),s(la(i,1)))),r<=0&&o(la(i,-1)),i<=0&&s(la(r,1)),this.min=r,this.max=i}buildTicks(){const e=this.options,t={min:this._userMin,max:this._userMax},r=UB(t,this);return e.bounds==="ticks"&&FC(r,this,"value"),e.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}getLabelForValue(e){return e===void 0?"0":od(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=ms(e),this._valueRange=ms(this.max)-ms(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(ms(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const t=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+t*this._valueRange)}}function Lg(n){const e=n.ticks;if(e.display&&n.display){const t=zn(e.backdropPadding);return qe(e.font&&e.font.size,Rt.font.size)+t.height}return 0}function GB(n,e,t){return t=At(t)?t:[t],{w:BF(n,e.string,t),h:t.length*e.lineHeight}}function Qw(n,e,t,r,i){return n===r||n===i?{start:e-t/2,end:e+t/2}:n<r||n>i?{start:e-t,end:e}:{start:e,end:e+t}}function $B(n){const e={l:n.left+n._padding.left,r:n.right-n._padding.right,t:n.top+n._padding.top,b:n.bottom-n._padding.bottom},t=Object.assign({},e),r=[],i=[],o=n._pointLabels.length,s=n.options.pointLabels,a=s.centerPointLabels?ct/o:0;for(let l=0;l<o;l++){const u=s.setContext(n.getPointLabelContext(l));i[l]=u.padding;const f=n.getPointPosition(l,n.drawingArea+i[l],a),p=en(u.font),m=GB(n.ctx,p,n._pointLabels[l]);r[l]=m;const v=Dn(n.getIndexAngle(l)+a),y=Math.round(ux(v)),w=Qw(y,f.x,m.w,0,180),_=Qw(y,f.y,m.h,90,270);qB(t,e,v,w,_)}n.setCenterPoint(e.l-t.l,t.r-e.r,e.t-t.t,t.b-e.b),n._pointLabelItems=YB(n,r,i)}function qB(n,e,t,r,i){const o=Math.abs(Math.sin(t)),s=Math.abs(Math.cos(t));let a=0,l=0;r.start<e.l?(a=(e.l-r.start)/o,n.l=Math.min(n.l,e.l-a)):r.end>e.r&&(a=(r.end-e.r)/o,n.r=Math.max(n.r,e.r+a)),i.start<e.t?(l=(e.t-i.start)/s,n.t=Math.min(n.t,e.t-l)):i.end>e.b&&(l=(i.end-e.b)/s,n.b=Math.max(n.b,e.b+l))}function KB(n,e,t){const r=n.drawingArea,{extra:i,additionalAngle:o,padding:s,size:a}=t,l=n.getPointPosition(e,r+i+s,o),u=Math.round(ux(Dn(l.angle+Ut))),f=ZB(l.y,a.h,u),p=JB(u),m=QB(l.x,a.w,p);return{visible:!0,x:l.x,y:f,textAlign:p,left:m,top:f,right:m+a.w,bottom:f+a.h}}function XB(n,e){if(!e)return!0;const{left:t,top:r,right:i,bottom:o}=n;return!(ko({x:t,y:r},e)||ko({x:t,y:o},e)||ko({x:i,y:r},e)||ko({x:i,y:o},e))}function YB(n,e,t){const r=[],i=n._pointLabels.length,o=n.options,{centerPointLabels:s,display:a}=o.pointLabels,l={extra:Lg(o)/2,additionalAngle:s?ct/i:0};let u;for(let f=0;f<i;f++){l.padding=t[f],l.size=e[f];const p=KB(n,f,l);r.push(p),a==="auto"&&(p.visible=XB(p,u),p.visible&&(u=p))}return r}function JB(n){return n===0||n===180?"center":n<180?"left":"right"}function QB(n,e,t){return t==="right"?n-=e:t==="center"&&(n-=e/2),n}function ZB(n,e,t){return t===90||t===270?n-=e/2:(t>270||t<90)&&(n-=e),n}function e7(n,e,t){const{left:r,top:i,right:o,bottom:s}=t,{backdropColor:a}=e;if(!Ze(a)){const l=xa(e.borderRadius),u=zn(e.backdropPadding);n.fillStyle=a;const f=r-u.left,p=i-u.top,m=o-r+u.width,v=s-i+u.height;Object.values(l).some(y=>y!==0)?(n.beginPath(),Fu(n,{x:f,y:p,w:m,h:v,radius:l}),n.fill()):n.fillRect(f,p,m,v)}}function t7(n,e){const{ctx:t,options:{pointLabels:r}}=n;for(let i=e-1;i>=0;i--){const o=n._pointLabelItems[i];if(!o.visible)continue;const s=r.setContext(n.getPointLabelContext(i));e7(t,s,o);const a=en(s.font),{x:l,y:u,textAlign:f}=o;Sa(t,n._pointLabels[i],l,u+a.lineHeight/2,a,{color:s.color,textAlign:f,textBaseline:"middle"})}}function A3(n,e,t,r){const{ctx:i}=n;if(t)i.arc(n.xCenter,n.yCenter,e,0,St);else{let o=n.getPointPosition(0,e);i.moveTo(o.x,o.y);for(let s=1;s<r;s++)o=n.getPointPosition(s,e),i.lineTo(o.x,o.y)}}function n7(n,e,t,r,i){const o=n.ctx,s=e.circular,{color:a,lineWidth:l}=e;!s&&!r||!a||!l||t<0||(o.save(),o.strokeStyle=a,o.lineWidth=l,o.setLineDash(i.dash||[]),o.lineDashOffset=i.dashOffset,o.beginPath(),A3(n,t,s,r),o.closePath(),o.stroke(),o.restore())}function r7(n,e,t){return Ds(n,{label:t,index:e,type:"pointLabel"})}class i7 extends qf{static id="radialLinear";static defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:hp.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}};static defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};static descriptors={angleLines:{_fallback:"grid"}};constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=zn(Lg(this.options)/2),t=this.width=this.maxWidth-e.width,r=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+t/2+e.left),this.yCenter=Math.floor(this.top+r/2+e.top),this.drawingArea=Math.floor(Math.min(t,r)/2)}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!1);this.min=zt(e)&&!isNaN(e)?e:0,this.max=zt(t)&&!isNaN(t)?t:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/Lg(this.options))}generateTickLabels(e){qf.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((t,r)=>{const i=_t(this.options.pointLabels.callback,[t,r],this);return i||i===0?i:""}).filter((t,r)=>this.chart.getDataVisibility(r))}fit(){const e=this.options;e.display&&e.pointLabels.display?$B(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,t,r,i){this.xCenter+=Math.floor((e-t)/2),this.yCenter+=Math.floor((r-i)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,t,r,i))}getIndexAngle(e){const t=St/(this._pointLabels.length||1),r=this.options.startAngle||0;return Dn(e*t+ci(r))}getDistanceFromCenterForValue(e){if(Ze(e))return NaN;const t=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*t:(e-this.min)*t}getValueForDistanceFromCenter(e){if(Ze(e))return NaN;const t=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-t:this.min+t}getPointLabelContext(e){const t=this._pointLabels||[];if(e>=0&&e<t.length){const r=t[e];return r7(this.getContext(),e,r)}}getPointPosition(e,t,r=0){const i=this.getIndexAngle(e)-Ut+r;return{x:Math.cos(i)*t+this.xCenter,y:Math.sin(i)*t+this.yCenter,angle:i}}getPointPositionForValue(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:t,top:r,right:i,bottom:o}=this._pointLabelItems[e];return{left:t,top:r,right:i,bottom:o}}drawBackground(){const{backgroundColor:e,grid:{circular:t}}=this.options;if(e){const r=this.ctx;r.save(),r.beginPath(),A3(this,this.getDistanceFromCenterForValue(this._endValue),t,this._pointLabels.length),r.closePath(),r.fillStyle=e,r.fill(),r.restore()}}drawGrid(){const e=this.ctx,t=this.options,{angleLines:r,grid:i,border:o}=t,s=this._pointLabels.length;let a,l,u;if(t.pointLabels.display&&t7(this,s),i.display&&this.ticks.forEach((f,p)=>{if(p!==0||p===0&&this.min<0){l=this.getDistanceFromCenterForValue(f.value);const m=this.getContext(p),v=i.setContext(m),y=o.setContext(m);n7(this,v,l,s,y)}}),r.display){for(e.save(),a=s-1;a>=0;a--){const f=r.setContext(this.getPointLabelContext(a)),{color:p,lineWidth:m}=f;!m||!p||(e.lineWidth=m,e.strokeStyle=p,e.setLineDash(f.borderDash),e.lineDashOffset=f.borderDashOffset,l=this.getDistanceFromCenterForValue(t.reverse?this.min:this.max),u=this.getPointPosition(a,l),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(u.x,u.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,t=this.options,r=t.ticks;if(!r.display)return;const i=this.getIndexAngle(0);let o,s;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(i),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((a,l)=>{if(l===0&&this.min>=0&&!t.reverse)return;const u=r.setContext(this.getContext(l)),f=en(u.font);if(o=this.getDistanceFromCenterForValue(this.ticks[l].value),u.showLabelBackdrop){e.font=f.string,s=e.measureText(a.label).width,e.fillStyle=u.backdropColor;const p=zn(u.backdropPadding);e.fillRect(-s/2-p.left,-o-f.size/2-p.top,s+p.width,f.size+p.height)}Sa(e,a.label,0,-o,f,{color:u.color,strokeColor:u.textStrokeColor,strokeWidth:u.textStrokeWidth})}),e.restore()}drawTitle(){}}const yp={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},cr=Object.keys(yp);function Zw(n,e){return n-e}function e_(n,e){if(Ze(e))return null;const t=n._adapter,{parser:r,round:i,isoWeekday:o}=n._parseOpts;let s=e;return typeof r=="function"&&(s=r(s)),zt(s)||(s=typeof r=="string"?t.parse(s,r):t.parse(s)),s===null?null:(i&&(s=i==="week"&&(Jl(o)||o===!0)?t.startOf(s,"isoWeek",o):t.startOf(s,i)),+s)}function t_(n,e,t,r){const i=cr.length;for(let o=cr.indexOf(n);o<i-1;++o){const s=yp[cr[o]],a=s.steps?s.steps:Number.MAX_SAFE_INTEGER;if(s.common&&Math.ceil((t-e)/(a*s.size))<=r)return cr[o]}return cr[i-1]}function o7(n,e,t,r,i){for(let o=cr.length-1;o>=cr.indexOf(t);o--){const s=cr[o];if(yp[s].common&&n._adapter.diff(i,r,s)>=e-1)return s}return cr[t?cr.indexOf(t):0]}function s7(n){for(let e=cr.indexOf(n)+1,t=cr.length;e<t;++e)if(yp[cr[e]].common)return cr[e]}function n_(n,e,t){if(!t)n[e]=!0;else if(t.length){const{lo:r,hi:i}=dx(t,e),o=t[r]>=e?t[r]:t[i];n[o]=!0}}function a7(n,e,t,r){const i=n._adapter,o=+i.startOf(e[0].value,r),s=e[e.length-1].value;let a,l;for(a=o;a<=s;a=+i.add(a,1,r))l=t[a],l>=0&&(e[l].major=!0);return e}function r_(n,e,t){const r=[],i={},o=e.length;let s,a;for(s=0;s<o;++s)a=e[s],i[a]=s,r.push({value:a,major:!1});return o===0||!t?r:a7(n,r,i,t)}class Bg extends Pa{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,t={}){const r=e.time||(e.time={}),i=this._adapter=new l8._date(e.adapters.date);i.init(t),yu(r.displayFormats,i.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return e===void 0?null:e_(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,t=this._adapter,r=e.time.unit||"day";let{min:i,max:o,minDefined:s,maxDefined:a}=this.getUserBounds();function l(u){!s&&!isNaN(u.min)&&(i=Math.min(i,u.min)),!a&&!isNaN(u.max)&&(o=Math.max(o,u.max))}(!s||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),i=zt(i)&&!isNaN(i)?i:+t.startOf(Date.now(),r),o=zt(o)&&!isNaN(o)?o:+t.endOf(Date.now(),r)+1,this.min=Math.min(i,o-1),this.max=Math.max(i+1,o)}_getLabelBounds(){const e=this.getLabelTimestamps();let t=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return e.length&&(t=e[0],r=e[e.length-1]),{min:t,max:r}}buildTicks(){const e=this.options,t=e.time,r=e.ticks,i=r.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const o=this.min,s=this.max,a=NF(i,o,s);return this._unit=t.unit||(r.autoSkip?t_(t.minUnit,this.min,this.max,this._getLabelCapacity(o)):o7(this,a.length,t.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:s7(this._unit),this.initOffsets(i),e.reverse&&a.reverse(),r_(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let t=0,r=0,i,o;this.options.offset&&e.length&&(i=this.getDecimalForValue(e[0]),e.length===1?t=1-i:t=(this.getDecimalForValue(e[1])-i)/2,o=this.getDecimalForValue(e[e.length-1]),e.length===1?r=o:r=(o-this.getDecimalForValue(e[e.length-2]))/2);const s=e.length<3?.5:.25;t=fn(t,0,s),r=fn(r,0,s),this._offsets={start:t,end:r,factor:1/(t+1+r)}}_generate(){const e=this._adapter,t=this.min,r=this.max,i=this.options,o=i.time,s=o.unit||t_(o.minUnit,t,r,this._getLabelCapacity(t)),a=qe(i.ticks.stepSize,1),l=s==="week"?o.isoWeekday:!1,u=Jl(l)||l===!0,f={};let p=t,m,v;if(u&&(p=+e.startOf(p,"isoWeek",l)),p=+e.startOf(p,u?"day":s),e.diff(r,t,s)>1e5*a)throw new Error(t+" and "+r+" are too far apart with stepSize of "+a+" "+s);const y=i.ticks.source==="data"&&this.getDataTimestamps();for(m=p,v=0;m<r;m=+e.add(m,a,s),v++)n_(f,m,y);return(m===r||i.bounds==="ticks"||v===1)&&n_(f,m,y),Object.keys(f).sort(Zw).map(w=>+w)}getLabelForValue(e){const t=this._adapter,r=this.options.time;return r.tooltipFormat?t.format(e,r.tooltipFormat):t.format(e,r.displayFormats.datetime)}format(e,t){const i=this.options.time.displayFormats,o=this._unit,s=t||i[o];return this._adapter.format(e,s)}_tickFormatFunction(e,t,r,i){const o=this.options,s=o.ticks.callback;if(s)return _t(s,[e,t,r],this);const a=o.time.displayFormats,l=this._unit,u=this._majorUnit,f=l&&a[l],p=u&&a[u],m=r[t],v=u&&p&&m&&m.major;return this._adapter.format(e,i||(v?p:f))}generateTickLabels(e){let t,r,i;for(t=0,r=e.length;t<r;++t)i=e[t],i.label=this._tickFormatFunction(i.value,t,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const t=this._offsets,r=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+r)*t.factor)}getValueForPixel(e){const t=this._offsets,r=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+r*(this.max-this.min)}_getLabelSize(e){const t=this.options.ticks,r=this.ctx.measureText(e).width,i=ci(this.isHorizontal()?t.maxRotation:t.minRotation),o=Math.cos(i),s=Math.sin(i),a=this._resolveTickFontOptions(0).size;return{w:r*o+a*s,h:r*s+a*o}}_getLabelCapacity(e){const t=this.options.time,r=t.displayFormats,i=r[t.unit]||r.millisecond,o=this._tickFormatFunction(e,0,r_(this,[e],this._majorUnit),i),s=this._getLabelSize(o),a=Math.floor(this.isHorizontal()?this.width/s.w:this.height/s.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],t,r;if(e.length)return e;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(t=0,r=i.length;t<r;++t)e=e.concat(i[t].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let t,r;if(e.length)return e;const i=this.getLabels();for(t=0,r=i.length;t<r;++t)e.push(e_(this,i[t]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return zC(e.sort(Zw))}}function Yh(n,e,t){let r=0,i=n.length-1,o,s,a,l;t?(e>=n[r].pos&&e<=n[i].pos&&({lo:r,hi:i}=_o(n,"pos",e)),{pos:o,time:a}=n[r],{pos:s,time:l}=n[i]):(e>=n[r].time&&e<=n[i].time&&({lo:r,hi:i}=_o(n,"time",e)),{time:o,pos:a}=n[r],{time:s,pos:l}=n[i]);const u=s-o;return u?a+(l-a)*(e-o)/u:a}class l7 extends Bg{static id="timeseries";static defaults=Bg.defaults;constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=Yh(t,this.min),this._tableRange=Yh(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:t,max:r}=this,i=[],o=[];let s,a,l,u,f;for(s=0,a=e.length;s<a;++s)u=e[s],u>=t&&u<=r&&i.push(u);if(i.length<2)return[{time:t,pos:0},{time:r,pos:1}];for(s=0,a=i.length;s<a;++s)f=i[s+1],l=i[s-1],u=i[s],Math.round((f+l)/2)!==u&&o.push({time:u,pos:s/(a-1)});return o}_generate(){const e=this.min,t=this.max;let r=super.getDataTimestamps();return(!r.includes(e)||!r.length)&&r.splice(0,0,e),(!r.includes(t)||r.length===1)&&r.push(t),r.sort((i,o)=>i-o)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const t=this.getDataTimestamps(),r=this.getLabelTimestamps();return t.length&&r.length?e=this.normalize(t.concat(r)):e=t.length?t:r,e=this._cache.all=e,e}getDecimalForValue(e){return(Yh(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const t=this._offsets,r=this.getDecimalForPixel(e)/t.factor-t.end;return Yh(this._table,r*this._tableRange+this._minPos,!0)}}var c7=Object.freeze({__proto__:null,CategoryScale:BB,LinearScale:WB,LogarithmicScale:HB,RadialLinearScale:i7,TimeScale:Bg,TimeSeriesScale:l7});const u7=[a8,z9,PB,c7];sd.register(...u7);const d7=()=>{localStorage.clear(),window.location.href="./components/homepage.jsx"},ic=({activeNavItem:n,handleNavItemClick:e})=>{const t=[{key:"voldashboard",icon:"",label:"Impact Dashboard"},{key:"avatar-badges",icon:"",label:"Avatar & Badges"},{key:"cleanup-events",icon:"",label:"Cleanup Events"},{key:"waste-classifier",icon:"",label:"Waste Classification"},{key:"eduhub",icon:"",label:"Education Hub"},{key:"impactcam",icon:"",label:"Impact Cam"},{key:"logout",icon:"",label:"Logout"}];return h.jsxs(h.Fragment,{children:[h.jsx("style",{children:`
         body {
                    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                    background: #0a0a0a;
                    background-image:
                        radial-gradient(circle at 20% 50%, rgba(34, 197, 94, 0.1) 0%, transparent 50%),
                        radial-gradient(circle at 80% 20%, rgba(59, 130, 246, 0.1) 0%, transparent 50%),
                        radial-gradient(circle at 40% 80%, rgba(168, 85, 247, 0.1) 0%, transparent 50%);
                    min-height: 100vh;
                    color: #ffffff;
                }

        .sidebar {
                    background: linear-gradient(180deg, #1a1a1a 0%, #0f1419 100%);
                    border-right: 2px solid #22c55e;
                    box-shadow: 0 0 30px rgba(34, 197, 94, 0.3);
                }
        
        .sidebar-header {
                    border-bottom: 2px solid #22c55e;
                }
        .logo-glow {
                    position: absolute;
                    top: -10px;
                    left: -10px;
                    right: -10px;
                    bottom: -10px;
                    background: conic-gradient(from 0deg, #22c55e, #3b82f6, #a855f7, #22c55e);
                    border-radius: 50%;
                    opacity: 0.3;
                    animation: rotate 4s linear infinite;
                }
        .sidebar-header h2 {
                    text-shadow: 0 0 20px rgba(34, 197, 94, 0.5);
                }

                .player-level {
                    background: linear-gradient(135deg, #1e293b, #334155);
                    border: 1px solid #22c55e;
                    box-shadow: 0 0 20px rgba(34, 197, 94, 0.2);
                }

                .level-badge {
                    background: linear-gradient(135deg, #22c55e, #16a34a);
                }

                .xp-bar {
                    background: #1e293b;
                    border: 1px solid #374151;
                }

                .xp-fill {
                    background: linear-gradient(90deg, #22c55e, #3b82f6);
                    animation: pulse-glow 2s ease-in-out infinite alternate;
                }

                .nav-item::before {
                    content: '';
                    position: absolute;
                    left: 0;
                    top: 0;
                    height: 100%;
                    width: 0;
                    background: linear-gradient(90deg, rgba(34, 197, 94, 0.2), rgba(59, 130, 246, 0.2));
                    transition: width 0.3s ease;
                }

                .nav-item:hover::before {
                    width: 100%;
                }

                .nav-item.active {
                    background: linear-gradient(90deg, rgba(34, 197, 94, 0.3), rgba(59, 130, 246, 0.1));
                    border-left-color: #22c55e;
                    box-shadow: inset 0 0 20px rgba(34, 197, 94, 0.2);
                }
        @keyframes rotate {
                    from { transform: rotate(0deg); }
                    to { transform: rotate(360deg); }
                }

                @keyframes pulse-glow {
                    0% { box-shadow: 0 0 5px rgba(34, 197, 94, 0.5); }
                    100% { box-shadow: 0 0 20px rgba(34, 197, 94, 0.8); }
                }

                @keyframes bounce {
                    0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
                    40% { transform: translateY(-10px); }
                    60% { transform: translateY(-5px); }
                }

                @keyframes shine {
                    0% { left: -100%; }
                    100% { left: 100%; }
                }

                @keyframes text-glow {
                    0% { filter: brightness(1); }
                    100% { filter: brightness(1.2); }
                }

                @keyframes float {
                    0%, 100% { transform: translateY(0px); }
                    50% { transform: translateY(-5px); }
                }

                @media (max-width: 768px) {
                    .sidebar {
                        width: 80px;
                    }

                    .sidebar-header h2,
                    .sidebar-header p,
                    .nav-text,
                    .player-level {
                        display: none;
                    }

        `}),h.jsxs("div",{className:"sidebar fixed left-0 top-0 w-[280px] h-screen py-5 z-[1000] flex flex-col bg-white border-r border-gray-200",children:[h.jsxs("div",{className:"sidebar-header px-5 pb-[30px] text-center border-b-2",children:[h.jsxs("div",{className:"logo-container relative inline-block",children:[h.jsx("div",{className:"logo-glow absolute top-[-10px] left-[-10px] right-[-10px] bottom-[-10px] rounded-full opacity-30"}),h.jsx("h2",{className:"text-[1.8rem] mb-1.5 text-[#22c55e] font-extrabold relative z-20",children:" Beach Warriors"})]}),h.jsx("p",{className:"text-sm text-[#64748b] font-semibold uppercase tracking-wide",children:"Command Center"})]}),h.jsxs("div",{className:"player-level mx-5 mt-5 p-4 rounded-xl bg-gray-100",children:[h.jsxs("div",{className:"level-info flex justify-between items-center mb-2.5",children:[h.jsx("div",{className:"level-badge text-white px-3 py-1.5 rounded-full text-xs font-bold uppercase bg-green-500",children:"Level 12"}),h.jsx("div",{className:"xp-text text-sm text-[#94a3b8]",children:"1,850 / 2,500 XP"})]}),h.jsx("div",{className:"xp-bar h-2 bg-[#1e293b] rounded-md overflow-hidden border border-[#374151]",children:h.jsx("div",{className:"xp-fill h-full w-[75%] bg-green-400"})})]}),h.jsx("nav",{className:"nav-menu py-5 flex-1",children:t.slice(0,-1).map(r=>h.jsxs("div",{className:`nav-item flex items-center px-5 py-4 cursor-pointer transition-all duration-300 ease-in-out border-l-4 relative overflow-hidden ${n===r.key?"border-l-green-500 bg-green-50 font-semibold text-green-700":"border-l-transparent"}`,onClick:()=>e(r.key),children:[h.jsx("div",{className:"nav-icon w-6 h-6 mr-4 text-lg",children:r.icon}),h.jsx("span",{className:"nav-text text-base relative z-20",children:r.label})]},r.key))}),h.jsx("div",{className:"logout-item px-5 py-4 cursor-pointer",onClick:()=>{window.confirm("Are you sure you want to log out?")&&d7()},children:h.jsxs("div",{className:`flex items-center border-l-4 ${n==="logout"?"border-l-green-500 bg-red-100 text-red-600":"border-l-transparent"}`,children:[h.jsx("div",{className:"nav-icon w-6 h-6 mr-4 text-lg",children:""}),h.jsx("span",{className:"nav-text text-base",children:"Logout"})]})})]})]})},h7=({navigateTo:n})=>{const e=re.useRef(null),t=re.useRef(null),[r,i]=re.useState(!0),[o,s]=re.useState(!1),[a,l]=re.useState("voldashboard"),u=()=>{i(!1)},f=p=>{l(p),n(p)};return re.useEffect(()=>{if(e.current){t.current&&t.current.destroy();const p=e.current.getContext("2d");t.current=new sd(p,{type:"line",data:{labels:["Mission 1","Mission 2","Mission 3","Mission 4","Mission 5","Mission 6"],datasets:[{label:"Combat Score",data:[120,180,150,280,220,350],borderColor:"#22c55e",backgroundColor:"rgba(34, 197, 94, 0.2)",borderWidth:4,fill:!0,tension:.4,pointBackgroundColor:"#22c55e",pointBorderColor:"#ffffff",pointBorderWidth:3,pointRadius:8,pointHoverRadius:12,pointStyle:"circle"}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!0,labels:{color:"#ffffff",font:{size:14,weight:"bold"}}}},scales:{y:{beginAtZero:!0,max:400,grid:{color:"rgba(34, 197, 94, 0.2)",lineWidth:2},ticks:{color:"#94a3b8",font:{weight:"bold"}}},x:{grid:{color:"rgba(59, 130, 246, 0.2)",lineWidth:1},ticks:{color:"#94a3b8",font:{weight:"bold"}}}},elements:{point:{backgroundColor:"#22c55e",borderColor:"#ffffff",borderWidth:3,hoverBackgroundColor:"#16a34a",hoverBorderColor:"#22c55e",hoverBorderWidth:4}}}})}return()=>{t.current&&t.current.destroy()}},[]),re.useEffect(()=>{const p=setTimeout(()=>{s(!0);const m=setTimeout(()=>{s(!1)},4e3);return()=>clearTimeout(m)},2e3);return()=>clearTimeout(p)},[]),re.useEffect(()=>{const m=setTimeout(()=>{document.querySelectorAll(".progress-fill").forEach(v=>{v.style.transition="width 2s ease"})},1e3);return()=>clearTimeout(m)},[]),h.jsxs(h.Fragment,{children:[h.jsx("style",{children:`
                * {
                    margin: 0;
                    padding: 0;
                    box-sizing: border-box;
                }

                body {
                    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                    background: #0a0a0a;
                    background-image:
                        radial-gradient(circle at 20% 50%, rgba(34, 197, 94, 0.1) 0%, transparent 50%),
                        radial-gradient(circle at 80% 20%, rgba(59, 130, 246, 0.1) 0%, transparent 50%),
                        radial-gradient(circle at 40% 80%, rgba(168, 85, 247, 0.1) 0%, transparent 50%);
                    min-height: 100vh;
                    color: #ffffff;
                }


                

                
                .notification-banner {
                    background: linear-gradient(135deg, #22c55e, #16a34a);
                    box-shadow: 0 8px 32px rgba(34, 197, 94, 0.4);
                    border: 1px solid #34d399;
                }

                .notification-banner::before {
                    content: '';
                    position: absolute;
                    top: 0;
                    left: -100%;
                    width: 100%;
                    height: 100%;
                    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
                    animation: shine 3s infinite;
                }

                .dashboard-title {
                    background: linear-gradient(45deg, #22c55e, #3b82f6, #a855f7);
                    -webkit-background-clip: text;
                    -webkit-text-fill-color: transparent;
                    background-clip: text;
                    text-shadow: 0 0 30px rgba(34, 197, 94, 0.3);
                    animation: text-glow 3s ease-in-out infinite alternate;
                }

                .stat-card {
                    background: linear-gradient(135deg, #1e293b, #334155);
                    border: 2px solid transparent;
                    background-clip: padding-box;
                }

                .stat-card::before {
                    content: '';
                    position: absolute;
                    top: 0;
                    left: 0;
                    right: 0;
                    bottom: 0;
                    background: linear-gradient(135deg, var(--glow-color), transparent, var(--glow-color));
                    opacity: 0;
                    transition: opacity 0.4s;
                    z-index: -1;
                }

                .stat-card:hover::before {
                    opacity: 0.3;
                }

                .stat-card.events {
                    --glow-color: #3b82f6;
                }

                .stat-card.waste {
                    --glow-color: #22c55e;
                }

                .stat-card.badges {
                    --glow-color: #f59e0b;
                }

                .stat-card.points {
                    --glow-color: #a855f7;
                }

                .stat-card:hover {
                    transform: translateY(-8px) scale(1.02);
                    box-shadow: 0 20px 50px rgba(0,0,0,0.5);
                    border-color: var(--glow-color);
                }

                .stat-icon {
                    animation: float 3s ease-in-out infinite;
                }

                .events .stat-icon {
                    background: linear-gradient(135deg, #3b82f6, #1d4ed8);
                    box-shadow: 0 0 20px rgba(59, 130, 246, 0.4);
                }

                .waste .stat-icon {
                    background: linear-gradient(135deg, #22c55e, #059669);
                    box-shadow: 0 0 20px rgba(34, 197, 94, 0.4);
                }

                .badges .stat-icon {
                    background: linear-gradient(135deg, #f59e0b, #d97706);
                    box-shadow: 0 0 20px rgba(245, 158, 11, 0.4);
                }

                .points .stat-icon {
                    background: linear-gradient(135deg, #a855f7, #7c3aed);
                    box-shadow: 0 0 20px rgba(168, 85, 247, 0.4);
                }

                .level-indicator {
                    background: rgba(255,255,255,0.1);
                    border: 1px solid var(--glow-color);
                    color: var(--glow-color);
                }

                .stat-value {
                    color: var(--glow-color);
                    text-shadow: 0 0 20px currentColor;
                }

                .progress-bar {
                    background: rgba(255,255,255,0.1);
                }

                .progress-fill {
                    transition: width 2s ease;
                }

                .events .progress-fill {
                    background: linear-gradient(90deg, #3b82f6, #60a5fa);
                    width: 80%;
                }

                .waste .progress-fill {
                    background: linear-gradient(90deg, #22c55e, #34d399);
                    width: 92%;
                }

                .badges .progress-fill {
                    background: linear-gradient(90deg, #f59e0b, #fbbf24);
                    width: 67%;
                }

                .points .progress-fill {
                    background: linear-gradient(90deg, #a855f7, #c084fc);
                    width: 75%;
                }

                .chart-section {
                    background: linear-gradient(135deg, #1e293b, #334155);
                    border: 2px solid #374151;
                    box-shadow: 0 10px 40px rgba(0,0,0,0.3);
                }

                .chart-section::before {
                    content: '';
                    position: absolute;
                    top: 0;
                    left: 0;
                    right: 0;
                    height: 4px;
                    background: linear-gradient(90deg, #22c55e, #3b82f6, #a855f7);
                }

                .milestone-section {
                    background: linear-gradient(135deg, #22c55e, #16a34a);
                    box-shadow: 0 20px 60px rgba(34, 197, 94, 0.4);
                    border: 2px solid #34d399;
                }

                .milestone-section::before {
                    content: '';
                    position: absolute;
                    top: -50%;
                    left: -50%;
                    width: 200%;
                    height: 200%;
                    background: conic-gradient(from 0deg, transparent, rgba(255,255,255,0.1), transparent);
                    animation: rotate 6s linear infinite;
                    pointer-events: none;
                }

                .milestone-text {
                    text-shadow: 0 2px 10px rgba(0,0,0,0.3);
                }

                @keyframes rotate {
                    from { transform: rotate(0deg); }
                    to { transform: rotate(360deg); }
                }

                @keyframes pulse-glow {
                    0% { box-shadow: 0 0 5px rgba(34, 197, 94, 0.5); }
                    100% { box-shadow: 0 0 20px rgba(34, 197, 94, 0.8); }
                }

                @keyframes bounce {
                    0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
                    40% { transform: translateY(-10px); }
                    60% { transform: translateY(-5px); }
                }

                @keyframes shine {
                    0% { left: -100%; }
                    100% { left: 100%; }
                }

                @keyframes text-glow {
                    0% { filter: brightness(1); }
                    100% { filter: brightness(1.2); }
                }

                @keyframes float {
                    0%, 100% { transform: translateY(0px); }
                    50% { transform: translateY(-5px); }
                }

                @media (max-width: 768px) {
                    .sidebar {
                        width: 80px;
                    }

                    .sidebar-header h2,
                    .sidebar-header p,
                    .nav-text,
                    .player-level {
                        display: none;
                    }

                    .main-content {
                        margin-left: 80px;
                    }

                    .dashboard-title {
                        font-size: 2.2rem;
                    }

                    .stats-grid {
                        grid-template-columns: repeat(2, 1fr);
                    }
                }

                @media (max-width: 640px) {
                    .stats-grid {
                        grid-template-columns: 1fr;
                    }
                    
                    .main-content {
                        padding: 15px;
                    }
                }

                .hidden {
                    display: none;
                }

                .achievement-popup {
                    background: linear-gradient(135deg, #f59e0b, #d97706);
                    box-shadow: 0 10px 30px rgba(245, 158, 11, 0.4);
                    border: 2px solid #fbbf24;
                }
                .achievement-popup.show {
                    transform: translateX(0);
                }
                `}),h.jsxs("div",{id:"achievementPopup",className:`achievement-popup fixed top-5 right-5 p-5 rounded-2xl transition-transform duration-500 z-[1001] ${o?"translate-x-0":"translate-x-[400px]"}`,children:[h.jsx("div",{className:"achievement-title text-white font-extrabold mb-1.5 text-lg",children:" Achievement Unlocked!"}),h.jsx("div",{className:"achievement-desc text-white text-sm opacity-90",children:"Eco Guardian Level Reached"})]}),h.jsx(ic,{activeNavItem:a,handleNavItemClick:f}),h.jsxs("div",{className:"main-content ml-[280px] p-5 min-h-screen",children:[r&&h.jsxs("div",{id:"notificationBanner",className:"notification-banner bg-gradient-to-br from-[#22c55e] to-[#16a34a] text-white p-4 md:px-6 md:py-4 rounded-2xl mb-6 flex items-center justify-between shadow-lg relative overflow-hidden",children:[h.jsxs("div",{className:"notification-text flex items-center font-semibold z-10",children:[h.jsx("span",{className:"notification-icon mr-3 text-2xl animate-bounce",children:""}),"MISSION ALERT: New community cleanup event this weekend! +500 XP bonus available!"]}),h.jsx("button",{className:"close-btn bg-white bg-opacity-20 border-none text-white text-3xl cursor-pointer rounded-full w-8 h-8 flex items-center justify-center transition-all duration-300 z-10 hover:bg-opacity-30 hover:scale-110",onClick:u,children:""})]}),h.jsxs("div",{className:"dashboard-header mb-8",children:[h.jsx("h1",{className:"dashboard-title text-[3rem] font-extrabold mb-2.5",children:"Your Environmental Impact Dashboard"}),h.jsx("p",{className:"dashboard-subtitle text-lg text-[#94a3b8] font-medium",children:"Every cleanup makes a difference. Track your journey as an environmental warrior!"})]}),h.jsxs("div",{className:"stats-grid grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-9",children:[h.jsxs("div",{className:"stat-card events rounded-[20px] p-[30px] relative transition-all duration-400 ease-in-out overflow-hidden",children:[h.jsxs("div",{className:"stat-header flex items-center justify-between mb-5",children:[h.jsxs("div",{className:"stat-icon-container flex items-center",children:[h.jsx("div",{className:"stat-icon w-[50px] h-[50px] rounded-xl flex items-center justify-center mr-[15px] text-[1.8rem] text-white",children:""}),h.jsx("div",{className:"stat-title text-sm font-bold text-[#64748b] uppercase tracking-wider",children:"Missions Completed"})]}),h.jsx("div",{className:"level-indicator text-xs font-bold px-2 py-1 rounded-xl",children:"Rank: Hero"})]}),h.jsx("div",{className:"stat-value text-5xl font-extrabold mb-2 text-[#3b82f6]",children:"12"}),h.jsx("div",{className:"stat-label text-base text-[#94a3b8] font-semibold mb-[15px]",children:"Community Cleanups"}),h.jsx("div",{className:"progress-bar h-1.5 rounded-sm overflow-hidden mb-2",children:h.jsx("div",{className:"progress-fill h-full"})}),h.jsx("div",{className:"progress-text text-sm text-[#64748b] text-right",children:"Next milestone: 15 events"})]}),h.jsxs("div",{className:"stat-card waste rounded-[20px] p-[30px] relative transition-all duration-400 ease-in-out overflow-hidden",children:[h.jsxs("div",{className:"stat-header flex items-center justify-between mb-5",children:[h.jsxs("div",{className:"stat-icon-container flex items-center",children:[h.jsx("div",{className:"stat-icon w-[50px] h-[50px] rounded-xl flex items-center justify-center mr-[15px] text-[1.8rem] text-white",children:""}),h.jsx("div",{className:"stat-title text-sm font-bold text-[#64748b] uppercase tracking-wider",children:"Power Level"})]}),h.jsx("div",{className:"level-indicator text-xs font-bold px-2 py-1 rounded-xl",children:"Boss Tier"})]}),h.jsx("div",{className:"stat-value text-5xl font-extrabold mb-2 text-[#22c55e]",children:"150"}),h.jsx("div",{className:"stat-label text-base text-[#94a3b8] font-semibold mb-[15px]",children:"Kilograms Collected"}),h.jsx("div",{className:"progress-bar h-1.5 rounded-sm overflow-hidden mb-2",children:h.jsx("div",{className:"progress-fill h-full"})}),h.jsx("div",{className:"progress-text text-sm text-[#64748b] text-right",children:"Achievement: 200kg target"})]}),h.jsxs("div",{className:"stat-card badges rounded-[20px] p-[30px] relative transition-all duration-400 ease-in-out overflow-hidden",children:[h.jsxs("div",{className:"stat-header flex items-center justify-between mb-5",children:[h.jsxs("div",{className:"stat-icon-container flex items-center",children:[h.jsx("div",{className:"stat-icon w-[50px] h-[50px] rounded-xl flex items-center justify-center mr-[15px] text-[1.8rem] text-white",children:""}),h.jsx("div",{className:"stat-title text-sm font-bold text-[#64748b] uppercase tracking-wider",children:"Trophies Earned"})]}),h.jsx("div",{className:"level-indicator text-xs font-bold px-2 py-1 rounded-xl",children:"Epic"})]}),h.jsx("div",{className:"stat-value text-5xl font-extrabold mb-2 text-[#f59e0b]",children:"8"}),h.jsx("div",{className:"stat-label text-base text-[#94a3b8] font-semibold mb-[15px]",children:"Achievements Unlocked"}),h.jsx("div",{className:"progress-bar h-1.5 rounded-sm overflow-hidden mb-2",children:h.jsx("div",{className:"progress-fill h-full"})}),h.jsx("div",{className:"progress-text text-sm text-[#64748b] text-right",children:"Legendary at 12 badges"})]}),h.jsxs("div",{className:"stat-card points rounded-[20px] p-[30px] relative transition-all duration-400 ease-in-out overflow-hidden",children:[h.jsxs("div",{className:"stat-header flex items-center justify-between mb-5",children:[h.jsxs("div",{className:"stat-icon-container flex items-center",children:[h.jsx("div",{className:"stat-icon w-[50px] h-[50px] rounded-xl flex items-center justify-center mr-[15px] text-[1.8rem] text-white",children:""}),h.jsx("div",{className:"stat-title text-sm font-bold text-[#64748b] uppercase tracking-wider",children:"Combat Points"})]}),h.jsx("div",{className:"level-indicator text-xs font-bold px-2 py-1 rounded-xl",children:"Master"})]}),h.jsx("div",{className:"stat-value text-5xl font-extrabold mb-2 text-[#a855f7]",children:"750"}),h.jsx("div",{className:"stat-label text-base text-[#94a3b8] font-semibold mb-[15px]",children:"Total Score"}),h.jsx("div",{className:"progress-bar h-1.5 rounded-sm overflow-hidden mb-2",children:h.jsx("div",{className:"progress-fill h-full"})}),h.jsx("div",{className:"progress-text text-sm text-[#64748b] text-right",children:"Grandmaster: 1000pts"})]})]}),h.jsxs("div",{className:"chart-section rounded-3xl p-9 mb-9 relative overflow-hidden",children:[h.jsx("h2",{className:"chart-title text-2xl font-extrabold text-white mb-6 flex items-center",children:" Battle Performance Analytics"}),h.jsx("div",{className:"chart-container relative h-[350px]",children:h.jsx("canvas",{ref:e,id:"weeklyChart"})})]}),h.jsx("div",{className:"milestone-section bg-gradient-to-br from-[#22c55e] to-[#16a34a] rounded-3xl p-9 text-center shadow-lg relative overflow-hidden",children:h.jsxs("div",{className:"milestone-content relative z-10",children:[h.jsxs("div",{className:"milestone-text text-2xl font-extrabold mb-3 text-white text-shadow-lg",children:[" LEGENDARY ACHIEVEMENT UNLOCKED! ",h.jsx("span",{className:"milestone-emoji text-5xl mx-2 animate-bounce",children:""})]}),h.jsx("div",{className:"milestone-subtitle text-lg opacity-90 text-white font-semibold",children:"You've conquered 150kg of waste this month! Your planet-saving powers are growing stronger!"})]})})]})]})},f7=({navigateTo:n})=>{const[e,t]=re.useState("avatar-badges"),[r,i]=re.useState(""),[o,s]=re.useState({}),a=m=>{t(m),n(m)},l=["","","","",""],u=[{icon:"",bg:"from-yellow-400 to-orange-400",name:"Waste Warrior Title",desc:"For collecting 150kg of waste",status:"earned"},{icon:"",bg:"from-teal-400 to-cyan-500",name:"Power Boost",desc:"+50 Combat Points bonus",status:"earned"},{icon:"",bg:"from-green-400 to-emerald-500",name:"Epic Avatar Frame",desc:"Golden eco-warrior border",status:"locked"},{icon:"",bg:"from-indigo-600 to-purple-400",name:"Premium Themes",desc:"Unlock exclusive color schemes",status:"locked",requirement:"200kg needed"}],f=[{icon:"",bg:"from-yellow-400 to-orange-400",name:"First Cleanup",desc:"Completed your first community cleanup event"},{icon:"",bg:"from-green-400 to-emerald-500",name:"Green Thumb",desc:"Planted 10 trees during restoration events"},{icon:"",bg:"from-teal-400 to-cyan-500",name:"Recycle Master",desc:"Correctly sorted 100kg of recyclable materials"},{icon:"",bg:"from-red-400 to-orange-500",name:"Streak Champion",desc:"Maintained 30-day activity streak"},{icon:"",bg:"from-indigo-600 to-purple-400",name:"Team Leader",desc:"Led 5 community cleanup missions"},{icon:"",bg:"from-pink-300 to-pink-500",name:"Wildlife Protector",desc:"Cleaned habitats saving 50+ animals"},{icon:"",bg:"",name:"Ocean Guardian",desc:"Clean 25 beaches to unlock this badge"},{icon:"",bg:"",name:"Legendary Warrior",desc:"Reach 1000 combat points to unlock"}],p=m=>{s(v=>({...v,[m]:!v[m]}))};return h.jsxs(h.Fragment,{children:[h.jsx("style",{children:`/* Avatar & Rewards Dark Theme Styles */

body {
  background: linear-gradient(135deg, #0a0f1c 0%, #1a2332 50%, #0f1419 100%);
  color: #ffffff;
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

.main-content {
  padding: 30px;
}

.page-title {
  font-size: 48px;
  font-weight: 700;
  background: linear-gradient(135deg, #00ff88, #40e0d0, #6a5acd);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  margin-bottom: 10px;
}

.mission-alert {
  background: linear-gradient(135deg, #00ff88, #00cc6a);
  color: #0a0f1c;
  padding: 15px 20px;
  border-radius: 12px;
  margin-bottom: 30px;
  font-weight: 500;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.avatar-section,
.rewards-section,
.badges-showcase {
  background: rgba(30, 41, 59, 0.6);
  border: 1px solid rgba(64, 224, 208, 0.2);
  border-radius: 16px;
  padding: 25px;
  backdrop-filter: blur(10px);
  margin-bottom: 30px;
}

.avatar-frame {
  width: 120px;
  height: 120px;
  border-radius: 50%;
  background: linear-gradient(135deg, #40e0d0, #00ced1);
  padding: 4px;
  position: relative;
}

.avatar-image {
  width: 100%;
  height: 100%;
  border-radius: 50%;
  background: linear-gradient(135deg, #1a2332, #0a0f1c);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 48px;
  color: white;
}

.avatar-rank {
  position: absolute;
  bottom: -5px;
  right: -5px;
  background: linear-gradient(135deg, #ffd700, #ffb347);
  color: #0a0f1c;
  padding: 4px 8px;
  border-radius: 12px;
  font-size: 10px;
  font-weight: bold;
  border: 2px solid #1a2332;
}

.reward-item {
  background: rgba(64, 224, 208, 0.1);
  border: 1px solid rgba(64, 224, 208, 0.2);
  border-radius: 12px;
  padding: 15px;
  display: flex;
  align-items: center;
  gap: 15px;
}

.reward-item:hover {
  background: rgba(64, 224, 208, 0.15);
  border-color: #40e0d0;
}

.reward-status.status-earned {
  background: rgba(0, 255, 136, 0.2);
  color: #00ff88;
  border: 1px solid rgba(0, 255, 136, 0.3);
  padding: 6px 12px;
  border-radius: 20px;
  font-size: 11px;
  font-weight: 500;
  text-transform: uppercase;
}

.reward-status.status-locked {
  background: rgba(255, 255, 255, 0.1);
  color: #8892b0;
  border: 1px solid rgba(255, 255, 255, 0.2);
  padding: 6px 12px;
  border-radius: 20px;
  font-size: 11px;
  font-weight: 500;
  text-transform: uppercase;
}

.badge-card {
  background: rgba(64, 224, 208, 0.1);
  border: 1px solid rgba(64, 224, 208, 0.2);
  border-radius: 12px;
  padding: 20px;
  text-align: center;
  transition: all 0.3s ease;
}

.badge-card:hover {
  background: rgba(64, 224, 208, 0.15);
  border-color: #40e0d0;
  transform: translateY(-3px);
}

.achievement-notification {
  background: linear-gradient(135deg, #ffd700, #ffb347);
  color: #0a0f1c;
  padding: 20px;
  border-radius: 12px;
  margin-bottom: 30px;
  display: flex;
  align-items: center;
  gap: 15px;
  animation: pulse 2s infinite;
}

@keyframes pulse {
  0%, 100% { transform: scale(1); }
  50% { transform: scale(1.02); }
}

        `}),h.jsxs("div",{className:"flex min-h-screen bg-[#0f1419] text-white",children:[h.jsx(ic,{activeNavItem:e,handleNavItemClick:a}),h.jsxs("main",{className:"ml-[280px] w-full p-8 space-y-10",children:[h.jsxs("div",{className:"text-center",children:[h.jsxs("div",{className:"w-32 h-32 mx-auto rounded-full bg-green-700 text-6xl flex items-center justify-center shadow-2xl relative animate-pulse",children:[r,h.jsx("div",{className:"absolute bottom-0 right-0 text-xs bg-black px-2 py-0.5 rounded-full",children:"LV 12"})]}),h.jsx("p",{className:"mt-4 text-xl font-bold text-green-300",children:"Customize Your Avatar"})]}),h.jsx("div",{className:"flex justify-center gap-6 flex-wrap",children:l.map((m,v)=>h.jsxs("div",{onClick:()=>i(m),className:`cursor-pointer flex flex-col items-center border-2 p-4 rounded-xl w-24 transition-all duration-300 ${r===m?"border-green-500 bg-green-900 text-green-200":"border-gray-600 bg-gray-800"}`,children:[h.jsx("div",{className:"text-3xl",children:m}),h.jsx("div",{className:"text-sm mt-1 text-white",children:m===""?"Earth":m===""?"Recycle":m===""?"Leaf":m===""?"Nature":"Ocean"})]},v))}),h.jsxs("section",{children:[h.jsx("h2",{className:"text-xl font-bold text-green-400 mb-4 flex items-center gap-2",children:" Recent Rewards"}),h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5",children:u.map((m,v)=>h.jsxs("div",{className:"flex items-center justify-between p-4 rounded-xl bg-gray-800 hover:bg-gray-700 transition cursor-pointer",onClick:()=>m.status==="earned"&&p(v),children:[h.jsx("div",{className:`w-14 h-14 flex items-center justify-center rounded-full text-2xl text-white bg-gradient-to-br ${m.bg}`,children:m.icon}),h.jsxs("div",{className:"flex-1 ml-4",children:[h.jsx("div",{className:"font-semibold",children:m.name}),h.jsx("div",{className:"text-sm text-gray-300",children:m.desc})]}),h.jsx("div",{className:`text-sm font-semibold px-3 py-1 rounded-full ${m.status==="earned"?o[v]?"bg-green-300 text-green-900":"bg-green-100 text-green-800":"bg-gray-600 text-gray-300"}`,children:m.status==="earned"?o[v]?"Equipped":"Earned":m.requirement||"Locked"})]},v))})]}),h.jsxs("section",{children:[h.jsx("h2",{className:"text-xl font-bold text-pink-400 mb-4 flex items-center gap-2",children:" Badge Collection"}),h.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-6",children:f.map((m,v)=>h.jsxs("div",{className:"p-5 rounded-xl text-center bg-gray-800 hover:bg-gray-700 transition shadow-md",children:[h.jsx("div",{className:`w-14 h-14 mx-auto rounded-full text-2xl flex items-center justify-center mb-3 ${m.bg?`bg-gradient-to-br ${m.bg} text-white`:"border-2 border-dashed border-gray-500 text-gray-400"}`,children:m.icon}),h.jsx("div",{className:"font-bold text-white",children:m.name}),h.jsx("div",{className:"text-sm text-gray-300 mt-1",children:m.desc})]},v))})]})]})]})]})},p7=({navigateTo:n})=>{const[e,t]=re.useState("eduhub"),r=u=>{t(u),n(u)},i=(u,f)=>{window.open(f,"_blank")},o=(u,f)=>{window.open(f,"_blank")},l=[{title:"Video Lectures",icon:"",bg:"bg-gradient-to-tr from-red-500 to-red-700",content:[{title:"Ocean Pollution: Causes & Solutions",meta:[" 45 min"," 12.5K views"," 4.8/5"],link:"https://www.youtube.com/watch?v=1JvTP0z1kCY"},{title:"Microplastics: The Hidden Threat",meta:[" 32 min"," 8.3K views"," 4.9/5"],link:"https://www.youtube.com/watch?v=YJzEJp-T3r4"},{title:"Coastal Ecosystem Protection",meta:[" 38 min"," 9.7K views"," 4.7/5"],link:"https://www.youtube.com/watch?v=FK3dav4bA4s"},{title:"Wildlife Rescue Techniques",meta:[" 52 min"," 15.2K views"," 4.9/5"],link:"https://www.youtube.com/watch?v=F1Wi_GJ5g1g"}],handler:(u,f)=>i(u,f)},{title:"Research Articles",icon:"",bg:"bg-gradient-to-tr from-blue-500 to-blue-700",content:[{title:"Impact of Beach Cleanups on Marine Life",meta:[" 12 min read"," Peer-reviewed"," 2024"],link:"https://www.ncbi.nlm.nih.gov/pmc/articles/PMC6345840/"},{title:"Sustainable Waste Management Strategies",meta:[" 18 min read"," Peer-reviewed"," 2024"],link:"https://www.sciencedirect.com/science/article/abs/pii/S0959652620356169"},{title:"Community Engagement in Environmental Conservation",meta:[" 15 min read"," Peer-reviewed"," 2023"],link:"https://www.mdpi.com/2071-1050/12/14/5763"},{title:"Climate Change and Coastal Erosion",meta:[" 22 min read"," Peer-reviewed"," 2024"],link:"https://www.nature.com/articles/s41467-019-12808-z"}],handler:(u,f)=>o(u,f)},{title:"Certification Courses",icon:"",bg:"bg-gradient-to-tr from-yellow-500 to-yellow-700",content:[{title:"Certified Beach Cleanup Leader",meta:[" Certificate"," 8 hours"," 2.1K enrolled"]},{title:"Marine Conservation Specialist",meta:[" Certificate"," 12 hours"," 1.8K enrolled"]},{title:"Environmental Safety Coordinator",meta:[" Certificate"," 6 hours"," 3.2K enrolled"]},{title:"Waste Reduction Advocate",meta:[" Certificate"," 10 hours"," 2.7K enrolled"]}],handler:u=>{alert(`Enrolling in: ${u}`)}},{title:"Live Seminars",icon:"",bg:"bg-gradient-to-tr from-violet-500 to-violet-700",content:[{title:"Advanced Debris Sorting Techniques",meta:[" July 5, 2025"," 2:00 PM IST"," Dr. Sarah Chen"]},{title:"Community Mobilization Strategies",meta:[" July 8, 2025"," 4:00 PM IST"," Prof. Michael Rodriguez"]},{title:"Technology in Environmental Monitoring",meta:[" July 12, 2025"," 11:00 AM IST"," Dr. Priya Sharma"]},{title:"Policy and Legislation Update",meta:[" July 15, 2025"," 3:30 PM IST"," Adv. Rakesh Patel"]}],handler:u=>{alert(`Joining seminar: ${u}`)}}];return h.jsxs("div",{className:"flex min-h-screen text-slate-100 font-sans bg-gradient-to-br from-[#0f172a] to-[#1e293b]",children:[h.jsx(ic,{activeNavItem:e,handleNavItemClick:r}),h.jsx("div",{className:"pl-[280px] p-8",children:h.jsxs("div",{className:"flex-1 p-8 overflow-y-auto",children:[h.jsxs("div",{className:"mb-6",children:[h.jsx("h1",{className:"text-3xl font-bold text-emerald-400 mb-1",children:" Education Hub"}),h.jsx("p",{className:"text-slate-400",children:"Enhance your environmental knowledge and cleanup skills with our comprehensive learning resources"})]}),h.jsxs("div",{className:"bg-gradient-to-br from-emerald-500 to-emerald-600 p-4 rounded-xl text-white font-medium mb-8",children:[" ",h.jsx("strong",{children:"KNOWLEDGE MISSION:"}),' Complete 3 educational modules this week to unlock the "Eco-Scholar" badge!']}),h.jsxs("div",{className:"bg-gradient-to-br from-[#1e293b] to-[#334155] rounded-2xl p-6 mb-8 border border-[#334155]",children:[h.jsx("div",{className:"text-emerald-500 font-semibold text-lg mb-4",children:" Featured Video Course"}),h.jsxs("div",{className:"grid md:grid-cols-3 gap-6 items-center",children:[h.jsx("div",{className:"md:col-span-1 h-52 bg-slate-700 rounded-xl flex items-center justify-center cursor-pointer hover:bg-slate-600",children:h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"text-4xl mb-2",children:""}),h.jsx("div",{children:"Beach Cleanup Masterclass"})]})}),h.jsxs("div",{className:"md:col-span-2",children:[h.jsx("h3",{className:"text-white font-semibold text-lg mb-2",children:"Marine Debris Identification & Safe Removal"}),h.jsx("p",{className:"text-slate-400 mb-4",children:"Learn to identify different types of marine debris, understand their environmental impact, and master safe removal techniques. This comprehensive course covers everything from microplastics to large debris items."}),h.jsx("button",{className:"inline-flex items-center gap-2 bg-gradient-to-br from-emerald-500 to-emerald-600 text-white px-4 py-2 rounded-lg font-medium hover:shadow-md",children:"Start Course "})]})]})]}),h.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:l.map(({title:u,icon:f,bg:p,content:m,handler:v})=>h.jsxs("div",{className:"bg-gradient-to-tr from-slate-800 to-slate-700 border border-slate-600 rounded-2xl p-6",children:[h.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[h.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center text-xl text-white ${p}`,children:f}),h.jsx("h3",{className:"text-lg font-semibold text-slate-200",children:u})]}),h.jsx("ul",{children:m.map(({title:y,meta:w,link:_})=>h.jsxs("li",{onClick:()=>v(y,_),className:"border-b border-slate-600 py-3 px-2 cursor-pointer hover:bg-emerald-900/10 rounded-md",children:[h.jsx("div",{className:"text-slate-200 font-medium mb-1",children:y}),h.jsx("div",{className:"text-xs text-slate-400 flex gap-4 flex-wrap",children:w.map((k,E)=>h.jsx("span",{children:k},E))})]},y))})]},u))}),h.jsxs("div",{className:"bg-gradient-to-tr from-yellow-300 to-yellow-500 text-slate-900 p-6 rounded-2xl mt-10",children:[h.jsx("h3",{className:"text-lg font-semibold mb-3",children:" Essential Safety Guidelines for Beach Cleanup"}),h.jsx("ul",{className:"list-none space-y-2 text-sm",children:["Wear protective gear: Gloves, closed-toe shoes, and sun protection are mandatory","Stay hydrated: Bring plenty of water and take regular breaks","Handle sharp objects carefully: Use grabbers for glass, metal, and needles","Work in pairs: Never clean alone, especially in remote areas","Report hazardous materials: Don't touch chemicals, oil, or medical waste","Check tide schedules: Be aware of changing water levels and weather conditions"].map((u,f)=>h.jsxs("li",{className:"pl-5 relative",children:[h.jsx("span",{className:"absolute left-0 top-0",children:""})," ",u]},f))})]})]})})]})},m7=({navigateTo:n})=>{const[e,t]=re.useState("impactcam"),[r,i]=re.useState(null),[o,s]=re.useState("none"),[a,l]=re.useState(!1),[u,f]=re.useState(""),[p,m]=re.useState("Marina Beach, Chennai"),[v,y]=re.useState("Weekend Beach Cleanup"),[w,_]=re.useState(!1),k=re.useRef(null),E=re.useRef(null),[N,S]=re.useState(null),A=K=>{t(K),n&&n(K)},P=[{id:"none",name:"Original",icon:"",badge:"Classic"},{id:"before-after",name:"Before/After",icon:"",badge:"Epic"},{id:"cleanup-badge",name:"Cleanup Hero",icon:"",badge:"Legendary"},{id:"eco-warrior",name:"Eco Warrior",icon:"",badge:"Master"},{id:"ocean-guardian",name:"Ocean Guardian",icon:"",badge:"Elite"},{id:"earth-protector",name:"Earth Protector",icon:"",badge:"Mythic"}],D=[" MISSION COMPLETE! Another successful cleanup at Marina Beach! Level up your environmental warrior status! #EcoWarrior #BeachCleanup +50 XP"," LEGENDARY ACHIEVEMENT UNLOCKED! Proud cleanup crew member reporting for duty! Every piece counts in our battle for cleaner oceans! #CleanupHero #OceanDefender"," TRANSFORMATION POWER ACTIVATED! From polluted to pristine - witness the magic when warriors unite! #EnvironmentalBattle #EcoTransformation"," COMBAT POINTS EARNED! Small actions create MASSIVE impact! Today's mission reminded me that change starts with warriors like us! #PlanetDefender #EcoMission"];re.useEffect(()=>()=>{N&&N.getTracks().forEach(K=>K.stop())},[N]);const j=async()=>{try{const K=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}});S(K),k.current&&(k.current.srcObject=K)}catch(K){console.error("Error accessing camera:",K)}},T=()=>{if(!k.current||!E.current)return;l(!0);const K=E.current,te=k.current,se=K.getContext("2d");K.width=te.videoWidth,K.height=te.videoHeight,se.drawImage(te,0,0);const q=K.toDataURL("image/jpeg");i(q),M(),setTimeout(()=>l(!1),500)},M=()=>{const K=D[Math.floor(Math.random()*D.length)];setTimeout(()=>{f(K)},1e3)},L=()=>{_(!0),setTimeout(()=>_(!1),3e3)},B=()=>{i(null),f(""),s("none")},F=()=>e==="impactcam"?h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"bg-gradient-to-r from-green-500 to-emerald-600 rounded-xl p-4 flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center space-x-3",children:[h.jsx("div",{className:"bg-white bg-opacity-20 rounded-full p-2",children:h.jsx(Qc,{className:"w-6 h-6 text-white"})}),h.jsx("div",{children:h.jsx("div",{className:"text-white font-bold",children:" IMPACT CAM MISSION: Share your cleanup moments! +100 XP bonus available!"})})]}),h.jsx("button",{className:"text-white hover:text-gray-200",children:h.jsx(WO,{className:"w-5 h-5"})})]}),h.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-6",children:[h.jsx("div",{className:"xl:col-span-2",children:h.jsx("div",{className:"bg-slate-800 rounded-xl border border-slate-700 overflow-hidden",children:h.jsxs("div",{className:"p-6",children:[h.jsxs("div",{className:"flex items-center justify-between mb-6",children:[h.jsxs("div",{className:"flex items-center space-x-3",children:[h.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-purple-500 p-2 rounded-lg",children:h.jsx(Qc,{className:"w-6 h-6 text-white"})}),h.jsxs("div",{children:[h.jsx("h2",{className:"text-xl font-bold text-white",children:"Impact Cam Studio"}),h.jsx("p",{className:"text-gray-400 text-sm",children:"Capture your environmental victories"})]})]}),h.jsxs("div",{className:"flex space-x-2",children:[h.jsxs("button",{onClick:j,className:"bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white px-4 py-2 rounded-lg text-sm font-bold transition-all flex items-center space-x-2",children:[h.jsx(Qc,{className:"w-4 h-4"}),h.jsx("span",{children:"ACTIVATE CAM"})]}),r&&h.jsxs("button",{onClick:B,className:"bg-slate-600 hover:bg-slate-500 text-white px-4 py-2 rounded-lg text-sm font-bold transition-colors flex items-center space-x-2",children:[h.jsx(j2,{className:"w-4 h-4"}),h.jsx("span",{children:"RETRY"})]})]})]}),h.jsxs("div",{className:"relative bg-black rounded-lg overflow-hidden aspect-video mb-6 border-2 border-slate-600",children:[r?h.jsx("img",{src:r,alt:"Captured",className:"w-full h-full object-cover"}):h.jsx("video",{ref:k,autoPlay:!0,playsInline:!0,className:"w-full h-full object-cover"}),a&&h.jsx("div",{className:"absolute inset-0 bg-green-400 opacity-60 animate-pulse"}),h.jsxs("div",{className:"absolute top-4 left-4 bg-black bg-opacity-70 text-green-400 px-3 py-1 rounded-full text-sm font-bold border border-green-500",children:[h.jsx(BO,{className:"w-4 h-4 inline mr-1"}),"MISSION ACTIVE"]}),h.jsxs("div",{className:"absolute bottom-4 right-4 bg-gradient-to-r from-green-600 to-blue-600 text-white px-3 py-1 rounded-full text-sm font-bold border border-white border-opacity-30",children:[h.jsx(FO,{className:"w-4 h-4 inline mr-1"}),"EcoWarrior"]})]}),h.jsx("div",{className:"flex justify-center",children:h.jsx("button",{onClick:T,disabled:!N||a,className:"bg-gradient-to-r from-red-500 to-pink-500 hover:from-red-600 hover:to-pink-600 disabled:opacity-50 disabled:cursor-not-allowed text-white w-20 h-20 rounded-full flex items-center justify-center shadow-lg transition-all duration-200 transform hover:scale-110 border-4 border-white border-opacity-20",children:h.jsx(Qc,{className:"w-10 h-10"})})}),h.jsx("canvas",{ref:E,className:"hidden"})]})})}),h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"bg-slate-800 rounded-xl border border-slate-700 p-6",children:[h.jsxs("h3",{className:"text-xl font-bold text-white mb-4 flex items-center",children:[h.jsx(T2,{className:"w-6 h-6 mr-2 text-yellow-400"}),"Battle Filters"]}),h.jsx("div",{className:"grid grid-cols-2 gap-3",children:P.map(K=>h.jsxs("button",{onClick:()=>s(K.id),className:`p-3 rounded-lg border-2 transition-all relative ${o===K.id?"border-green-400 bg-green-400 bg-opacity-10":"border-slate-600 hover:border-slate-500 bg-slate-700"}`,children:[h.jsx("div",{className:"text-2xl mb-1",children:K.icon}),h.jsx("div",{className:"text-xs font-bold text-white",children:K.name}),h.jsx("div",{className:`absolute -top-1 -right-1 px-2 py-0.5 rounded-full text-xs font-bold ${K.badge==="Legendary"?"bg-yellow-500 text-black":K.badge==="Epic"?"bg-purple-500 text-white":K.badge==="Master"?"bg-red-500 text-white":K.badge==="Elite"?"bg-blue-500 text-white":K.badge==="Mythic"?"bg-gradient-to-r from-purple-500 to-pink-500 text-white":"bg-gray-500 text-white"}`,children:K.badge})]},K.id))})]}),h.jsxs("div",{className:"bg-slate-800 rounded-xl border border-slate-700 p-6",children:[h.jsxs("h3",{className:"text-xl font-bold text-white mb-4 flex items-center",children:[h.jsx(M2,{className:"w-6 h-6 mr-2 text-purple-400"}),"AI Caption Generator"]}),u?h.jsxs("div",{className:"space-y-4",children:[h.jsx("div",{className:"bg-slate-700 rounded-lg p-4 border-l-4 border-purple-400",children:h.jsx("p",{className:"text-gray-100 text-sm leading-relaxed",children:u})}),h.jsxs("button",{onClick:M,className:"w-full bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white py-2 px-4 rounded-lg text-sm font-bold transition-all flex items-center justify-center space-x-2",children:[h.jsx(j2,{className:"w-4 h-4"}),h.jsx("span",{children:"GENERATE NEW"})]})]}):h.jsxs("div",{className:"text-center py-8 text-gray-400",children:[h.jsx(T2,{className:"w-12 h-12 mx-auto mb-3 text-gray-600"}),h.jsx("p",{className:"text-sm",children:"Capture a photo to unlock AI-powered captions"})]})]}),r&&h.jsxs("div",{className:"bg-slate-800 rounded-xl border border-slate-700 p-6",children:[h.jsxs("h3",{className:"text-xl font-bold text-white mb-4 flex items-center",children:[h.jsx(D2,{className:"w-6 h-6 mr-2 text-yellow-400"}),"Share Your Victory"]}),h.jsxs("div",{className:"space-y-3",children:[h.jsxs("button",{onClick:L,className:"w-full bg-gradient-to-r from-green-500 to-blue-500 hover:from-green-600 hover:to-blue-600 text-white py-3 px-4 rounded-lg font-bold transition-all flex items-center justify-center space-x-2",children:[h.jsx(D0,{className:"w-5 h-5"}),h.jsx("span",{children:"SHARE VICTORY (+25 XP)"})]}),h.jsxs("button",{className:"w-full bg-slate-600 hover:bg-slate-500 text-white py-3 px-4 rounded-lg font-bold transition-colors flex items-center justify-center space-x-2",children:[h.jsx(OO,{className:"w-5 h-5"}),h.jsx("span",{children:"DOWNLOAD IMAGE"})]})]})]})]})]}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[h.jsxs("div",{className:"bg-slate-800 rounded-xl border border-slate-700 p-6",children:[h.jsxs("div",{className:"flex items-center justify-between mb-3",children:[h.jsx("div",{className:"bg-blue-500 bg-opacity-20 rounded-full p-3",children:h.jsx(Qc,{className:"w-6 h-6 text-blue-400"})}),h.jsx("span",{className:"bg-blue-500 text-white px-2 py-1 rounded-full text-xs font-bold",children:"Hero"})]}),h.jsx("div",{className:"text-3xl font-bold text-white mb-1",children:"2,847"}),h.jsx("div",{className:"text-gray-400 text-sm",children:"Battle Shots Captured"}),h.jsx("div",{className:"text-green-400 text-xs mt-1",children:"+127 this week"})]}),h.jsxs("div",{className:"bg-slate-800 rounded-xl border border-slate-700 p-6",children:[h.jsxs("div",{className:"flex items-center justify-between mb-3",children:[h.jsx("div",{className:"bg-green-500 bg-opacity-20 rounded-full p-3",children:h.jsx(D0,{className:"w-6 h-6 text-green-400"})}),h.jsx("span",{className:"bg-green-500 text-white px-2 py-1 rounded-full text-xs font-bold",children:"Elite"})]}),h.jsx("div",{className:"text-3xl font-bold text-white mb-1",children:"1,523"}),h.jsx("div",{className:"text-gray-400 text-sm",children:"Victory Shares"}),h.jsx("div",{className:"text-green-400 text-xs mt-1",children:"+89 this week"})]}),h.jsxs("div",{className:"bg-slate-800 rounded-xl border border-slate-700 p-6",children:[h.jsxs("div",{className:"flex items-center justify-between mb-3",children:[h.jsx("div",{className:"bg-purple-500 bg-opacity-20 rounded-full p-3",children:h.jsx(R2,{className:"w-6 h-6 text-purple-400"})}),h.jsx("span",{className:"bg-purple-500 text-white px-2 py-1 rounded-full text-xs font-bold",children:"Epic"})]}),h.jsx("div",{className:"text-3xl font-bold text-white mb-1",children:"45.8K"}),h.jsx("div",{className:"text-gray-400 text-sm",children:"Social Engagements"}),h.jsx("div",{className:"text-green-400 text-xs mt-1",children:"+2.3K this week"})]}),h.jsxs("div",{className:"bg-slate-800 rounded-xl border border-slate-700 p-6",children:[h.jsxs("div",{className:"flex items-center justify-between mb-3",children:[h.jsx("div",{className:"bg-yellow-500 bg-opacity-20 rounded-full p-3",children:h.jsx(zO,{className:"w-6 h-6 text-yellow-400"})}),h.jsx("span",{className:"bg-gradient-to-r from-yellow-400 to-orange-400 text-black px-2 py-1 rounded-full text-xs font-bold",children:"Legendary"})]}),h.jsx("div",{className:"text-3xl font-bold text-white mb-1",children:"89%"}),h.jsx("div",{className:"text-gray-400 text-sm",children:"Impact Amplification"}),h.jsx("div",{className:"text-green-400 text-xs mt-1",children:"+5% this month"})]})]})]}):h.jsxs("div",{className:"text-center py-20",children:[h.jsx("div",{className:"text-6xl mb-4",children:""}),h.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Feature Under Development"}),h.jsx("p",{className:"text-gray-400",children:"This section will be available soon!"})]});return h.jsxs("div",{className:"min-h-screen bg-slate-900 flex",children:[h.jsx(ic,{activeNavItem:e,handleNavItemClick:A}),h.jsxs("div",{className:"pl-[280px] p-8",children:[h.jsx("div",{className:"flex-1 overflow-auto",children:h.jsxs("div",{className:"p-8",children:[e==="impactcam"&&h.jsxs("div",{className:"mb-8",children:[h.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-green-400 to-blue-500 bg-clip-text text-transparent mb-2",children:"Impact Cam & AI Caption Studio"}),h.jsx("p",{className:"text-gray-400",children:"Transform your cleanup moments into viral environmental stories!"})]}),F()]})}),w&&h.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50",children:h.jsxs("div",{className:"bg-slate-800 border border-slate-600 rounded-xl p-8 max-w-md mx-4 text-center",children:[h.jsx("div",{className:"bg-green-500 bg-opacity-20 w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-4",children:h.jsx(D2,{className:"w-10 h-10 text-green-400"})}),h.jsx("h3",{className:"text-2xl font-bold text-white mb-2",children:"VICTORY SHARED! "}),h.jsx("p",{className:"text-gray-300 mb-4",children:"Your environmental battle story is now inspiring warriors across the digital realm!"}),h.jsx("div",{className:"bg-slate-700 rounded-lg p-4 mb-4",children:h.jsxs("div",{className:"flex items-center justify-center space-x-6 text-sm",children:[h.jsxs("span",{className:"flex items-center text-red-400",children:[h.jsx(R2,{className:"w-4 h-4 mr-1 fill-current"}),"+127 likes"]}),h.jsxs("span",{className:"flex items-center text-blue-400",children:[h.jsx(D0,{className:"w-4 h-4 mr-1"}),"+23 shares"]}),h.jsxs("span",{className:"flex items-center text-green-400",children:[h.jsx(M2,{className:"w-4 h-4 mr-1"}),"+25 XP"]})]})}),h.jsx("div",{className:"text-yellow-400 font-bold",children:" Achievement Unlocked: Social Impact Master!"})]})})]})]})},i_={"juhu-cleanup":{title:"Juhu Beach Sunrise Cleanup",date:"Tomorrow, 7:00 AM - 10:00 AM",location:"Juhu Beach, Zone A - Near ISKCON Temple",organizer:"Anjali Sharma",volunteers:32,capacity:50,equipment:"Gloves and bags provided",transport:"Bus from Andheri Station (6:30 AM)",weather:"26C, Partly cloudy"},"versova-cleanup":{title:"Versova Beach Conservation Drive",date:"Sunday, 6:30 AM - 9:30 AM",location:"Versova Beach - Near Fishing Village",organizer:"Green Mumbai Initiative",volunteers:18,capacity:40,equipment:"Bring your own gloves",transport:"Metro to Versova, 5 min walk",weather:"24C, Clear skies"}},g7=({eventId:n,onClose:e,onOpenDirections:t})=>{const r=i_[n]||i_["juhu-cleanup"];return h.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-[2000] animate-fadeIn",children:h.jsxs("div",{className:"bg-gradient-to-br from-[#0f172a] to-[#1e293b] text-white rounded-2xl p-8 max-w-xl w-11/12 max-h-[90vh] overflow-y-auto shadow-2xl relative",children:[h.jsx("button",{onClick:e,className:"absolute top-3 right-3 text-2xl text-gray-400 hover:text-red-500",children:""}),h.jsxs("div",{className:"text-center mb-6",children:[h.jsx("h2",{className:"text-green-400 text-2xl font-extrabold mb-2 drop-shadow",children:r.title}),h.jsx("div",{className:"inline-block bg-green-700 text-white px-4 py-1 rounded-full font-semibold",children:"Registration Confirmed! "})]}),h.jsxs("div",{className:"bg-[#1e293b] rounded-xl p-5 mb-5 border border-blue-600",children:[h.jsx("h3",{className:"text-lg font-semibold text-blue-400 mb-3",children:" Event Details"}),h.jsxs("div",{className:"space-y-2 text-blue-100",children:[h.jsxs("div",{children:[h.jsx("strong",{children:"Date & Time:"})," ",r.date]}),h.jsxs("div",{children:[h.jsx("strong",{children:"Location:"})," ",r.location]}),h.jsxs("div",{children:[h.jsx("strong",{children:"Organizer:"})," ",r.organizer]}),h.jsxs("div",{children:[h.jsx("strong",{children:"Volunteers:"})," ",r.volunteers+1,"/",r.capacity]}),h.jsxs("div",{children:[h.jsx("strong",{children:"Weather:"})," ",r.weather]})]})]}),h.jsxs("div",{className:"bg-[#0f172a] rounded-xl p-5 mb-5 border border-green-600",children:[h.jsx("h3",{className:"text-green-400 text-lg font-semibold mb-3",children:" What to Bring"}),h.jsxs("ul",{className:"list-disc list-inside text-green-300 space-y-1",children:[h.jsx("li",{children:"Comfortable clothes and closed shoes"}),h.jsx("li",{children:"Water bottle"}),h.jsx("li",{children:"Sunscreen and hat"}),h.jsx("li",{children:"Hand sanitizer"}),h.jsx("li",{children:r.equipment})]})]}),h.jsxs("div",{className:"bg-[#1e293b] rounded-xl p-5 mb-5 border border-blue-500",children:[h.jsx("h3",{className:"text-blue-400 text-lg font-semibold mb-3",children:" Transportation"}),h.jsx("p",{className:"text-blue-200",children:r.transport}),h.jsx("button",{onClick:()=>t(n.includes("versova")?"versova-beach":"juhu-beach"),className:"mt-3 bg-gradient-to-br from-blue-600 to-blue-800 text-white font-bold py-2 px-4 rounded-full hover:opacity-90",children:"Get Directions"})]}),h.jsxs("div",{className:"bg-[#1e293b] rounded-xl p-5 mb-5 border border-yellow-500",children:[h.jsx("h3",{className:"text-yellow-400 text-lg font-semibold mb-3",children:" Rewards for This Event"}),h.jsxs("div",{className:"flex flex-wrap gap-2",children:[h.jsx("span",{className:"bg-yellow-500 text-black px-3 py-1 rounded-full text-sm font-semibold",children:"+50 Impact Points"}),h.jsx("span",{className:"bg-yellow-500 text-black px-3 py-1 rounded-full text-sm font-semibold",children:"Early Bird Badge"}),h.jsx("span",{className:"bg-yellow-500 text-black px-3 py-1 rounded-full text-sm font-semibold",children:"Team Player"})]})]}),h.jsx("div",{className:"text-center mt-6",children:h.jsx("button",{onClick:e,className:"bg-gradient-to-br from-green-600 to-green-800 text-white py-3 px-6 rounded-full font-bold shadow-md hover:opacity-90",children:"Got it! See you at the beach! "})})]})})},v7=({locationKey:n,onClose:e})=>{const t={"juhu-beach":{name:"Juhu Beach - ISKCON Temple Area",address:"Juhu Beach, Zone A, Near ISKCON Temple, Juhu, Mumbai - 400049",coordinates:"19.1075 N, 72.8263 E",landmark:"ISKCON Temple (Hare Krishna Land)",parking:"Available at ISKCON Temple premises (20/hour)",transport:[{mode:" Bus",route:"Take 28, 56, 80L to Juhu Beach",time:"45 mins from Andheri"},{mode:" Metro + Auto",route:"Versova Metro  Auto (50-70)",time:"35 mins total"},{mode:" Car/Taxi",route:"Via Western Express Highway  Juhu Tara Road",time:"25-40 mins depending on traffic"},{mode:" Cycle",route:"Cycling path along Carter Road  Juhu",time:"1 hour (scenic route!)"}],meetingPoint:"Look for the GREEN Beach Warriors banner near the temple entrance",tips:["Arrive by 6:45 AM for briefing","Free breakfast provided after cleanup","Parking fills up quickly - arrive early or use public transport","Beach access is easiest near the temple stairs"]},"versova-beach":{name:"Versova Beach - Fishing Village",address:"Versova Beach, Near Fishing Village, Versova, Mumbai - 400061",coordinates:"19.1317 N, 72.8092 E",landmark:"Versova Fishing Village (Koliwada)",parking:"Limited street parking (10/hour)",transport:[{mode:" Metro",route:"Blue Line to Versova Station  5 min walk",time:"5 mins walk from metro"},{mode:" Bus",route:"Take 210, 224, 255 to Versova",time:"30 mins from Bandra"},{mode:" Car/Taxi",route:"Via Link Road  Seven Bungalows  Versova",time:"20-35 mins"},{mode:" Bike",route:"Two-wheeler parking available near jetty",time:"Fastest option during rush hour"}],meetingPoint:"Near the fishing boats - look for BLUE Beach Warriors flag",tips:["Strong fish smell near village - bring a mask if sensitive","Tide is low in morning - perfect for cleanup","Amazing sunrise view - bring camera!","Local fishermen very supportive of cleanup efforts"]}},r=t[n]||t["juhu-beach"];return h.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-80 p-4 overflow-y-auto",children:h.jsxs("div",{className:"bg-gradient-to-br from-[#0f172a] to-[#1e293b] text-white rounded-2xl shadow-2xl w-full max-w-2xl p-6 relative animate-fadeIn max-h-[90vh] overflow-y-auto",children:[h.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-gray-400 hover:text-red-500 text-2xl",children:""}),h.jsxs("div",{className:"text-center mb-6",children:[h.jsx("h2",{className:"text-2xl font-extrabold text-green-400 drop-shadow mb-1",children:" Navigation Guide"}),h.jsx("h3",{className:"text-blue-200 text-lg",children:r.name})]}),h.jsxs("div",{className:"bg-[#1e293b] rounded-xl p-4 mb-6 border border-blue-600 text-center shadow",children:[h.jsx("div",{className:"text-4xl mb-2",children:""}),h.jsx("h3",{className:"text-green-400 font-bold",children:"Exact Location"}),h.jsx("p",{className:"text-blue-300 font-semibold mb-1",children:r.address}),h.jsx("p",{className:"text-blue-400 font-mono",children:r.coordinates})]}),h.jsxs("div",{className:"bg-[#1e293b] rounded-xl p-4 mb-6",children:[h.jsx("h3",{className:"text-lg font-bold text-green-400 mb-3",children:" Transport Options"}),r.transport.map((i,o)=>h.jsx("div",{className:"bg-[#0f172a] rounded-md p-3 mb-2 border-l-4 border-blue-600 shadow",children:h.jsxs("div",{className:"flex justify-between items-start flex-wrap",children:[h.jsxs("div",{className:"min-w-[200px]",children:[h.jsx("h4",{className:"text-blue-300 font-semibold mb-1",children:i.mode}),h.jsx("p",{className:"text-sm text-gray-300",children:i.route})]}),h.jsx("div",{className:"bg-green-800 text-green-200 text-xs font-semibold rounded-full px-3 py-1 mt-2 sm:mt-0",children:i.time})]})},o))]}),h.jsxs("div",{className:"bg-[#1e293b] rounded-xl p-4 mb-6 border border-yellow-500",children:[h.jsx("h3",{className:"text-lg font-bold text-yellow-400 mb-3",children:" Meeting Point"}),h.jsxs("div",{className:"bg-[#0f172a] border border-yellow-400 rounded-xl text-center p-4",children:[h.jsx("div",{className:"text-3xl mb-2",children:""}),h.jsx("p",{className:"text-yellow-300 font-semibold",children:r.meetingPoint}),h.jsxs("p",{className:"text-sm text-gray-400",children:["Landmark: ",r.landmark]})]})]}),h.jsxs("div",{className:"bg-[#1e293b] rounded-xl p-4 mb-6 border border-green-600",children:[h.jsx("h3",{className:"text-lg font-bold text-green-400 mb-3",children:" Parking"}),h.jsx("p",{className:"text-green-300",children:r.parking})]}),h.jsxs("div",{className:"bg-gradient-to-br from-green-700 to-blue-900 text-white rounded-xl p-4 mb-6",children:[h.jsx("h3",{className:"text-lg font-bold mb-3",children:" Pro Tips"}),h.jsx("ul",{className:"list-disc list-inside space-y-1 text-sm text-white/90",children:r.tips.map((i,o)=>h.jsx("li",{children:i},o))})]}),h.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mt-6",children:[h.jsx("button",{className:"bg-gradient-to-br from-green-500 to-green-700 text-white font-bold py-3 px-6 rounded-full shadow hover:opacity-90 transition-all",children:" Start Navigation"}),h.jsx("button",{className:"bg-gradient-to-br from-yellow-500 to-yellow-700 text-white font-bold py-3 px-6 rounded-full shadow hover:opacity-90 transition-all",children:" Save Offline"})]})]})})},x7=({navigateTo:n})=>{const[e,t]=re.useState("cleanup-events"),[r,i]=re.useState(!1),[o,s]=re.useState(!1),[a,l]=re.useState(null),[u,f]=re.useState(null),[p,m]=re.useState(3),v=E=>{t(E),n(E)},[y,w]=re.useState(!1);re.useEffect(()=>{const E=setTimeout(()=>{w(!0),setTimeout(()=>w(!1),5e3)},3e3);return()=>clearTimeout(E)},[]);const _=E=>{l(E),i(!0)},k=E=>{f(E),s(!0)};return h.jsxs("div",{className:"min-h-screen flex bg-gradient-to-br from-[#0f172a] to-[#1e293b] text-white font-sans",children:[h.jsx(ic,{activeNavItem:e,handleNavItemClick:v}),h.jsx("main",{className:"ml-[280px] w-full p-8 space-y-10",children:h.jsxs("div",{className:"flex-1 p-6",children:[y&&h.jsx("div",{className:"fixed top-20 right-5 bg-gradient-to-br from-green-500 to-green-700 text-white px-4 py-3 rounded-lg shadow-lg z-[1000] animate-slideIn",children:h.jsxs("div",{className:"flex justify-between items-start gap-4",children:[h.jsxs("div",{children:[h.jsx("strong",{children:" New Event Alert!"}),h.jsx("br",{}),"Emergency cleanup at Dadar Beach tomorrow 4 PM"]}),h.jsx("button",{onClick:()=>w(!1),className:"text-white text-xl leading-none",children:""})]})}),h.jsx("h1",{className:"text-3xl font-extrabold text-green-400 mb-6 drop-shadow",children:" Cleanup Events"}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[h.jsxs("div",{className:"bg-[#1e293b] rounded-xl shadow-lg p-5 border-l-4 border-green-500",children:[h.jsx("p",{className:"text-sm text-blue-400 font-semibold",children:"Sunday, 6:30 AM"}),h.jsx("h3",{className:"text-lg font-bold text-white mt-1",children:"Versova Beach Conservation Drive"}),h.jsx("p",{className:"text-sm text-gray-300 mt-1",children:" Versova Beach - Near Fishing Village"}),h.jsx("span",{className:"inline-block bg-yellow-100 text-yellow-900 text-xs font-medium px-2 py-1 rounded-full mt-2",children:"18 volunteers registered"}),h.jsxs("div",{className:"mt-4 flex flex-wrap gap-3",children:[h.jsx("button",{onClick:()=>_(1),className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-full font-semibold transition-all",children:"Join Event"}),h.jsx("button",{onClick:()=>k("versova-beach"),className:"bg-yellow-500 hover:bg-yellow-600 text-white px-4 py-2 rounded-full font-semibold transition-all",children:"Get Directions"})]})]}),h.jsxs("div",{className:"bg-[#1e293b] rounded-xl shadow-lg p-5 border-l-4 border-blue-500",children:[h.jsx("p",{className:"text-sm text-blue-400 font-semibold",children:"Next Saturday, 7:00 AM"}),h.jsx("h3",{className:"text-lg font-bold text-white mt-1",children:"Marine Drive Coastal Cleanup"}),h.jsx("p",{className:"text-sm text-gray-300 mt-1",children:" Marine Drive - Near Nariman Point"}),h.jsx("span",{className:"inline-block bg-blue-100 text-blue-800 text-xs font-medium px-2 py-1 rounded-full mt-2",children:"Planning Phase"}),h.jsx("div",{className:"mt-4 flex flex-wrap gap-3",children:h.jsx("button",{onClick:()=>_(2),className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-full font-semibold transition-all",children:"Express Interest"})})]})]}),r&&h.jsx(g7,{eventId:a,onClose:()=>i(!1),onOpenDirections:k}),o&&h.jsx(v7,{locationKey:u,onClose:()=>s(!1)})]})})]})},y7=({navigateTo:n})=>{const[e,t]=re.useState(null),[r,i]=re.useState(""),[o,s]=re.useState(!1),[a,l]=re.useState("waste-classifier"),u=m=>{l(m),n(m)},f=m=>{const v=m.target.files[0];v&&(t(URL.createObjectURL(v)),i(" Identifying waste category..."),setTimeout(()=>{i(" This is classified as: *Plastic Waste*")},1500))},p=()=>{t(null),i("")};return h.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-[#0f172a] to-[#1e293b] text-white font-sans flex",children:[h.jsx(ic,{activeNavItem:a,handleNavItemClick:u}),h.jsx("main",{className:"ml-[280px] w-full p-8 space-y-10",children:h.jsxs("div",{className:"p-8 overflow-y-auto",children:[h.jsx("h1",{className:"text-3xl font-extrabold text-green-400 mb-6 drop-shadow",children:" Waste Classifier"}),h.jsxs("div",{className:"bg-[#1e293b] p-6 rounded-2xl shadow-lg border border-blue-700",children:[h.jsx("p",{className:"mb-4 text-gray-300",children:"Upload a photo of the waste item and our system will identify its type for proper disposal."}),!e&&h.jsxs("label",{className:"block w-full border-2 border-dashed border-green-500 p-10 text-center rounded-xl cursor-pointer hover:border-green-400 transition",children:[h.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:f}),h.jsx("span",{className:"text-green-300 text-lg font-semibold",children:" Click or Drag & Drop to Upload Image"})]}),e&&h.jsxs("div",{className:"mt-6 flex flex-col items-center space-y-4",children:[h.jsx("img",{src:e,alt:"Preview",className:"w-64 h-64 object-contain border-4 border-blue-500 rounded-xl shadow"}),o?h.jsx("div",{className:"text-blue-200 animate-pulse text-lg font-medium",children:" Identifying waste category..."}):h.jsx("div",{className:"text-blue-300 text-lg font-medium",children:r}),h.jsx("button",{onClick:p,className:"mt-4 bg-green-600 hover:bg-green-500 text-white px-4 py-2 rounded-xl transition",children:" Try Another Image"})]})]})]})})]})},b7=()=>h.jsx("div",{className:"min-h-screen flex font-inter",children:h.jsx(w7,{})}),w7=()=>h.jsx(_7,{}),_7=()=>h.jsxs("div",{className:"mx-auto my-8 max-w-7xl px-4",children:[h.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8",children:h.jsx(K0,{chartId:"volunteerChart",title:"Volunteer Engagement Over Time",type:"line",data:{labels:["January","February","March","April","May","June","July","August","September","October","November","December"],datasets:[{label:"Active Volunteers",data:[980,1050,1120,1180,1210,1247,1200,1090,1150,1190,1220,1250],borderColor:"#00BCD4",backgroundColor:"rgba(0, 188, 212, 0.1)",fill:!0,tension:.4,borderWidth:3,pointBackgroundColor:"#00BCD4",pointBorderColor:"#ffffff",pointBorderWidth:2,pointRadius:6}]},options:{responsive:!0,plugins:{legend:{display:!1}},scales:{y:{beginAtZero:!1,min:900,grid:{color:"#e9ecef"}},x:{grid:{color:"#e9ecef"}}}},singleChart:!0})}),h.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[h.jsx(K0,{chartId:"cleanupChart",title:"Beach Cleanup Impact",type:"bar",data:{labels:["Plastic","Glass","Metal","Organic","Other"],datasets:[{label:"Waste Collected (kg)",data:[5200,2100,1800,3800,2300],backgroundColor:["#00BCD4","#26C6DA","#4DD0E1","#80DEEA","#B2EBF2"],borderRadius:8,borderSkipped:!1}]},options:{responsive:!0,plugins:{legend:{display:!1}},scales:{y:{beginAtZero:!0,grid:{color:"#e9ecef"}},x:{grid:{display:!1}}}},children:h.jsx(o_,{value:"15.2k",label:"Kg Waste Collected This Year"})}),h.jsx(K0,{chartId:"growthChart",title:"Volunteer Growth Rate",type:"line",data:{labels:["Week 1","Week 2","Week 3","Week 4"],datasets:[{label:"New Volunteers",data:[45,52,38,61],borderColor:"#00BCD4",backgroundColor:"rgba(0, 188, 212, 0.1)",fill:!0,tension:.4,borderWidth:3,pointBackgroundColor:"#00BCD4",pointBorderColor:"#ffffff",pointBorderWidth:2,pointRadius:5}]},options:{responsive:!0,plugins:{legend:{display:!1}},scales:{y:{beginAtZero:!0,grid:{color:"#e9ecef"}},x:{grid:{color:"#e9ecef"}}}},children:h.jsx(o_,{value:"1,247",label:"Active Volunteers"})})]})]}),K0=({chartId:n,title:e,type:t,data:r,options:i,children:o,singleChart:s})=>{const a=re.useRef(null),l=re.useRef(null);re.useEffect(()=>{if(a.current){l.current&&l.current.destroy();const f=a.current.getContext("2d");l.current=new sd(f,{type:t,data:r,options:i})}return()=>{l.current&&l.current.destroy()}},[t,r,i]);const u=s?"lg:col-span-2 max-w-4xl mx-auto":"";return h.jsxs("div",{className:`bg-gray-50 p-6 rounded-2xl border border-gray-200 shadow-sm ${u}`,children:[h.jsx("div",{className:"text-gray-800 text-lg font-semibold mb-6 text-center",children:e}),h.jsx("canvas",{id:n,ref:a,className:"max-h-64"}),o," "]})},o_=({value:n,label:e})=>h.jsxs("div",{className:"text-center p-4 bg-cyan-50 rounded-xl my-4 shadow-inner",children:[h.jsx("div",{className:"text-3xl font-bold text-cyan-500",children:n}),h.jsx("div",{className:"text-gray-600 text-sm mt-2",children:e})]}),k7=[{id:1,name:"Sarah Johnson",role:"Volunteer",email:"sarah@email.com",phone:"+91 98765 43210",joinDate:"2025-06-15",experience:"6 months",events:15,status:"Active"},{id:2,name:"Mike Chen",role:"Organizer",email:"mike@email.com",phone:"+91 98765 43211",joinDate:"2025-05-20",experience:"2 years",events:28,status:"Active"},{id:3,name:"Emma Davis",role:"Volunteer",email:"emma@email.com",phone:"+91 98765 43212",joinDate:"2025-06-01",experience:"3 months",events:8,status:"Inactive"},{id:4,name:"Raj Patel",role:"Volunteer",email:"raj@email.com",phone:"+91 98765 43213",joinDate:"2025-06-10",experience:"4 months",events:12,status:"Active"},{id:5,name:"Anita Sharma",role:"Organizer",email:"anita@email.com",phone:"+91 98765 43214",joinDate:"2025-04-15",experience:"1.5 years",events:35,status:"Active"},{id:6,name:"David Kumar",role:"Volunteer",email:"david@email.com",phone:"+91 98765 43215",joinDate:"2025-06-25",experience:"2 months",events:5,status:"Pending"}],C7=()=>{const[n,e]=re.useState(k7),[t,r]=re.useState("all"),[i,o]=re.useState("all"),[s,a]=re.useState(!1),[l,u]=re.useState({name:"",email:"",phone:"",experience:""}),[f,p]=re.useState(""),m=re.useMemo(()=>n.filter(N=>{const S=t==="all"||N.role.toLowerCase()===t,A=i==="all"||N.status.toLowerCase()===i;return S&&A}),[t,i,n]),v=()=>{a(!0),p(""),u({name:"",email:"",phone:"",experience:""})},y=()=>{a(!1)},w=N=>{const{name:S,value:A}=N.target;u(P=>({...P,[S]:A}))},_=N=>{if(N.preventDefault(),!l.name||!l.email||!l.phone||!l.experience){p("All fields are required.");return}if(!/^\d{10,15}$/.test(l.phone)){p("Phone number must be 10-15 digits long and contain only numbers.");return}if(!/^\d+\s(years?|months?)$/i.test(l.experience)){p('Experience must be in format "X years" or "X months" (e.g., "1 year", "6 months").');return}const P=Math.max(...n.map(T=>T.id))+1,D=new Date().toISOString().slice(0,10),j={id:P,name:l.name,role:"Organizer",email:l.email,phone:l.phone,joinDate:D,experience:l.experience,events:0,status:"Active"};e(T=>[...T,j]),y()},k=N=>{const S="py-1 px-3 rounded-full text-xs font-semibold inline-block";switch(N.toLowerCase()){case"active":return`${S} bg-green-100 text-green-800`;case"inactive":return`${S} bg-red-100 text-red-800`;case"pending":return`${S} bg-yellow-100 text-yellow-800`;default:return`${S} bg-gray-100 text-gray-800`}},E=N=>{const S="font-semibold";switch(N.toLowerCase()){case"volunteer":return`${S} text-cyan-600`;case"organizer":return`${S} text-amber-600`;default:return S}};return h.jsxs("div",{className:"w-full max-w-5xl mx-auto h-full flex flex-col font-sans bg-cyan-500",children:[h.jsx("main",{className:"flex-1 bg-white",children:h.jsxs("div",{className:"mx-auto px-6 py-4 max-w-screen-xl",children:[" ",h.jsxs("div",{className:"flex items-center justify-between mb-4 flex-wrap gap-4",children:[h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsxs("select",{value:t,onChange:N=>r(N.target.value),className:"py-2 px-4 border-2 border-cyan-500 rounded-lg bg-white text-cyan-500 font-semibold focus:outline-none focus:ring-2 focus:ring-cyan-400 hover:bg-cyan-500 hover:text-white transition",children:[h.jsx("option",{value:"all",children:"All Roles"}),h.jsx("option",{value:"volunteer",children:"Volunteers"}),h.jsx("option",{value:"organizer",children:"Organizers"})]}),h.jsxs("select",{value:i,onChange:N=>o(N.target.value),className:"py-2 px-4 border-2 border-cyan-500 rounded-lg bg-white text-cyan-500 font-semibold focus:outline-none focus:ring-2 focus:ring-cyan-400 hover:bg-cyan-500 hover:text-white transition",children:[h.jsx("option",{value:"all",children:"All Statuses"}),h.jsx("option",{value:"active",children:"Active"}),h.jsx("option",{value:"inactive",children:"Inactive"}),h.jsx("option",{value:"pending",children:"Pending"})]})]}),h.jsx("button",{onClick:v,className:"bg-cyan-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-cyan-600 transition-transform transform hover:-translate-y-0.5 shadow-md",children:"Add Organizer"})]}),h.jsx("div",{className:"overflow-x-auto rounded-lg border border-gray-200",children:h.jsxs("table",{className:"w-full table-auto text-left",children:[h.jsx("thead",{className:"bg-gray-50 border-b-2 border-gray-200",children:h.jsxs("tr",{children:[h.jsx("th",{className:"py-2 px-6 font-semibold text-gray-700",children:"Name"})," ",h.jsx("th",{className:"py-2 px-6 font-semibold text-gray-700",children:"Role"})," ",h.jsx("th",{className:"py-2 px-6 font-semibold text-gray-700",children:"Email"})," ",h.jsx("th",{className:"py-2 px-6 font-semibold text-gray-700",children:"Phone"})," ",h.jsx("th",{className:"py-2 px-6 font-semibold text-gray-700",children:"Join Date"})," ",h.jsx("th",{className:"py-2 px-6 font-semibold text-gray-700",children:"Experience"})," ",h.jsx("th",{className:"py-2 px-6 font-semibold text-gray-700",children:"Events"})," ",h.jsx("th",{className:"py-2 px-6 font-semibold text-gray-700",children:"Status"})," ",h.jsx("th",{className:"py-2 px-6 font-semibold text-gray-700",children:"Actions"})," "]})}),h.jsx("tbody",{children:m.map(N=>h.jsxs("tr",{className:"hover:bg-gray-50 border-b border-gray-200 last:border-b-0",children:[h.jsx("td",{className:"py-2 px-6 text-gray-800",children:N.name})," ",h.jsx("td",{className:"py-2 px-6",children:h.jsx("span",{className:E(N.role),children:N.role})})," ",h.jsx("td",{className:"py-2 px-6 text-gray-600",children:N.email})," ",h.jsx("td",{className:"py-2 px-6 text-gray-600",children:N.phone})," ",h.jsx("td",{className:"py-2 px-6 text-gray-600",children:N.joinDate})," ",h.jsx("td",{className:"py-2 px-6",children:h.jsx("span",{className:"bg-blue-100 text-blue-800 py-1 px-2 rounded-md text-xs font-semibold",children:N.experience})})," ",h.jsx("td",{className:"py-2 px-6 text-gray-600 text-center",children:N.events})," ",h.jsx("td",{className:"py-2 px-6",children:h.jsx("span",{className:k(N.status),children:N.status})})," ",h.jsxs("td",{className:"py-2 px-6 flex gap-2",children:[" ",h.jsx("button",{className:"bg-cyan-500 text-white py-1 px-3 rounded-md text-sm hover:bg-cyan-600 transition",children:"Edit"}),h.jsx("button",{className:"bg-green-500 text-white py-1 px-3 rounded-md text-sm hover:bg-green-600 transition",children:"Contact"})]})]},N.id))})]})})]})}),s&&h.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center p-4 z-50",children:h.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 w-full max-w-md relative",children:[h.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-6 text-center",children:"Add New Organizer"}),h.jsx("button",{onClick:y,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700 text-2xl font-semibold",children:""}),h.jsxs("form",{onSubmit:_,children:[h.jsxs("div",{className:"mb-4",children:[h.jsx("label",{htmlFor:"name",className:"block text-gray-700 text-sm font-bold mb-2",children:"Name:"}),h.jsx("input",{type:"text",id:"name",name:"name",value:l.name,onChange:w,className:"shadow appearance-none border rounded-lg w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline focus:border-cyan-500",placeholder:"Organizer's Name"})]}),h.jsxs("div",{className:"mb-4",children:[h.jsx("label",{htmlFor:"email",className:"block text-gray-700 text-sm font-bold mb-2",children:"Email:"}),h.jsx("input",{type:"email",id:"email",name:"email",value:l.email,onChange:w,className:"shadow appearance-none border rounded-lg w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline focus:border-cyan-500",placeholder:"organizer@example.com"})]}),h.jsxs("div",{className:"mb-4",children:[h.jsx("label",{htmlFor:"phone",className:"block text-gray-700 text-sm font-bold mb-2",children:"Phone:"}),h.jsx("input",{type:"tel",id:"phone",name:"phone",value:l.phone,onChange:w,className:"shadow appearance-none border rounded-lg w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline focus:border-cyan-500",placeholder:"+91 12345 67890"})]}),h.jsxs("div",{className:"mb-6",children:[h.jsx("label",{htmlFor:"experience",className:"block text-gray-700 text-sm font-bold mb-2",children:'Experience (e.g., "1 year", "6 months"):'}),h.jsx("input",{type:"text",id:"experience",name:"experience",value:l.experience,onChange:w,className:"shadow appearance-none border rounded-lg w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline focus:border-cyan-500",placeholder:"e.g., 1 year"})]}),f&&h.jsx("p",{className:"text-red-500 text-xs italic mb-4 text-center",children:f}),h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("button",{type:"submit",className:"bg-cyan-500 hover:bg-cyan-600 text-white font-bold py-2 px-4 rounded-lg focus:outline-none focus:shadow-outline transition",children:"Add Organizer"}),h.jsx("button",{type:"button",onClick:y,className:"bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded-lg focus:outline-none focus:shadow-outline transition",children:"Cancel"})]})]})]})})]})},E7=()=>h.jsx("svg",{width:"24",height:"24",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",className:"text-slate-600",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 17h5l-5 5-5-5h5v-5a3 3 0 10-6 0v5"})}),N7=({className:n})=>h.jsx("svg",{width:"16",height:"16",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",className:n,children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),s_=()=>h.jsx("span",{children:""}),S7=()=>h.jsx("svg",{width:"20",height:"20",fill:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"})}),a_=()=>h.jsx("svg",{width:"20",height:"20",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),Jh=({icon:n,label:e,value:t,color:r})=>h.jsxs("div",{className:`rounded-2xl p-6 text-white shadow-lg hover:transform hover:-translate-y-1 transition-transform duration-300 ${r}`,children:[h.jsx("div",{className:"text-3xl mb-3 opacity-90",children:n}),h.jsx("div",{className:"text-4xl font-bold mb-1",children:t}),h.jsx("div",{className:"text-sm font-medium opacity-90",children:e})]}),Qh=({time:n,temp:e,condition:t})=>h.jsxs("div",{className:"text-center p-4 bg-slate-50 rounded-xl border border-slate-200",children:[h.jsx("div",{className:"text-sm font-semibold text-slate-600 mb-2",children:n}),h.jsx("div",{className:"text-2xl font-bold text-slate-800 mb-1",children:e}),h.jsx("div",{className:"text-xs text-cyan-600 font-semibold",children:t})]}),I7=({alerts:n,volunteers:e})=>h.jsxs("div",{className:"bg-white border border-slate-200 rounded-2xl p-6 shadow-md mb-6",children:[h.jsxs("h3",{className:"text-2xl font-bold text-slate-800 mb-4 flex items-center gap-2",children:[h.jsx(S7,{}),"Volunteer Dashboard"]}),h.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[h.jsxs("div",{children:[h.jsxs("h4",{className:"text-lg font-semibold text-slate-800 mb-3",children:["Active Volunteers (",e.length,")"]}),h.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:e.map((t,r)=>h.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg border border-slate-200",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:"w-8 h-8 bg-cyan-500 text-white rounded-full flex items-center justify-center text-sm font-bold",children:t.name.charAt(0)}),h.jsxs("div",{children:[h.jsx("div",{className:"font-semibold text-slate-800",children:t.name}),h.jsx("div",{className:"text-xs text-slate-500",children:t.role})]})]}),h.jsx("div",{className:`w-3 h-3 rounded-full ${t.status==="online"?"bg-green-500":"bg-slate-300"}`})]},r))})]}),h.jsxs("div",{children:[h.jsxs("h4",{className:"text-lg font-semibold text-slate-800 mb-3 flex items-center gap-2",children:[h.jsx(a_,{}),"Recent Alerts (",n.length,")"]}),h.jsx("div",{className:"space-y-3 max-h-48 overflow-y-auto",children:n.length===0?h.jsxs("div",{className:"text-center py-8 text-slate-500",children:[h.jsx(a_,{}),h.jsx("p",{className:"mt-2",children:"No alerts sent yet"})]}):n.map((t,r)=>h.jsxs("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[h.jsxs("div",{className:"flex items-start justify-between mb-2",children:[h.jsx("div",{className:"font-semibold text-blue-800",children:t.type}),h.jsx("div",{className:"text-xs text-blue-600",children:t.timestamp})]}),h.jsx("div",{className:"text-sm text-blue-700 mb-2",children:t.message}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsxs("div",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded",children:["Sent to ",t.recipients," volunteers"]}),h.jsx("div",{className:"text-xs bg-green-100 text-green-800 px-2 py-1 rounded",children:" Delivered"})]})]},r))})]})]})]}),A7=()=>{const[n,e]=re.useState({temperature:22,humidity:65,wind:12,visibility:8}),[t,r]=re.useState(new Date),[i,o]=re.useState(!1),[s,a]=re.useState(!1),[l,u]=re.useState(""),[f,p]=re.useState([]),[m]=re.useState([{name:"Sarah Johnson",role:"Team Leader",status:"online"},{name:"Mike Chen",role:"Safety Officer",status:"online"},{name:"Emma Davis",role:"Volunteer",status:"online"},{name:"Alex Rodriguez",role:"Volunteer",status:"online"},{name:"Lisa Wong",role:"Coordinator",status:"online"},{name:"David Kim",role:"Volunteer",status:"offline"},{name:"Rachel Brown",role:"Volunteer",status:"online"},{name:"Tom Wilson",role:"Volunteer",status:"online"}]);re.useEffect(()=>{const w=setInterval(()=>{e(_=>({..._,temperature:_.temperature+(Math.random()>.5?1:-1)}))},3e4);return()=>clearInterval(w)},[]);const v=()=>{o(!0),setTimeout(()=>{e({temperature:Math.floor(Math.random()*15)+15,humidity:Math.floor(Math.random()*41)+50,wind:Math.floor(Math.random()*16)+5,visibility:Math.floor(Math.random()*6)+5}),r(new Date),o(!1),u("Weather data updated successfully"),a(!0),setTimeout(()=>a(!1),3e3)},1500)},y=()=>{const w={type:"Weather Update",message:`Current conditions: ${n.temperature}C, ${n.humidity}% humidity, ${n.wind} km/h wind. Event proceeding as planned. Please check in at the registration desk.`,timestamp:new Date().toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"}),recipients:m.filter(_=>_.status==="online").length};p(_=>[w,..._]),u(`Alert sent to ${w.recipients} volunteers`),a(!0),setTimeout(()=>a(!1),3e3)};return h.jsxs("div",{className:"flex-1 bg-slate-100",children:[h.jsxs("main",{className:"bg-white m-4 md:m-5 mt-0 p-6 md:p-8 rounded-2xl min-h-[calc(100vh-120px)]",children:[h.jsxs("div",{className:"pb-5 border-b border-slate-200",children:[h.jsx("h2",{className:"text-3xl font-bold text-slate-800 mb-2",children:"Weather Intelligence Center"}),h.jsx("p",{className:"text-slate-500 mb-4",children:"Smart recommendations for volunteer event safety"}),h.jsxs("div",{className:"flex flex-wrap items-center gap-x-4 gap-y-2 text-sm text-slate-500",children:[h.jsxs("span",{children:["Last updated: ",t.toLocaleString("en-GB")]}),h.jsx("span",{className:"hidden md:inline",children:""}),h.jsx("span",{children:"Real-time monitoring active"}),h.jsxs("button",{onClick:v,disabled:i,className:"flex items-center gap-2 bg-cyan-600 text-white px-4 py-2 rounded-lg font-semibold hover:bg-cyan-700 transition-all duration-200 disabled:bg-cyan-400 disabled:cursor-not-allowed",children:[h.jsx(N7,{className:i?"animate-spin":""}),i?"Refreshing...":"Refresh Data"]})]})]}),h.jsxs("div",{className:"py-8 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[h.jsx(Jh,{icon:"",label:"Temperature",value:`${n.temperature}C`,color:"bg-gradient-to-br from-blue-500 to-blue-700"}),h.jsx(Jh,{icon:"",label:"Humidity",value:`${n.humidity}%`,color:"bg-gradient-to-br from-emerald-500 to-emerald-700"}),h.jsx(Jh,{icon:"",label:"Wind Speed",value:`${n.wind} km/h`,color:"bg-gradient-to-br from-violet-500 to-violet-700"}),h.jsx(Jh,{icon:"",label:"Visibility",value:`${n.visibility} km`,color:"bg-gradient-to-br from-amber-500 to-amber-700"})]}),h.jsx(I7,{alerts:f,volunteers:m}),h.jsxs("div",{className:"bg-white border border-slate-200 rounded-2xl p-6 shadow-md",children:[h.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start mb-5",children:[h.jsxs("div",{className:"mb-4 md:mb-0",children:[h.jsx("h3",{className:"text-2xl font-bold text-slate-800 mb-3",children:"Beach Cleanup Drive"}),h.jsxs("div",{className:"flex flex-col gap-2 text-slate-600 text-sm",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{children:""}),h.jsx("span",{children:"Today  14:00 - 17:00"})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{children:""}),h.jsx("span",{children:"Sunset Beach"})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{children:""}),h.jsx("span",{children:"40 volunteers"})]})]})]}),h.jsxs("div",{className:"bg-green-100 text-green-800 px-4 py-2 rounded-full text-sm font-semibold flex items-center gap-2",children:[h.jsx(s_,{})," Safety Score: 100/100"]})]}),h.jsxs("div",{className:"bg-green-100 border border-green-200 text-green-800 rounded-xl p-4 mb-6 flex items-center gap-3",children:[h.jsx("div",{className:"w-5 h-5 bg-green-500 text-white rounded-full flex items-center justify-center text-xs font-bold",children:h.jsx(s_,{})}),h.jsx("strong",{children:"Proceed"})," - Event can proceed as planned"]}),h.jsxs("div",{children:[h.jsx("h4",{className:"text-lg font-semibold text-slate-800 mb-4",children:"Event Period Forecast"}),h.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[h.jsx(Qh,{time:"09:00",temp:"18C",condition:"10% rain"}),h.jsx(Qh,{time:"12:00",temp:"22C",condition:"5% rain"}),h.jsx(Qh,{time:"15:00",temp:"24C",condition:"2% rain"}),h.jsx(Qh,{time:"17:00",temp:"21C",condition:"8% rain"})]})]}),h.jsxs("div",{className:"flex flex-wrap gap-3",children:[h.jsxs("button",{onClick:y,className:"px-5 py-2.5 rounded-lg font-semibold bg-cyan-600 text-white hover:bg-cyan-700 transition-all flex items-center gap-2",children:[h.jsx(E7,{}),"Send Alert to Volunteers"]}),h.jsx("button",{className:"px-5 py-2.5 rounded-lg font-semibold bg-slate-600 text-white hover:bg-slate-700 transition-all",children:"Update Event Details"}),h.jsx("button",{className:"px-5 py-2.5 rounded-lg font-semibold bg-white text-slate-600 border border-slate-300 hover:bg-slate-50 transition-all",children:"View Detailed Report"})]})]})]}),h.jsx("div",{className:`fixed top-5 right-5 bg-emerald-500 text-white px-6 py-3 rounded-lg shadow-xl transition-transform duration-300 ease-in-out ${s?"translate-x-0":"translate-x-[400px]"}`,children:l})]})};function R7(){return h.jsx("div",{className:"bg-gradient-to-br from-cyan-600 to-cyan-800 min-h-screen font-sans",children:h.jsx("div",{className:"flex flex-col lg:flex-row min-h-screen",children:h.jsx(A7,{})})})}const j7=()=>h.jsx("svg",{width:"16",height:"16",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})}),T7=()=>h.jsx("svg",{width:"16",height:"16",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),D7=()=>h.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[h.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),h.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),X0=({title:n,icon:e,children:t})=>h.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-2xl p-8 mb-6",children:[h.jsxs("h3",{className:"text-xl font-semibold text-slate-800 mb-6 flex items-center gap-3",children:[h.jsx("span",{className:"w-8 h-8 bg-cyan-600 text-white rounded-lg flex items-center justify-center text-lg",children:e}),n]}),t]}),iu=({label:n,htmlFor:e,children:t})=>h.jsxs("div",{className:"mb-6",children:[h.jsx("label",{htmlFor:e,className:"block text-sm font-semibold text-slate-700 mb-2",children:n}),t]}),M7=({selectedFile:n,onFileSelect:e,onFileRemove:t})=>{const r=re.useCallback(a=>{a.preventDefault(),a.currentTarget.classList.add("border-cyan-600","bg-cyan-50")},[]),i=re.useCallback(a=>{a.preventDefault(),a.currentTarget.classList.remove("border-cyan-600","bg-cyan-50")},[]),o=re.useCallback(a=>{a.preventDefault(),a.currentTarget.classList.remove("border-cyan-600","bg-cyan-50"),a.dataTransfer.files&&a.dataTransfer.files[0]&&e(a.dataTransfer.files[0])},[e]),s=a=>{a.target.files&&a.target.files[0]&&e(a.target.files[0])};return n?h.jsxs("div",{className:"bg-green-100 border border-green-200 rounded-lg p-3 flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:"w-10 h-10 bg-green-500 text-white rounded-md flex items-center justify-center text-xl",children:""}),h.jsxs("div",{children:[h.jsx("h4",{className:"text-sm font-semibold text-green-800",children:n.name}),h.jsxs("p",{className:"text-xs text-green-700",children:[(n.size/1024).toFixed(1)," KB"]})]})]}),h.jsx("button",{type:"button",onClick:t,className:"text-red-600 hover:bg-red-100 p-1 rounded-full text-2xl",children:""})]}):h.jsxs("div",{className:"border-2 border-dashed border-slate-300 rounded-xl p-8 text-center bg-white cursor-pointer transition-all duration-200",onClick:()=>document.getElementById("fileInput").click(),onDragOver:r,onDragLeave:i,onDrop:o,children:[h.jsx("div",{className:"w-12 h-12 bg-slate-200 text-slate-500 rounded-xl flex items-center justify-center mx-auto mb-4 text-2xl",children:""}),h.jsx("p",{className:"font-semibold text-slate-700",children:"Click to upload or drag and drop"}),h.jsx("p",{className:"text-sm text-slate-500",children:"PDF, DOC, JPG, PNG, MP4 (Max 50MB)"}),h.jsx("input",{type:"file",id:"fileInput",className:"hidden",onChange:s,accept:".pdf,.doc,.docx,.jpg,.jpeg,.png,.mp4,.mov"})]})},P7=[{id:"beach-cleanup",name:"Beach Cleanup"},{id:"waste-sorting",name:"Waste Sorting"},{id:"safety",name:"Safety Guidelines"},{id:"marine-life",name:"Marine Life Protection"},{id:"recycling",name:"Recycling"},{id:"community",name:"Community Engagement"}],O7=()=>{const[n,e]=re.useState([]),[t,r]=re.useState({title:"",type:"",description:"",audience:""}),[i,o]=re.useState([]),[s,a]=re.useState(null),[l,u]=re.useState(!1),[f,p]=re.useState(!1),m=E=>{const{id:N,value:S}=E.target;r(A=>({...A,[N]:S}))},v=E=>{o(N=>N.includes(E)?N.filter(S=>S!==E):[...N,E])},y=E=>a(E),w=()=>a(null),_=()=>{r({title:"",type:"",description:"",audience:""}),o([]),a(null),p(!1)},k=E=>{E.preventDefault(),u(!0),p(!1),setTimeout(()=>{u(!1),p(!0),e(N=>[...N,{...t,categories:i,file:s,id:Date.now()}]),setTimeout(()=>p(!1),5e3),document.querySelector(".main-content-area")?.scrollTo({top:0,behavior:"smooth"}),r({title:"",type:"",description:"",audience:""}),o([]),a(null)},2e3)};return h.jsx("div",{className:"flex-1 bg-slate-100 overflow-y-auto main-content-area",children:h.jsx("main",{className:"p-4 md:p-5",children:h.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-2xl",children:[h.jsx("h2",{className:"text-3xl font-bold text-slate-800 mb-2",children:"Add Learning Resources"}),h.jsx("p",{className:"text-slate-500 mb-8",children:"Create educational content to help volunteers learn about environmental conservation."}),f&&h.jsxs("div",{className:"bg-green-100 border border-green-200 text-green-800 rounded-xl p-4 mb-6 flex items-center gap-3",children:[h.jsx("div",{className:"w-5 h-5 bg-green-500 text-white rounded-full flex items-center justify-center text-xs font-bold",children:""}),h.jsx("strong",{children:"Success!"})," Learning resource has been added."]}),h.jsxs("form",{onSubmit:k,className:"max-w-4xl mx-auto",children:[h.jsxs(X0,{title:"Basic Information",icon:"",children:[h.jsx(iu,{label:"Resource Title",htmlFor:"title",children:h.jsx("input",{type:"text",id:"title",value:t.title,onChange:m,className:"w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 outline-none",placeholder:"e.g., Guide to Safe Beach Cleaning",required:!0})}),h.jsx(iu,{label:"Resource Type",htmlFor:"type",children:h.jsxs("select",{id:"type",value:t.type,onChange:m,className:"w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 outline-none bg-white",required:!0,children:[h.jsx("option",{value:"",children:"Select a type..."}),h.jsx("option",{value:"video",children:"Video Tutorial"}),h.jsx("option",{value:"article",children:"Article"}),h.jsx("option",{value:"infographic",children:"Infographic"}),h.jsx("option",{value:"document",children:"Document/PDF"})]})}),h.jsx(iu,{label:"Resource Categories",children:h.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3",children:P7.map(E=>h.jsx("button",{type:"button",onClick:()=>v(E.id),className:`p-3 rounded-full text-sm font-semibold transition-all duration-200 ${i.includes(E.id)?"bg-cyan-600 text-white":"bg-cyan-50 text-cyan-700 hover:bg-cyan-100"}`,children:E.name},E.id))})})]}),h.jsxs(X0,{title:"Content Details",icon:"",children:[h.jsx(iu,{label:"Description",htmlFor:"description",children:h.jsx("textarea",{id:"description",value:t.description,onChange:m,rows:"5",className:"w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 outline-none",placeholder:"What will volunteers learn from this resource?",required:!0})}),h.jsx(iu,{label:"Target Audience",htmlFor:"audience",children:h.jsxs("select",{id:"audience",value:t.audience,onChange:m,className:"w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 outline-none bg-white",required:!0,children:[h.jsx("option",{value:"",children:"Select an audience..."}),h.jsx("option",{value:"beginners",children:"New Volunteers"}),h.jsx("option",{value:"experienced",children:"Experienced Volunteers"}),h.jsx("option",{value:"organizers",children:"Event Organizers"}),h.jsx("option",{value:"all",children:"All Audiences"})]})})]}),h.jsx(X0,{title:"Upload File",icon:"",children:h.jsx(M7,{selectedFile:s,onFileSelect:y,onFileRemove:w})}),h.jsxs("div",{className:"mt-8 pt-6 border-t border-slate-200 flex flex-col sm:flex-row gap-4",children:[h.jsxs("button",{type:"submit",disabled:l,className:"w-full sm:w-auto flex items-center justify-center gap-2 bg-cyan-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-cyan-700 transition-all duration-200 disabled:bg-cyan-400 disabled:cursor-not-allowed transform hover:scale-105",children:[l?h.jsx(D7,{}):h.jsx(j7,{}),l?"Adding Resource...":"Add Resource"]}),h.jsxs("button",{type:"button",onClick:_,disabled:l,className:"w-full sm:w-auto flex items-center justify-center gap-2 bg-slate-200 text-slate-700 px-6 py-3 rounded-lg font-semibold hover:bg-slate-300 transition-all duration-200",children:[h.jsx(T7,{}),"Reset Form"]})]})]}),n.length>0&&h.jsxs("div",{className:"mt-10",children:[h.jsx("h3",{className:"text-xl font-bold mb-4",children:"Added Resources"}),h.jsx("ul",{className:"space-y-4",children:n.map(E=>h.jsxs("li",{className:"bg-white rounded-xl p-4 shadow flex flex-col md:flex-row md:items-center md:justify-between",children:[h.jsxs("div",{children:[h.jsx("div",{className:"font-semibold text-lg",children:E.title}),h.jsxs("div",{className:"text-slate-500 text-sm",children:[E.type,"  ",E.audience]}),h.jsx("div",{className:"text-slate-600 mt-1",children:E.description}),h.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:E.categories.map(N=>h.jsx("span",{className:"bg-cyan-100 text-cyan-700 px-2 py-1 rounded text-xs",children:N},N))})]}),E.file&&h.jsxs("div",{className:"mt-4 md:mt-0 md:ml-6 text-slate-500 text-sm",children:[h.jsx("span",{className:"font-medium",children:"File:"})," ",E.file.name]})]},E.id))})]})]})})})};function F7(){return h.jsx("div",{className:"bg-gradient-to-br from-cyan-600 to-cyan-800 min-h-screen font-sans text-slate-800",children:h.jsx("div",{className:"flex flex-col lg:flex-row w-full",children:h.jsx(O7,{})})})}const L7=[{id:1,title:"Q2 2025 Cleanup Impact",date:"2025-06-25",type:"quarterly",status:"published"},{id:2,title:"Marina Beach Project",date:"2025-06-20",type:"project",status:"published"},{id:3,title:"Monthly Volunteer Stats",date:"2025-06-28",type:"monthly",status:"draft"},{id:4,title:"Earth Day Beach Cleanup Event",date:"2025-06-15",type:"event",status:"published"},{id:5,title:"World Ocean Day Campaign",date:"2025-06-10",type:"event",status:"published"},{id:6,title:"Coastal Restoration Initiative",date:"2025-06-05",type:"project",status:"draft"},{id:7,title:"Community Awareness Drive",date:"2025-06-01",type:"event",status:"published"}],B7=({status:n})=>{const e="px-3 py-1 rounded-full text-xs font-semibold uppercase tracking-wider";return n==="published"?h.jsx("span",{className:`${e} bg-green-100 text-green-800`,children:"Published"}):h.jsx("span",{className:`${e} bg-amber-100 text-amber-800`,children:"Draft"})},z7=({type:n})=>{const e="px-2 py-1 rounded-md text-xs font-medium",t={quarterly:"bg-violet-100 text-violet-800",project:"bg-blue-100 text-blue-800",monthly:"bg-red-100 text-red-800",event:"bg-green-100 text-green-800"};return h.jsx("span",{className:`${e} ${t[n]||""}`,children:n})},W7=()=>{const[n,e]=re.useState(null),[t,r]=re.useState(!1),[i,o]=re.useState(!1),[s,a]=re.useState(L7),[l,u]=re.useState([]),[f,p]=re.useState({type:"",status:""}),[m,v]=re.useState("date-desc"),[y,w]=re.useState(!1),[_,k]=re.useState("view"),[E,N]=re.useState(null),[S,A]=re.useState({title:"",date:"",type:"",status:"",content:""}),P=F=>{e(F),A({title:F.title,date:F.date,content:F.content}),r(!1),o(!0)},D=F=>{p(K=>({...K,[F.target.name]:F.target.value}))},j=re.useMemo(()=>s.filter(F=>{const K=!f.type||F.type===f.type,te=!f.status||F.status===f.status;return K&&te}).sort((F,K)=>{switch(m){case"date-desc":return new Date(K.date)-new Date(F.date);case"date-asc":return new Date(F.date)-new Date(K.date);case"name-asc":return F.title.localeCompare(K.title);case"name-desc":return K.title.localeCompare(F.title);default:return 0}}),[s,f,m]),T=F=>{const K={...n,...S,status:F},te=s.map(se=>se.id===K.id?K:se);a(te),o(!1),e(null)},M=F=>{u(K=>K.includes(F)?K.filter(te=>te!==F):[...K,F])},L=F=>{F.target.checked?u(j.map(K=>K.id)):u([])},B=()=>{if(l.length===0)return;const F=s.filter(K=>l.includes(K.id)).map(K=>K.title);alert(`Exporting ${l.length} reports:
${F.join(`
`)}`)};return h.jsxs("div",{className:"flex-1 bg-slate-50 p-4 md:p-8 overflow-y-auto",children:[h.jsxs("div",{className:"mb-6 flex flex-wrap gap-4 items-center justify-between",children:[h.jsxs("div",{className:"flex gap-4",children:[h.jsx("button",{className:"bg-sky-500 text-white font-semibold px-5 py-2.5 rounded-xl shadow-md hover:bg-sky-600 transition-all transform hover:-translate-y-0.5",children:"Generate New Report"}),h.jsx("button",{onClick:B,disabled:l.length===0,className:"bg-slate-200 text-slate-700 font-semibold px-5 py-2.5 rounded-xl hover:bg-slate-300 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Export Selected"})]}),h.jsxs("div",{className:"flex gap-2",children:[h.jsxs("select",{name:"type",onChange:D,className:"bg-white border border-slate-300 rounded-lg px-3 py-2 text-sm",children:[h.jsx("option",{value:"",children:"All Types"}),h.jsx("option",{value:"quarterly",children:"Quarterly"}),h.jsx("option",{value:"monthly",children:"Monthly"}),h.jsx("option",{value:"project",children:"Project"}),h.jsx("option",{value:"event",children:"Event"})]}),h.jsxs("select",{name:"status",onChange:D,className:"bg-white border border-slate-300 rounded-lg px-3 py-2 text-sm",children:[h.jsx("option",{value:"",children:"All Status"}),h.jsx("option",{value:"published",children:"Published"}),h.jsx("option",{value:"draft",children:"Draft"})]}),h.jsxs("select",{value:m,onChange:F=>v(F.target.value),className:"bg-white border border-slate-300 rounded-lg px-3 py-2 text-sm",children:[h.jsx("option",{value:"date-desc",children:"Latest First"}),h.jsx("option",{value:"date-asc",children:"Oldest First"}),h.jsx("option",{value:"name-asc",children:"Name A-Z"}),h.jsx("option",{value:"name-desc",children:"Name Z-A"})]})]})]}),h.jsxs("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden",children:[h.jsx("div",{className:`transition-all duration-300 ${l.length>0?"h-auto opacity-100 visible":"h-0 opacity-0 invisible"} overflow-hidden`,children:h.jsxs("div",{className:"bg-sky-50 border-b border-sky-200 p-4 flex items-center gap-4",children:[h.jsxs("span",{className:"font-semibold text-sky-800",children:[l.length," reports selected"]}),h.jsx("button",{onClick:B,className:"bg-sky-500 text-white text-xs font-bold px-3 py-1.5 rounded-md hover:bg-sky-600",children:"Export"}),h.jsx("button",{className:"bg-slate-200 text-slate-700 text-xs font-bold px-3 py-1.5 rounded-md hover:bg-slate-300",children:"Delete"})]})}),h.jsxs("table",{className:"w-full",children:[h.jsx("thead",{className:"bg-slate-50",children:h.jsxs("tr",{children:[h.jsx("th",{className:"p-4 w-12 text-left",children:h.jsx("input",{type:"checkbox",className:"h-4 w-4 rounded border-slate-300 text-sky-600 focus:ring-sky-500",onChange:L,checked:l.length>0&&l.length===j.length,indeterminate:l.length>0&&l.length<j.length})}),h.jsx("th",{className:"p-4 text-left text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Report Title"}),h.jsx("th",{className:"p-4 text-left text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Date Created"}),h.jsx("th",{className:"p-4 text-left text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Type"}),h.jsx("th",{className:"p-4 text-left text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Status"}),h.jsx("th",{className:"p-4 text-left text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Actions"})]})}),h.jsx("tbody",{className:"divide-y divide-slate-100",children:j.map(F=>h.jsxs("tr",{className:`hover:bg-slate-50 ${l.includes(F.id)?"bg-sky-50":""}`,children:[h.jsx("td",{className:"p-4",children:h.jsx("input",{type:"checkbox",className:"h-4 w-4 rounded border-slate-300 text-sky-600 focus:ring-sky-500",checked:l.includes(F.id),onChange:()=>M(F.id)})}),h.jsx("td",{className:"p-4 font-medium text-slate-800",children:F.title}),h.jsx("td",{className:"p-4 text-slate-600",children:F.date}),h.jsx("td",{className:"p-4",children:h.jsx(z7,{type:F.type})}),h.jsx("td",{className:"p-4",children:h.jsx(B7,{status:F.status})}),h.jsx("td",{className:"p-4",children:h.jsx("td",{className:"py-2 px-4 border-b",children:F.status==="published"?h.jsx("button",{className:"bg-sky-500 text-white text-xs font-bold px-3 py-1.5 rounded-md hover:bg-sky-600",onClick:()=>P(F),children:"View"}):h.jsx("button",{className:"bg-amber-500 text-white text-xs font-bold px-3 py-1.5 rounded-md hover:bg-amber-600",onClick:()=>{e(F),r(!0),o(!0),A({title:F.title,date:F.date,type:F.type,status:F.status,content:F.content})},variant:"outline",children:"Edit"})})})]},F.id))})]})]}),i&&h.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 backdrop-blur-sm flex items-center justify-center z-50",children:h.jsxs("div",{className:"bg-white rounded-xl shadow-xl p-6 w-[90%] max-w-lg relative",children:[h.jsx("h2",{className:"text-xl font-bold mb-4",children:t?"Edit Report":"Report Details"}),h.jsxs("div",{className:"mb-4",children:[h.jsx("label",{className:"block font-medium",children:"Title:"}),t?h.jsx("input",{type:"text",value:S.title,onChange:F=>A({...S,title:F.target.value}),className:"w-full border border-slate-300 rounded-lg p-2"}):h.jsx("p",{children:S.title})]}),h.jsxs("div",{className:"mb-4",children:[h.jsx("label",{className:"block font-medium",children:"Date:"}),t?h.jsx("input",{type:"date",value:S.date,onChange:F=>A({...S,date:F.target.value}),className:"w-full border border-slate-300 rounded-lg p-2"}):h.jsx("p",{children:S.date})]}),h.jsxs("div",{className:"mb-4",children:[h.jsx("label",{className:"block font-medium",children:"Content:"}),t?h.jsx("textarea",{value:S.content,onChange:F=>A({...S,content:F.target.value}),className:"w-full border border-slate-300 rounded-lg p-2"}):h.jsx("p",{children:S.content||"No content available."})]}),h.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[h.jsx("button",{onClick:()=>o(!1),className:"bg-gray-300 text-gray-800 px-4 py-2 rounded-lg hover:bg-gray-400",children:"Close"}),t?h.jsxs(h.Fragment,{children:[h.jsx("button",{onClick:()=>T("draft"),className:"bg-yellow-400 text-white px-4 py-2 rounded-lg hover:bg-yellow-500",children:"Save as Draft"}),h.jsx("button",{onClick:()=>T("published"),className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700",children:"Publish"})]}):h.jsx("button",{onClick:()=>r(!0),className:"bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600",children:"Edit"})]})]})})]})};function V7(){return h.jsx("div",{className:"bg-gradient-to-br from-sky-400 to-indigo-500 min-h-screen font-sans text-slate-800",children:h.jsx("div",{className:"flex flex-col lg:flex-row h-screen",children:h.jsx(W7,{})})})}const U7=[{id:1,title:"Marina Beach Cleanup Drive",location:"Marina Beach, Chennai",date:"2025-07-01",time:"06:00",volunteers:{current:45,max:60},target:"500kg waste collection",status:"live"},{id:2,title:"Coastal Restoration Workshop",location:"Kovalam Beach, Kerala",date:"2025-07-01",time:"07:00",volunteers:{current:28,max:35},target:"Mangrove planting & cleanup",status:"live"},{id:3,title:"World Ocean Day Celebration",location:"Juhu Beach, Mumbai",date:"2025-07-08",time:"05:30",volunteers:{current:125,max:150},target:"Awareness campaign + cleanup",status:"upcoming"},{id:4,title:"Plastic-Free Beach Initiative",location:"Calangute Beach, Goa",date:"2025-07-15",time:"06:00",volunteers:{current:67,max:80},target:"Focus on plastic waste removal",status:"upcoming"},{id:5,title:"Earth Day Beach Cleanup",location:"Baga Beach, Goa",date:"2025-06-22",time:"07:00",volunteers:{current:98,max:100},target:"Collected 750kg waste",status:"completed"},{id:6,title:"Community Awareness Drive",location:"Puri Beach, Odisha",date:"2025-06-18",time:"08:00",volunteers:{current:156,max:160},target:"Educated 500+ people",status:"completed"}],Zh=({number:n,label:e,color:t})=>h.jsxs("div",{className:"bg-white rounded-2xl p-6 text-center shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1",children:[h.jsx("div",{className:`text-4xl font-bold mb-2 ${t}`,children:n}),h.jsx("div",{className:"text-sm text-slate-500 font-semibold",children:e})]}),H7=({status:n})=>{const e={live:"bg-red-100 text-red-700 animate-pulse",upcoming:"bg-blue-100 text-blue-700",completed:"bg-green-100 text-green-700"};return h.jsx("div",{className:`absolute top-6 right-6 px-3 py-1.5 rounded-full text-xs font-bold uppercase tracking-wider ${e[n]}`,children:n})},G7=({event:n,onDelete:e,onEdit:t})=>{const r=[{icon:"",text:n.location},{icon:"",text:`${new Date(n.date).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})}, ${n.time}`},{icon:"",text:`${n.volunteers.current}/${n.volunteers.max} volunteers registered`},{icon:"",text:n.target}];return h.jsxs("div",{className:"bg-white rounded-2xl p-6 hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 relative",children:[h.jsx(H7,{status:n.status}),h.jsx("h3",{className:"text-lg font-bold text-slate-800 mb-3 pr-24",children:n.title}),h.jsx("div",{className:"space-y-2 text-sm text-slate-600",children:r.map((i,o)=>h.jsxs("div",{className:"flex items-start",children:[h.jsx("span",{className:"mr-3",children:i.icon}),h.jsx("span",{children:i.text})]},o))}),h.jsxs("div",{className:"mt-5 flex gap-3 flex-wrap",children:[h.jsx("button",{className:"bg-sky-500 text-white font-semibold px-4 py-2 text-xs rounded-lg hover:bg-sky-600 transition-all",children:n.status==="live"?"View Live":n.status==="upcoming"?"View Details":"View Report"}),h.jsx("button",{onClick:()=>t(n),className:"bg-yellow-100 text-yellow-700 font-semibold px-4 py-2 text-xs rounded-lg hover:bg-yellow-200 transition-all",children:"Edit"}),h.jsx("button",{onClick:()=>e(n.id),className:"bg-red-100 text-red-600 font-semibold px-4 py-2 text-xs rounded-lg hover:bg-red-200 transition-all",children:"Delete"})]})]})},$7=({isOpen:n,onClose:e,onSaveEvent:t,editEvent:r})=>{const[i,o]=re.useState({name:"",description:"",location:"",date:"",time:"",minVolunteers:"",maxVolunteers:""}),[s,a]=re.useState(null);re.useEffect(()=>{o(r?{name:r.title,description:r.target,location:r.location,date:r.date,time:r.time,minVolunteers:"",maxVolunteers:r.volunteers.max}:{name:"",description:"",location:"",date:"",time:"",minVolunteers:"",maxVolunteers:""})},[r]);const l=p=>{o(m=>({...m,[p.target.id]:p.target.value}))},u=re.useCallback(p=>{const m={marina:{min:40,max:80},juhu:{min:50,max:100},calangute:{min:30,max:60},kovalam:{min:20,max:40},default:{min:25,max:50}},v=p.toLowerCase();for(let y in m)if(v.includes(y))return m[y];return m.default},[]);re.useEffect(()=>{if(i.location&&i.date&&i.name){const p=setTimeout(()=>{const m=u(i.location);a(m),o(v=>({...v,minVolunteers:m.min,maxVolunteers:m.max}))},500);return()=>clearTimeout(p)}else a(null)},[i.name,i.location,i.date,u]);const f=()=>{const p={id:r?.id||Date.now(),title:i.name,location:i.location,date:i.date,time:i.time,volunteers:{current:r?.volunteers?.current||0,max:Number(i.maxVolunteers)},target:i.description.substring(0,50)+"...",status:r?.status||"upcoming"};t(p),e()};return n?h.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:h.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-3xl max-h-[90vh] flex flex-col",children:[h.jsxs("div",{className:"p-6 border-b flex justify-between items-center",children:[h.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:r?"Edit Event":"Create New Event"}),h.jsx("button",{onClick:e,className:"text-3xl text-slate-400 hover:text-slate-700",children:""})]}),h.jsxs("div",{className:"p-6 space-y-5 overflow-y-auto",children:[h.jsx("input",{id:"name",value:i.name,onChange:l,placeholder:"Event Name",className:"w-full p-3 border-2 border-slate-200 rounded-lg focus:border-sky-500 outline-none"}),h.jsx("textarea",{id:"description",value:i.description,onChange:l,placeholder:"Event Description",className:"w-full p-3 border-2 border-slate-200 rounded-lg focus:border-sky-500 outline-none min-h-[100px]"}),h.jsx("input",{id:"location",value:i.location,onChange:l,placeholder:"Location (e.g., Juhu Beach, Mumbai)",className:"w-full p-3 border-2 border-slate-200 rounded-lg focus:border-sky-500 outline-none"}),h.jsx("div",{className:"h-48 bg-slate-100 rounded-lg flex items-center justify-center text-slate-500",children:" Interactive map placeholder"}),h.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[h.jsx("input",{id:"date",type:"date",value:i.date,onChange:l,className:"w-full p-3 border-2 border-slate-200 rounded-lg focus:border-sky-500 outline-none"}),h.jsx("input",{id:"time",type:"time",value:i.time,onChange:l,className:"w-full p-3 border-2 border-slate-200 rounded-lg focus:border-sky-500 outline-none"})]}),s&&h.jsxs("div",{className:"bg-sky-50 border border-sky-200 rounded-xl p-4 transition-all",children:[h.jsx("h4",{className:"font-bold text-sky-800 mb-2",children:" AI Volunteer Recommendations"}),h.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[h.jsxs("div",{className:"bg-white p-3 rounded-lg text-center",children:[h.jsx("div",{className:"text-xs text-slate-500",children:"Min Volunteers"}),h.jsx("div",{className:"text-2xl font-bold",children:s.min})]}),h.jsxs("div",{className:"bg-white p-3 rounded-lg text-center",children:[h.jsx("div",{className:"text-xs text-slate-500",children:"Max Volunteers"}),h.jsx("div",{className:"text-2xl font-bold",children:s.max})]})]})]}),h.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[h.jsx("input",{id:"minVolunteers",type:"number",value:i.minVolunteers,onChange:l,placeholder:"Min Volunteers",className:"w-full p-3 border-2 border-slate-200 rounded-lg focus:border-sky-500 outline-none"}),h.jsx("input",{id:"maxVolunteers",type:"number",value:i.maxVolunteers,onChange:l,placeholder:"Max Volunteers",className:"w-full p-3 border-2 border-slate-200 rounded-lg focus:border-sky-500 outline-none"})]})]}),h.jsxs("div",{className:"p-6 border-t flex justify-end gap-4",children:[h.jsx("button",{onClick:e,className:"bg-slate-100 text-slate-700 font-semibold px-5 py-2.5 rounded-xl hover:bg-slate-200",children:"Cancel"}),h.jsx("button",{onClick:f,className:"bg-sky-500 text-white font-semibold px-5 py-2.5 rounded-xl hover:bg-sky-600",children:r?"Save Changes":"Create Event"})]})]})}):null},q7=()=>{const[n,e]=re.useState(U7),[t,r]=re.useState("all"),[i,o]=re.useState(!1),[s,a]=re.useState(null),l=re.useMemo(()=>({completed:n.filter(y=>y.status==="completed").length,upcoming:n.filter(y=>y.status==="upcoming").length,live:n.filter(y=>y.status==="live").length,participants:n.reduce((y,w)=>y+w.volunteers.current,0)}),[n]),u=re.useMemo(()=>t==="all"?n:n.filter(y=>y.status===t),[n,t]),f=y=>{e(w=>w.filter(_=>_.id!==y))},p=y=>{a(y),o(!0)},m=y=>{e(w=>w.some(k=>k.id===y.id)?w.map(k=>k.id===y.id?y:k):[y,...w]),a(null)},v=({status:y,children:w})=>h.jsx("button",{onClick:()=>r(y),className:`px-4 py-2 rounded-lg font-semibold text-sm transition-all ${t===y?"bg-white text-slate-800 shadow-md":"bg-white/50 text-slate-600 hover:bg-white/80"}`,children:w});return h.jsxs("div",{className:"flex-1 bg-slate-50 p-4 md:p-8 overflow-y-auto",children:[h.jsx($7,{isOpen:i,onClose:()=>{o(!1),a(null)},onSaveEvent:m,editEvent:s}),h.jsx("header",{className:"bg-white rounded-2xl p-6 md:p-8 mb-8 shadow-lg",children:h.jsx("p",{className:"text-slate-500 mt-1",children:"Organize and track environmental cleanup events"})}),h.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6 mb-8",children:[h.jsx(Zh,{number:l.completed,label:"Completed Events",color:"text-green-500"}),h.jsx(Zh,{number:l.upcoming,label:"Upcoming Events",color:"text-blue-500"}),h.jsx(Zh,{number:l.live,label:"Live Events",color:"text-red-500"}),h.jsx(Zh,{number:l.participants,label:"Total Participants",color:"text-indigo-500"})]}),h.jsxs("div",{className:"mb-8 flex flex-wrap gap-4 items-center justify-between",children:[h.jsx("button",{onClick:()=>{a(null),o(!0)},className:"bg-sky-500 text-white font-semibold px-5 py-2.5 rounded-xl shadow-md hover:bg-sky-600 transition-all transform hover:-translate-y-0.5",children:"Add New Event"}),h.jsxs("div",{className:"flex gap-2 p-1 bg-slate-200/50 rounded-xl",children:[h.jsx(v,{status:"all",children:"All Events"}),h.jsx(v,{status:"live",children:"Live"}),h.jsx(v,{status:"upcoming",children:"Upcoming"}),h.jsx(v,{status:"completed",children:"Completed"})]})]}),h.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:u.map(y=>h.jsx(G7,{event:y,onDelete:f,onEdit:p},y.id))})]})};function K7(){return h.jsx("div",{className:"bg-gradient-to-br from-sky-400 to-indigo-500 min-h-screen font-sans text-slate-800",children:h.jsx("div",{className:"flex flex-col lg:flex-row w-full",children:h.jsx(q7,{})})})}const X7=()=>{const[n,e]=re.useState({trash:250,gloves:120,pickers:45,buckets:30,firstaid:8,water:80}),[t,r]=re.useState({eventName:"",eventDate:"2025-06-24",volunteers:"",duration:"4 hours"}),[i,o]=re.useState({trash:250,gloves:120,pickers:45,buckets:30,firstaid:8,water:80}),s=[{key:"trash",name:"Trash Bags",icon:""},{key:"gloves",name:"Gloves",icon:""},{key:"pickers",name:"Grabbers/Pickers",icon:""},{key:"buckets",name:"Buckets",icon:""},{key:"firstaid",name:"First Aid Kits",icon:""},{key:"water",name:"Water Bottles",icon:""}],a=m=>{const v=i[m];v!==""&&v>=0&&e(y=>({...y,[m]:parseInt(v)}))},l=(m,v)=>{o(y=>({...y,[m]:v}))},u=(m,v)=>{m.key==="Enter"&&a(v)},f=(m,v)=>{r(y=>({...y,[m]:v}))},p=()=>{const m=parseInt(t.volunteers);if(!m||m<=0){alert("Please enter a valid number of volunteers first!");return}const v=Math.ceil(m*2),y=m,w=Math.ceil(m*.3),_=Math.ceil(m*.2),k=Math.ceil(m/25),N=`Estimated Requirements for ${m} volunteers:

 Trash Bags: ${v}
 Gloves: ${y}
 Grabbers/Pickers: ${w}
 Buckets: ${_}
 First Aid Kits: ${k}
 Water Bottles: ${m}`;alert(N)};return h.jsx("div",{className:"min-h-screen bg-white p-6",children:h.jsxs("div",{className:"max-w-7xl mx-auto space-y-8",children:[h.jsxs("div",{className:"bg-white/90 backdrop-blur-sm rounded-2xl p-8 shadow-xl border border-white/30",children:[h.jsx("h2",{className:"text-3xl font-bold text-black mb-8 flex items-center gap-3",children:" Tools Inventory"}),h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:s.map(({key:m,name:v,icon:y})=>h.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-lg border-2 border-cyan-100 hover:border-cyan-500 transition-all duration-300 hover:-translate-y-1 hover:shadow-xl",children:[h.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[h.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-cyan-500 to-cyan-600 rounded-xl flex items-center justify-center text-xl",children:y}),h.jsx("div",{className:"text-lg font-semibold text-black",children:v})]}),h.jsxs("div",{className:"flex justify-between items-center mb-4",children:[h.jsx("span",{className:"text-black font-medium",children:"Available:"}),h.jsx("div",{className:"bg-green-100 text-green-700 px-3 py-1 rounded-full font-semibold text-base",children:n[m]})]}),h.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[h.jsx("input",{type:"number",value:i[m],onChange:w=>l(m,w.target.value),onKeyPress:w=>u(w,m),className:"flex-1 px-3 py-2 border-2 border-gray-200 rounded-lg focus:border-cyan-500 focus:outline-none focus:ring-2 focus:ring-cyan-200 transition-all text-sm",placeholder:"Enter quantity",min:"0"}),h.jsx("button",{onClick:()=>a(m),className:"bg-gradient-to-r from-cyan-500 to-cyan-600 text-white px-4 py-2 rounded-lg font-semibold hover:-translate-y-1 hover:shadow-lg transition-all duration-300 text-sm whitespace-nowrap",children:"Update"})]})]},m))})]}),h.jsxs("div",{className:"bg-white/90 backdrop-blur-sm rounded-2xl p-8 shadow-xl border border-white/30",children:[h.jsx("h2",{className:"text-3xl font-bold text-black mb-8 flex items-center gap-3",children:" Event Planning"}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-black font-semibold mb-2",children:"Event Name"}),h.jsx("input",{type:"text",value:t.eventName,onChange:m=>f("eventName",m.target.value),className:"w-full px-4 py-4 border-2 border-cyan-100 rounded-xl focus:border-cyan-500 focus:outline-none focus:ring-2 focus:ring-cyan-200 transition-all",placeholder:"Enter event name"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-black font-semibold mb-2",children:"Event Date"}),h.jsx("input",{type:"date",value:t.eventDate,onChange:m=>f("eventDate",m.target.value),className:"w-full px-4 py-4 border-2 border-cyan-100 rounded-xl focus:border-cyan-500 focus:outline-none focus:ring-2 focus:ring-cyan-200 transition-all"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-black font-semibold mb-2",children:"Number of Volunteers"}),h.jsx("input",{type:"number",value:t.volunteers,onChange:m=>f("volunteers",m.target.value),className:"w-full px-4 py-4 border-2 border-cyan-100 rounded-xl focus:border-cyan-500 focus:outline-none focus:ring-2 focus:ring-cyan-200 transition-all",placeholder:"Enter number of volunteers",min:"1"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-black font-semibold mb-2",children:"Event Duration"}),h.jsxs("select",{value:t.duration,onChange:m=>f("duration",m.target.value),className:"w-full px-4 py-4 border-2 border-cyan-100 rounded-xl focus:border-cyan-500 focus:outline-none focus:ring-2 focus:ring-cyan-200 transition-all",children:[h.jsx("option",{value:"2 hours",children:"2 hours"}),h.jsx("option",{value:"3 hours",children:"3 hours"}),h.jsx("option",{value:"4 hours",children:"4 hours"}),h.jsx("option",{value:"5 hours",children:"5 hours"}),h.jsx("option",{value:"6 hours",children:"6 hours"}),h.jsx("option",{value:"8 hours",children:"8 hours"})]})]})]}),h.jsx("button",{onClick:p,className:"bg-gradient-to-r from-green-500 to-green-600 text-white px-10 py-4 rounded-xl text-lg font-semibold hover:-translate-y-1 hover:shadow-xl transition-all duration-300 flex items-center gap-3 mx-auto",children:" Calculate Tool Requirements"})]})]})})};function Y7(){return h.jsx("div",{className:"min-h-screen bg-white flex items-start justify-center p-2 sm:p-4 font-sans",children:h.jsx(J7,{})})}function J7(){const n=[{id:1,name:"Sarah Johnson",type:"volunteer",rating:5,text:"Great organization and impact! The cleanup events are well-organized and make a real difference in our community.",date:"2025-06-25",avatar:"S"},{id:2,name:"Mike Chen",type:"organizer",rating:4,text:"Excellent platform for coordinating environmental activities. The volunteer management system works smoothly.",date:"2025-06-23",avatar:"M"},{id:3,name:"Emma Davis",type:"volunteer",rating:5,text:"Love participating in beach cleanups! The team is passionate and the events are always well-planned.",date:"2025-06-20",avatar:"E"},{id:4,name:"Raj Patel",type:"organizer",rating:4,text:"Good coordination between organizers and volunteers. The impact reporting features are very helpful.",date:"2025-06-18",avatar:"R"},{id:5,name:"Anita Sharma",type:"volunteer",rating:5,text:"Amazing experience volunteering with EcoAction. Every cleanup feels meaningful and impactful.",date:"2025-06-15",avatar:"A"},{id:6,name:"David Wilson",type:"organizer",rating:3,text:"The platform is functional but could use some improvements in the equipment tracking system.",date:"2025-06-12",avatar:"D"},{id:7,name:"Lisa Martinez",type:"volunteer",rating:5,text:"Outstanding environmental work! The community impact is visible and inspiring.",date:"2025-06-10",avatar:"L"},{id:8,name:"James Thompson",type:"organizer",rating:4,text:"Efficient organization and great volunteer engagement. The weather forecast integration is particularly useful.",date:"2025-06-08",avatar:"J"},{id:9,name:"Olivia Green",type:"volunteer",rating:4,text:"A very fulfilling experience. The staff is supportive and the mission is clear.",date:"2025-06-05",avatar:"O"},{id:10,name:"Daniel Lee",type:"organizer",rating:5,text:"Seamless event creation and management. Highly recommend for environmental initiatives.",date:"2025-06-01",avatar:"D"}],[e,t]=re.useState("all"),[r,i]=re.useState("all"),[o,s]=re.useState("newest"),[a,l]=re.useState(""),u=w=>"".repeat(w)+"".repeat(5-w),f=w=>new Date(w).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),p=re.useMemo(()=>{let w=[...n];return e!=="all"&&(w=w.filter(_=>_.type===e)),r!=="all"&&(w=w.filter(_=>_.rating===parseInt(r))),a&&(w=w.filter(_=>_.name.toLowerCase().includes(a.toLowerCase())||_.text.toLowerCase().includes(a.toLowerCase()))),w.sort((_,k)=>{switch(o){case"newest":return new Date(k.date)-new Date(_.date);case"oldest":return new Date(_.date)-new Date(k.date);case"highest":return k.rating-_.rating;case"lowest":return _.rating-k.rating;default:return 0}}),w},[n,e,r,o,a]),m=re.useMemo(()=>n.length===0?"N/A":(n.reduce((_,k)=>_+k.rating,0)/n.length).toFixed(1)+"/5",[n]),v=n.length;return h.jsxs("div",{className:"w-full max-w-5xl mx-auto h-full flex flex-col",children:[h.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3 mb-4",children:[h.jsxs("div",{className:"bg-white bg-opacity-95 backdrop-blur-md p-3 rounded-xl shadow-lg text-center transition-transform duration-300 hover:translate-y-[-2px]",children:[h.jsx("div",{className:"text-2xl font-bold text-cyan-600 mb-1",children:m}),h.jsx("div",{className:"text-gray-600 text-sm font-medium",children:"Overall Rating"})]}),h.jsxs("div",{className:"bg-white bg-opacity-95 backdrop-blur-md p-3 rounded-xl shadow-lg text-center transition-transform duration-300 hover:translate-y-[-2px]",children:[h.jsx("div",{className:"text-2xl font-bold text-cyan-600 mb-1",children:v}),h.jsx("div",{className:"text-gray-600 text-sm font-medium",children:"Total Feedback"})]}),h.jsxs("div",{className:"bg-white bg-opacity-95 backdrop-blur-md p-3 rounded-xl shadow-lg text-center transition-transform duration-300 hover:translate-y-[-2px]",children:[h.jsx("div",{className:"text-2xl font-bold text-cyan-600 mb-1",children:12}),h.jsx("div",{className:"text-gray-600 text-sm font-medium",children:"Pending Responses"})]})]}),h.jsxs("div",{className:"bg-white bg-opacity-95 backdrop-blur-md rounded-xl p-4 shadow-lg flex-1 flex flex-col min-h-0",children:[h.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-4 gap-3",children:[h.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"All Feedback"}),h.jsxs("div",{className:"flex flex-wrap gap-2 items-center text-sm",children:[h.jsxs("select",{className:"p-2 border border-gray-200 rounded-md bg-white text-gray-800 font-medium cursor-pointer focus:outline-none focus:border-cyan-500 transition-all duration-300",value:e,onChange:w=>t(w.target.value),children:[h.jsx("option",{value:"all",children:"All Users"}),h.jsx("option",{value:"volunteer",children:"Volunteers"}),h.jsx("option",{value:"organizer",children:"Organizers"})]}),h.jsxs("select",{className:"p-2 border border-gray-200 rounded-md bg-white text-gray-800 font-medium cursor-pointer focus:outline-none focus:border-cyan-500 transition-all duration-300",value:r,onChange:w=>i(w.target.value),children:[h.jsx("option",{value:"all",children:"All Ratings"}),h.jsx("option",{value:"5",children:"5 Stars"}),h.jsx("option",{value:"4",children:"4 Stars"}),h.jsx("option",{value:"3",children:"3 Stars"}),h.jsx("option",{value:"2",children:"2 Stars"}),h.jsx("option",{value:"1",children:"1 Star"})]}),h.jsxs("select",{className:"p-2 border border-gray-200 rounded-md bg-white text-gray-800 font-medium cursor-pointer focus:outline-none focus:border-cyan-500 transition-all duration-300",value:o,onChange:w=>s(w.target.value),children:[h.jsx("option",{value:"newest",children:"Newest"}),h.jsx("option",{value:"oldest",children:"Oldest"}),h.jsx("option",{value:"highest",children:"Highest"}),h.jsx("option",{value:"lowest",children:"Lowest"})]}),h.jsx("input",{type:"text",className:"p-2 border border-gray-200 rounded-md bg-white w-full sm:w-40 text-sm focus:outline-none focus:border-cyan-500 transition-all duration-300",placeholder:"Search...",value:a,onChange:w=>l(w.target.value)})]})]}),h.jsx("div",{className:"flex-1 overflow-y-auto min-h-0",children:p.length>0?h.jsx("div",{className:"space-y-3 pr-2",children:p.map(w=>h.jsxs("div",{className:"bg-cyan-50 border border-cyan-200 rounded-lg p-4 transition-all duration-300 hover:bg-cyan-100 hover:border-cyan-300",children:[h.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-3",children:[h.jsxs("div",{className:"flex items-center gap-3 mb-2 sm:mb-0",children:[h.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-cyan-500 to-cyan-700 flex items-center justify-center text-white font-bold text-sm",children:w.avatar}),h.jsxs("div",{children:[h.jsx("h4",{className:"text-sm font-semibold text-gray-800",children:w.name}),h.jsx("span",{className:"text-xs text-cyan-600 bg-cyan-100 px-2 py-0.5 rounded-full font-medium",children:w.type.charAt(0).toUpperCase()+w.type.slice(1)})]})]}),h.jsxs("div",{className:"flex flex-col items-end gap-1",children:[h.jsx("div",{className:"text-yellow-500 text-sm",children:u(w.rating)}),h.jsx("div",{className:"text-xs text-gray-500",children:f(w.date)})]})]}),h.jsxs("div",{className:"text-gray-700 text-sm leading-relaxed italic",children:['"',w.text,'"']})]},w.id))}):h.jsx("div",{className:"text-center text-gray-600 py-8",children:"No feedback found matching your criteria."})})]})]})}const ou={volunteers:[{id:1,name:"Sarah Johnson",role:"Volunteer",email:"sarah@email.com",phone:"+91 98765 43210",joinDate:"2025-06-15",eventsParticipated:15,status:"Active",rating:"4.9/5"},{id:2,name:"Mike Chen",role:"Organizer",email:"mike@email.com",phone:"+91 87654 32109",joinDate:"2025-05-20",eventsParticipated:12,status:"Active",rating:"4.8/5"},{id:3,name:"Emma Davis",role:"Volunteer",email:"emma@email.com",phone:"+91 76543 21098",joinDate:"2025-06-01",eventsParticipated:8,status:"Inactive",rating:"4.6/5"},{id:4,name:"Raj Patel",role:"Volunteer",email:"raj@email.com",phone:"+91 99887 76655",joinDate:"2025-04-10",eventsParticipated:10,status:"Active",rating:"4.7/5"},{id:5,name:"Priya Singh",role:"Volunteer",email:"priya@email.com",phone:"+91 78901 23456",joinDate:"2025-03-22",eventsParticipated:6,status:"Active",rating:"4.5/5"}],impactReports:[{id:1,title:"Q2 2025 Environmental Impact",date:"2025-06-30",author:"Admin User",status:"Completed",wasteCollected:"5,120 kg"},{id:2,title:"Half-Year Volunteer Activity Review",date:"2025-06-15",author:"Mike Chen",status:"Completed",wasteCollected:"N/A"},{id:3,title:"Marina Beach Cleanup Summary",date:"2025-06-10",author:"Sarah Johnson",status:"Completed",wasteCollected:"350 kg"},{id:4,title:"Q3 2025 Planning Document",date:"2025-07-01",author:"Admin User",status:"Upcoming",wasteCollected:"N/A"}],events:[{id:1,name:"Ocean Cleanup Drive",date:"2025-07-20",time:"9:00 AM - 1:00 PM",location:"Coastal Park",attendees:85,status:"Upcoming"},{id:2,name:"Mangrove Planting Initiative",date:"2025-07-05",time:"10:00 AM - 12:00 PM",location:"Estuary Reserve",attendees:40,status:"Live"},{id:3,name:"River Bank Restoration",date:"2025-06-25",time:"8:00 AM - 12:00 PM",location:"Riverfront Green",attendees:110,status:"Completed"}],equipment:[{id:1,name:"Gloves (Pairs)",quantity:500,available:450,condition:"Good",last_check:"2025-06-28"},{id:2,name:"Waste Bags (Rolls)",quantity:200,available:180,condition:"Good",last_check:"2025-06-28"},{id:3,name:"Grabbers",quantity:100,available:85,condition:"Good",last_check:"2025-06-28"},{id:4,name:"First Aid Kits",quantity:10,available:8,condition:"Fair",last_check:"2025-06-20"},{id:5,name:"Safety Vests",quantity:150,available:140,condition:"Good",last_check:"2025-06-28"}],feedback:[{id:1,type:"Event Feedback",source:"Volunteer Survey",rating:5,comment:"Great organization for the last cleanup!",date:"2025-06-29"},{id:2,type:"Website Suggestion",source:"Contact Form",rating:4,comment:"Add more details about upcoming projects on the website.",date:"2025-06-28"},{id:3,type:"Volunteer Experience",source:"Direct Email",rating:5,comment:"Enjoyed participating, looking forward to the next one!",date:"2025-06-27"},{id:4,type:"General Inquiry",source:"Contact Form",rating:3,comment:"A bit slow response time for inquiries.",date:"2025-06-26"}]},Q7=({navigateToHome:n})=>{const[e,t]=re.useState(!1),[r,i]=re.useState(!1),[o,s]=re.useState("dashboard"),[a,l]=re.useState("Dashboard"),[u,f]=re.useState(!1),[p,m]=re.useState("all"),[v,y]=re.useState(""),[w,_]=re.useState({title:"",type:"guide",url:"",description:""}),[k,E]=re.useState("all"),[N,S]=re.useState("all"),[A,P]=re.useState("all"),[D,j]=re.useState(""),[T,M]=re.useState("all"),[L,B]=re.useState("all"),[F,K]=re.useState(""),te=()=>{t(!e)},se=()=>{i(!r)},q=(Y,Q)=>{s(Y),l(Q),window.innerWidth<=768&&t(!1)},$=()=>{window.confirm("Are you sure you want to log out?")&&(console.log("User confirmed logout. Navigating to home page."),n&&typeof n=="function"?n():(console.warn("navigateToHome prop not provided, redirecting via window.location"),window.location.href="/"),t(!1),i(!1))};return ou.volunteers.filter(Y=>{const Q=p==="all"||Y.role.toLowerCase()===p,H=Y.name.toLowerCase().includes(v.toLowerCase())||Y.email.toLowerCase().includes(v.toLowerCase());return Q&&H}),ou.impactReports.filter(Y=>k==="all"||Y.status.toLowerCase()===k),ou.events.filter(Y=>N==="all"||Y.status.toLowerCase()===N),ou.equipment.filter(Y=>{const Q=A==="all"||A==="low_stock"&&Y.available<Y.quantity*.2||A==="good_condition"&&Y.condition==="Good"||A==="fair_condition"&&Y.condition==="Fair",H=Y.name.toLowerCase().includes(D.toLowerCase());return Q&&H}),ou.feedback.filter(Y=>{const Q=T==="all"||Y.type.toLowerCase()===T,H=L==="all"||Y.rating.toString()===L,ne=Y.comment.toLowerCase().includes(F.toLowerCase())||Y.source.toLowerCase().includes(F.toLowerCase());return Q&&H&&ne}),h.jsxs("div",{id:"ngo-dashboard-app",children:[h.jsx("style",{children:`
                    * {
                        margin: 0;
                        padding: 0;
                        box-sizing: border-box;
                    }

                    body {
                        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
                        background: #00BCD4;
                        min-height: 100vh;
                        color: #333;
                    }

                    #ngo-dashboard-app {
                        display: flex;
                        min-height: 100vh;
                    }

                    .container { /* Not directly used, App div replaces it */
                        display: flex;
                        min-height: 100vh;
                    }

                    .sidebar {
                        width: 280px;
                        background: #00BCD4; /* Keep sidebar blue */
                        position: fixed;
                        height: 100vh;
                        overflow-y: auto;  /* Prevent vertical scrolling */
                        overflow-x: hidden; /* Prevent horizontal scrolling */
                        transition: all 0.3s ease;
                        display: flex;
                        flex-direction: column;
                    }

                    .sidebar-header {
                        padding: 2rem 1.5rem;
                        border-bottom: 1px solid rgba(255, 255, 255, 0.2); /* White border for contrast */
                        color: white;
                        text-align: center;
                    }

                    .sidebar-header h2 {
                        font-size: 1.5rem;
                        font-weight: 700;
                        margin-bottom: 0.5rem;
                        color: white; /* Ensure title is white */
                    }

                    .sidebar-header p {
                        opacity: 0.9;
                        font-size: 0.9rem;
                        color: white; /* Ensure subtitle is white */
                    }

                    .nav-menu {
                        padding: 1rem 0;
                        flex: 1;
                        background: white; /* Changed to white */
                    }

                    .nav-item {
                        display: block;
                        padding: 1rem 1.5rem;
                        color: #4a5568; /* Changed to dark grey for visibility on white background */
                        text-decoration: none;
                        transition: all 0.3s ease;
                        border-left: 4px solid transparent;
                        font-weight: 500;
                        position: relative;
                        overflow: hidden;
                    }

                    .nav-item:hover {
                        background: rgba(0, 180, 219, 0.1); /* Lighter cyan on hover */
                        color: #2d3748; /* Darker grey on hover */
                        border-left-color: #00b4db; /* Cyan border on hover */
                        transform: translateX(5px);
                    }

                    .nav-item.active {
                        background: rgba(0, 180, 219, 0.2); /* More opaque cyan for active */
                        color: #1a202c; /* Even darker grey for active */
                        border-left-color: #00b4db; /* Cyan border for active */
                        font-weight: 600;
                    }

                    .profile-section {
                        padding: 1.5rem;
                        border-top: 1px solid rgba(0, 0, 0, 0.1); /* Changed to black border for contrast with white background */
                        margin-top: auto;
                        background: white; /* Changed to white */
                        color: #1a202c; /* Profile section text changed to dark grey */
                    }

                    .profile-info {
                        display: flex;
                        align-items: center;
                        gap: 1rem;
                    }

                    .profile-avatar {
                        width: 45px;
                        height: 45px;
                        border-radius: 50%;
                        background: linear-gradient(135deg, #00b4db, #0083b0); /* Kept blue background for avatar */
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        color: white; /* Kept white text for avatar */
                        font-weight: bold;
                        font-size: 1.1rem;
                    }

                    .main-content {
                        flex: 1;
                        margin-left: 280px;
                        padding: 2rem;
                        transition: all 0.3s ease;
                        background: cyan-500
                    }

                    .top-bar {
                        background: rgba(255, 255, 255, 0.95);
                        backdrop-filter: blur(20px);
                        padding: 1.5rem 2rem;
                        border-radius: 20px;
                        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
                        margin-bottom: 2rem;
                        display: flex;
                        justify-content: space-between;
                        align-items: center;
                    }

                    .page-title {
                        font-size: 2rem;
                        font-weight: 700;
                        color: #1a202c;
                    }

                    .notification-bell {
                        position: relative;
                        background: none;
                        border: none;
                        font-size: 1.5rem;
                        cursor: pointer;
                        padding: 0.5rem;
                        border-radius: 50%;
                        transition: all 0.3s ease;
                    }

                    .notification-bell:hover {
                        background: rgba(0, 180, 219, 0.1);
                    }

                    .notification-badge {
                        position: absolute;
                        top: 0;
                        right: 0;
                        background: #e53e3e;
                        color: white;
                        border-radius: 50%;
                        width: 18px;
                        height: 18px;
                        font-size: 0.7rem;
                        display: flex;
                        align-items: center;
                        justify-content: center;
                    }

                    .content-area {
                        background: rgba(255, 255, 255, 0.95);
                        backdrop-filter: blur(20px);
                        border-radius: 20px;
                        padding: 2rem;
                        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
                        min-height: 600px;
                    }

                    .content-section {
                        display: none;
                    }

                    .content-section.active {
                        display: block;
                        animation: fadeIn 0.5s ease-in;
                    }

                    @keyframes fadeIn {
                        from { opacity: 0; transform: translateY(20px); }
                        to { opacity: 1; transform: translateY(0); }
                    }

                    .stats-grid {
                        display: grid;
                        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
                        gap: 1.5rem;
                        margin-bottom: 2rem;
                    }

                    .stat-card {
                        background: linear-gradient(135deg, #00b4db 0%, #0083b0 100%);
                        color: white;
                        padding: 2rem;
                        border-radius: 15px;
                        text-align: center;
                        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
                        transition: transform 0.3s ease;
                    }

                    .stat-card:hover {
                        transform: translateY(-5px);
                    }

                    .stat-card h3 {
                        font-size: 2.5rem;
                        font-weight: 700;
                        margin-bottom: 0.5rem;
                    }

                    .top-volunteers {
                        background: #f7fafc;
                        padding: 2rem;
                        border-radius: 15px;
                        margin-top: 2rem;
                    }

                    .volunteer-item {
                        display: flex;
                        align-items: center;
                        padding: 1rem 0;
                        border-bottom: 1px solid #e2e8f0;
                    }

                    .volunteer-item:last-child {
                        border-bottom: none;
                    }

                    .volunteer-avatar {
                        width: 40px;
                        height: 40px;
                        border-radius: 50%;
                        background: linear-gradient(135deg, #00b4db, #0083b0);
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        color: white;
                        font-weight: bold;
                        margin-right: 1rem;
                    }

                    .volunteer-info {
                        flex: 1;
                    }

                    .volunteer-score {
                        background: #00b4db;
                        color: white;
                        padding: 0.25rem 0.75rem;
                        border-radius: 15px;
                        font-size: 0.8rem;
                        font-weight: 600;
                    }

                    .form-group {
                        margin-bottom: 1.5rem;
                    }

                    .form-group label {
                        display: block;
                        margin-bottom: 0.5rem;
                        font-weight: 600;
                        color: #4a5568;
                    }

                    .form-group input,
                    .form-group textarea,
                    .form-group select {
                        width: 100%;
                        padding: 0.75rem;
                        border: 2px solid #e2e8f0;
                        border-radius: 10px;
                        font-size: 1rem;
                        transition: border-color 0.3s ease;
                    }

                    .form-group input:focus,
                    .form-group textarea:focus,
                    .form-group select:focus {
                        outline: none;
                        border-color: #00b4db;
                    }

                    .btn {
                        background: linear-gradient(135deg, #00b4db 0%, #0083b0 100%);
                        color: white;
                        padding: 0.75rem 2rem;
                        border: none;
                        border-radius: 10px;
                        font-size: 1rem;
                        font-weight: 600;
                        cursor: pointer;
                        transition: all 0.3s ease;
                    }

                    .btn:hover {
                        transform: translateY(-2px);
                        box-shadow: 0 8px 25px rgba(0, 180, 219, 0.3);
                    }

                    .btn-secondary {
                        background: #718096;
                        margin-left: 1rem;
                    }

                    .data-table {
                        width: 100%;
                        border-collapse: collapse;
                        margin-top: 1rem;
                    }

                    .data-table th,
                    .data-table td {
                        padding: 1rem;
                        text-align: left;
                        border-bottom: 1px solid #e2e8f0;
                    }

                    .data-table th {
                        background: #f7fafc;
                        font-weight: 600;
                        color: #4a5568;
                    }

                    .filter-controls {
                        display: flex;
                        gap: 1rem;
                        margin-bottom: 2rem;
                        align-items: center;
                        flex-wrap: wrap; /* Allow wrapping on smaller screens */
                    }

                    .filter-controls > * {
                        flex-shrink: 0;
                    }

                    .filter-controls input {
                        flex-grow: 1; /* Allow search input to grow */
                    }

                    .weather-event-card {
                        background: white;
                        padding: 1.5rem;
                        border-radius: 15px;
                        margin-bottom: 1rem;
                        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
                        border-left: 4px solid #00b4db;
                    }

                    .event-header {
                        display: flex;
                        justify-content: space-between;
                        align-items: center;
                        margin-bottom: 1rem;
                    }

                    .event-status {
                        padding: 0.25rem 0.75rem;
                        border-radius: 15px;
                        font-size: 0.8rem;
                        font-weight: 600;
                    }

                    .status-continue {
                        background: #c6f6d5;
                        color: #22543d;
                    }

                    .status-postpone {
                        background: #fef5e7;
                        color: #9c4221;
                    }

                    .status-cancel {
                        background: #fed7d7;
                        color: #742a2a;
                    }

                    .chart-container {
                        background: white;
                        padding: 2rem;
                        border-radius: 15px;
                        margin-bottom: 2rem;
                        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
                    }

                    .mobile-menu-btn {
                        display: none;
                        position: fixed;
                        top: 1rem;
                        left: 1rem;
                        background: rgba(255, 255, 255, 0.95);
                        border: none;
                        border-radius: 10px;
                        padding: 0.75rem;
                        cursor: pointer;
                        z-index: 1000;
                    }

                    .tag {
                        display: inline-block;
                        padding: 0.25rem 0.75rem;
                        border-radius: 15px;
                        font-size: 0.8rem;
                        font-weight: 600;
                        margin-right: 0.5rem;
                    }

                    .tag-completed {
                        background: #c6f6d5;
                        color: #22543d;
                    }

                    .tag-upcoming {
                        background: #bee3f8;
                        color: #2a4365;
                    }

                    .tag-live {
                        background: #fed7d7;
                        color: #742a2a;
                    }

                    @media (max-width: 768px) {
                        .mobile-menu-btn {
                            display: block;
                        }

                        .sidebar {
                            transform: translateX(-100%);
                        }

                        .sidebar.open {
                            transform: translateX(0);
                        }

                        .main-content {
                            margin-left: 0;
                            padding: 1rem;
                            padding-top: 5rem;
                        }

                        .top-bar {
                            flex-direction: column;
                            gap: 1rem;
                            text-align: center;
                        }

                        .stats-grid {
                            grid-template-columns: 1fr;
                        }

                        .filter-controls {
                            flex-direction: column;
                            align-items: stretch;
                        }
                    }

                    .notification-panel {
                        position: fixed;
                        top: 5rem;
                        right: 2rem;
                        width: 350px;
                        background: white;
                        border-radius: 15px;
                        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
                        padding: 1.5rem;
                        z-index: 1000;
                        /* display: block;  Managed by React state */
                    }

                    .notification-item {
                        padding: 1rem 0;
                        border-bottom: 1px solid #e2e8f0;
                    }

                    .notification-item:last-child {
                        border-bottom: none;
                    }

                    .logout-button { /* New style for logout button */
                        width: calc(100% - 3rem); /* Full width minus padding */
                        margin: 1rem 1.5rem 1.5rem 1.5rem; /* Top, right, bottom, left */
                        background: white; /* Changed to white */
                        color: #00b4db; /* Changed text color to cyan */
                        border: 1px solid #00b4db; /* Added cyan border */
                        padding: 0.75rem 1.5rem;
                        border-radius: 10px;
                        font-size: 1rem;
                        font-weight: 600;
                        cursor: pointer;
                        transition: all 0.3s ease;
                        text-align: center;
                    }

                    .logout-button:hover {
                        background: #e0f7fa; /* Lighter cyan on hover */
                        transform: translateY(-2px);
                        box-shadow: 0 8px 25px rgba(0, 180, 219, 0.3);
                    }
                `}),h.jsx("button",{className:"mobile-menu-btn",onClick:te,children:""}),h.jsxs("aside",{className:`sidebar ${e?"open":""}`,id:"sidebar",children:[h.jsxs("div",{className:"sidebar-header",children:[h.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"0.5rem"},children:[h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"white",style:{height:"2rem",width:"2rem",marginRight:"0.5rem"},children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),h.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:700,margin:0,color:"white"},children:"Beach Warriors"})]}),h.jsx("p",{style:{color:"white"},children:"Admin Dashboard"})]}),h.jsxs("nav",{className:"nav-menu",children:[h.jsx("a",{href:"#",className:`nav-item ${o==="dashboard"?"active":""}`,onClick:()=>q("dashboard","Dashboard"),children:"Dashboard"}),h.jsx("a",{href:"#",className:`nav-item ${o==="analytics"?"active":""}`,onClick:()=>q("analytics","Analytics"),children:"Analytics"}),h.jsx("a",{href:"#",className:`nav-item ${o==="volunteers"?"active":""}`,onClick:()=>q("volunteers","Volunteers & Organizers"),children:"All Volunteers & Organizers"}),h.jsx("a",{href:"#",className:`nav-item ${o==="weather"?"active":""}`,onClick:()=>q("weather","Smart Weather Forecast"),children:"Smart Weather Forecast"}),h.jsx("a",{href:"#",className:`nav-item ${o==="resources"?"active":""}`,onClick:()=>q("resources","Learning Resources"),children:"Learning Resources"}),h.jsx("a",{href:"#",className:`nav-item ${o==="reports"?"active":""}`,onClick:()=>q("reports","Impact Reports"),children:"All Impact Reports"}),h.jsx("a",{href:"#",className:`nav-item ${o==="events"?"active":""}`,onClick:()=>q("events","Events"),children:"Events"}),h.jsx("a",{href:"#",className:`nav-item ${o==="equipment"?"active":""}`,onClick:()=>q("equipment","Equipment Dashboard"),children:"Equipment Dashboard"}),h.jsx("a",{href:"#",className:`nav-item ${o==="feedback"?"active":""}`,onClick:()=>q("feedback","Feedback Management"),children:"Feedback Management"})]}),h.jsxs("div",{className:"profile-section",children:[h.jsxs("div",{className:"profile-info",children:[h.jsx("div",{className:"profile-avatar",children:"A"}),h.jsxs("div",{children:[h.jsx("div",{style:{fontWeight:600,color:"#1a202c"},children:"Admin1"}),h.jsx("div",{style:{color:"#718096",fontSize:"0.9rem"},children:"Admin"})]})]}),h.jsx("button",{className:"logout-button",onClick:$,children:"Logout"})]})]}),h.jsxs("main",{className:"main-content",children:[h.jsxs("div",{className:"top-bar",children:[h.jsx("h1",{className:"page-title",id:"page-title",children:a}),h.jsxs("button",{className:"notification-bell",onClick:se,children:["",h.jsx("span",{className:"notification-badge",children:"5"})]})]}),r&&h.jsxs("div",{className:"notification-panel relative",id:"notification-panel",children:[h.jsx("button",{onClick:()=>i(!1),className:"absolute top-2 right-2 text-cyan-700 hover:text-red-600 text-xl font-bold focus:outline-none","aria-label":"Close notifications",children:""}),h.jsx("h3",{className:"mb-4 font-semibold text-lg text-cyan-800",children:"Recent Activities"}),h.jsxs("div",{className:"notification-item",children:[h.jsx("strong",{children:"New volunteer registration:"})," Sarah Johnson",h.jsx("div",{className:"text-sm text-gray-500",children:"2 hours ago"})]}),h.jsxs("div",{className:"notification-item",children:[h.jsx("strong",{children:"Beach cleanup completed:"})," Marina Beach",h.jsx("div",{className:"text-sm text-gray-500",children:"5 hours ago"})]}),h.jsxs("div",{className:"notification-item",children:[h.jsx("strong",{children:"Impact report submitted:"})," Q2 2025",h.jsx("div",{className:"text-sm text-gray-500",children:"1 day ago"})]}),h.jsxs("div",{className:"notification-item",children:[h.jsx("strong",{children:"Equipment maintenance:"})," Scheduled",h.jsx("div",{className:"text-sm text-gray-500",children:"2 days ago"})]}),h.jsxs("div",{className:"notification-item",children:[h.jsx("strong",{children:"New feedback received:"})," 4.8/5 rating",h.jsx("div",{className:"text-sm text-gray-500",children:"3 days ago"})]})]}),h.jsxs("div",{className:"content-area",children:[h.jsxs("div",{id:"dashboard",className:`content-section ${o==="dashboard"?"active":""}`,children:[h.jsxs("div",{className:"stats-grid",children:[h.jsxs("div",{className:"stat-card",children:[h.jsx("h3",{children:"1,247"}),h.jsx("p",{children:"Active Volunteers"})]}),h.jsxs("div",{className:"stat-card",children:[h.jsx("h3",{children:"89"}),h.jsx("p",{children:"Beach Cleanups"})]}),h.jsxs("div",{className:"stat-card",children:[h.jsx("h3",{children:"15.2k"}),h.jsx("p",{children:"Kg Waste Collected"})]}),h.jsxs("div",{className:"stat-card",children:[h.jsx("h3",{children:"342"}),h.jsx("p",{children:"Impact Reports"})]})]}),h.jsxs("div",{className:"top-volunteers",children:[h.jsx("h3",{style:{marginBottom:"1rem"},children:"Top Volunteers This Month"}),h.jsxs("div",{className:"volunteer-item",children:[h.jsx("div",{className:"volunteer-avatar",children:"S"}),h.jsxs("div",{className:"volunteer-info",children:[h.jsx("div",{style:{fontWeight:600},children:"Sarah Johnson"}),h.jsx("div",{style:{color:"#718096",fontSize:"0.9rem"},children:"15 cleanups participated"})]}),h.jsx("div",{className:"volunteer-score",children:"98 pts"})]}),h.jsxs("div",{className:"volunteer-item",children:[h.jsx("div",{className:"volunteer-avatar",children:"M"}),h.jsxs("div",{className:"volunteer-info",children:[h.jsx("div",{style:{fontWeight:600},children:"Mike Chen"}),h.jsx("div",{style:{color:"#718096",fontSize:"0.9rem"},children:"12 cleanups organized"})]}),h.jsx("div",{className:"volunteer-score",children:"94 pts"})]}),h.jsxs("div",{className:"volunteer-item",children:[h.jsx("div",{className:"volunteer-avatar",children:"E"}),h.jsxs("div",{className:"volunteer-info",children:[h.jsx("div",{style:{fontWeight:600},children:"Emma Davis"}),h.jsx("div",{style:{color:"#718096",fontSize:"0.9rem"},children:"10 cleanups participated"})]}),h.jsx("div",{className:"volunteer-score",children:"87 pts"})]}),h.jsxs("div",{className:"volunteer-item",children:[h.jsx("div",{className:"volunteer-avatar",children:"R"}),h.jsxs("div",{className:"volunteer-info",children:[h.jsx("div",{style:{fontWeight:600},children:"Raj Patel"}),h.jsx("div",{style:{color:"#718096",fontSize:"0.9rem"},children:"8 cleanups participated"})]}),h.jsx("div",{className:"volunteer-score",children:"82 pts"})]}),h.jsxs("div",{className:"volunteer-item",children:[h.jsx("div",{className:"volunteer-avatar",children:"A"}),h.jsxs("div",{className:"volunteer-info",children:[h.jsx("div",{style:{fontWeight:600},children:"Anita Sharma"}),h.jsx("div",{style:{color:"#718096",fontSize:"0.9rem"},children:"7 cleanups participated"})]}),h.jsx("div",{className:"volunteer-score",children:"78 pts"})]})]})]}),h.jsx("div",{id:"analytics",className:`content-section ${o==="analytics"?"active":""}`,children:h.jsx(b7,{})}),h.jsx("div",{id:"volunteers",className:`content-section ${o==="volunteers"?"active":""}`,children:h.jsx(C7,{})}),h.jsx("div",{id:"weather",className:`content-section ${o==="weather"?"active":""}`,children:h.jsx(R7,{})}),h.jsx("div",{id:"resources",className:`content-section ${o==="resources"?"active":""}`,children:h.jsx(F7,{})}),h.jsx("div",{id:"reports",className:`content-section ${o==="reports"?"active":""}`,children:h.jsx(V7,{})}),h.jsx("div",{id:"events",className:`content-section ${o==="events"?"active":""}`,children:h.jsx(K7,{})}),h.jsx("div",{id:"equipment",className:`content-section ${o==="equipment"?"active":""}`,children:h.jsx(X7,{})}),h.jsx("div",{id:"feedback",className:`content-section ${o==="feedback"?"active":""}`,children:h.jsx(Y7,{})})]})]})]})},Z7=()=>{sessionStorage.clear(),window.location.href="./components/homepage.jsx"},ez=({activeNavItem:n,handleNavItemClick:e})=>{const t=[{key:"welcome",icon:"",label:"Welcome Guide"},{key:"getting-started",icon:"",label:"Getting Started"},{key:"first-cleanup",icon:"",label:"Your First Cleanup"},{key:"learn-basics",icon:"",label:"Learn the Basics"},{key:"profile-setup",icon:"",label:"Setup Profile"},{key:"logout",icon:"",label:"Logout"}];return h.jsxs(h.Fragment,{children:[h.jsx("style",{children:`
          body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #0a0a0a;
            background-image:
              radial-gradient(circle at 20% 50%, rgba(34, 197, 94, 0.08) 0%, transparent 50%),
              radial-gradient(circle at 80% 20%, rgba(59, 130, 246, 0.08) 0%, transparent 50%),
              radial-gradient(circle at 40% 80%, rgba(168, 85, 247, 0.08) 0%, transparent 50%);
            min-height: 100vh;
            color: #ffffff;
          }

          .new-sidebar {
            background: linear-gradient(180deg, #1a1a1a 0%, #0f1419 100%);
            border-right: 2px solid #22c55e;
            box-shadow: 0 0 20px rgba(34, 197, 94, 0.2);
          }

          .new-sidebar-header {
            border-bottom: 2px solid #22c55e;
          }

          .new-logo-glow {
            position: absolute;
            top: -8px;
            left: -8px;
            right: -8px;
            bottom: -8px;
            background: conic-gradient(from 0deg, #22c55e, #3b82f6, #a855f7, #22c55e);
            border-radius: 50%;
            opacity: 0.2;
            animation: gentle-rotate 6s linear infinite;
          }

          .new-sidebar-header h2 {
            text-shadow: 0 0 15px rgba(34, 197, 94, 0.4);
          }

          .new-player-level {
            background: linear-gradient(135deg, #1e293b, #334155);
            border: 1px solid #22c55e;
            box-shadow: 0 0 15px rgba(34, 197, 94, 0.15);
          }

          .new-level-badge {
            background: linear-gradient(135deg, #10b981, #059669);
            animation: new-user-glow 3s ease-in-out infinite alternate;
          }

          .new-xp-bar {
            background: #1e293b;
            border: 1px solid #374151;
          }

          .new-xp-fill {
            background: linear-gradient(90deg, #10b981, #22c55e);
            animation: gentle-pulse 3s ease-in-out infinite alternate;
          }

          .new-nav-item {
            position: relative;
            overflow: hidden;
          }

          .new-nav-item::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            height: 100%;
            width: 0;
            background: linear-gradient(90deg, rgba(16, 185, 129, 0.15), rgba(34, 197, 94, 0.1));
            transition: width 0.3s ease;
          }

          .new-nav-item:hover::before {
            width: 100%;
          }

          .new-nav-item.active {
            background: linear-gradient(90deg, rgba(16, 185, 129, 0.25), rgba(34, 197, 94, 0.1));
            border-left-color: #10b981;
            box-shadow: inset 0 0 15px rgba(16, 185, 129, 0.2);
          }

          .welcome-badge {
            background: linear-gradient(135deg, #3b82f6, #1d4ed8);
            color: white;
            font-size: 0.7rem;
            padding: 2px 8px;
            border-radius: 12px;
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            animation: welcome-bounce 2s ease-in-out infinite;
          }

          @keyframes gentle-rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
          }

          @keyframes new-user-glow {
            0% { box-shadow: 0 0 8px rgba(16, 185, 129, 0.4); }
            100% { box-shadow: 0 0 16px rgba(16, 185, 129, 0.6); }
          }

          @keyframes gentle-pulse {
            0% { box-shadow: 0 0 3px rgba(16, 185, 129, 0.3); }
            100% { box-shadow: 0 0 12px rgba(16, 185, 129, 0.5); }
          }

          @keyframes welcome-bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-3px); }
            60% { transform: translateY(-1px); }
          }

          @keyframes beginner-float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-3px); }
          }

          @media (max-width: 768px) {
            .new-sidebar {
              width: 80px;
            }

            .new-sidebar-header h2,
            .new-sidebar-header p,
            .new-nav-text,
            .new-player-level,
            .welcome-badge {
              display: none;
            }
          }
        `}),h.jsxs("div",{className:"new-sidebar fixed left-0 top-0 w-[280px] h-screen py-5 z-[1000] flex flex-col bg-white border-r border-gray-200",children:[h.jsxs("div",{className:"new-sidebar-header px-5 pb-[30px] text-center border-b-2",children:[h.jsxs("div",{className:"logo-container relative inline-block",children:[h.jsx("div",{className:"new-logo-glow absolute top-[-8px] left-[-8px] right-[-8px] bottom-[-8px] rounded-full opacity-20"}),h.jsx("h2",{className:"text-[1.8rem] mb-1.5 text-[#22c55e] font-extrabold relative z-20",children:" Beach Warriors"})]}),h.jsx("p",{className:"text-sm text-[#64748b] font-semibold uppercase tracking-wide",children:"Beginner Hub"}),h.jsx("div",{className:"welcome-badge mt-2 inline-block",children:"New Warrior!"})]}),h.jsxs("div",{className:"new-player-level mx-5 mt-5 p-4 rounded-xl bg-gray-100",children:[h.jsxs("div",{className:"level-info flex justify-between items-center mb-2.5",children:[h.jsx("div",{className:"new-level-badge text-white px-3 py-1.5 rounded-full text-xs font-bold uppercase bg-green-500",children:"Level 1 "}),h.jsx("div",{className:"xp-text text-sm text-[#94a3b8]",children:"0 / 100 XP"})]}),h.jsx("div",{className:"new-xp-bar h-2 bg-[#1e293b] rounded-md overflow-hidden border border-[#374151]",children:h.jsx("div",{className:"new-xp-fill h-full w-[0%] bg-green-400"})}),h.jsx("div",{className:"mt-2 text-xs text-[#64748b] text-center",children:"Complete your first cleanup to earn XP! "})]}),h.jsx("nav",{className:"nav-menu py-5 flex-1",children:t.slice(0,-1).map(r=>h.jsxs("div",{className:`new-nav-item flex items-center px-5 py-4 cursor-pointer transition-all duration-300 ease-in-out border-l-4 relative overflow-hidden ${n===r.key?"border-l-green-500 bg-green-50 font-semibold text-green-700":"border-l-transparent hover:bg-gray-50"}`,onClick:()=>e(r.key),children:[h.jsx("div",{className:"nav-icon w-6 h-6 mr-4 text-lg",style:{animation:"beginner-float 4s ease-in-out infinite"},children:r.icon}),h.jsx("span",{className:"new-nav-text text-base relative z-20",children:r.label}),r.key==="getting-started"&&h.jsx("div",{className:"ml-auto",children:h.jsx("span",{className:"bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded-full",children:"Start Here"})})]},r.key))}),h.jsx("div",{className:"logout-item px-5 py-4 cursor-pointer",onClick:()=>{window.confirm("Are you sure you want to log out?")&&Z7()},children:h.jsxs("div",{className:`flex items-center border-l-4 transition-all duration-300 ${n==="logout"?"border-l-red-500 bg-red-100 text-red-600":"border-l-transparent hover:bg-gray-50"}`,children:[h.jsx("div",{className:"nav-icon w-6 h-6 mr-4 text-lg",children:""}),h.jsx("span",{className:"new-nav-text text-base",children:"Logout"})]})})]})]})},l_=()=>{const n=re.useRef(null),e=re.useRef(null),[t,r]=re.useState(!0),[i,o]=re.useState(!1),s=()=>r(!1);return re.useEffect(()=>{if(n.current){e.current&&e.current.destroy();const a=n.current.getContext("2d");e.current=new sd(a,{type:"line",data:{labels:["Start Here","First Mission","Second Mission","Third Mission","Fourth Mission","Fifth Mission"],datasets:[{label:"Your Journey Begins",data:[0,0,0,0,0,0],borderColor:"#94a3b8",backgroundColor:"rgba(148, 163, 184, 0.1)",borderWidth:2,borderDash:[5,5],fill:!0,tension:.4,pointBackgroundColor:"#94a3b8"}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!0,labels:{color:"#ffffff"}}},scales:{y:{beginAtZero:!0,max:400,grid:{color:"rgba(148, 163, 184, 0.2)"},ticks:{color:"#94a3b8"}},x:{grid:{color:"rgba(148, 163, 184, 0.2)"},ticks:{color:"#94a3b8"}}}}})}return()=>{e.current&&e.current.destroy()}},[]),re.useEffect(()=>{const a=setTimeout(()=>{o(!0);const l=setTimeout(()=>o(!1),5e3);return()=>clearTimeout(l)},1500);return()=>clearTimeout(a)},[]),h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:`welcome-popup fixed top-5 right-5 p-5 rounded-2xl transition-transform duration-500 z-[1001] ${i?"translate-x-0":"translate-x-[400px]"}`,children:[h.jsx("div",{className:"text-white font-extrabold mb-1.5 text-lg",children:" Welcome, Eco Warrior!"}),h.jsx("div",{className:"text-white text-sm opacity-90",children:"Your environmental journey begins now!"})]}),t&&h.jsxs("div",{className:"notification-banner bg-gradient-to-br from-[#3b82f6] to-[#1d4ed8] text-white p-4 rounded-2xl mb-6 flex items-center justify-between shadow-lg relative overflow-hidden",children:[h.jsxs("div",{className:"notification-text flex items-center font-semibold z-10",children:[h.jsx("span",{className:"notification-icon mr-3 text-2xl animate-bounce",children:""}),"WELCOME TO BEACH WARRIORS! Complete your first mission to earn points!"]}),h.jsx("button",{className:"close-btn bg-white bg-opacity-20 text-white text-3xl rounded-full w-8 h-8 flex items-center justify-center z-10 hover:bg-opacity-30",onClick:s,children:""})]}),h.jsxs("div",{className:"dashboard-header mb-8",children:[h.jsx("h1",{className:"dashboard-title text-[3rem] font-extrabold mb-2.5",children:"Welcome to Your Journey!"}),h.jsx("p",{className:"dashboard-subtitle text-lg text-[#94a3b8] font-medium",children:"Every great warrior starts somewhere. Your first mission awaits!"})]}),h.jsxs("div",{className:"stats-grid grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-9",children:[h.jsxs("div",{className:"stat-card welcome",children:[h.jsx("div",{className:"stat-icon welcome",children:""}),h.jsx("div",{className:"stat-value welcome",children:"1"}),h.jsx("div",{className:"stat-label",children:"Welcome Badge"})]}),h.jsxs("div",{className:"stat-card new-user",children:[h.jsx("div",{className:"stat-icon inactive",children:""}),h.jsx("div",{className:"stat-value zero",children:"0"}),h.jsx("div",{className:"stat-label",children:"Missions"})]}),h.jsxs("div",{className:"stat-card new-user",children:[h.jsx("div",{className:"stat-icon inactive",children:""}),h.jsx("div",{className:"stat-value zero",children:"0"}),h.jsx("div",{className:"stat-label",children:"Waste (kg)"})]}),h.jsxs("div",{className:"stat-card new-user",children:[h.jsx("div",{className:"stat-icon inactive",children:""}),h.jsx("div",{className:"stat-value zero",children:"0"}),h.jsx("div",{className:"stat-label",children:"Points"})]})]}),h.jsxs("div",{className:"chart-section rounded-3xl p-9 mb-9 relative overflow-hidden",children:[h.jsx("h2",{className:"chart-title text-2xl font-extrabold text-white mb-6",children:" Your Journey Starts Here"}),h.jsx("div",{className:"chart-container relative h-[350px]",children:h.jsx("canvas",{ref:n})})]})]})},tz=()=>{const n=[{title:"Sunrise Beach Cleanup",location:"Marina Beach",date:"July 15, 2025",points:150,slots:"15/30"},{title:"Coastal Restoration Project",location:"Elliot's Beach",date:"July 22, 2025",points:200,slots:"10/25"},{title:"Mangrove Planting Drive",location:"Pichavaram",date:"August 5, 2025",points:300,slots:"5/20"}],e=[{title:"Inaugural Cleanup",location:"Besant Nagar Beach",date:"June 28, 2025",points:100,waste:50}];return h.jsxs("div",{children:[h.jsxs("div",{className:"dashboard-header mb-8",children:[h.jsx("h1",{className:"dashboard-title text-[3rem] font-extrabold mb-2.5",children:"Missions Hub"}),h.jsx("p",{className:"dashboard-subtitle text-lg text-[#94a3b8] font-medium",children:"Join a cleanup event and make a difference!"})]}),h.jsxs("div",{className:"upcoming-missions mb-12",children:[h.jsx("h2",{className:"text-2xl font-bold text-white mb-6",children:"Upcoming Missions"}),h.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:n.map((t,r)=>h.jsxs("div",{className:"mission-card rounded-2xl p-6 flex flex-col justify-between",children:[h.jsxs("div",{children:[h.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:t.title}),h.jsxs("p",{className:"text-sm text-slate-400 mb-1",children:[" ",t.location]}),h.jsxs("p",{className:"text-sm text-slate-400 mb-4",children:[" ",t.date]}),h.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[h.jsxs("span",{className:"text-lg font-semibold text-green-400",children:[" ",t.points," Points"]}),h.jsxs("span",{className:"text-sm text-slate-300",children:[" ",t.slots," slots filled"]})]})]}),h.jsx("button",{className:"join-btn text-white font-bold py-2 px-4 rounded-lg w-full",children:"Join Mission"})]},r))})]}),h.jsxs("div",{className:"completed-missions",children:[h.jsx("h2",{className:"text-2xl font-bold text-white mb-6",children:"Completed Missions"}),h.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:e.map((t,r)=>h.jsxs("div",{className:"completed-card mission-card rounded-2xl p-6",children:[h.jsx("h3",{className:"text-xl font-bold text-slate-300 mb-2",children:t.title}),h.jsxs("div",{className:"flex items-center justify-between text-lg",children:[h.jsxs("span",{className:"font-semibold text-amber-400",children:[" ",t.points," Points"]}),h.jsxs("span",{className:"font-semibold text-cyan-400",children:[" ",t.waste,"kg Collected"]})]})]},r))})]})]})},nz=()=>{const n=[{rank:1,name:"Eco Champion",score:5250,avatar:""},{rank:2,name:"Green Guardian",score:4800,avatar:""},{rank:3,name:"Aqua Protector",score:4550,avatar:""},{rank:4,name:"Terra Trooper",score:4200,avatar:""},{rank:15,name:"You (New Recruit)",score:0,avatar:"",isCurrentUser:!0}];return h.jsxs("div",{children:[h.jsxs("div",{className:"dashboard-header mb-8",children:[h.jsx("h1",{className:"dashboard-title text-[3rem] font-extrabold mb-2.5",children:"Leaderboard"}),h.jsx("p",{className:"dashboard-subtitle text-lg text-[#94a3b8] font-medium",children:"See who's making the biggest impact!"})]}),h.jsx("div",{className:"leaderboard-table rounded-2xl p-6",children:n.map(e=>h.jsxs("div",{className:`table-row flex items-center p-4 rounded-lg transition-all duration-300 ${e.isCurrentUser?"current-user":""}`,children:[h.jsx("div",{className:"rank w-16 text-center",children:e.rank}),h.jsxs("div",{className:"flex items-center flex-grow",children:[h.jsx("div",{className:"text-2xl mr-4",children:e.avatar}),h.jsx("span",{className:"font-bold text-lg text-white",children:e.name})]}),h.jsxs("div",{className:"font-bold text-xl text-green-400",children:[e.score," PTS"]})]},e.rank))})]})},rz=()=>{const n={name:"New Recruit",level:1,points:0,joinDate:"July 3, 2025",avatar:""},e=[{name:"Welcome Badge",earned:!0,icon:""},{name:"First Mission",earned:!1,icon:""},{name:"Waste Collector",earned:!1,icon:""}];return h.jsxs("div",{children:[h.jsxs("div",{className:"dashboard-header mb-8",children:[h.jsx("h1",{className:"dashboard-title text-[3rem] font-extrabold mb-2.5",children:"Your Profile"}),h.jsx("p",{className:"dashboard-subtitle text-lg text-[#94a3b8] font-medium",children:"Your personal warrior stats and achievements."})]}),h.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[h.jsx("div",{className:"lg:col-span-1",children:h.jsxs("div",{className:"profile-card p-8 rounded-2xl text-center",children:[h.jsx("div",{className:"text-7xl mb-4",children:n.avatar}),h.jsx("h2",{className:"text-2xl font-bold text-white",children:n.name}),h.jsxs("p",{className:"text-blue-400 font-semibold",children:["Level ",n.level]}),h.jsxs("div",{className:"my-6",children:[h.jsx("p",{className:"text-slate-400",children:"Combat Score"}),h.jsx("p",{className:"text-3xl font-bold text-green-400",children:n.points})]}),h.jsxs("p",{className:"text-sm text-slate-500",children:["Joined: ",n.joinDate]})]})}),h.jsx("div",{className:"lg:col-span-2",children:h.jsxs("div",{className:"achievements-card p-8 rounded-2xl",children:[h.jsx("h2",{className:"text-2xl font-bold text-white mb-6",children:"Achievements"}),h.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-6",children:e.map((t,r)=>h.jsxs("div",{className:`achievement ${t.earned?"earned":""} text-center p-4 rounded-lg`,children:[h.jsx("div",{className:"achievement-icon w-20 h-20 text-4xl rounded-full mx-auto flex items-center justify-center mb-2",children:t.icon}),h.jsx("p",{className:"font-semibold text-white",children:t.name})]},r))})]})})]})]})},iz=()=>{const[n,e]=re.useState(!0),t=({checked:r,onChange:i})=>h.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[h.jsx("input",{type:"checkbox",checked:r,onChange:i,className:"sr-only peer"}),h.jsx("div",{className:"w-14 h-7 bg-slate-600 rounded-full peer peer-checked:after:translate-x-full after:content-[''] after:absolute after:top-1/2 after:-translate-y-1/2 after:left-[4px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]});return h.jsxs("div",{children:[h.jsxs("div",{className:"dashboard-header mb-8",children:[h.jsx("h1",{className:"dashboard-title text-[3rem] font-extrabold mb-2.5",children:"Settings"}),h.jsx("p",{className:"dashboard-subtitle text-lg text-[#94a3b8] font-medium",children:"Manage your account and preferences."})]}),h.jsxs("div",{className:"space-y-8",children:[h.jsxs("div",{className:"settings-section rounded-2xl p-8",children:[h.jsx("h2",{className:"text-2xl font-bold text-white mb-6",children:"Notifications"}),h.jsx("div",{className:"space-y-4",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("span",{className:"text-lg text-slate-300",children:"Email Notifications"}),h.jsx(t,{checked:n,onChange:()=>e(!n)})]})})]}),h.jsxs("div",{className:"settings-section rounded-2xl p-8",children:[h.jsx("h2",{className:"text-2xl font-bold text-white mb-6",children:"Account"}),h.jsxs("div",{className:"space-y-4",children:[h.jsx("button",{className:"w-full text-left p-4 bg-slate-700 hover:bg-slate-600 rounded-lg",children:"Change Password"}),h.jsx("button",{className:"w-full text-left p-4 bg-red-800 hover:bg-red-700 rounded-lg text-red-100 font-bold",children:"Delete Account"})]})]})]})]})},oz=()=>{const[n,e]=re.useState("dashboard"),t=i=>{if(i==="logout"){console.log("Logging out..."),window.location.href="/";return}e(i)},r=()=>{switch(n){case"dashboard":return h.jsx(l_,{});case"missions":return h.jsx(tz,{});case"leaderboard":return h.jsx(nz,{});case"profile":return h.jsx(rz,{});case"settings":return h.jsx(iz,{});default:return h.jsx(l_,{})}};return h.jsxs(h.Fragment,{children:[h.jsx("style",{children:`
                /* --- Global Styles --- */
                body {
                    font-family: 'Segoe UI', sans-serif;
                    background: #0a0a0a;
                    background-image:
                        radial-gradient(circle at 20% 50%, rgba(34, 197, 94, 0.1) 0%, transparent 40%),
                        radial-gradient(circle at 80% 20%, rgba(59, 130, 246, 0.1) 0%, transparent 40%),
                        radial-gradient(circle at 40% 80%, rgba(168, 85, 247, 0.1) 0%, transparent 40%);
                    color: #ffffff;
                }
                .main-content { margin-left: 280px; padding: 20px; min-height: 100vh; }
                .dashboard-title {
                    background: linear-gradient(45deg, #3b82f6, #22c55e, #a855f7);
                    -webkit-background-clip: text; -webkit-text-fill-color: transparent;
                }

                /* --- Sidebar Styles (from newSidebar.jsx) --- */
                .sidebar { position: fixed; top: 0; left: 0; height: 100vh; width: 280px; background: linear-gradient(180deg, #1e293b, #0f172a); border-right: 2px solid #334155; padding: 2rem 1.5rem; display: flex; flex-direction: column; z-index: 1000; }
                .sidebar-header { display: flex; align-items: center; margin-bottom: 3rem; }
                .sidebar-logo { font-size: 2rem; margin-right: 1rem; }
                .sidebar-header h2 { font-size: 1.5rem; font-weight: 800; color: #e2e8f0; }
                .nav-item { display: flex; align-items: center; padding: 1rem; border-radius: 0.75rem; margin-bottom: 1rem; cursor: pointer; font-weight: 600; color: #94a3b8; position: relative; border-left: 4px solid transparent; transition: all 0.3s ease-in-out; }
                .nav-item:hover { background-color: rgba(71, 85, 105, 0.2); color: #e2e8f0; }
                
                /* --- NEW Active Sidebar Item Style --- */
                .nav-item.active {
                    background: linear-gradient(90deg, rgba(59, 130, 246, 0.2), rgba(30, 64, 175, 0.1));
                    color: #ffffff;
                    font-weight: 700;
                    border-left: 4px solid #3b82f6;
                    box-shadow: 0 0 20px rgba(59, 130, 246, 0.2);
                }
                .nav-item.active .nav-icon {
                    transform: scale(1.1);
                    color: #60a5fa;
                }

                .nav-icon { font-size: 1.5rem; margin-right: 1.5rem; transition: all 0.3s ease-in-out; }
                .logout-item { margin-top: auto; }

                /* --- DashboardView Styles --- */
                .notification-banner { border: 1px solid #60a5fa; }
                .stat-card { background: linear-gradient(135deg, #1e293b, #334155); border: 2px solid #374151; padding: 20px; border-radius: 20px; text-align: center; }
                .stat-card.new-user { opacity: 0.7; }
                .stat-card.welcome { background: linear-gradient(135deg, #22c55e, #16a34a); border-color: #34d399; opacity: 1; }
                .stat-icon { font-size: 1.8rem; margin: 0 auto 10px; width: 50px; height: 50px; border-radius: 12px; display:flex; align-items:center; justify-content:center; }
                .stat-icon.inactive { background: linear-gradient(135deg, #64748b, #475569); }
                .stat-icon.welcome { background: linear-gradient(135deg, #fbbf24, #f59e0b); }
                .stat-value { font-size: 2.5rem; font-weight: bold; }
                .stat-value.zero { color: #94a3b8; }
                .stat-value.welcome { color: #fbbf24; }
                .stat-label { font-size: 0.9rem; color: #94a3b8; }
                .stat-card.welcome .stat-label { color: white; }
                .chart-section { background: linear-gradient(135deg, #1e293b, #334155); border: 2px solid #374151; }
                .welcome-popup { background: linear-gradient(135deg, #22c55e, #16a34a); border: 2px solid #34d399; }

                /* --- MissionsView Styles --- */
                .mission-card { background: linear-gradient(135deg, #1e293b, #334155); border: 2px solid #374151; transition: all 0.3s ease; }
                .mission-card:hover { transform: translateY(-5px); box-shadow: 0 10px 30px rgba(0,0,0,0.5); border-color: #4f46e5; }
                .join-btn { background: linear-gradient(90deg, #22c55e, #16a34a); transition: all 0.3s ease; }
                .join-btn:hover { transform: scale(1.05); }
                .completed-card { background: linear-gradient(135deg, #374151, #475569); opacity: 0.8; }
                
                /* --- LeaderboardView Styles --- */
                .leaderboard-table { background: linear-gradient(135deg, #1e293b, #334155); border: 2px solid #374151; }
                .table-row:not(:last-child) { border-bottom: 1px solid #374151; }
                .table-row.current-user { background: linear-gradient(90deg, #3b82f6, #1d4ed8); border: 2px solid #60a5fa; transform: scale(1.02); }
                .rank { font-size: 1.5rem; font-weight: bold; color: #fbbf24; }
                
                /* --- Profile & Settings Styles --- */
                .profile-card, .achievements-card, .settings-section { background: linear-gradient(135deg, #1e293b, #334155); border: 2px solid #374151; }
                .achievement { filter: grayscale(100%); opacity: 0.5; }
                .achievement.earned { filter: none; opacity: 1; }
                .achievement-icon { background-color: #334155; }
                .achievement.earned .achievement-icon { background: linear-gradient(135deg, #fbbf24, #f59e0b); }
                
                /* --- Responsive Styles --- */
                @media (max-width: 768px) {
                    .sidebar { width: 80px; }
                    .sidebar-header h2, .nav-text { display: none; }
                    .main-content { margin-left: 80px; }
                    .dashboard-title { font-size: 2.2rem; }
                }
                `}),h.jsx(ez,{activeNavItem:n,handleNavItemClick:t}),h.jsx("div",{className:"main-content",children:r()})]})},sz=()=>{const[n,e]=re.useState("home"),[t,r]=re.useState(null),[i,o]=re.useState(!1),s=(l,u=null)=>{e(l),r(u),o(!1)},a=()=>{switch(console.log("Rendering page:",n),n){case"home":return h.jsx(B1,{navigateTo:s,sectionToScrollTo:t});case"login":return h.jsx(sA,{navigateTo:s});case"signup":return h.jsx(AO,{navigateTo:s});case"adminDashboard":return h.jsx(Q7,{navigateTo:s});case"orgdashboard":return h.jsx(TO,{navigateTo:s});case"events":return h.jsx(RC,{navigateTo:s});case"voldashboard":return h.jsx(h7,{navigateTo:s});case"newvoldashboard":return h.jsx(oz,{navigateTo:s});case"avatar-badges":return h.jsx(f7,{navigateTo:s,activeNavItem:n});case"eduhub":return h.jsx(p7,{navigateTo:s,activeNavItem:n});case"impactcam":return h.jsx(m7,{navigateTo:s,activeNavItem:n});case"cleanup-events":return h.jsx(x7,{navigateTo:s,activeNavItem:n});case"waste-classifier":return h.jsx(y7,{navigateTo:s,activeNavItem:n});default:return h.jsx(B1,{navigateTo:s,sectionToScrollTo:t})}};return h.jsxs("div",{className:"min-h-screen flex flex-col",children:[["home","about","articles"].includes(n)&&h.jsxs("nav",{className:"bg-sky-500 text-white shadow-lg sticky top-0 z-50",children:[h.jsxs("div",{className:"container mx-auto px-4 py-3 flex justify-between items-center",children:[h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),h.jsx("span",{className:"text-xl font-bold",children:"Beach Warriors"})]}),h.jsxs("div",{className:"hidden md:flex space-x-8",children:[h.jsx("button",{onClick:()=>s("home","home"),className:"hover:text-sky-100 transition",children:"Home"}),h.jsx("button",{onClick:()=>s("home","about-section"),className:"hover:text-sky-100 transition",children:"About"}),h.jsx("button",{onClick:()=>s("home","articles-section"),className:"hover:text-sky-100 transition",children:"Articles"})]}),h.jsxs("div",{className:"hidden md:flex items-center space-x-4",children:[h.jsx("button",{onClick:()=>s("login"),className:"hover:text-sky-100 transition",children:"Login"}),h.jsx("button",{onClick:()=>s("signup"),className:"bg-white text-sky-600 hover:bg-sky-100 px-4 py-2 rounded-full font-medium transition",children:"Sign Up"})]}),h.jsx("div",{className:"md:hidden",children:h.jsx("button",{id:"menu-toggle",className:"focus:outline-none",onClick:()=>o(!i),children:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h16"})})})})]}),h.jsxs("div",{id:"mobile-menu",className:`md:hidden bg-sky-600 pb-4 px-4 ${i?"":"hidden"}`,children:[h.jsx("button",{onClick:()=>s("home"),className:"block py-2 hover:text-sky-100 transition",children:"Home"}),h.jsx("button",{onClick:()=>s("home","about-section"),className:"block py-2 hover:text-sky-100 transition",children:"About"}),h.jsx("button",{onClick:()=>s("home","articles-section"),className:"block py-2 hover:text-sky-100 transition",children:"Articles"}),h.jsxs("div",{className:"border-t border-sky-500 my-2 pt-2",children:[h.jsx("button",{onClick:()=>s("login"),className:"block py-2 hover:text-sky-100 transition",children:"Login"}),h.jsx("button",{onClick:()=>s("signup"),className:"block py-2 hover:text-sky-100 transition font-medium",children:"Sign Up"})]})]})]}),h.jsx("main",{className:"flex-grow",children:a()}),h.jsx(VO,{})]})};HE.createRoot(document.getElementById("root")).render(h.jsx(u_.StrictMode,{children:h.jsx(sz,{})}))});export default az();
//# sourceMappingURL=index-DRwqfZDA.js.map
